function v1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var La=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function U2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function j3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var z2={exports:{}},Cd={},H2={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ec=Symbol.for("react.element"),P3=Symbol.for("react.portal"),M3=Symbol.for("react.fragment"),D3=Symbol.for("react.strict_mode"),L3=Symbol.for("react.profiler"),B3=Symbol.for("react.provider"),F3=Symbol.for("react.context"),V3=Symbol.for("react.forward_ref"),U3=Symbol.for("react.suspense"),z3=Symbol.for("react.memo"),H3=Symbol.for("react.lazy"),Hm=Symbol.iterator;function W3(t){return t===null||typeof t!="object"?null:(t=Hm&&t[Hm]||t["@@iterator"],typeof t=="function"?t:null)}var W2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$2=Object.assign,G2={};function pa(t,e,n){this.props=t,this.context=e,this.refs=G2,this.updater=n||W2}pa.prototype.isReactComponent={};pa.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};pa.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function X2(){}X2.prototype=pa.prototype;function w1(t,e,n){this.props=t,this.context=e,this.refs=G2,this.updater=n||W2}var b1=w1.prototype=new X2;b1.constructor=w1;$2(b1,pa.prototype);b1.isPureReactComponent=!0;var Wm=Array.isArray,K2=Object.prototype.hasOwnProperty,C1={current:null},q2={key:!0,ref:!0,__self:!0,__source:!0};function Y2(t,e,n){var r,i={},o=null,c=null;if(e!=null)for(r in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)K2.call(e,r)&&!q2.hasOwnProperty(r)&&(i[r]=e[r]);var p=arguments.length-2;if(p===1)i.children=n;else if(1<p){for(var h=Array(p),m=0;m<p;m++)h[m]=arguments[m+2];i.children=h}if(t&&t.defaultProps)for(r in p=t.defaultProps,p)i[r]===void 0&&(i[r]=p[r]);return{$$typeof:ec,type:t,key:o,ref:c,props:i,_owner:C1.current}}function $3(t,e){return{$$typeof:ec,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E1(t){return typeof t=="object"&&t!==null&&t.$$typeof===ec}function G3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $m=/\/+/g;function Th(t,e){return typeof t=="object"&&t!==null&&t.key!=null?G3(""+t.key):e.toString(36)}function ou(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var c=!1;if(t===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(t.$$typeof){case ec:case P3:c=!0}}if(c)return c=t,i=i(c),t=r===""?"."+Th(c,0):r,Wm(i)?(n="",t!=null&&(n=t.replace($m,"$&/")+"/"),ou(i,e,n,"",function(m){return m})):i!=null&&(E1(i)&&(i=$3(i,n+(!i.key||c&&c.key===i.key?"":(""+i.key).replace($m,"$&/")+"/")+t)),e.push(i)),1;if(c=0,r=r===""?".":r+":",Wm(t))for(var p=0;p<t.length;p++){o=t[p];var h=r+Th(o,p);c+=ou(o,e,n,h,i)}else if(h=W3(t),typeof h=="function")for(t=h.call(t),p=0;!(o=t.next()).done;)o=o.value,h=r+Th(o,p++),c+=ou(o,e,n,h,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Ec(t,e,n){if(t==null)return t;var r=[],i=0;return ou(t,r,"","",function(o){return e.call(n,o,i++)}),r}function X3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},au={transition:null},K3={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:au,ReactCurrentOwner:C1};function Z2(){throw Error("act(...) is not supported in production builds of React.")}We.Children={map:Ec,forEach:function(t,e,n){Ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ec(t,function(){e++}),e},toArray:function(t){return Ec(t,function(e){return e})||[]},only:function(t){if(!E1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};We.Component=pa;We.Fragment=M3;We.Profiler=L3;We.PureComponent=w1;We.StrictMode=D3;We.Suspense=U3;We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K3;We.act=Z2;We.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$2({},t.props),i=t.key,o=t.ref,c=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=C1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(h in e)K2.call(e,h)&&!q2.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&p!==void 0?p[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){p=Array(h);for(var m=0;m<h;m++)p[m]=arguments[m+2];r.children=p}return{$$typeof:ec,type:t.type,key:i,ref:o,props:r,_owner:c}};We.createContext=function(t){return t={$$typeof:F3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B3,_context:t},t.Consumer=t};We.createElement=Y2;We.createFactory=function(t){var e=Y2.bind(null,t);return e.type=t,e};We.createRef=function(){return{current:null}};We.forwardRef=function(t){return{$$typeof:V3,render:t}};We.isValidElement=E1;We.lazy=function(t){return{$$typeof:H3,_payload:{_status:-1,_result:t},_init:X3}};We.memo=function(t,e){return{$$typeof:z3,type:t,compare:e===void 0?null:e}};We.startTransition=function(t){var e=au.transition;au.transition={};try{t()}finally{au.transition=e}};We.unstable_act=Z2;We.useCallback=function(t,e){return Un.current.useCallback(t,e)};We.useContext=function(t){return Un.current.useContext(t)};We.useDebugValue=function(){};We.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};We.useEffect=function(t,e){return Un.current.useEffect(t,e)};We.useId=function(){return Un.current.useId()};We.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};We.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};We.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};We.useMemo=function(t,e){return Un.current.useMemo(t,e)};We.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};We.useRef=function(t){return Un.current.useRef(t)};We.useState=function(t){return Un.current.useState(t)};We.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};We.useTransition=function(){return Un.current.useTransition()};We.version="18.3.1";H2.exports=We;var O=H2.exports;const Xt=U2(O),Of=v1({__proto__:null,default:Xt},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q3=O,Y3=Symbol.for("react.element"),Z3=Symbol.for("react.fragment"),Q3=Object.prototype.hasOwnProperty,J3=q3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,e_={key:!0,ref:!0,__self:!0,__source:!0};function Q2(t,e,n){var r,i={},o=null,c=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(r in e)Q3.call(e,r)&&!e_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Y3,type:t,key:o,ref:c,props:i,_owner:J3.current}}Cd.Fragment=Z3;Cd.jsx=Q2;Cd.jsxs=Q2;z2.exports=Cd;var f=z2.exports,J2={exports:{}},xr={},ev={exports:{}},tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(J,ee){var ce=J.length;J.push(ee);e:for(;0<ce;){var Me=ce-1>>>1,ve=J[Me];if(0<i(ve,ee))J[Me]=ee,J[ce]=ve,ce=Me;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var ee=J[0],ce=J.pop();if(ce!==ee){J[0]=ce;e:for(var Me=0,ve=J.length,Ke=ve>>>1;Me<Ke;){var Be=2*(Me+1)-1,ft=J[Be],pe=Be+1,Ct=J[pe];if(0>i(ft,ce))pe<ve&&0>i(Ct,ft)?(J[Me]=Ct,J[pe]=ce,Me=pe):(J[Me]=ft,J[Be]=ce,Me=Be);else if(pe<ve&&0>i(Ct,ce))J[Me]=Ct,J[pe]=ce,Me=pe;else break e}}return ee}function i(J,ee){var ce=J.sortIndex-ee.sortIndex;return ce!==0?ce:J.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,p=c.now();t.unstable_now=function(){return c.now()-p}}var h=[],m=[],y=1,v=null,C=3,E=!1,_=!1,T=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(J){for(var ee=n(m);ee!==null;){if(ee.callback===null)r(m);else if(ee.startTime<=J)r(m),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=n(m)}}function M(J){if(T=!1,N(J),!_)if(n(h)!==null)_=!0,q(F);else{var ee=n(m);ee!==null&&Q(M,ee.startTime-J)}}function F(J,ee){_=!1,T&&(T=!1,S(z),z=-1),E=!0;var ce=C;try{for(N(ee),v=n(h);v!==null&&(!(v.expirationTime>ee)||J&&!he());){var Me=v.callback;if(typeof Me=="function"){v.callback=null,C=v.priorityLevel;var ve=Me(v.expirationTime<=ee);ee=t.unstable_now(),typeof ve=="function"?v.callback=ve:v===n(h)&&r(h),N(ee)}else r(h);v=n(h)}if(v!==null)var Ke=!0;else{var Be=n(m);Be!==null&&Q(M,Be.startTime-ee),Ke=!1}return Ke}finally{v=null,C=ce,E=!1}}var V=!1,B=null,z=-1,H=5,se=-1;function he(){return!(t.unstable_now()-se<H)}function te(){if(B!==null){var J=t.unstable_now();se=J;var ee=!0;try{ee=B(!0,J)}finally{ee?de():(V=!1,B=null)}}else V=!1}var de;if(typeof I=="function")de=function(){I(te)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,$=ne.port2;ne.port1.onmessage=te,de=function(){$.postMessage(null)}}else de=function(){k(te,0)};function q(J){B=J,V||(V=!0,de())}function Q(J,ee){z=k(function(){J(t.unstable_now())},ee)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){_||E||(_=!0,q(F))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(J){switch(C){case 1:case 2:case 3:var ee=3;break;default:ee=C}var ce=C;C=ee;try{return J()}finally{C=ce}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,ee){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ce=C;C=J;try{return ee()}finally{C=ce}},t.unstable_scheduleCallback=function(J,ee,ce){var Me=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Me+ce:Me):ce=Me,J){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=ce+ve,J={id:y++,callback:ee,priorityLevel:J,startTime:ce,expirationTime:ve,sortIndex:-1},ce>Me?(J.sortIndex=ce,e(m,J),n(h)===null&&J===n(m)&&(T?(S(z),z=-1):T=!0,Q(M,ce-Me))):(J.sortIndex=ve,e(h,J),_||E||(_=!0,q(F))),J},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(J){var ee=C;return function(){var ce=C;C=ee;try{return J.apply(this,arguments)}finally{C=ce}}}})(tv);ev.exports=tv;var t_=ev.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n_=O,mr=t_;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nv=new Set,bl={};function eo(t,e){ta(t,e),ta(t+"Capture",e)}function ta(t,e){for(bl[t]=e,t=0;t<e.length;t++)nv.add(e[t])}var Ss=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rf=Object.prototype.hasOwnProperty,r_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gm={},Xm={};function s_(t){return Rf.call(Xm,t)?!0:Rf.call(Gm,t)?!1:r_.test(t)?Xm[t]=!0:(Gm[t]=!0,!1)}function i_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function o_(t,e,n,r){if(e===null||typeof e>"u"||i_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zn(t,e,n,r,i,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var En={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){En[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];En[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){En[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){En[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){En[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){En[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){En[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){En[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){En[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var S1=/[\-:]([a-z])/g;function _1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S1,_1);En[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S1,_1);En[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S1,_1);En[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){En[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});En.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){En[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function A1(t,e,n,r){var i=En.hasOwnProperty(e)?En[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(o_(e,n,i,r)&&(n=null),r||i===null?s_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Os=n_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),No=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),N1=Symbol.for("react.strict_mode"),jf=Symbol.for("react.profiler"),rv=Symbol.for("react.provider"),sv=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),Pf=Symbol.for("react.suspense"),Mf=Symbol.for("react.suspense_list"),I1=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),iv=Symbol.for("react.offscreen"),Km=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,Ih;function Ya(t){if(Ih===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ih=e&&e[1]||""}return`
`+Ih+t}var kh=!1;function Oh(t,e){if(!t||kh)return"";kh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var r=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){r=m}t.call(e.prototype)}else{try{throw Error()}catch(m){r=m}t()}}catch(m){if(m&&r&&typeof m.stack=="string"){for(var i=m.stack.split(`
`),o=r.stack.split(`
`),c=i.length-1,p=o.length-1;1<=c&&0<=p&&i[c]!==o[p];)p--;for(;1<=c&&0<=p;c--,p--)if(i[c]!==o[p]){if(c!==1||p!==1)do if(c--,p--,0>p||i[c]!==o[p]){var h=`
`+i[c].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=c&&0<=p);break}}}finally{kh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ya(t):""}function a_(t){switch(t.tag){case 5:return Ya(t.type);case 16:return Ya("Lazy");case 13:return Ya("Suspense");case 19:return Ya("SuspenseList");case 0:case 2:case 15:return t=Oh(t.type,!1),t;case 11:return t=Oh(t.type.render,!1),t;case 1:return t=Oh(t.type,!0),t;default:return""}}function Df(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case To:return"Fragment";case No:return"Portal";case jf:return"Profiler";case N1:return"StrictMode";case Pf:return"Suspense";case Mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case sv:return(t.displayName||"Context")+".Consumer";case rv:return(t._context.displayName||"Context")+".Provider";case T1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I1:return e=t.displayName||null,e!==null?e:Df(t.type)||"Memo";case $s:e=t._payload,t=t._init;try{return Df(t(e))}catch{}}return null}function l_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Df(e);case 8:return e===N1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function li(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ov(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function c_(t){var e=ov(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(c){r=""+c,o.call(this,c)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _c(t){t._valueTracker||(t._valueTracker=c_(t))}function av(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ov(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _u(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Lf(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=li(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lv(t,e){e=e.checked,e!=null&&A1(t,"checked",e,!1)}function Bf(t,e){lv(t,e);var n=li(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ff(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ff(t,e.type,li(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ym(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ff(t,e,n){(e!=="number"||_u(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Za=Array.isArray;function Xo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+li(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Zm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Za(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:li(n)}}function cv(t,e){var n=li(e.value),r=li(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Qm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function uv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?uv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ac,dv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Cl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var sl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},u_=["Webkit","ms","Moz","O"];Object.keys(sl).forEach(function(t){u_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sl[e]=sl[t]})});function hv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||sl.hasOwnProperty(t)&&sl[t]?(""+e).trim():e+"px"}function fv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=hv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var d_=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zf(t,e){if(e){if(d_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Hf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wf=null;function k1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $f=null,Ko=null,qo=null;function Jm(t){if(t=rc(t)){if(typeof $f!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Nd(e),$f(t.stateNode,t.type,e))}}function pv(t){Ko?qo?qo.push(t):qo=[t]:Ko=t}function mv(){if(Ko){var t=Ko,e=qo;if(qo=Ko=null,Jm(t),e)for(t=0;t<e.length;t++)Jm(e[t])}}function gv(t,e){return t(e)}function xv(){}var Rh=!1;function yv(t,e,n){if(Rh)return t(e,n);Rh=!0;try{return gv(t,e,n)}finally{Rh=!1,(Ko!==null||qo!==null)&&(xv(),mv())}}function El(t,e){var n=t.stateNode;if(n===null)return null;var r=Nd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Gf=!1;if(Ss)try{var Fa={};Object.defineProperty(Fa,"passive",{get:function(){Gf=!0}}),window.addEventListener("test",Fa,Fa),window.removeEventListener("test",Fa,Fa)}catch{Gf=!1}function h_(t,e,n,r,i,o,c,p,h){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(y){this.onError(y)}}var il=!1,Au=null,Nu=!1,Xf=null,f_={onError:function(t){il=!0,Au=t}};function p_(t,e,n,r,i,o,c,p,h){il=!1,Au=null,h_.apply(f_,arguments)}function m_(t,e,n,r,i,o,c,p,h){if(p_.apply(this,arguments),il){if(il){var m=Au;il=!1,Au=null}else throw Error(oe(198));Nu||(Nu=!0,Xf=m)}}function to(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function eg(t){if(to(t)!==t)throw Error(oe(188))}function g_(t){var e=t.alternate;if(!e){if(e=to(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return eg(i),t;if(o===r)return eg(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var c=!1,p=i.child;p;){if(p===n){c=!0,n=i,r=o;break}if(p===r){c=!0,r=i,n=o;break}p=p.sibling}if(!c){for(p=o.child;p;){if(p===n){c=!0,n=o,r=i;break}if(p===r){c=!0,r=o,n=i;break}p=p.sibling}if(!c)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function wv(t){return t=g_(t),t!==null?bv(t):null}function bv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=bv(t);if(e!==null)return e;t=t.sibling}return null}var Cv=mr.unstable_scheduleCallback,tg=mr.unstable_cancelCallback,x_=mr.unstable_shouldYield,y_=mr.unstable_requestPaint,Wt=mr.unstable_now,v_=mr.unstable_getCurrentPriorityLevel,O1=mr.unstable_ImmediatePriority,Ev=mr.unstable_UserBlockingPriority,Tu=mr.unstable_NormalPriority,w_=mr.unstable_LowPriority,Sv=mr.unstable_IdlePriority,Ed=null,as=null;function b_(t){if(as&&typeof as.onCommitFiberRoot=="function")try{as.onCommitFiberRoot(Ed,t,void 0,(t.current.flags&128)===128)}catch{}}var Wr=Math.clz32?Math.clz32:S_,C_=Math.log,E_=Math.LN2;function S_(t){return t>>>=0,t===0?32:31-(C_(t)/E_|0)|0}var Nc=64,Tc=4194304;function Qa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Iu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,c=n&268435455;if(c!==0){var p=c&~i;p!==0?r=Qa(p):(o&=c,o!==0&&(r=Qa(o)))}else c=n&~i,c!==0?r=Qa(c):o!==0&&(r=Qa(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Wr(e),i=1<<n,r|=t[n],e&=~i;return r}function __(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var c=31-Wr(o),p=1<<c,h=i[c];h===-1?(!(p&n)||p&r)&&(i[c]=__(p,e)):h<=e&&(t.expiredLanes|=p),o&=~p}}function Kf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _v(){var t=Nc;return Nc<<=1,!(Nc&4194240)&&(Nc=64),t}function jh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function tc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Wr(e),t[e]=n}function N_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Wr(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function R1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Wr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var it=0;function Av(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Nv,j1,Tv,Iv,kv,qf=!1,Ic=[],Js=null,ei=null,ti=null,Sl=new Map,_l=new Map,Xs=[],T_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ng(t,e){switch(t){case"focusin":case"focusout":Js=null;break;case"dragenter":case"dragleave":ei=null;break;case"mouseover":case"mouseout":ti=null;break;case"pointerover":case"pointerout":Sl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_l.delete(e.pointerId)}}function Va(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=rc(e),e!==null&&j1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function I_(t,e,n,r,i){switch(e){case"focusin":return Js=Va(Js,t,e,n,r,i),!0;case"dragenter":return ei=Va(ei,t,e,n,r,i),!0;case"mouseover":return ti=Va(ti,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Sl.set(o,Va(Sl.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_l.set(o,Va(_l.get(o)||null,t,e,n,r,i)),!0}return!1}function Ov(t){var e=Mi(t.target);if(e!==null){var n=to(e);if(n!==null){if(e=n.tag,e===13){if(e=vv(n),e!==null){t.blockedOn=e,kv(t.priority,function(){Tv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function lu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Wf=r,n.target.dispatchEvent(r),Wf=null}else return e=rc(n),e!==null&&j1(e),t.blockedOn=n,!1;e.shift()}return!0}function rg(t,e,n){lu(t)&&n.delete(e)}function k_(){qf=!1,Js!==null&&lu(Js)&&(Js=null),ei!==null&&lu(ei)&&(ei=null),ti!==null&&lu(ti)&&(ti=null),Sl.forEach(rg),_l.forEach(rg)}function Ua(t,e){t.blockedOn===e&&(t.blockedOn=null,qf||(qf=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,k_)))}function Al(t){function e(i){return Ua(i,t)}if(0<Ic.length){Ua(Ic[0],t);for(var n=1;n<Ic.length;n++){var r=Ic[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Js!==null&&Ua(Js,t),ei!==null&&Ua(ei,t),ti!==null&&Ua(ti,t),Sl.forEach(e),_l.forEach(e),n=0;n<Xs.length;n++)r=Xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)Ov(n),n.blockedOn===null&&Xs.shift()}var Yo=Os.ReactCurrentBatchConfig,ku=!0;function O_(t,e,n,r){var i=it,o=Yo.transition;Yo.transition=null;try{it=1,P1(t,e,n,r)}finally{it=i,Yo.transition=o}}function R_(t,e,n,r){var i=it,o=Yo.transition;Yo.transition=null;try{it=4,P1(t,e,n,r)}finally{it=i,Yo.transition=o}}function P1(t,e,n,r){if(ku){var i=Yf(t,e,n,r);if(i===null)Hh(t,e,r,Ou,n),ng(t,r);else if(I_(i,t,e,n,r))r.stopPropagation();else if(ng(t,r),e&4&&-1<T_.indexOf(t)){for(;i!==null;){var o=rc(i);if(o!==null&&Nv(o),o=Yf(t,e,n,r),o===null&&Hh(t,e,r,Ou,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Hh(t,e,r,null,n)}}var Ou=null;function Yf(t,e,n,r){if(Ou=null,t=k1(r),t=Mi(t),t!==null)if(e=to(t),e===null)t=null;else if(n=e.tag,n===13){if(t=vv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ou=t,null}function Rv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(v_()){case O1:return 1;case Ev:return 4;case Tu:case w_:return 16;case Sv:return 536870912;default:return 16}default:return 16}}var Ys=null,M1=null,cu=null;function jv(){if(cu)return cu;var t,e=M1,n=e.length,r,i="value"in Ys?Ys.value:Ys.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var c=n-t;for(r=1;r<=c&&e[n-r]===i[o-r];r++);return cu=i.slice(t,1<r?1-r:void 0)}function uu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function kc(){return!0}function sg(){return!1}function yr(t){function e(n,r,i,o,c){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(o):o[p]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?kc:sg,this.isPropagationStopped=sg,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=kc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=kc)},persist:function(){},isPersistent:kc}),e}var ma={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D1=yr(ma),nc=kt({},ma,{view:0,detail:0}),j_=yr(nc),Ph,Mh,za,Sd=kt({},nc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==za&&(za&&t.type==="mousemove"?(Ph=t.screenX-za.screenX,Mh=t.screenY-za.screenY):Mh=Ph=0,za=t),Ph)},movementY:function(t){return"movementY"in t?t.movementY:Mh}}),ig=yr(Sd),P_=kt({},Sd,{dataTransfer:0}),M_=yr(P_),D_=kt({},nc,{relatedTarget:0}),Dh=yr(D_),L_=kt({},ma,{animationName:0,elapsedTime:0,pseudoElement:0}),B_=yr(L_),F_=kt({},ma,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),V_=yr(F_),U_=kt({},ma,{data:0}),og=yr(U_),z_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},W_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=W_[t])?!!e[t]:!1}function L1(){return $_}var G_=kt({},nc,{key:function(t){if(t.key){var e=z_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=uu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?H_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L1,charCode:function(t){return t.type==="keypress"?uu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?uu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),X_=yr(G_),K_=kt({},Sd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ag=yr(K_),q_=kt({},nc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L1}),Y_=yr(q_),Z_=kt({},ma,{propertyName:0,elapsedTime:0,pseudoElement:0}),Q_=yr(Z_),J_=kt({},Sd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eA=yr(J_),tA=[9,13,27,32],B1=Ss&&"CompositionEvent"in window,ol=null;Ss&&"documentMode"in document&&(ol=document.documentMode);var nA=Ss&&"TextEvent"in window&&!ol,Pv=Ss&&(!B1||ol&&8<ol&&11>=ol),lg=" ",cg=!1;function Mv(t,e){switch(t){case"keyup":return tA.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Io=!1;function rA(t,e){switch(t){case"compositionend":return Dv(e);case"keypress":return e.which!==32?null:(cg=!0,lg);case"textInput":return t=e.data,t===lg&&cg?null:t;default:return null}}function sA(t,e){if(Io)return t==="compositionend"||!B1&&Mv(t,e)?(t=jv(),cu=M1=Ys=null,Io=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Pv&&e.locale!=="ko"?null:e.data;default:return null}}var iA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ug(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!iA[t.type]:e==="textarea"}function Lv(t,e,n,r){pv(r),e=Ru(e,"onChange"),0<e.length&&(n=new D1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var al=null,Nl=null;function oA(t){Kv(t,0)}function _d(t){var e=Ro(t);if(av(e))return t}function aA(t,e){if(t==="change")return e}var Bv=!1;if(Ss){var Lh;if(Ss){var Bh="oninput"in document;if(!Bh){var dg=document.createElement("div");dg.setAttribute("oninput","return;"),Bh=typeof dg.oninput=="function"}Lh=Bh}else Lh=!1;Bv=Lh&&(!document.documentMode||9<document.documentMode)}function hg(){al&&(al.detachEvent("onpropertychange",Fv),Nl=al=null)}function Fv(t){if(t.propertyName==="value"&&_d(Nl)){var e=[];Lv(e,Nl,t,k1(t)),yv(oA,e)}}function lA(t,e,n){t==="focusin"?(hg(),al=e,Nl=n,al.attachEvent("onpropertychange",Fv)):t==="focusout"&&hg()}function cA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _d(Nl)}function uA(t,e){if(t==="click")return _d(e)}function dA(t,e){if(t==="input"||t==="change")return _d(e)}function hA(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Xr=typeof Object.is=="function"?Object.is:hA;function Tl(t,e){if(Xr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Rf.call(e,i)||!Xr(t[i],e[i]))return!1}return!0}function fg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pg(t,e){var n=fg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=fg(n)}}function Vv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Vv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Uv(){for(var t=window,e=_u();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_u(t.document)}return e}function F1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function fA(t){var e=Uv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Vv(n.ownerDocument.documentElement,n)){if(r!==null&&F1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=pg(n,o);var c=pg(n,r);i&&c&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==c.node||t.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var pA=Ss&&"documentMode"in document&&11>=document.documentMode,ko=null,Zf=null,ll=null,Qf=!1;function mg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qf||ko==null||ko!==_u(r)||(r=ko,"selectionStart"in r&&F1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ll&&Tl(ll,r)||(ll=r,r=Ru(Zf,"onSelect"),0<r.length&&(e=new D1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ko)))}function Oc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Oo={animationend:Oc("Animation","AnimationEnd"),animationiteration:Oc("Animation","AnimationIteration"),animationstart:Oc("Animation","AnimationStart"),transitionend:Oc("Transition","TransitionEnd")},Fh={},zv={};Ss&&(zv=document.createElement("div").style,"AnimationEvent"in window||(delete Oo.animationend.animation,delete Oo.animationiteration.animation,delete Oo.animationstart.animation),"TransitionEvent"in window||delete Oo.transitionend.transition);function Ad(t){if(Fh[t])return Fh[t];if(!Oo[t])return t;var e=Oo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in zv)return Fh[t]=e[n];return t}var Hv=Ad("animationend"),Wv=Ad("animationiteration"),$v=Ad("animationstart"),Gv=Ad("transitionend"),Xv=new Map,gg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fi(t,e){Xv.set(t,e),eo(e,[t])}for(var Vh=0;Vh<gg.length;Vh++){var Uh=gg[Vh],mA=Uh.toLowerCase(),gA=Uh[0].toUpperCase()+Uh.slice(1);fi(mA,"on"+gA)}fi(Hv,"onAnimationEnd");fi(Wv,"onAnimationIteration");fi($v,"onAnimationStart");fi("dblclick","onDoubleClick");fi("focusin","onFocus");fi("focusout","onBlur");fi(Gv,"onTransitionEnd");ta("onMouseEnter",["mouseout","mouseover"]);ta("onMouseLeave",["mouseout","mouseover"]);ta("onPointerEnter",["pointerout","pointerover"]);ta("onPointerLeave",["pointerout","pointerover"]);eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));eo("onBeforeInput",["compositionend","keypress","textInput","paste"]);eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ja));function xg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,m_(r,e,void 0,t),t.currentTarget=null}function Kv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var c=r.length-1;0<=c;c--){var p=r[c],h=p.instance,m=p.currentTarget;if(p=p.listener,h!==o&&i.isPropagationStopped())break e;xg(i,p,m),o=h}else for(c=0;c<r.length;c++){if(p=r[c],h=p.instance,m=p.currentTarget,p=p.listener,h!==o&&i.isPropagationStopped())break e;xg(i,p,m),o=h}}}if(Nu)throw t=Xf,Nu=!1,Xf=null,t}function mt(t,e){var n=e[r0];n===void 0&&(n=e[r0]=new Set);var r=t+"__bubble";n.has(r)||(qv(e,t,2,!1),n.add(r))}function zh(t,e,n){var r=0;e&&(r|=4),qv(n,t,r,e)}var Rc="_reactListening"+Math.random().toString(36).slice(2);function Il(t){if(!t[Rc]){t[Rc]=!0,nv.forEach(function(n){n!=="selectionchange"&&(xA.has(n)||zh(n,!1,t),zh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rc]||(e[Rc]=!0,zh("selectionchange",!1,e))}}function qv(t,e,n,r){switch(Rv(e)){case 1:var i=O_;break;case 4:i=R_;break;default:i=P1}n=i.bind(null,e,n,t),i=void 0,!Gf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Hh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var p=r.stateNode.containerInfo;if(p===i||p.nodeType===8&&p.parentNode===i)break;if(c===4)for(c=r.return;c!==null;){var h=c.tag;if((h===3||h===4)&&(h=c.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;c=c.return}for(;p!==null;){if(c=Mi(p),c===null)return;if(h=c.tag,h===5||h===6){r=o=c;continue e}p=p.parentNode}}r=r.return}yv(function(){var m=o,y=k1(n),v=[];e:{var C=Xv.get(t);if(C!==void 0){var E=D1,_=t;switch(t){case"keypress":if(uu(n)===0)break e;case"keydown":case"keyup":E=X_;break;case"focusin":_="focus",E=Dh;break;case"focusout":_="blur",E=Dh;break;case"beforeblur":case"afterblur":E=Dh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=M_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Y_;break;case Hv:case Wv:case $v:E=B_;break;case Gv:E=Q_;break;case"scroll":E=j_;break;case"wheel":E=eA;break;case"copy":case"cut":case"paste":E=V_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=ag}var T=(e&4)!==0,k=!T&&t==="scroll",S=T?C!==null?C+"Capture":null:C;T=[];for(var I=m,N;I!==null;){N=I;var M=N.stateNode;if(N.tag===5&&M!==null&&(N=M,S!==null&&(M=El(I,S),M!=null&&T.push(kl(I,M,N)))),k)break;I=I.return}0<T.length&&(C=new E(C,_,null,n,y),v.push({event:C,listeners:T}))}}if(!(e&7)){e:{if(C=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",C&&n!==Wf&&(_=n.relatedTarget||n.fromElement)&&(Mi(_)||_[_s]))break e;if((E||C)&&(C=y.window===y?y:(C=y.ownerDocument)?C.defaultView||C.parentWindow:window,E?(_=n.relatedTarget||n.toElement,E=m,_=_?Mi(_):null,_!==null&&(k=to(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(E=null,_=m),E!==_)){if(T=ig,M="onMouseLeave",S="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(T=ag,M="onPointerLeave",S="onPointerEnter",I="pointer"),k=E==null?C:Ro(E),N=_==null?C:Ro(_),C=new T(M,I+"leave",E,n,y),C.target=k,C.relatedTarget=N,M=null,Mi(y)===m&&(T=new T(S,I+"enter",_,n,y),T.target=N,T.relatedTarget=k,M=T),k=M,E&&_)t:{for(T=E,S=_,I=0,N=T;N;N=go(N))I++;for(N=0,M=S;M;M=go(M))N++;for(;0<I-N;)T=go(T),I--;for(;0<N-I;)S=go(S),N--;for(;I--;){if(T===S||S!==null&&T===S.alternate)break t;T=go(T),S=go(S)}T=null}else T=null;E!==null&&yg(v,C,E,T,!1),_!==null&&k!==null&&yg(v,k,_,T,!0)}}e:{if(C=m?Ro(m):window,E=C.nodeName&&C.nodeName.toLowerCase(),E==="select"||E==="input"&&C.type==="file")var F=aA;else if(ug(C))if(Bv)F=dA;else{F=cA;var V=lA}else(E=C.nodeName)&&E.toLowerCase()==="input"&&(C.type==="checkbox"||C.type==="radio")&&(F=uA);if(F&&(F=F(t,m))){Lv(v,F,n,y);break e}V&&V(t,C,m),t==="focusout"&&(V=C._wrapperState)&&V.controlled&&C.type==="number"&&Ff(C,"number",C.value)}switch(V=m?Ro(m):window,t){case"focusin":(ug(V)||V.contentEditable==="true")&&(ko=V,Zf=m,ll=null);break;case"focusout":ll=Zf=ko=null;break;case"mousedown":Qf=!0;break;case"contextmenu":case"mouseup":case"dragend":Qf=!1,mg(v,n,y);break;case"selectionchange":if(pA)break;case"keydown":case"keyup":mg(v,n,y)}var B;if(B1)e:{switch(t){case"compositionstart":var z="onCompositionStart";break e;case"compositionend":z="onCompositionEnd";break e;case"compositionupdate":z="onCompositionUpdate";break e}z=void 0}else Io?Mv(t,n)&&(z="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(z="onCompositionStart");z&&(Pv&&n.locale!=="ko"&&(Io||z!=="onCompositionStart"?z==="onCompositionEnd"&&Io&&(B=jv()):(Ys=y,M1="value"in Ys?Ys.value:Ys.textContent,Io=!0)),V=Ru(m,z),0<V.length&&(z=new og(z,t,null,n,y),v.push({event:z,listeners:V}),B?z.data=B:(B=Dv(n),B!==null&&(z.data=B)))),(B=nA?rA(t,n):sA(t,n))&&(m=Ru(m,"onBeforeInput"),0<m.length&&(y=new og("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:m}),y.data=B))}Kv(v,e)})}function kl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ru(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=El(t,n),o!=null&&r.unshift(kl(t,o,i)),o=El(t,e),o!=null&&r.push(kl(t,o,i))),t=t.return}return r}function go(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function yg(t,e,n,r,i){for(var o=e._reactName,c=[];n!==null&&n!==r;){var p=n,h=p.alternate,m=p.stateNode;if(h!==null&&h===r)break;p.tag===5&&m!==null&&(p=m,i?(h=El(n,o),h!=null&&c.unshift(kl(n,h,p))):i||(h=El(n,o),h!=null&&c.push(kl(n,h,p)))),n=n.return}c.length!==0&&t.push({event:e,listeners:c})}var yA=/\r\n?/g,vA=/\u0000|\uFFFD/g;function vg(t){return(typeof t=="string"?t:""+t).replace(yA,`
`).replace(vA,"")}function jc(t,e,n){if(e=vg(e),vg(t)!==e&&n)throw Error(oe(425))}function ju(){}var Jf=null,e0=null;function t0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var n0=typeof setTimeout=="function"?setTimeout:void 0,wA=typeof clearTimeout=="function"?clearTimeout:void 0,wg=typeof Promise=="function"?Promise:void 0,bA=typeof queueMicrotask=="function"?queueMicrotask:typeof wg<"u"?function(t){return wg.resolve(null).then(t).catch(CA)}:n0;function CA(t){setTimeout(function(){throw t})}function Wh(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Al(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Al(e)}function ni(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ga=Math.random().toString(36).slice(2),os="__reactFiber$"+ga,Ol="__reactProps$"+ga,_s="__reactContainer$"+ga,r0="__reactEvents$"+ga,EA="__reactListeners$"+ga,SA="__reactHandles$"+ga;function Mi(t){var e=t[os];if(e)return e;for(var n=t.parentNode;n;){if(e=n[_s]||n[os]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bg(t);t!==null;){if(n=t[os])return n;t=bg(t)}return e}t=n,n=t.parentNode}return null}function rc(t){return t=t[os]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ro(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Nd(t){return t[Ol]||null}var s0=[],jo=-1;function pi(t){return{current:t}}function xt(t){0>jo||(t.current=s0[jo],s0[jo]=null,jo--)}function ht(t,e){jo++,s0[jo]=t.current,t.current=e}var ci={},Rn=pi(ci),Qn=pi(!1),$i=ci;function na(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Jn(t){return t=t.childContextTypes,t!=null}function Pu(){xt(Qn),xt(Rn)}function Cg(t,e,n){if(Rn.current!==ci)throw Error(oe(168));ht(Rn,e),ht(Qn,n)}function Yv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,l_(t)||"Unknown",i));return kt({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,$i=Rn.current,ht(Rn,t),ht(Qn,Qn.current),!0}function Eg(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=Yv(t,e,$i),r.__reactInternalMemoizedMergedChildContext=t,xt(Qn),xt(Rn),ht(Rn,t)):xt(Qn),ht(Qn,n)}var ys=null,Td=!1,$h=!1;function Zv(t){ys===null?ys=[t]:ys.push(t)}function _A(t){Td=!0,Zv(t)}function mi(){if(!$h&&ys!==null){$h=!0;var t=0,e=it;try{var n=ys;for(it=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ys=null,Td=!1}catch(i){throw ys!==null&&(ys=ys.slice(t+1)),Cv(O1,mi),i}finally{it=e,$h=!1}}return null}var Po=[],Mo=0,Du=null,Lu=0,Ar=[],Nr=0,Gi=null,vs=1,ws="";function Ni(t,e){Po[Mo++]=Lu,Po[Mo++]=Du,Du=t,Lu=e}function Qv(t,e,n){Ar[Nr++]=vs,Ar[Nr++]=ws,Ar[Nr++]=Gi,Gi=t;var r=vs;t=ws;var i=32-Wr(r)-1;r&=~(1<<i),n+=1;var o=32-Wr(e)+i;if(30<o){var c=i-i%5;o=(r&(1<<c)-1).toString(32),r>>=c,i-=c,vs=1<<32-Wr(e)+i|n<<i|r,ws=o+t}else vs=1<<o|n<<i|r,ws=t}function V1(t){t.return!==null&&(Ni(t,1),Qv(t,1,0))}function U1(t){for(;t===Du;)Du=Po[--Mo],Po[Mo]=null,Lu=Po[--Mo],Po[Mo]=null;for(;t===Gi;)Gi=Ar[--Nr],Ar[Nr]=null,ws=Ar[--Nr],Ar[Nr]=null,vs=Ar[--Nr],Ar[Nr]=null}var hr=null,dr=null,bt=!1,Ur=null;function Jv(t,e){var n=Tr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Sg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,dr=ni(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,dr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gi!==null?{id:vs,overflow:ws}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Tr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,dr=null,!0):!1;default:return!1}}function i0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function o0(t){if(bt){var e=dr;if(e){var n=e;if(!Sg(t,e)){if(i0(t))throw Error(oe(418));e=ni(n.nextSibling);var r=hr;e&&Sg(t,e)?Jv(r,n):(t.flags=t.flags&-4097|2,bt=!1,hr=t)}}else{if(i0(t))throw Error(oe(418));t.flags=t.flags&-4097|2,bt=!1,hr=t}}}function _g(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function Pc(t){if(t!==hr)return!1;if(!bt)return _g(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!t0(t.type,t.memoizedProps)),e&&(e=dr)){if(i0(t))throw ew(),Error(oe(418));for(;e;)Jv(t,e),e=ni(e.nextSibling)}if(_g(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){dr=ni(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}dr=null}}else dr=hr?ni(t.stateNode.nextSibling):null;return!0}function ew(){for(var t=dr;t;)t=ni(t.nextSibling)}function ra(){dr=hr=null,bt=!1}function z1(t){Ur===null?Ur=[t]:Ur.push(t)}var AA=Os.ReactCurrentBatchConfig;function Ha(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var p=i.refs;c===null?delete p[o]:p[o]=c},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Mc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ag(t){var e=t._init;return e(t._payload)}function tw(t){function e(S,I){if(t){var N=S.deletions;N===null?(S.deletions=[I],S.flags|=16):N.push(I)}}function n(S,I){if(!t)return null;for(;I!==null;)e(S,I),I=I.sibling;return null}function r(S,I){for(S=new Map;I!==null;)I.key!==null?S.set(I.key,I):S.set(I.index,I),I=I.sibling;return S}function i(S,I){return S=oi(S,I),S.index=0,S.sibling=null,S}function o(S,I,N){return S.index=N,t?(N=S.alternate,N!==null?(N=N.index,N<I?(S.flags|=2,I):N):(S.flags|=2,I)):(S.flags|=1048576,I)}function c(S){return t&&S.alternate===null&&(S.flags|=2),S}function p(S,I,N,M){return I===null||I.tag!==6?(I=Qh(N,S.mode,M),I.return=S,I):(I=i(I,N),I.return=S,I)}function h(S,I,N,M){var F=N.type;return F===To?y(S,I,N.props.children,M,N.key):I!==null&&(I.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===$s&&Ag(F)===I.type)?(M=i(I,N.props),M.ref=Ha(S,I,N),M.return=S,M):(M=xu(N.type,N.key,N.props,null,S.mode,M),M.ref=Ha(S,I,N),M.return=S,M)}function m(S,I,N,M){return I===null||I.tag!==4||I.stateNode.containerInfo!==N.containerInfo||I.stateNode.implementation!==N.implementation?(I=Jh(N,S.mode,M),I.return=S,I):(I=i(I,N.children||[]),I.return=S,I)}function y(S,I,N,M,F){return I===null||I.tag!==7?(I=Hi(N,S.mode,M,F),I.return=S,I):(I=i(I,N),I.return=S,I)}function v(S,I,N){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Qh(""+I,S.mode,N),I.return=S,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Sc:return N=xu(I.type,I.key,I.props,null,S.mode,N),N.ref=Ha(S,null,I),N.return=S,N;case No:return I=Jh(I,S.mode,N),I.return=S,I;case $s:var M=I._init;return v(S,M(I._payload),N)}if(Za(I)||Ba(I))return I=Hi(I,S.mode,N,null),I.return=S,I;Mc(S,I)}return null}function C(S,I,N,M){var F=I!==null?I.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return F!==null?null:p(S,I,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Sc:return N.key===F?h(S,I,N,M):null;case No:return N.key===F?m(S,I,N,M):null;case $s:return F=N._init,C(S,I,F(N._payload),M)}if(Za(N)||Ba(N))return F!==null?null:y(S,I,N,M,null);Mc(S,N)}return null}function E(S,I,N,M,F){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(N)||null,p(I,S,""+M,F);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Sc:return S=S.get(M.key===null?N:M.key)||null,h(I,S,M,F);case No:return S=S.get(M.key===null?N:M.key)||null,m(I,S,M,F);case $s:var V=M._init;return E(S,I,N,V(M._payload),F)}if(Za(M)||Ba(M))return S=S.get(N)||null,y(I,S,M,F,null);Mc(I,M)}return null}function _(S,I,N,M){for(var F=null,V=null,B=I,z=I=0,H=null;B!==null&&z<N.length;z++){B.index>z?(H=B,B=null):H=B.sibling;var se=C(S,B,N[z],M);if(se===null){B===null&&(B=H);break}t&&B&&se.alternate===null&&e(S,B),I=o(se,I,z),V===null?F=se:V.sibling=se,V=se,B=H}if(z===N.length)return n(S,B),bt&&Ni(S,z),F;if(B===null){for(;z<N.length;z++)B=v(S,N[z],M),B!==null&&(I=o(B,I,z),V===null?F=B:V.sibling=B,V=B);return bt&&Ni(S,z),F}for(B=r(S,B);z<N.length;z++)H=E(B,S,z,N[z],M),H!==null&&(t&&H.alternate!==null&&B.delete(H.key===null?z:H.key),I=o(H,I,z),V===null?F=H:V.sibling=H,V=H);return t&&B.forEach(function(he){return e(S,he)}),bt&&Ni(S,z),F}function T(S,I,N,M){var F=Ba(N);if(typeof F!="function")throw Error(oe(150));if(N=F.call(N),N==null)throw Error(oe(151));for(var V=F=null,B=I,z=I=0,H=null,se=N.next();B!==null&&!se.done;z++,se=N.next()){B.index>z?(H=B,B=null):H=B.sibling;var he=C(S,B,se.value,M);if(he===null){B===null&&(B=H);break}t&&B&&he.alternate===null&&e(S,B),I=o(he,I,z),V===null?F=he:V.sibling=he,V=he,B=H}if(se.done)return n(S,B),bt&&Ni(S,z),F;if(B===null){for(;!se.done;z++,se=N.next())se=v(S,se.value,M),se!==null&&(I=o(se,I,z),V===null?F=se:V.sibling=se,V=se);return bt&&Ni(S,z),F}for(B=r(S,B);!se.done;z++,se=N.next())se=E(B,S,z,se.value,M),se!==null&&(t&&se.alternate!==null&&B.delete(se.key===null?z:se.key),I=o(se,I,z),V===null?F=se:V.sibling=se,V=se);return t&&B.forEach(function(te){return e(S,te)}),bt&&Ni(S,z),F}function k(S,I,N,M){if(typeof N=="object"&&N!==null&&N.type===To&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Sc:e:{for(var F=N.key,V=I;V!==null;){if(V.key===F){if(F=N.type,F===To){if(V.tag===7){n(S,V.sibling),I=i(V,N.props.children),I.return=S,S=I;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===$s&&Ag(F)===V.type){n(S,V.sibling),I=i(V,N.props),I.ref=Ha(S,V,N),I.return=S,S=I;break e}n(S,V);break}else e(S,V);V=V.sibling}N.type===To?(I=Hi(N.props.children,S.mode,M,N.key),I.return=S,S=I):(M=xu(N.type,N.key,N.props,null,S.mode,M),M.ref=Ha(S,I,N),M.return=S,S=M)}return c(S);case No:e:{for(V=N.key;I!==null;){if(I.key===V)if(I.tag===4&&I.stateNode.containerInfo===N.containerInfo&&I.stateNode.implementation===N.implementation){n(S,I.sibling),I=i(I,N.children||[]),I.return=S,S=I;break e}else{n(S,I);break}else e(S,I);I=I.sibling}I=Jh(N,S.mode,M),I.return=S,S=I}return c(S);case $s:return V=N._init,k(S,I,V(N._payload),M)}if(Za(N))return _(S,I,N,M);if(Ba(N))return T(S,I,N,M);Mc(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,I!==null&&I.tag===6?(n(S,I.sibling),I=i(I,N),I.return=S,S=I):(n(S,I),I=Qh(N,S.mode,M),I.return=S,S=I),c(S)):n(S,I)}return k}var sa=tw(!0),nw=tw(!1),Bu=pi(null),Fu=null,Do=null,H1=null;function W1(){H1=Do=Fu=null}function $1(t){var e=Bu.current;xt(Bu),t._currentValue=e}function a0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Zo(t,e){Fu=t,H1=Do=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Zn=!0),t.firstContext=null)}function kr(t){var e=t._currentValue;if(H1!==t)if(t={context:t,memoizedValue:e,next:null},Do===null){if(Fu===null)throw Error(oe(308));Do=t,Fu.dependencies={lanes:0,firstContext:t}}else Do=Do.next=t;return e}var Di=null;function G1(t){Di===null?Di=[t]:Di.push(t)}function rw(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,G1(e)):(n.next=i.next,i.next=n),e.interleaved=n,As(t,r)}function As(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Gs=!1;function X1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function bs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ri(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,As(t,n)}return i=r.interleaved,i===null?(e.next=e,G1(r)):(e.next=i.next,i.next=e),r.interleaved=e,As(t,n)}function du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R1(t,n)}}function Ng(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=c:o=o.next=c,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Vu(t,e,n,r){var i=t.updateQueue;Gs=!1;var o=i.firstBaseUpdate,c=i.lastBaseUpdate,p=i.shared.pending;if(p!==null){i.shared.pending=null;var h=p,m=h.next;h.next=null,c===null?o=m:c.next=m,c=h;var y=t.alternate;y!==null&&(y=y.updateQueue,p=y.lastBaseUpdate,p!==c&&(p===null?y.firstBaseUpdate=m:p.next=m,y.lastBaseUpdate=h))}if(o!==null){var v=i.baseState;c=0,y=m=h=null,p=o;do{var C=p.lane,E=p.eventTime;if((r&C)===C){y!==null&&(y=y.next={eventTime:E,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var _=t,T=p;switch(C=e,E=n,T.tag){case 1:if(_=T.payload,typeof _=="function"){v=_.call(E,v,C);break e}v=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=T.payload,C=typeof _=="function"?_.call(E,v,C):_,C==null)break e;v=kt({},v,C);break e;case 2:Gs=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,C=i.effects,C===null?i.effects=[p]:C.push(p))}else E={eventTime:E,lane:C,tag:p.tag,payload:p.payload,callback:p.callback,next:null},y===null?(m=y=E,h=v):y=y.next=E,c|=C;if(p=p.next,p===null){if(p=i.shared.pending,p===null)break;C=p,p=C.next,C.next=null,i.lastBaseUpdate=C,i.shared.pending=null}}while(!0);if(y===null&&(h=v),i.baseState=h,i.firstBaseUpdate=m,i.lastBaseUpdate=y,e=i.shared.interleaved,e!==null){i=e;do c|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ki|=c,t.lanes=c,t.memoizedState=v}}function Tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var sc={},ls=pi(sc),Rl=pi(sc),jl=pi(sc);function Li(t){if(t===sc)throw Error(oe(174));return t}function K1(t,e){switch(ht(jl,e),ht(Rl,t),ht(ls,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Uf(e,t)}xt(ls),ht(ls,e)}function ia(){xt(ls),xt(Rl),xt(jl)}function iw(t){Li(jl.current);var e=Li(ls.current),n=Uf(e,t.type);e!==n&&(ht(Rl,t),ht(ls,n))}function q1(t){Rl.current===t&&(xt(ls),xt(Rl))}var Nt=pi(0);function Uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gh=[];function Y1(){for(var t=0;t<Gh.length;t++)Gh[t]._workInProgressVersionPrimary=null;Gh.length=0}var hu=Os.ReactCurrentDispatcher,Xh=Os.ReactCurrentBatchConfig,Xi=0,It=null,sn=null,hn=null,zu=!1,cl=!1,Pl=0,NA=0;function An(){throw Error(oe(321))}function Z1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Xr(t[n],e[n]))return!1;return!0}function Q1(t,e,n,r,i,o){if(Xi=o,It=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,hu.current=t===null||t.memoizedState===null?OA:RA,t=n(r,i),cl){o=0;do{if(cl=!1,Pl=0,25<=o)throw Error(oe(301));o+=1,hn=sn=null,e.updateQueue=null,hu.current=jA,t=n(r,i)}while(cl)}if(hu.current=Hu,e=sn!==null&&sn.next!==null,Xi=0,hn=sn=It=null,zu=!1,e)throw Error(oe(300));return t}function J1(){var t=Pl!==0;return Pl=0,t}function rs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?It.memoizedState=hn=t:hn=hn.next=t,hn}function Or(){if(sn===null){var t=It.alternate;t=t!==null?t.memoizedState:null}else t=sn.next;var e=hn===null?It.memoizedState:hn.next;if(e!==null)hn=e,sn=t;else{if(t===null)throw Error(oe(310));sn=t,t={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},hn===null?It.memoizedState=hn=t:hn=hn.next=t}return hn}function Ml(t,e){return typeof e=="function"?e(t):e}function Kh(t){var e=Or(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=sn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var c=i.next;i.next=o.next,o.next=c}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var p=c=null,h=null,m=o;do{var y=m.lane;if((Xi&y)===y)h!==null&&(h=h.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),r=m.hasEagerState?m.eagerState:t(r,m.action);else{var v={lane:y,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};h===null?(p=h=v,c=r):h=h.next=v,It.lanes|=y,Ki|=y}m=m.next}while(m!==null&&m!==o);h===null?c=r:h.next=p,Xr(r,e.memoizedState)||(Zn=!0),e.memoizedState=r,e.baseState=c,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,It.lanes|=o,Ki|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qh(t){var e=Or(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var c=i=i.next;do o=t(o,c.action),c=c.next;while(c!==i);Xr(o,e.memoizedState)||(Zn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ow(){}function aw(t,e){var n=It,r=Or(),i=e(),o=!Xr(r.memoizedState,i);if(o&&(r.memoizedState=i,Zn=!0),r=r.queue,ep(uw.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||hn!==null&&hn.memoizedState.tag&1){if(n.flags|=2048,Dl(9,cw.bind(null,n,r,i,e),void 0,null),fn===null)throw Error(oe(349));Xi&30||lw(n,e,i)}return i}function lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function cw(t,e,n,r){e.value=n,e.getSnapshot=r,dw(e)&&hw(t)}function uw(t,e,n){return n(function(){dw(e)&&hw(t)})}function dw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Xr(t,n)}catch{return!0}}function hw(t){var e=As(t,1);e!==null&&$r(e,t,1,-1)}function Ig(t){var e=rs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ml,lastRenderedState:t},e.queue=t,t=t.dispatch=kA.bind(null,It,t),[e.memoizedState,t]}function Dl(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=It.updateQueue,e===null?(e={lastEffect:null,stores:null},It.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fw(){return Or().memoizedState}function fu(t,e,n,r){var i=rs();It.flags|=t,i.memoizedState=Dl(1|e,n,void 0,r===void 0?null:r)}function Id(t,e,n,r){var i=Or();r=r===void 0?null:r;var o=void 0;if(sn!==null){var c=sn.memoizedState;if(o=c.destroy,r!==null&&Z1(r,c.deps)){i.memoizedState=Dl(e,n,o,r);return}}It.flags|=t,i.memoizedState=Dl(1|e,n,o,r)}function kg(t,e){return fu(8390656,8,t,e)}function ep(t,e){return Id(2048,8,t,e)}function pw(t,e){return Id(4,2,t,e)}function mw(t,e){return Id(4,4,t,e)}function gw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function xw(t,e,n){return n=n!=null?n.concat([t]):null,Id(4,4,gw.bind(null,e,t),n)}function tp(){}function yw(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function vw(t,e){var n=Or();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Z1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ww(t,e,n){return Xi&21?(Xr(n,e)||(n=_v(),It.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Zn=!0),t.memoizedState=n)}function TA(t,e){var n=it;it=n!==0&&4>n?n:4,t(!0);var r=Xh.transition;Xh.transition={};try{t(!1),e()}finally{it=n,Xh.transition=r}}function bw(){return Or().memoizedState}function IA(t,e,n){var r=ii(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Cw(t))Ew(e,n);else if(n=rw(t,e,n,r),n!==null){var i=Vn();$r(n,t,r,i),Sw(n,e,r)}}function kA(t,e,n){var r=ii(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Cw(t))Ew(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,p=o(c,n);if(i.hasEagerState=!0,i.eagerState=p,Xr(p,c)){var h=e.interleaved;h===null?(i.next=i,G1(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=rw(t,e,i,r),n!==null&&(i=Vn(),$r(n,t,r,i),Sw(n,e,r))}}function Cw(t){var e=t.alternate;return t===It||e!==null&&e===It}function Ew(t,e){cl=zu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Sw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,R1(t,n)}}var Hu={readContext:kr,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useInsertionEffect:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useSyncExternalStore:An,useId:An,unstable_isNewReconciler:!1},OA={readContext:kr,useCallback:function(t,e){return rs().memoizedState=[t,e===void 0?null:e],t},useContext:kr,useEffect:kg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,fu(4194308,4,gw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return fu(4194308,4,t,e)},useInsertionEffect:function(t,e){return fu(4,2,t,e)},useMemo:function(t,e){var n=rs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=rs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IA.bind(null,It,t),[r.memoizedState,t]},useRef:function(t){var e=rs();return t={current:t},e.memoizedState=t},useState:Ig,useDebugValue:tp,useDeferredValue:function(t){return rs().memoizedState=t},useTransition:function(){var t=Ig(!1),e=t[0];return t=TA.bind(null,t[1]),rs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=It,i=rs();if(bt){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),fn===null)throw Error(oe(349));Xi&30||lw(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,kg(uw.bind(null,r,o,t),[t]),r.flags|=2048,Dl(9,cw.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=rs(),e=fn.identifierPrefix;if(bt){var n=ws,r=vs;n=(r&~(1<<32-Wr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NA++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},RA={readContext:kr,useCallback:yw,useContext:kr,useEffect:ep,useImperativeHandle:xw,useInsertionEffect:pw,useLayoutEffect:mw,useMemo:vw,useReducer:Kh,useRef:fw,useState:function(){return Kh(Ml)},useDebugValue:tp,useDeferredValue:function(t){var e=Or();return ww(e,sn.memoizedState,t)},useTransition:function(){var t=Kh(Ml)[0],e=Or().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:aw,useId:bw,unstable_isNewReconciler:!1},jA={readContext:kr,useCallback:yw,useContext:kr,useEffect:ep,useImperativeHandle:xw,useInsertionEffect:pw,useLayoutEffect:mw,useMemo:vw,useReducer:qh,useRef:fw,useState:function(){return qh(Ml)},useDebugValue:tp,useDeferredValue:function(t){var e=Or();return sn===null?e.memoizedState=t:ww(e,sn.memoizedState,t)},useTransition:function(){var t=qh(Ml)[0],e=Or().memoizedState;return[t,e]},useMutableSource:ow,useSyncExternalStore:aw,useId:bw,unstable_isNewReconciler:!1};function Lr(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function l0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var kd={isMounted:function(t){return(t=t._reactInternals)?to(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Vn(),i=ii(t),o=bs(r,i);o.payload=e,n!=null&&(o.callback=n),e=ri(t,o,i),e!==null&&($r(e,t,i,r),du(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Vn(),i=ii(t),o=bs(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ri(t,o,i),e!==null&&($r(e,t,i,r),du(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Vn(),r=ii(t),i=bs(n,r);i.tag=2,e!=null&&(i.callback=e),e=ri(t,i,r),e!==null&&($r(e,t,r,n),du(e,t,r))}};function Og(t,e,n,r,i,o,c){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,c):e.prototype&&e.prototype.isPureReactComponent?!Tl(n,r)||!Tl(i,o):!0}function _w(t,e,n){var r=!1,i=ci,o=e.contextType;return typeof o=="object"&&o!==null?o=kr(o):(i=Jn(e)?$i:Rn.current,r=e.contextTypes,o=(r=r!=null)?na(t,i):ci),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=kd,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Rg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&kd.enqueueReplaceState(e,e.state,null)}function c0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},X1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=kr(o):(o=Jn(e)?$i:Rn.current,i.context=na(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(l0(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&kd.enqueueReplaceState(i,i.state,null),Vu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function oa(t,e){try{var n="",r=e;do n+=a_(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Yh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function u0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var PA=typeof WeakMap=="function"?WeakMap:Map;function Aw(t,e,n){n=bs(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,w0=r),u0(t,e)},n}function Nw(t,e,n){n=bs(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){u0(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){u0(t,e),typeof r!="function"&&(si===null?si=new Set([this]):si.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),n}function jg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new PA;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=KA.bind(null,t,e,n),e.then(t,t))}function Pg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Mg(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=bs(-1,1),e.tag=2,ri(n,e,1))),n.lanes|=1),t)}var MA=Os.ReactCurrentOwner,Zn=!1;function Bn(t,e,n,r){e.child=t===null?nw(e,null,n,r):sa(e,t.child,n,r)}function Dg(t,e,n,r,i){n=n.render;var o=e.ref;return Zo(e,i),r=Q1(t,e,n,r,o,i),n=J1(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ns(t,e,i)):(bt&&n&&V1(e),e.flags|=1,Bn(t,e,r,i),e.child)}function Lg(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!cp(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Tw(t,e,o,r,i)):(t=xu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var c=o.memoizedProps;if(n=n.compare,n=n!==null?n:Tl,n(c,r)&&t.ref===e.ref)return Ns(t,e,i)}return e.flags|=1,t=oi(o,r),t.ref=e.ref,t.return=e,e.child=t}function Tw(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Tl(o,r)&&t.ref===e.ref)if(Zn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Zn=!0);else return e.lanes=t.lanes,Ns(t,e,i)}return d0(t,e,n,r,i)}function Iw(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(Bo,lr),lr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(Bo,lr),lr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ht(Bo,lr),lr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ht(Bo,lr),lr|=r;return Bn(t,e,i,n),e.child}function kw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function d0(t,e,n,r,i){var o=Jn(n)?$i:Rn.current;return o=na(e,o),Zo(e,i),n=Q1(t,e,n,r,o,i),r=J1(),t!==null&&!Zn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ns(t,e,i)):(bt&&r&&V1(e),e.flags|=1,Bn(t,e,n,i),e.child)}function Bg(t,e,n,r,i){if(Jn(n)){var o=!0;Mu(e)}else o=!1;if(Zo(e,i),e.stateNode===null)pu(t,e),_w(e,n,r),c0(e,n,r,i),r=!0;else if(t===null){var c=e.stateNode,p=e.memoizedProps;c.props=p;var h=c.context,m=n.contextType;typeof m=="object"&&m!==null?m=kr(m):(m=Jn(n)?$i:Rn.current,m=na(e,m));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function";v||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==r||h!==m)&&Rg(e,c,r,m),Gs=!1;var C=e.memoizedState;c.state=C,Vu(e,r,c,i),h=e.memoizedState,p!==r||C!==h||Qn.current||Gs?(typeof y=="function"&&(l0(e,n,y,r),h=e.memoizedState),(p=Gs||Og(e,n,p,r,C,h,m))?(v||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),c.props=r,c.state=h,c.context=m,r=p):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{c=e.stateNode,sw(t,e),p=e.memoizedProps,m=e.type===e.elementType?p:Lr(e.type,p),c.props=m,v=e.pendingProps,C=c.context,h=n.contextType,typeof h=="object"&&h!==null?h=kr(h):(h=Jn(n)?$i:Rn.current,h=na(e,h));var E=n.getDerivedStateFromProps;(y=typeof E=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(p!==v||C!==h)&&Rg(e,c,r,h),Gs=!1,C=e.memoizedState,c.state=C,Vu(e,r,c,i);var _=e.memoizedState;p!==v||C!==_||Qn.current||Gs?(typeof E=="function"&&(l0(e,n,E,r),_=e.memoizedState),(m=Gs||Og(e,n,m,r,C,_,h)||!1)?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,_,h),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,_,h)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||p===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),c.props=r,c.state=_,c.context=h,r=m):(typeof c.componentDidUpdate!="function"||p===t.memoizedProps&&C===t.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&C===t.memoizedState||(e.flags|=1024),r=!1)}return h0(t,e,n,r,o,i)}function h0(t,e,n,r,i,o){kw(t,e);var c=(e.flags&128)!==0;if(!r&&!c)return i&&Eg(e,n,!1),Ns(t,e,o);r=e.stateNode,MA.current=e;var p=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&c?(e.child=sa(e,t.child,null,o),e.child=sa(e,null,p,o)):Bn(t,e,p,o),e.memoizedState=r.state,i&&Eg(e,n,!0),e.child}function Ow(t){var e=t.stateNode;e.pendingContext?Cg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Cg(t,e.context,!1),K1(t,e.containerInfo)}function Fg(t,e,n,r,i){return ra(),z1(i),e.flags|=256,Bn(t,e,n,r),e.child}var f0={dehydrated:null,treeContext:null,retryLane:0};function p0(t){return{baseLanes:t,cachePool:null,transitions:null}}function Rw(t,e,n){var r=e.pendingProps,i=Nt.current,o=!1,c=(e.flags&128)!==0,p;if((p=c)||(p=t!==null&&t.memoizedState===null?!1:(i&2)!==0),p?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ht(Nt,i&1),t===null)return o0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=r.children,t=r.fallback,o?(r=e.mode,o=e.child,c={mode:"hidden",children:c},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=jd(c,r,0,null),t=Hi(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=p0(n),e.memoizedState=f0,t):np(e,c));if(i=t.memoizedState,i!==null&&(p=i.dehydrated,p!==null))return DA(t,e,c,r,p,i,n);if(o){o=r.fallback,c=e.mode,i=t.child,p=i.sibling;var h={mode:"hidden",children:r.children};return!(c&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=oi(i,h),r.subtreeFlags=i.subtreeFlags&14680064),p!==null?o=oi(p,o):(o=Hi(o,c,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,c=t.child.memoizedState,c=c===null?p0(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=t.childLanes&~n,e.memoizedState=f0,r}return o=t.child,t=o.sibling,r=oi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function np(t,e){return e=jd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Dc(t,e,n,r){return r!==null&&z1(r),sa(e,t.child,null,n),t=np(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function DA(t,e,n,r,i,o,c){if(n)return e.flags&256?(e.flags&=-257,r=Yh(Error(oe(422))),Dc(t,e,c,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=jd({mode:"visible",children:r.children},i,0,null),o=Hi(o,i,c,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&sa(e,t.child,null,c),e.child.memoizedState=p0(c),e.memoizedState=f0,o);if(!(e.mode&1))return Dc(t,e,c,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var p=r.dgst;return r=p,o=Error(oe(419)),r=Yh(o,r,void 0),Dc(t,e,c,r)}if(p=(c&t.childLanes)!==0,Zn||p){if(r=fn,r!==null){switch(c&-c){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|c)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,As(t,i),$r(r,t,i,-1))}return lp(),r=Yh(Error(oe(421))),Dc(t,e,c,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,dr=ni(i.nextSibling),hr=e,bt=!0,Ur=null,t!==null&&(Ar[Nr++]=vs,Ar[Nr++]=ws,Ar[Nr++]=Gi,vs=t.id,ws=t.overflow,Gi=e),e=np(e,r.children),e.flags|=4096,e)}function Vg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),a0(t.return,e,n)}function Zh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function jw(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Bn(t,e,r.children,n),r=Nt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Vg(t,n,e);else if(t.tag===19)Vg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ht(Nt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Uu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Uu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zh(e,!0,n,null,o);break;case"together":Zh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function pu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=oi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function LA(t,e,n){switch(e.tag){case 3:Ow(e),ra();break;case 5:iw(e);break;case 1:Jn(e.type)&&Mu(e);break;case 4:K1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ht(Bu,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ht(Nt,Nt.current&1),e.flags|=128,null):n&e.child.childLanes?Rw(t,e,n):(ht(Nt,Nt.current&1),t=Ns(t,e,n),t!==null?t.sibling:null);ht(Nt,Nt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return jw(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ht(Nt,Nt.current),r)break;return null;case 22:case 23:return e.lanes=0,Iw(t,e,n)}return Ns(t,e,n)}var Pw,m0,Mw,Dw;Pw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};m0=function(){};Mw=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Li(ls.current);var o=null;switch(n){case"input":i=Lf(t,i),r=Lf(t,r),o=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),o=[];break;case"textarea":i=Vf(t,i),r=Vf(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ju)}zf(n,r);var c;n=null;for(m in i)if(!r.hasOwnProperty(m)&&i.hasOwnProperty(m)&&i[m]!=null)if(m==="style"){var p=i[m];for(c in p)p.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(bl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in r){var h=r[m];if(p=i!=null?i[m]:void 0,r.hasOwnProperty(m)&&h!==p&&(h!=null||p!=null))if(m==="style")if(p){for(c in p)!p.hasOwnProperty(c)||h&&h.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in h)h.hasOwnProperty(c)&&p[c]!==h[c]&&(n||(n={}),n[c]=h[c])}else n||(o||(o=[]),o.push(m,n)),n=h;else m==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,p=p?p.__html:void 0,h!=null&&p!==h&&(o=o||[]).push(m,h)):m==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(m,""+h):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(bl.hasOwnProperty(m)?(h!=null&&m==="onScroll"&&mt("scroll",t),o||p===h||(o=[])):(o=o||[]).push(m,h))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Dw=function(t,e,n,r){n!==r&&(e.flags|=4)};function Wa(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function BA(t,e,n){var r=e.pendingProps;switch(U1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return Jn(e.type)&&Pu(),Nn(e),null;case 3:return r=e.stateNode,ia(),xt(Qn),xt(Rn),Y1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ur!==null&&(E0(Ur),Ur=null))),m0(t,e),Nn(e),null;case 5:q1(e);var i=Li(jl.current);if(n=e.type,t!==null&&e.stateNode!=null)Mw(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Nn(e),null}if(t=Li(ls.current),Pc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[os]=e,r[Ol]=o,t=(e.mode&1)!==0,n){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(i=0;i<Ja.length;i++)mt(Ja[i],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":qm(r,o),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},mt("invalid",r);break;case"textarea":Zm(r,o),mt("invalid",r)}zf(n,o),i=null;for(var c in o)if(o.hasOwnProperty(c)){var p=o[c];c==="children"?typeof p=="string"?r.textContent!==p&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,p,t),i=["children",p]):typeof p=="number"&&r.textContent!==""+p&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,p,t),i=["children",""+p]):bl.hasOwnProperty(c)&&p!=null&&c==="onScroll"&&mt("scroll",r)}switch(n){case"input":_c(r),Ym(r,o,!0);break;case"textarea":_c(r),Qm(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=ju)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{c=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=uv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=c.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),n==="select"&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[os]=e,t[Ol]=r,Pw(t,e,!1,!1),e.stateNode=t;e:{switch(c=Hf(n,r),n){case"dialog":mt("cancel",t),mt("close",t),i=r;break;case"iframe":case"object":case"embed":mt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ja.length;i++)mt(Ja[i],t);i=r;break;case"source":mt("error",t),i=r;break;case"img":case"image":case"link":mt("error",t),mt("load",t),i=r;break;case"details":mt("toggle",t),i=r;break;case"input":qm(t,r),i=Lf(t,r),mt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),mt("invalid",t);break;case"textarea":Zm(t,r),i=Vf(t,r),mt("invalid",t);break;default:i=r}zf(n,i),p=i;for(o in p)if(p.hasOwnProperty(o)){var h=p[o];o==="style"?fv(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&dv(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Cl(t,h):typeof h=="number"&&Cl(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(bl.hasOwnProperty(o)?h!=null&&o==="onScroll"&&mt("scroll",t):h!=null&&A1(t,o,h,c))}switch(n){case"input":_c(t),Ym(t,r,!1);break;case"textarea":_c(t),Qm(t);break;case"option":r.value!=null&&t.setAttribute("value",""+li(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Xo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Xo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)Dw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Li(jl.current),Li(ls.current),Pc(e)){if(r=e.stateNode,n=e.memoizedProps,r[os]=e,(o=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:jc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[os]=e,e.stateNode=r}return Nn(e),null;case 13:if(xt(Nt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&dr!==null&&e.mode&1&&!(e.flags&128))ew(),ra(),e.flags|=98560,o=!1;else if(o=Pc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[os]=e}else ra(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),o=!1}else Ur!==null&&(E0(Ur),Ur=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Nt.current&1?on===0&&(on=3):lp())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return ia(),m0(t,e),t===null&&Il(e.stateNode.containerInfo),Nn(e),null;case 10:return $1(e.type._context),Nn(e),null;case 17:return Jn(e.type)&&Pu(),Nn(e),null;case 19:if(xt(Nt),o=e.memoizedState,o===null)return Nn(e),null;if(r=(e.flags&128)!==0,c=o.rendering,c===null)if(r)Wa(o,!1);else{if(on!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(c=Uu(t),c!==null){for(e.flags|=128,Wa(o,!1),r=c.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,t=c.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ht(Nt,Nt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Wt()>aa&&(e.flags|=128,r=!0,Wa(o,!1),e.lanes=4194304)}else{if(!r)if(t=Uu(c),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Wa(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!bt)return Nn(e),null}else 2*Wt()-o.renderingStartTime>aa&&n!==1073741824&&(e.flags|=128,r=!0,Wa(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(n=o.last,n!==null?n.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Wt(),e.sibling=null,n=Nt.current,ht(Nt,r?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return ap(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?lr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function FA(t,e){switch(U1(e),e.tag){case 1:return Jn(e.type)&&Pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ia(),xt(Qn),xt(Rn),Y1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return q1(e),null;case 13:if(xt(Nt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));ra()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(Nt),null;case 4:return ia(),null;case 10:return $1(e.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var Lc=!1,kn=!1,VA=typeof WeakSet=="function"?WeakSet:Set,xe=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Bt(t,e,r)}else n.current=null}function g0(t,e,n){try{n()}catch(r){Bt(t,e,r)}}var Ug=!1;function UA(t,e){if(Jf=ku,t=Uv(),F1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var c=0,p=-1,h=-1,m=0,y=0,v=t,C=null;t:for(;;){for(var E;v!==n||i!==0&&v.nodeType!==3||(p=c+i),v!==o||r!==0&&v.nodeType!==3||(h=c+r),v.nodeType===3&&(c+=v.nodeValue.length),(E=v.firstChild)!==null;)C=v,v=E;for(;;){if(v===t)break t;if(C===n&&++m===i&&(p=c),C===o&&++y===r&&(h=c),(E=v.nextSibling)!==null)break;v=C,C=v.parentNode}v=E}n=p===-1||h===-1?null:{start:p,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(e0={focusedElem:t,selectionRange:n},ku=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,k=_.memoizedState,S=e.stateNode,I=S.getSnapshotBeforeUpdate(e.elementType===e.type?T:Lr(e.type,T),k);S.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(M){Bt(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return _=Ug,Ug=!1,_}function ul(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&g0(e,n,o)}i=i.next}while(i!==r)}}function Od(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function x0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Lw(t){var e=t.alternate;e!==null&&(t.alternate=null,Lw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[os],delete e[Ol],delete e[r0],delete e[EA],delete e[SA])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Bw(t){return t.tag===5||t.tag===3||t.tag===4}function zg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Bw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function y0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ju));else if(r!==4&&(t=t.child,t!==null))for(y0(t,e,n),t=t.sibling;t!==null;)y0(t,e,n),t=t.sibling}function v0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(v0(t,e,n),t=t.sibling;t!==null;)v0(t,e,n),t=t.sibling}var vn=null,Fr=!1;function Us(t,e,n){for(n=n.child;n!==null;)Fw(t,e,n),n=n.sibling}function Fw(t,e,n){if(as&&typeof as.onCommitFiberUnmount=="function")try{as.onCommitFiberUnmount(Ed,n)}catch{}switch(n.tag){case 5:kn||Lo(n,e);case 6:var r=vn,i=Fr;vn=null,Us(t,e,n),vn=r,Fr=i,vn!==null&&(Fr?(t=vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(Fr?(t=vn,n=n.stateNode,t.nodeType===8?Wh(t.parentNode,n):t.nodeType===1&&Wh(t,n),Al(t)):Wh(vn,n.stateNode));break;case 4:r=vn,i=Fr,vn=n.stateNode.containerInfo,Fr=!0,Us(t,e,n),vn=r,Fr=i;break;case 0:case 11:case 14:case 15:if(!kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&g0(n,e,c),i=i.next}while(i!==r)}Us(t,e,n);break;case 1:if(!kn&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(p){Bt(n,e,p)}Us(t,e,n);break;case 21:Us(t,e,n);break;case 22:n.mode&1?(kn=(r=kn)||n.memoizedState!==null,Us(t,e,n),kn=r):Us(t,e,n);break;default:Us(t,e,n)}}function Hg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VA),e.forEach(function(r){var i=YA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,c=e,p=c;e:for(;p!==null;){switch(p.tag){case 5:vn=p.stateNode,Fr=!1;break e;case 3:vn=p.stateNode.containerInfo,Fr=!0;break e;case 4:vn=p.stateNode.containerInfo,Fr=!0;break e}p=p.return}if(vn===null)throw Error(oe(160));Fw(o,c,i),vn=null,Fr=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(m){Bt(i,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Vw(e,t),e=e.sibling}function Vw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Pr(e,t),ts(t),r&4){try{ul(3,t,t.return),Od(3,t)}catch(T){Bt(t,t.return,T)}try{ul(5,t,t.return)}catch(T){Bt(t,t.return,T)}}break;case 1:Pr(e,t),ts(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Pr(e,t),ts(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var i=t.stateNode;try{Cl(i,"")}catch(T){Bt(t,t.return,T)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,c=n!==null?n.memoizedProps:o,p=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{p==="input"&&o.type==="radio"&&o.name!=null&&lv(i,o),Hf(p,c);var m=Hf(p,o);for(c=0;c<h.length;c+=2){var y=h[c],v=h[c+1];y==="style"?fv(i,v):y==="dangerouslySetInnerHTML"?dv(i,v):y==="children"?Cl(i,v):A1(i,y,v,m)}switch(p){case"input":Bf(i,o);break;case"textarea":cv(i,o);break;case"select":var C=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var E=o.value;E!=null?Xo(i,!!o.multiple,E,!1):C!==!!o.multiple&&(o.defaultValue!=null?Xo(i,!!o.multiple,o.defaultValue,!0):Xo(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ol]=o}catch(T){Bt(t,t.return,T)}}break;case 6:if(Pr(e,t),ts(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(T){Bt(t,t.return,T)}}break;case 3:if(Pr(e,t),ts(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Al(e.containerInfo)}catch(T){Bt(t,t.return,T)}break;case 4:Pr(e,t),ts(t);break;case 13:Pr(e,t),ts(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(ip=Wt())),r&4&&Hg(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(kn=(m=kn)||y,Pr(e,t),kn=m):Pr(e,t),ts(t),r&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!y&&t.mode&1)for(xe=t,y=t.child;y!==null;){for(v=xe=y;xe!==null;){switch(C=xe,E=C.child,C.tag){case 0:case 11:case 14:case 15:ul(4,C,C.return);break;case 1:Lo(C,C.return);var _=C.stateNode;if(typeof _.componentWillUnmount=="function"){r=C,n=C.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(T){Bt(r,n,T)}}break;case 5:Lo(C,C.return);break;case 22:if(C.memoizedState!==null){$g(v);continue}}E!==null?(E.return=C,xe=E):$g(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{i=v.stateNode,m?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(p=v.stateNode,h=v.memoizedProps.style,c=h!=null&&h.hasOwnProperty("display")?h.display:null,p.style.display=hv("display",c))}catch(T){Bt(t,t.return,T)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=m?"":v.memoizedProps}catch(T){Bt(t,t.return,T)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Pr(e,t),ts(t),r&4&&Hg(t);break;case 21:break;default:Pr(e,t),ts(t)}}function ts(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Bw(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Cl(i,""),r.flags&=-33);var o=zg(t);v0(t,o,i);break;case 3:case 4:var c=r.stateNode.containerInfo,p=zg(t);y0(t,p,c);break;default:throw Error(oe(161))}}catch(h){Bt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function zA(t,e,n){xe=t,Uw(t)}function Uw(t,e,n){for(var r=(t.mode&1)!==0;xe!==null;){var i=xe,o=i.child;if(i.tag===22&&r){var c=i.memoizedState!==null||Lc;if(!c){var p=i.alternate,h=p!==null&&p.memoizedState!==null||kn;p=Lc;var m=kn;if(Lc=c,(kn=h)&&!m)for(xe=i;xe!==null;)c=xe,h=c.child,c.tag===22&&c.memoizedState!==null?Gg(i):h!==null?(h.return=c,xe=h):Gg(i);for(;o!==null;)xe=o,Uw(o),o=o.sibling;xe=i,Lc=p,kn=m}Wg(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,xe=o):Wg(t)}}function Wg(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||Od(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Lr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Tg(e,o,r);break;case 3:var c=e.updateQueue;if(c!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Tg(e,c,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var y=m.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&Al(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}kn||e.flags&512&&x0(e)}catch(C){Bt(e,e.return,C)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function $g(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function Gg(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Od(4,e)}catch(h){Bt(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){Bt(e,i,h)}}var o=e.return;try{x0(e)}catch(h){Bt(e,o,h)}break;case 5:var c=e.return;try{x0(e)}catch(h){Bt(e,c,h)}}}catch(h){Bt(e,e.return,h)}if(e===t){xe=null;break}var p=e.sibling;if(p!==null){p.return=e.return,xe=p;break}xe=e.return}}var HA=Math.ceil,Wu=Os.ReactCurrentDispatcher,rp=Os.ReactCurrentOwner,Ir=Os.ReactCurrentBatchConfig,Ze=0,fn=null,Yt=null,Cn=0,lr=0,Bo=pi(0),on=0,Ll=null,Ki=0,Rd=0,sp=0,dl=null,Yn=null,ip=0,aa=1/0,ms=null,$u=!1,w0=null,si=null,Bc=!1,Zs=null,Gu=0,hl=0,b0=null,mu=-1,gu=0;function Vn(){return Ze&6?Wt():mu!==-1?mu:mu=Wt()}function ii(t){return t.mode&1?Ze&2&&Cn!==0?Cn&-Cn:AA.transition!==null?(gu===0&&(gu=_v()),gu):(t=it,t!==0||(t=window.event,t=t===void 0?16:Rv(t.type)),t):1}function $r(t,e,n,r){if(50<hl)throw hl=0,b0=null,Error(oe(185));tc(t,n,r),(!(Ze&2)||t!==fn)&&(t===fn&&(!(Ze&2)&&(Rd|=n),on===4&&Ks(t,Cn)),er(t,r),n===1&&Ze===0&&!(e.mode&1)&&(aa=Wt()+500,Td&&mi()))}function er(t,e){var n=t.callbackNode;A_(t,e);var r=Iu(t,t===fn?Cn:0);if(r===0)n!==null&&tg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&tg(n),e===1)t.tag===0?_A(Xg.bind(null,t)):Zv(Xg.bind(null,t)),bA(function(){!(Ze&6)&&mi()}),n=null;else{switch(Av(r)){case 1:n=O1;break;case 4:n=Ev;break;case 16:n=Tu;break;case 536870912:n=Sv;break;default:n=Tu}n=qw(n,zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function zw(t,e){if(mu=-1,gu=0,Ze&6)throw Error(oe(327));var n=t.callbackNode;if(Qo()&&t.callbackNode!==n)return null;var r=Iu(t,t===fn?Cn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Xu(t,r);else{e=r;var i=Ze;Ze|=2;var o=Ww();(fn!==t||Cn!==e)&&(ms=null,aa=Wt()+500,zi(t,e));do try{GA();break}catch(p){Hw(t,p)}while(!0);W1(),Wu.current=o,Ze=i,Yt!==null?e=0:(fn=null,Cn=0,e=on)}if(e!==0){if(e===2&&(i=Kf(t),i!==0&&(r=i,e=C0(t,i))),e===1)throw n=Ll,zi(t,0),Ks(t,r),er(t,Wt()),n;if(e===6)Ks(t,r);else{if(i=t.current.alternate,!(r&30)&&!WA(i)&&(e=Xu(t,r),e===2&&(o=Kf(t),o!==0&&(r=o,e=C0(t,o))),e===1))throw n=Ll,zi(t,0),Ks(t,r),er(t,Wt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:Ti(t,Yn,ms);break;case 3:if(Ks(t,r),(r&130023424)===r&&(e=ip+500-Wt(),10<e)){if(Iu(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Vn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=n0(Ti.bind(null,t,Yn,ms),e);break}Ti(t,Yn,ms);break;case 4:if(Ks(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var c=31-Wr(r);o=1<<c,c=e[c],c>i&&(i=c),r&=~o}if(r=i,r=Wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*HA(r/1960))-r,10<r){t.timeoutHandle=n0(Ti.bind(null,t,Yn,ms),r);break}Ti(t,Yn,ms);break;case 5:Ti(t,Yn,ms);break;default:throw Error(oe(329))}}}return er(t,Wt()),t.callbackNode===n?zw.bind(null,t):null}function C0(t,e){var n=dl;return t.current.memoizedState.isDehydrated&&(zi(t,e).flags|=256),t=Xu(t,e),t!==2&&(e=Yn,Yn=n,e!==null&&E0(e)),t}function E0(t){Yn===null?Yn=t:Yn.push.apply(Yn,t)}function WA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Xr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ks(t,e){for(e&=~sp,e&=~Rd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Wr(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(Ze&6)throw Error(oe(327));Qo();var e=Iu(t,0);if(!(e&1))return er(t,Wt()),null;var n=Xu(t,e);if(t.tag!==0&&n===2){var r=Kf(t);r!==0&&(e=r,n=C0(t,r))}if(n===1)throw n=Ll,zi(t,0),Ks(t,e),er(t,Wt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ti(t,Yn,ms),er(t,Wt()),null}function op(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(aa=Wt()+500,Td&&mi())}}function qi(t){Zs!==null&&Zs.tag===0&&!(Ze&6)&&Qo();var e=Ze;Ze|=1;var n=Ir.transition,r=it;try{if(Ir.transition=null,it=1,t)return t()}finally{it=r,Ir.transition=n,Ze=e,!(Ze&6)&&mi()}}function ap(){lr=Bo.current,xt(Bo)}function zi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wA(n)),Yt!==null)for(n=Yt.return;n!==null;){var r=n;switch(U1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pu();break;case 3:ia(),xt(Qn),xt(Rn),Y1();break;case 5:q1(r);break;case 4:ia();break;case 13:xt(Nt);break;case 19:xt(Nt);break;case 10:$1(r.type._context);break;case 22:case 23:ap()}n=n.return}if(fn=t,Yt=t=oi(t.current,null),Cn=lr=e,on=0,Ll=null,sp=Rd=Ki=0,Yn=dl=null,Di!==null){for(e=0;e<Di.length;e++)if(n=Di[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var c=o.next;o.next=i,r.next=c}n.pending=r}Di=null}return t}function Hw(t,e){do{var n=Yt;try{if(W1(),hu.current=Hu,zu){for(var r=It.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}zu=!1}if(Xi=0,hn=sn=It=null,cl=!1,Pl=0,rp.current=null,n===null||n.return===null){on=1,Ll=e,Yt=null;break}e:{var o=t,c=n.return,p=n,h=e;if(e=Cn,p.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var m=h,y=p,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var C=y.alternate;C?(y.updateQueue=C.updateQueue,y.memoizedState=C.memoizedState,y.lanes=C.lanes):(y.updateQueue=null,y.memoizedState=null)}var E=Pg(c);if(E!==null){E.flags&=-257,Mg(E,c,p,o,e),E.mode&1&&jg(o,m,e),e=E,h=m;var _=e.updateQueue;if(_===null){var T=new Set;T.add(h),e.updateQueue=T}else _.add(h);break e}else{if(!(e&1)){jg(o,m,e),lp();break e}h=Error(oe(426))}}else if(bt&&p.mode&1){var k=Pg(c);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Mg(k,c,p,o,e),z1(oa(h,p));break e}}o=h=oa(h,p),on!==4&&(on=2),dl===null?dl=[o]:dl.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var S=Aw(o,h,e);Ng(o,S);break e;case 1:p=h;var I=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(si===null||!si.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var M=Nw(o,p,e);Ng(o,M);break e}}o=o.return}while(o!==null)}Gw(n)}catch(F){e=F,Yt===n&&n!==null&&(Yt=n=n.return);continue}break}while(!0)}function Ww(){var t=Wu.current;return Wu.current=Hu,t===null?Hu:t}function lp(){(on===0||on===3||on===2)&&(on=4),fn===null||!(Ki&268435455)&&!(Rd&268435455)||Ks(fn,Cn)}function Xu(t,e){var n=Ze;Ze|=2;var r=Ww();(fn!==t||Cn!==e)&&(ms=null,zi(t,e));do try{$A();break}catch(i){Hw(t,i)}while(!0);if(W1(),Ze=n,Wu.current=r,Yt!==null)throw Error(oe(261));return fn=null,Cn=0,on}function $A(){for(;Yt!==null;)$w(Yt)}function GA(){for(;Yt!==null&&!x_();)$w(Yt)}function $w(t){var e=Kw(t.alternate,t,lr);t.memoizedProps=t.pendingProps,e===null?Gw(t):Yt=e,rp.current=null}function Gw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=FA(n,e),n!==null){n.flags&=32767,Yt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,Yt=null;return}}else if(n=BA(n,e,lr),n!==null){Yt=n;return}if(e=e.sibling,e!==null){Yt=e;return}Yt=e=t}while(e!==null);on===0&&(on=5)}function Ti(t,e,n){var r=it,i=Ir.transition;try{Ir.transition=null,it=1,XA(t,e,n,r)}finally{Ir.transition=i,it=r}return null}function XA(t,e,n,r){do Qo();while(Zs!==null);if(Ze&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(N_(t,o),t===fn&&(Yt=fn=null,Cn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bc||(Bc=!0,qw(Tu,function(){return Qo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ir.transition,Ir.transition=null;var c=it;it=1;var p=Ze;Ze|=4,rp.current=null,UA(t,n),Vw(n,t),fA(e0),ku=!!Jf,e0=Jf=null,t.current=n,zA(n),y_(),Ze=p,it=c,Ir.transition=o}else t.current=n;if(Bc&&(Bc=!1,Zs=t,Gu=i),o=t.pendingLanes,o===0&&(si=null),b_(n.stateNode),er(t,Wt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,t=w0,w0=null,t;return Gu&1&&t.tag!==0&&Qo(),o=t.pendingLanes,o&1?t===b0?hl++:(hl=0,b0=t):hl=0,mi(),null}function Qo(){if(Zs!==null){var t=Av(Gu),e=Ir.transition,n=it;try{if(Ir.transition=null,it=16>t?16:t,Zs===null)var r=!1;else{if(t=Zs,Zs=null,Gu=0,Ze&6)throw Error(oe(331));var i=Ze;for(Ze|=4,xe=t.current;xe!==null;){var o=xe,c=o.child;if(xe.flags&16){var p=o.deletions;if(p!==null){for(var h=0;h<p.length;h++){var m=p[h];for(xe=m;xe!==null;){var y=xe;switch(y.tag){case 0:case 11:case 15:ul(8,y,o)}var v=y.child;if(v!==null)v.return=y,xe=v;else for(;xe!==null;){y=xe;var C=y.sibling,E=y.return;if(Lw(y),y===m){xe=null;break}if(C!==null){C.return=E,xe=C;break}xe=E}}}var _=o.alternate;if(_!==null){var T=_.child;if(T!==null){_.child=null;do{var k=T.sibling;T.sibling=null,T=k}while(T!==null)}}xe=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,xe=c;else e:for(;xe!==null;){if(o=xe,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ul(9,o,o.return)}var S=o.sibling;if(S!==null){S.return=o.return,xe=S;break e}xe=o.return}}var I=t.current;for(xe=I;xe!==null;){c=xe;var N=c.child;if(c.subtreeFlags&2064&&N!==null)N.return=c,xe=N;else e:for(c=I;xe!==null;){if(p=xe,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:Od(9,p)}}catch(F){Bt(p,p.return,F)}if(p===c){xe=null;break e}var M=p.sibling;if(M!==null){M.return=p.return,xe=M;break e}xe=p.return}}if(Ze=i,mi(),as&&typeof as.onPostCommitFiberRoot=="function")try{as.onPostCommitFiberRoot(Ed,t)}catch{}r=!0}return r}finally{it=n,Ir.transition=e}}return!1}function Kg(t,e,n){e=oa(n,e),e=Aw(t,e,1),t=ri(t,e,1),e=Vn(),t!==null&&(tc(t,1,e),er(t,e))}function Bt(t,e,n){if(t.tag===3)Kg(t,t,n);else for(;e!==null;){if(e.tag===3){Kg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(si===null||!si.has(r))){t=oa(n,t),t=Nw(e,t,1),e=ri(e,t,1),t=Vn(),e!==null&&(tc(e,1,t),er(e,t));break}}e=e.return}}function KA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Vn(),t.pingedLanes|=t.suspendedLanes&n,fn===t&&(Cn&n)===n&&(on===4||on===3&&(Cn&130023424)===Cn&&500>Wt()-ip?zi(t,0):sp|=n),er(t,e)}function Xw(t,e){e===0&&(t.mode&1?(e=Tc,Tc<<=1,!(Tc&130023424)&&(Tc=4194304)):e=1);var n=Vn();t=As(t,e),t!==null&&(tc(t,e,n),er(t,n))}function qA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Xw(t,n)}function YA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),Xw(t,n)}var Kw;Kw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)Zn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Zn=!1,LA(t,e,n);Zn=!!(t.flags&131072)}else Zn=!1,bt&&e.flags&1048576&&Qv(e,Lu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;pu(t,e),t=e.pendingProps;var i=na(e,Rn.current);Zo(e,n),i=Q1(null,e,r,t,i,n);var o=J1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Jn(r)?(o=!0,Mu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,X1(e),i.updater=kd,e.stateNode=i,i._reactInternals=e,c0(e,r,t,n),e=h0(null,e,r,!0,o,n)):(e.tag=0,bt&&o&&V1(e),Bn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(pu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=QA(r),t=Lr(r,t),i){case 0:e=d0(null,e,r,t,n);break e;case 1:e=Bg(null,e,r,t,n);break e;case 11:e=Dg(null,e,r,t,n);break e;case 14:e=Lg(null,e,r,Lr(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),d0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Bg(t,e,r,i,n);case 3:e:{if(Ow(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,sw(t,e),Vu(e,r,null,n);var c=e.memoizedState;if(r=c.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=oa(Error(oe(423)),e),e=Fg(t,e,r,n,i);break e}else if(r!==i){i=oa(Error(oe(424)),e),e=Fg(t,e,r,n,i);break e}else for(dr=ni(e.stateNode.containerInfo.firstChild),hr=e,bt=!0,Ur=null,n=nw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ra(),r===i){e=Ns(t,e,n);break e}Bn(t,e,r,n)}e=e.child}return e;case 5:return iw(e),t===null&&o0(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,c=i.children,t0(r,i)?c=null:o!==null&&t0(r,o)&&(e.flags|=32),kw(t,e),Bn(t,e,c,n),e.child;case 6:return t===null&&o0(e),null;case 13:return Rw(t,e,n);case 4:return K1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=sa(e,null,r,n):Bn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),Dg(t,e,r,i,n);case 7:return Bn(t,e,e.pendingProps,n),e.child;case 8:return Bn(t,e,e.pendingProps.children,n),e.child;case 12:return Bn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,c=i.value,ht(Bu,r._currentValue),r._currentValue=c,o!==null)if(Xr(o.value,c)){if(o.children===i.children&&!Qn.current){e=Ns(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var p=o.dependencies;if(p!==null){c=o.child;for(var h=p.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=bs(-1,n&-n),h.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var y=m.pending;y===null?h.next=h:(h.next=y.next,y.next=h),m.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),a0(o.return,n,e),p.lanes|=n;break}h=h.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error(oe(341));c.lanes|=n,p=c.alternate,p!==null&&(p.lanes|=n),a0(c,n,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}Bn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Zo(e,n),i=kr(i),r=r(i),e.flags|=1,Bn(t,e,r,n),e.child;case 14:return r=e.type,i=Lr(r,e.pendingProps),i=Lr(r.type,i),Lg(t,e,r,i,n);case 15:return Tw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Lr(r,i),pu(t,e),e.tag=1,Jn(r)?(t=!0,Mu(e)):t=!1,Zo(e,n),_w(e,r,i),c0(e,r,i,n),h0(null,e,r,!0,t,n);case 19:return jw(t,e,n);case 22:return Iw(t,e,n)}throw Error(oe(156,e.tag))};function qw(t,e){return Cv(t,e)}function ZA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(t,e,n,r){return new ZA(t,e,n,r)}function cp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function QA(t){if(typeof t=="function")return cp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T1)return 11;if(t===I1)return 14}return 2}function oi(t,e){var n=t.alternate;return n===null?(n=Tr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function xu(t,e,n,r,i,o){var c=2;if(r=t,typeof t=="function")cp(t)&&(c=1);else if(typeof t=="string")c=5;else e:switch(t){case To:return Hi(n.children,i,o,e);case N1:c=8,i|=8;break;case jf:return t=Tr(12,n,e,i|2),t.elementType=jf,t.lanes=o,t;case Pf:return t=Tr(13,n,e,i),t.elementType=Pf,t.lanes=o,t;case Mf:return t=Tr(19,n,e,i),t.elementType=Mf,t.lanes=o,t;case iv:return jd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case rv:c=10;break e;case sv:c=9;break e;case T1:c=11;break e;case I1:c=14;break e;case $s:c=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Tr(c,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Hi(t,e,n,r){return t=Tr(7,t,r,e),t.lanes=n,t}function jd(t,e,n,r){return t=Tr(22,t,r,e),t.elementType=iv,t.lanes=n,t.stateNode={isHidden:!1},t}function Qh(t,e,n){return t=Tr(6,t,null,e),t.lanes=n,t}function Jh(t,e,n){return e=Tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function JA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=jh(0),this.expirationTimes=jh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jh(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function up(t,e,n,r,i,o,c,p,h){return t=new JA(t,e,n,p,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Tr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},X1(o),t}function e4(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:No,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yw(t){if(!t)return ci;t=t._reactInternals;e:{if(to(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(Jn(n))return Yv(t,n,e)}return e}function Zw(t,e,n,r,i,o,c,p,h){return t=up(n,r,!0,t,i,o,c,p,h),t.context=Yw(null),n=t.current,r=Vn(),i=ii(n),o=bs(r,i),o.callback=e??null,ri(n,o,i),t.current.lanes=i,tc(t,i,r),er(t,r),t}function Pd(t,e,n,r){var i=e.current,o=Vn(),c=ii(i);return n=Yw(n),e.context===null?e.context=n:e.pendingContext=n,e=bs(o,c),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ri(i,e,c),t!==null&&($r(t,i,c,o),du(t,i,c)),c}function Ku(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dp(t,e){qg(t,e),(t=t.alternate)&&qg(t,e)}function t4(){return null}var Qw=typeof reportError=="function"?reportError:function(t){console.error(t)};function hp(t){this._internalRoot=t}Md.prototype.render=hp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));Pd(t,e,null,null)};Md.prototype.unmount=hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;qi(function(){Pd(null,t,null,null)}),e[_s]=null}};function Md(t){this._internalRoot=t}Md.prototype.unstable_scheduleHydration=function(t){if(t){var e=Iv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xs.length&&e!==0&&e<Xs[n].priority;n++);Xs.splice(n,0,t),n===0&&Ov(t)}};function fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yg(){}function n4(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var m=Ku(c);o.call(m)}}var c=Zw(e,r,t,0,null,!1,!1,"",Yg);return t._reactRootContainer=c,t[_s]=c.current,Il(t.nodeType===8?t.parentNode:t),qi(),c}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var p=r;r=function(){var m=Ku(h);p.call(m)}}var h=up(t,0,!1,null,null,!1,!1,"",Yg);return t._reactRootContainer=h,t[_s]=h.current,Il(t.nodeType===8?t.parentNode:t),qi(function(){Pd(e,h,n,r)}),h}function Ld(t,e,n,r,i){var o=n._reactRootContainer;if(o){var c=o;if(typeof i=="function"){var p=i;i=function(){var h=Ku(c);p.call(h)}}Pd(e,c,t,i)}else c=n4(n,e,t,i,r);return Ku(c)}Nv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qa(e.pendingLanes);n!==0&&(R1(e,n|1),er(e,Wt()),!(Ze&6)&&(aa=Wt()+500,mi()))}break;case 13:qi(function(){var r=As(t,1);if(r!==null){var i=Vn();$r(r,t,1,i)}}),dp(t,1)}};j1=function(t){if(t.tag===13){var e=As(t,134217728);if(e!==null){var n=Vn();$r(e,t,134217728,n)}dp(t,134217728)}};Tv=function(t){if(t.tag===13){var e=ii(t),n=As(t,e);if(n!==null){var r=Vn();$r(n,t,e,r)}dp(t,e)}};Iv=function(){return it};kv=function(t,e){var n=it;try{return it=t,e()}finally{it=n}};$f=function(t,e,n){switch(e){case"input":if(Bf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Nd(r);if(!i)throw Error(oe(90));av(r),Bf(r,i)}}}break;case"textarea":cv(t,n);break;case"select":e=n.value,e!=null&&Xo(t,!!n.multiple,e,!1)}};gv=op;xv=qi;var r4={usingClientEntryPoint:!1,Events:[rc,Ro,Nd,pv,mv,op]},$a={findFiberByHostInstance:Mi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s4={bundleType:$a.bundleType,version:$a.version,rendererPackageName:$a.rendererPackageName,rendererConfig:$a.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Os.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=wv(t),t===null?null:t.stateNode},findFiberByHostInstance:$a.findFiberByHostInstance||t4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Ed=Fc.inject(s4),as=Fc}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r4;xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fp(e))throw Error(oe(200));return e4(t,e,null,n)};xr.createRoot=function(t,e){if(!fp(t))throw Error(oe(299));var n=!1,r="",i=Qw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=up(t,1,!1,null,null,n,!1,r,i),t[_s]=e.current,Il(t.nodeType===8?t.parentNode:t),new hp(e)};xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=wv(e),t=t===null?null:t.stateNode,t};xr.flushSync=function(t){return qi(t)};xr.hydrate=function(t,e,n){if(!Dd(e))throw Error(oe(200));return Ld(null,t,e,!0,n)};xr.hydrateRoot=function(t,e,n){if(!fp(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",c=Qw;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),e=Zw(e,null,t,1,n??null,i,!1,o,c),t[_s]=e.current,Il(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Md(e)};xr.render=function(t,e,n){if(!Dd(e))throw Error(oe(200));return Ld(null,t,e,!1,n)};xr.unmountComponentAtNode=function(t){if(!Dd(t))throw Error(oe(40));return t._reactRootContainer?(qi(function(){Ld(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};xr.unstable_batchedUpdates=op;xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dd(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return Ld(t,e,n,!1,r)};xr.version="18.3.1-next-f1338f8080-20240426";function Jw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Jw)}catch(t){console.error(t)}}Jw(),J2.exports=xr;var eb=J2.exports,tb,Zg=eb;tb=Zg.createRoot,Zg.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Bl(){return Bl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bl.apply(this,arguments)}var Qs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qs||(Qs={}));const Qg="popstate";function i4(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:c,hash:p}=r.location;return S0("",{pathname:o,search:c,hash:p},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:qu(i)}return a4(e,n,null,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function pp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function o4(){return Math.random().toString(36).substr(2,8)}function Jg(t,e){return{usr:t.state,key:t.key,idx:e}}function S0(t,e,n,r){return n===void 0&&(n=null),Bl({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?xa(e):e,{state:n,key:e&&e.key||r||o4()})}function qu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function xa(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function a4(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,c=i.history,p=Qs.Pop,h=null,m=y();m==null&&(m=0,c.replaceState(Bl({},c.state,{idx:m}),""));function y(){return(c.state||{idx:null}).idx}function v(){p=Qs.Pop;let k=y(),S=k==null?null:k-m;m=k,h&&h({action:p,location:T.location,delta:S})}function C(k,S){p=Qs.Push;let I=S0(T.location,k,S);m=y()+1;let N=Jg(I,m),M=T.createHref(I);try{c.pushState(N,"",M)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;i.location.assign(M)}o&&h&&h({action:p,location:T.location,delta:1})}function E(k,S){p=Qs.Replace;let I=S0(T.location,k,S);m=y();let N=Jg(I,m),M=T.createHref(I);c.replaceState(N,"",M),o&&h&&h({action:p,location:T.location,delta:0})}function _(k){let S=i.location.origin!=="null"?i.location.origin:i.location.href,I=typeof k=="string"?k:qu(k);return I=I.replace(/ $/,"%20"),$t(S,"No window.location.(origin|href) available to create URL for href: "+I),new URL(I,S)}let T={get action(){return p},get location(){return t(i,c)},listen(k){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(Qg,v),h=k,()=>{i.removeEventListener(Qg,v),h=null}},createHref(k){return e(i,k)},createURL:_,encodeLocation(k){let S=_(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:C,replace:E,go(k){return c.go(k)}};return T}var ex;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ex||(ex={}));function l4(t,e,n){return n===void 0&&(n="/"),c4(t,e,n)}function c4(t,e,n,r){let i=typeof e=="string"?xa(e):e,o=mp(i.pathname||"/",n);if(o==null)return null;let c=nb(t);u4(c);let p=null;for(let h=0;p==null&&h<c.length;++h){let m=C4(o);p=v4(c[h],m)}return p}function nb(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,c,p)=>{let h={relativePath:p===void 0?o.path||"":p,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};h.relativePath.startsWith("/")&&($t(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let m=ai([r,h.relativePath]),y=n.concat(h);o.children&&o.children.length>0&&($t(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),nb(o.children,e,y,m)),!(o.path==null&&!o.index)&&e.push({path:m,score:x4(m,o.index),routesMeta:y})};return t.forEach((o,c)=>{var p;if(o.path===""||!((p=o.path)!=null&&p.includes("?")))i(o,c);else for(let h of rb(o.path))i(o,c,h)}),e}function rb(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let c=rb(r.join("/")),p=[];return p.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&p.push(...c),p.map(h=>t.startsWith("/")&&h===""?"/":h)}function u4(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:y4(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const d4=/^:[\w-]+$/,h4=3,f4=2,p4=1,m4=10,g4=-2,tx=t=>t==="*";function x4(t,e){let n=t.split("/"),r=n.length;return n.some(tx)&&(r+=g4),e&&(r+=f4),n.filter(i=>!tx(i)).reduce((i,o)=>i+(d4.test(o)?h4:o===""?p4:m4),r)}function y4(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function v4(t,e,n){let{routesMeta:r}=t,i={},o="/",c=[];for(let p=0;p<r.length;++p){let h=r[p],m=p===r.length-1,y=o==="/"?e:e.slice(o.length)||"/",v=w4({path:h.relativePath,caseSensitive:h.caseSensitive,end:m},y),C=h.route;if(!v)return null;Object.assign(i,v.params),c.push({params:i,pathname:ai([o,v.pathname]),pathnameBase:N4(ai([o,v.pathnameBase])),route:C}),v.pathnameBase!=="/"&&(o=ai([o,v.pathnameBase]))}return c}function w4(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=b4(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),p=i.slice(1);return{params:r.reduce((m,y,v)=>{let{paramName:C,isOptional:E}=y;if(C==="*"){let T=p[v]||"";c=o.slice(0,o.length-T.length).replace(/(.)\/+$/,"$1")}const _=p[v];return E&&!_?m[C]=void 0:m[C]=(_||"").replace(/%2F/g,"/"),m},{}),pathname:o,pathnameBase:c,pattern:t}}function b4(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),pp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,p,h)=>(r.push({paramName:p,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function C4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const E4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,S4=t=>E4.test(t);function _4(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?xa(t):t,o;if(n)if(S4(n))o=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),pp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+n))}n.startsWith("/")?o=nx(n.substring(1),"/"):o=nx(n,e)}else o=e;return{pathname:o,search:T4(r),hash:I4(i)}}function nx(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function ef(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function A4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gp(t,e){let n=A4(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function xp(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=xa(t):(i=Bl({},t),$t(!i.pathname||!i.pathname.includes("?"),ef("?","pathname","search",i)),$t(!i.pathname||!i.pathname.includes("#"),ef("#","pathname","hash",i)),$t(!i.search||!i.search.includes("#"),ef("#","search","hash",i)));let o=t===""||i.pathname==="",c=o?"/":i.pathname,p;if(c==null)p=n;else{let v=e.length-1;if(!r&&c.startsWith("..")){let C=c.split("/");for(;C[0]==="..";)C.shift(),v-=1;i.pathname=C.join("/")}p=v>=0?e[v]:"/"}let h=_4(i,p),m=c&&c!=="/"&&c.endsWith("/"),y=(o||c===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(m||y)&&(h.pathname+="/"),h}const ai=t=>t.join("/").replace(/\/\/+/g,"/"),N4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),T4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,I4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function k4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const sb=["post","put","patch","delete"];new Set(sb);const O4=["get",...sb];new Set(O4);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fl(){return Fl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fl.apply(this,arguments)}const yp=O.createContext(null),R4=O.createContext(null),gi=O.createContext(null),Bd=O.createContext(null),Rs=O.createContext({outlet:null,matches:[],isDataRoute:!1}),ib=O.createContext(null);function j4(t,e){let{relative:n}=e===void 0?{}:e;ya()||$t(!1);let{basename:r,navigator:i}=O.useContext(gi),{hash:o,pathname:c,search:p}=lb(t,{relative:n}),h=c;return r!=="/"&&(h=c==="/"?r:ai([r,c])),i.createHref({pathname:h,search:p,hash:o})}function ya(){return O.useContext(Bd)!=null}function no(){return ya()||$t(!1),O.useContext(Bd).location}function ob(t){O.useContext(gi).static||O.useLayoutEffect(t)}function ro(){let{isDataRoute:t}=O.useContext(Rs);return t?G4():P4()}function P4(){ya()||$t(!1);let t=O.useContext(yp),{basename:e,future:n,navigator:r}=O.useContext(gi),{matches:i}=O.useContext(Rs),{pathname:o}=no(),c=JSON.stringify(gp(i,n.v7_relativeSplatPath)),p=O.useRef(!1);return ob(()=>{p.current=!0}),O.useCallback(function(m,y){if(y===void 0&&(y={}),!p.current)return;if(typeof m=="number"){r.go(m);return}let v=xp(m,JSON.parse(c),o,y.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ai([e,v.pathname])),(y.replace?r.replace:r.push)(v,y.state,y)},[e,r,c,o,t])}function ab(){let{matches:t}=O.useContext(Rs),e=t[t.length-1];return e?e.params:{}}function lb(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(gi),{matches:i}=O.useContext(Rs),{pathname:o}=no(),c=JSON.stringify(gp(i,r.v7_relativeSplatPath));return O.useMemo(()=>xp(t,JSON.parse(c),o,n==="path"),[t,c,o,n])}function M4(t,e){return D4(t,e)}function D4(t,e,n,r){ya()||$t(!1);let{navigator:i}=O.useContext(gi),{matches:o}=O.useContext(Rs),c=o[o.length-1],p=c?c.params:{};c&&c.pathname;let h=c?c.pathnameBase:"/";c&&c.route;let m=no(),y;if(e){var v;let k=typeof e=="string"?xa(e):e;h==="/"||(v=k.pathname)!=null&&v.startsWith(h)||$t(!1),y=k}else y=m;let C=y.pathname||"/",E=C;if(h!=="/"){let k=h.replace(/^\//,"").split("/");E="/"+C.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=l4(t,{pathname:E}),T=U4(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},p,k.params),pathname:ai([h,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?h:ai([h,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),o,n,r);return e&&T?O.createElement(Bd.Provider,{value:{location:Fl({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Qs.Pop}},T):T}function L4(){let t=$4(),e=k4(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const B4=O.createElement(L4,null);class F4 extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(Rs.Provider,{value:this.props.routeContext},O.createElement(ib.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function V4(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(yp);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(Rs.Provider,{value:e},r)}function U4(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let c=t,p=(i=n)==null?void 0:i.errors;if(p!=null){let y=c.findIndex(v=>v.route.id&&(p==null?void 0:p[v.route.id])!==void 0);y>=0||$t(!1),c=c.slice(0,Math.min(c.length,y+1))}let h=!1,m=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let v=c[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:C,errors:E}=n,_=v.route.loader&&C[v.route.id]===void 0&&(!E||E[v.route.id]===void 0);if(v.route.lazy||_){h=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((y,v,C)=>{let E,_=!1,T=null,k=null;n&&(E=p&&v.route.id?p[v.route.id]:void 0,T=v.route.errorElement||B4,h&&(m<0&&C===0?(X4("route-fallback"),_=!0,k=null):m===C&&(_=!0,k=v.route.hydrateFallbackElement||null)));let S=e.concat(c.slice(0,C+1)),I=()=>{let N;return E?N=T:_?N=k:v.route.Component?N=O.createElement(v.route.Component,null):v.route.element?N=v.route.element:N=y,O.createElement(V4,{match:v,routeContext:{outlet:y,matches:S,isDataRoute:n!=null},children:N})};return n&&(v.route.ErrorBoundary||v.route.errorElement||C===0)?O.createElement(F4,{location:n.location,revalidation:n.revalidation,component:T,error:E,children:I(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):I()},null)}var cb=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(cb||{}),ub=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ub||{});function z4(t){let e=O.useContext(yp);return e||$t(!1),e}function H4(t){let e=O.useContext(R4);return e||$t(!1),e}function W4(t){let e=O.useContext(Rs);return e||$t(!1),e}function db(t){let e=W4(),n=e.matches[e.matches.length-1];return n.route.id||$t(!1),n.route.id}function $4(){var t;let e=O.useContext(ib),n=H4(),r=db();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function G4(){let{router:t}=z4(cb.UseNavigateStable),e=db(ub.UseNavigateStable),n=O.useRef(!1);return ob(()=>{n.current=!0}),O.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Fl({fromRouteId:e},o)))},[t,e])}const rx={};function X4(t,e,n){rx[t]||(rx[t]=!0)}function K4(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function _0(t){let{to:e,replace:n,state:r,relative:i}=t;ya()||$t(!1);let{future:o,static:c}=O.useContext(gi),{matches:p}=O.useContext(Rs),{pathname:h}=no(),m=ro(),y=xp(e,gp(p,o.v7_relativeSplatPath),h,i==="path"),v=JSON.stringify(y);return O.useEffect(()=>m(JSON.parse(v),{replace:n,state:r,relative:i}),[m,v,i,n,r]),null}function ns(t){$t(!1)}function q4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Qs.Pop,navigator:o,static:c=!1,future:p}=t;ya()&&$t(!1);let h=e.replace(/^\/*/,"/"),m=O.useMemo(()=>({basename:h,navigator:o,static:c,future:Fl({v7_relativeSplatPath:!1},p)}),[h,p,o,c]);typeof r=="string"&&(r=xa(r));let{pathname:y="/",search:v="",hash:C="",state:E=null,key:_="default"}=r,T=O.useMemo(()=>{let k=mp(y,h);return k==null?null:{location:{pathname:k,search:v,hash:C,state:E,key:_},navigationType:i}},[h,y,v,C,E,_,i]);return T==null?null:O.createElement(gi.Provider,{value:m},O.createElement(Bd.Provider,{children:n,value:T}))}function Y4(t){let{children:e,location:n}=t;return M4(A0(e),n)}new Promise(()=>{});function A0(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let o=[...e,i];if(r.type===O.Fragment){n.push.apply(n,A0(r.props.children,o));return}r.type!==ns&&$t(!1),!r.props.index||!r.props.children||$t(!1);let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=A0(r.props.children,o)),n.push(c)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}function Z4(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Q4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function J4(t,e){return t.button===0&&(!e||e==="_self")&&!Q4(t)}const eN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],tN="6";try{window.__reactRouterVersion=tN}catch{}const nN="startTransition",sx=Of[nN];function rN(t){let{basename:e,children:n,future:r,window:i}=t,o=O.useRef();o.current==null&&(o.current=i4({window:i,v5Compat:!0}));let c=o.current,[p,h]=O.useState({action:c.action,location:c.location}),{v7_startTransition:m}=r||{},y=O.useCallback(v=>{m&&sx?sx(()=>h(v)):h(v)},[h,m]);return O.useLayoutEffect(()=>c.listen(y),[c,y]),O.useEffect(()=>K4(r),[r]),O.createElement(q4,{basename:e,children:n,location:p.location,navigationType:p.action,navigator:c,future:r})}const sN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",iN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Gr=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:c,state:p,target:h,to:m,preventScrollReset:y,viewTransition:v}=e,C=Z4(e,eN),{basename:E}=O.useContext(gi),_,T=!1;if(typeof m=="string"&&iN.test(m)&&(_=m,sN))try{let N=new URL(window.location.href),M=m.startsWith("//")?new URL(N.protocol+m):new URL(m),F=mp(M.pathname,E);M.origin===N.origin&&F!=null?m=F+M.search+M.hash:T=!0}catch{}let k=j4(m,{relative:i}),S=oN(m,{replace:c,state:p,target:h,preventScrollReset:y,relative:i,viewTransition:v});function I(N){r&&r(N),N.defaultPrevented||S(N)}return O.createElement("a",N0({},C,{href:_||k,onClick:T||o?r:I,ref:n,target:h}))});var ix;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ix||(ix={}));var ox;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(ox||(ox={}));function oN(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:c,viewTransition:p}=e===void 0?{}:e,h=ro(),m=no(),y=lb(t,{relative:c});return O.useCallback(v=>{if(J4(v,n)){v.preventDefault();let C=r!==void 0?r:qu(m)===qu(y);h(t,{replace:C,state:i,preventScrollReset:o,relative:c,viewTransition:p})}},[m,h,y,r,i,n,t,o,c,p])}var T0=function(t,e){return T0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},T0(t,e)};function hb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");T0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Yu=function(){return Yu=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Yu.apply(this,arguments)};function va(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function fb(t,e,n,r){var i=arguments.length,o=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var p=t.length-1;p>=0;p--)(c=t[p])&&(o=(i<3?c(o):i>3?c(e,n,o):c(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o}function pb(t,e){return function(n,r){e(n,r,t)}}function mb(t,e,n,r,i,o){function c(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var p=r.kind,h=p==="getter"?"get":p==="setter"?"set":"value",m=!e&&t?r.static?t:t.prototype:null,y=e||(m?Object.getOwnPropertyDescriptor(m,r.name):{}),v,C=!1,E=n.length-1;E>=0;E--){var _={};for(var T in r)_[T]=T==="access"?{}:r[T];for(var T in r.access)_.access[T]=r.access[T];_.addInitializer=function(S){if(C)throw new TypeError("Cannot add initializers after decoration has completed");o.push(c(S||null))};var k=(0,n[E])(p==="accessor"?{get:y.get,set:y.set}:y[h],_);if(p==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(v=c(k.get))&&(y.get=v),(v=c(k.set))&&(y.set=v),(v=c(k.init))&&i.unshift(v)}else(v=c(k))&&(p==="field"?i.unshift(v):y[h]=v)}m&&Object.defineProperty(m,r.name,y),C=!0}function gb(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function xb(t){return typeof t=="symbol"?t:"".concat(t)}function yb(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function vb(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ye(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})}function wb(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=p(0),c.throw=p(1),c.return=p(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Fd=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function bb(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Fd(e,t,n)}function Zu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vp(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],c;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(p){c={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return o}function Cb(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(vp(arguments[e]));return t}function Eb(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],c=0,p=o.length;c<p;c++,i++)r[i]=o[c];return r}function Sb(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function la(t){return this instanceof la?(this.v=t,this):new la(t)}function _b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",c),i[Symbol.asyncIterator]=function(){return this},i;function c(E){return function(_){return Promise.resolve(_).then(E,v)}}function p(E,_){r[E]&&(i[E]=function(T){return new Promise(function(k,S){o.push([E,T,k,S])>1||h(E,T)})},_&&(i[E]=_(i[E])))}function h(E,_){try{m(r[E](_))}catch(T){C(o[0][3],T)}}function m(E){E.value instanceof la?Promise.resolve(E.value.v).then(y,v):C(o[0][2],E)}function y(E){h("next",E)}function v(E){h("throw",E)}function C(E,_){E(_),o.shift(),o.length&&h(o[0][0],o[0][1])}}function Ab(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,o){e[i]=t[i]?function(c){return(n=!n)?{value:la(t[i](c)),done:!1}:o?o(c):c}:o}}function Nb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Zu=="function"?Zu(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(c){return new Promise(function(p,h){c=t[o](c),i(p,h,c.done,c.value)})}}function i(o,c,p,h){Promise.resolve(h).then(function(m){o({value:m,done:p})},c)}}function Tb(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var aN=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},I0=function(t){return I0=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},I0(t)};function Ib(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=I0(t),r=0;r<n.length;r++)n[r]!=="default"&&Fd(e,t,n[r]);return aN(e,t),e}function kb(t){return t&&t.__esModule?t:{default:t}}function Ob(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function Rb(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function jb(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Pb(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var lN=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Mb(t){function e(o){t.error=t.hasError?new lN(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(c){return e(c),i()})}else r|=1}catch(c){e(c)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Db(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,c){return r?e?".jsx":".js":i&&(!o||!c)?n:i+o+"."+c.toLowerCase()+"js"}):t}const cN={__extends:hb,__assign:Yu,__rest:va,__decorate:fb,__param:pb,__esDecorate:mb,__runInitializers:gb,__propKey:xb,__setFunctionName:yb,__metadata:vb,__awaiter:ye,__generator:wb,__createBinding:Fd,__exportStar:bb,__values:Zu,__read:vp,__spread:Cb,__spreadArrays:Eb,__spreadArray:Sb,__await:la,__asyncGenerator:_b,__asyncDelegator:Ab,__asyncValues:Nb,__makeTemplateObject:Tb,__importStar:Ib,__importDefault:kb,__classPrivateFieldGet:Ob,__classPrivateFieldSet:Rb,__classPrivateFieldIn:jb,__addDisposableResource:Pb,__disposeResources:Mb,__rewriteRelativeImportExtension:Db},uN=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Pb,get __assign(){return Yu},__asyncDelegator:Ab,__asyncGenerator:_b,__asyncValues:Nb,__await:la,__awaiter:ye,__classPrivateFieldGet:Ob,__classPrivateFieldIn:jb,__classPrivateFieldSet:Rb,__createBinding:Fd,__decorate:fb,__disposeResources:Mb,__esDecorate:mb,__exportStar:bb,__extends:hb,__generator:wb,__importDefault:kb,__importStar:Ib,__makeTemplateObject:Tb,__metadata:vb,__param:pb,__propKey:xb,__read:vp,__rest:va,__rewriteRelativeImportExtension:Db,__runInitializers:gb,__setFunctionName:yb,__spread:Cb,__spreadArray:Sb,__spreadArrays:Eb,__values:Zu,default:cN},Symbol.toStringTag,{value:"Module"})),dN=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class wp extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class hN extends wp{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ax extends wp{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class lx extends wp{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var k0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(k0||(k0={}));class fN{constructor(e,{headers:n={},customFetch:r,region:i=k0.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=dN(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ye(this,arguments,void 0,function*(n,r={}){var i;let o,c;try{const{headers:p,method:h,body:m,signal:y,timeout:v}=r;let C={},{region:E}=r;E||(E=this.region);const _=new URL(`${this.url}/${n}`);E&&E!=="any"&&(C["x-region"]=E,_.searchParams.set("forceFunctionRegion",E));let T;m&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",T=m):typeof m=="string"?(C["Content-Type"]="text/plain",T=m):typeof FormData<"u"&&m instanceof FormData?T=m:(C["Content-Type"]="application/json",T=JSON.stringify(m)):T=m;let k=y;v&&(c=new AbortController,o=setTimeout(()=>c.abort(),v),y?(k=c.signal,y.addEventListener("abort",()=>c.abort())):k=c.signal);const S=yield this.fetch(_.toString(),{method:h||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),p),body:T,signal:k}).catch(F=>{throw new hN(F)}),I=S.headers.get("x-relay-error");if(I&&I==="true")throw new ax(S);if(!S.ok)throw new lx(S);let N=((i=S.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),M;return N==="application/json"?M=yield S.json():N==="application/octet-stream"||N==="application/pdf"?M=yield S.blob():N==="text/event-stream"?M=S:N==="multipart/form-data"?M=yield S.formData():M=yield S.text(),{data:M,error:null,response:S}}catch(p){return{data:null,error:p,response:p instanceof lx||p instanceof ax?p.context:void 0}}finally{o&&clearTimeout(o)}})}}var Fn={};const wa=j3(uN);var Vc={},Uc={},zc={},Hc={},Wc={},$c={},cx;function Lb(){if(cx)return $c;cx=1,Object.defineProperty($c,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return $c.default=t,$c}var ux;function Bb(){if(ux)return Wc;ux=1,Object.defineProperty(Wc,"__esModule",{value:!0});const e=wa.__importDefault(Lb());class n{constructor(i){var o,c;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(c=i.isMaybeSingle)!==null&&c!==void 0?c:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let p=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{var m,y,v,C;let E=null,_=null,T=null,k=h.status,S=h.statusText;if(h.ok){if(this.method!=="HEAD"){const F=await h.text();F===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?_=F:_=JSON.parse(F))}const N=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),M=(v=h.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");N&&M&&M.length>1&&(T=parseInt(M[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(E={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,T=null,k=406,S="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const N=await h.text();try{E=JSON.parse(N),Array.isArray(E)&&h.status===404&&(_=[],E=null,k=200,S="OK")}catch{h.status===404&&N===""?(k=204,S="No Content"):E={message:N}}if(E&&this.isMaybeSingle&&(!((C=E==null?void 0:E.details)===null||C===void 0)&&C.includes("0 rows"))&&(E=null,k=200,S="OK"),E&&this.shouldThrowOnError)throw new e.default(E)}return{error:E,data:_,count:T,status:k,statusText:S}});return this.shouldThrowOnError||(p=p.catch(h=>{var m,y,v,C,E,_;let T="";const k=h==null?void 0:h.cause;if(k){const S=(m=k==null?void 0:k.message)!==null&&m!==void 0?m:"",I=(y=k==null?void 0:k.code)!==null&&y!==void 0?y:"";T=`${(v=h==null?void 0:h.name)!==null&&v!==void 0?v:"FetchError"}: ${h==null?void 0:h.message}`,T+=`

Caused by: ${(C=k==null?void 0:k.name)!==null&&C!==void 0?C:"Error"}: ${S}`,I&&(T+=` (${I})`),k!=null&&k.stack&&(T+=`
${k.stack}`)}else T=(E=h==null?void 0:h.stack)!==null&&E!==void 0?E:"";return{error:{message:`${(_=h==null?void 0:h.name)!==null&&_!==void 0?_:"FetchError"}: ${h==null?void 0:h.message}`,details:T,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),p.then(i,o)}returns(){return this}overrideTypes(){return this}}return Wc.default=n,Wc}var dx;function Fb(){if(dx)return Hc;dx=1,Object.defineProperty(Hc,"__esModule",{value:!0});const e=wa.__importDefault(Bb());class n extends e.default{select(i){let o=!1;const c=(i??"*").split("").map(p=>/\s/.test(p)&&!o?"":(p==='"'&&(o=!o),p)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:c,foreignTable:p,referencedTable:h=p}={}){const m=h?`${h}.order`:"order",y=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${y?`${y},`:""}${i}.${o?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:c=o}={}){const p=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(p,`${i}`),this}range(i,o,{foreignTable:c,referencedTable:p=c}={}){const h=typeof p>"u"?"offset":`${p}.offset`,m=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(h,`${i}`),this.url.searchParams.set(m,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:c=!1,buffers:p=!1,wal:h=!1,format:m="text"}={}){var y;const v=[i?"analyze":null,o?"verbose":null,c?"settings":null,p?"buffers":null,h?"wal":null].filter(Boolean).join("|"),C=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${C}"; options=${v};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Hc.default=n,Hc}var hx;function bp(){if(hx)return zc;hx=1,Object.defineProperty(zc,"__esModule",{value:!0});const e=wa.__importDefault(Fb()),n=new RegExp("[,()]");class r extends e.default{eq(o,c){return this.url.searchParams.append(o,`eq.${c}`),this}neq(o,c){return this.url.searchParams.append(o,`neq.${c}`),this}gt(o,c){return this.url.searchParams.append(o,`gt.${c}`),this}gte(o,c){return this.url.searchParams.append(o,`gte.${c}`),this}lt(o,c){return this.url.searchParams.append(o,`lt.${c}`),this}lte(o,c){return this.url.searchParams.append(o,`lte.${c}`),this}like(o,c){return this.url.searchParams.append(o,`like.${c}`),this}likeAllOf(o,c){return this.url.searchParams.append(o,`like(all).{${c.join(",")}}`),this}likeAnyOf(o,c){return this.url.searchParams.append(o,`like(any).{${c.join(",")}}`),this}ilike(o,c){return this.url.searchParams.append(o,`ilike.${c}`),this}ilikeAllOf(o,c){return this.url.searchParams.append(o,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(o,c){return this.url.searchParams.append(o,`ilike(any).{${c.join(",")}}`),this}regexMatch(o,c){return this.url.searchParams.append(o,`match.${c}`),this}regexIMatch(o,c){return this.url.searchParams.append(o,`imatch.${c}`),this}is(o,c){return this.url.searchParams.append(o,`is.${c}`),this}isDistinct(o,c){return this.url.searchParams.append(o,`isdistinct.${c}`),this}in(o,c){const p=Array.from(new Set(c)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(o,`in.(${p})`),this}contains(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cs.{${c.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(c)}`),this}containedBy(o,c){return typeof c=="string"?this.url.searchParams.append(o,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(o,`cd.{${c.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(c)}`),this}rangeGt(o,c){return this.url.searchParams.append(o,`sr.${c}`),this}rangeGte(o,c){return this.url.searchParams.append(o,`nxl.${c}`),this}rangeLt(o,c){return this.url.searchParams.append(o,`sl.${c}`),this}rangeLte(o,c){return this.url.searchParams.append(o,`nxr.${c}`),this}rangeAdjacent(o,c){return this.url.searchParams.append(o,`adj.${c}`),this}overlaps(o,c){return typeof c=="string"?this.url.searchParams.append(o,`ov.${c}`):this.url.searchParams.append(o,`ov.{${c.join(",")}}`),this}textSearch(o,c,{config:p,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const y=p===void 0?"":`(${p})`;return this.url.searchParams.append(o,`${m}fts${y}.${c}`),this}match(o){return Object.entries(o).forEach(([c,p])=>{this.url.searchParams.append(c,`eq.${p}`)}),this}not(o,c,p){return this.url.searchParams.append(o,`not.${c}.${p}`),this}or(o,{foreignTable:c,referencedTable:p=c}={}){const h=p?`${p}.or`:"or";return this.url.searchParams.append(h,`(${o})`),this}filter(o,c,p){return this.url.searchParams.append(o,`${c}.${p}`),this}}return zc.default=r,zc}var fx;function Vb(){if(fx)return Uc;fx=1,Object.defineProperty(Uc,"__esModule",{value:!0});const e=wa.__importDefault(bp());class n{constructor(i,{headers:o={},schema:c,fetch:p}){this.url=i,this.headers=new Headers(o),this.schema=c,this.fetch=p}select(i,o){const{head:c=!1,count:p}=o??{},h=c?"HEAD":"GET";let m=!1;const y=(i??"*").split("").map(v=>/\s/.test(v)&&!m?"":(v==='"'&&(m=!m),v)).join("");return this.url.searchParams.set("select",y),p&&this.headers.append("Prefer",`count=${p}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:c=!0}={}){var p;const h="POST";if(o&&this.headers.append("Prefer",`count=${o}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const m=i.reduce((y,v)=>y.concat(Object.keys(v)),[]);if(m.length>0){const y=[...new Set(m)].map(v=>`"${v}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:c=!1,count:p,defaultToNull:h=!0}={}){var m;const y="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),p&&this.headers.append("Prefer",`count=${p}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const v=i.reduce((C,E)=>C.concat(Object.keys(E)),[]);if(v.length>0){const C=[...new Set(v)].map(E=>`"${E}"`);this.url.searchParams.set("columns",C.join(","))}}return new e.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(i,{count:o}={}){var c;const p="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:i}={}){var o;const c="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Uc.default=n,Uc}var px;function pN(){if(px)return Vc;px=1,Object.defineProperty(Vc,"__esModule",{value:!0});const t=wa,e=t.__importDefault(Vb()),n=t.__importDefault(bp());class r{constructor(o,{headers:c={},schema:p,fetch:h}={}){this.url=o,this.headers=new Headers(c),this.schemaName=p,this.fetch=h}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${o}`);return new e.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,c={},{head:p=!1,get:h=!1,count:m}={}){var y;let v;const C=new URL(`${this.url}/rpc/${o}`);let E;p||h?(v=p?"HEAD":"GET",Object.entries(c).filter(([T,k])=>k!==void 0).map(([T,k])=>[T,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([T,k])=>{C.searchParams.append(T,k)})):(v="POST",E=c);const _=new Headers(this.headers);return m&&_.set("Prefer",`count=${m}`),new n.default({method:v,url:C,headers:_,schema:this.schemaName,body:E,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}}return Vc.default=r,Vc}Object.defineProperty(Fn,"__esModule",{value:!0});var Ub=Fn.PostgrestError=Zb=Fn.PostgrestBuilder=qb=Fn.PostgrestTransformBuilder=Xb=Fn.PostgrestFilterBuilder=$b=Fn.PostgrestQueryBuilder=Hb=Fn.PostgrestClient=void 0;const ba=wa,zb=ba.__importDefault(pN());var Hb=Fn.PostgrestClient=zb.default;const Wb=ba.__importDefault(Vb());var $b=Fn.PostgrestQueryBuilder=Wb.default;const Gb=ba.__importDefault(bp());var Xb=Fn.PostgrestFilterBuilder=Gb.default;const Kb=ba.__importDefault(Fb());var qb=Fn.PostgrestTransformBuilder=Kb.default;const Yb=ba.__importDefault(Bb());var Zb=Fn.PostgrestBuilder=Yb.default;const Qb=ba.__importDefault(Lb());Ub=Fn.PostgrestError=Qb.default;var Jb=Fn.default={PostgrestClient:zb.default,PostgrestQueryBuilder:Wb.default,PostgrestFilterBuilder:Gb.default,PostgrestTransformBuilder:Kb.default,PostgrestBuilder:Yb.default,PostgrestError:Qb.default};const mN=v1({__proto__:null,get PostgrestBuilder(){return Zb},get PostgrestClient(){return Hb},get PostgrestError(){return Ub},get PostgrestFilterBuilder(){return Xb},get PostgrestQueryBuilder(){return $b},get PostgrestTransformBuilder(){return qb},default:Jb},[Fn]),{PostgrestClient:gN,PostgrestQueryBuilder:c9,PostgrestFilterBuilder:u9,PostgrestTransformBuilder:d9,PostgrestBuilder:h9,PostgrestError:f9}=Jb||mN;class xN{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const yN="2.86.0",vN=`realtime-js/${yN}`,eC="1.0.0",wN="2.0.0",mx=eC,O0=1e4,bN=1e3,CN=100;var Ri;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ri||(Ri={}));var rn;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(rn||(rn={}));var Vr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vr||(Vr={}));var R0;(function(t){t.websocket="websocket"})(R0||(R0={}));var ji;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ji||(ji={}));class EN{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var n,r;const i=(r=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},c=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(e,n,r){var i,o;const c=e.topic,p=(i=e.ref)!==null&&i!==void 0?i:"",h=(o=e.join_ref)!==null&&o!==void 0?o:"",m=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(h.length>255)throw new Error(`joinRef length ${h.length} exceeds maximum of 255`);if(p.length>255)throw new Error(`ref length ${p.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const C=this.USER_BROADCAST_PUSH_META_LENGTH+h.length+p.length+c.length+m.length+v.length,E=new ArrayBuffer(this.HEADER_LENGTH+C);let _=new DataView(E),T=0;_.setUint8(T++,this.KINDS.userBroadcastPush),_.setUint8(T++,h.length),_.setUint8(T++,p.length),_.setUint8(T++,c.length),_.setUint8(T++,m.length),_.setUint8(T++,v.length),_.setUint8(T++,n),Array.from(h,S=>_.setUint8(T++,S.charCodeAt(0))),Array.from(p,S=>_.setUint8(T++,S.charCodeAt(0))),Array.from(c,S=>_.setUint8(T++,S.charCodeAt(0))),Array.from(m,S=>_.setUint8(T++,S.charCodeAt(0))),Array.from(v,S=>_.setUint8(T++,S.charCodeAt(0)));var k=new Uint8Array(E.byteLength+r.byteLength);return k.set(new Uint8Array(E),0),k.set(new Uint8Array(r),E.byteLength),k.buffer}decode(e,n){if(this._isArrayBuffer(e)){let r=this._binaryDecode(e);return n(r)}if(typeof e=="string"){const r=JSON.parse(e),[i,o,c,p,h]=r;return n({join_ref:i,ref:o,topic:c,event:p,payload:h})}return n({})}_binaryDecode(e){const n=new DataView(e),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,i)}}_decodeUserBroadcast(e,n,r){const i=n.getUint8(1),o=n.getUint8(2),c=n.getUint8(3),p=n.getUint8(4);let h=this.HEADER_LENGTH+4;const m=r.decode(e.slice(h,h+i));h=h+i;const y=r.decode(e.slice(h,h+o));h=h+o;const v=r.decode(e.slice(h,h+c));h=h+c;const C=e.slice(h,e.byteLength),E=p===this.JSON_ENCODING?JSON.parse(r.decode(C)):C,_={type:this.BROADCAST_EVENT,event:y,payload:E};return c>0&&(_.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([r])=>n.includes(r)))}}class tC{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(dt||(dt={}));const gx=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,c)=>(o[c]=SN(c,t,e,i),o),{}):{}},SN=(t,e,n,r)=>{const i=e.find(p=>p.name===t),o=i==null?void 0:i.type,c=n[t];return o&&!r.includes(o)?nC(o,c):j0(c)},nC=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return TN(e,n)}switch(t){case dt.bool:return _N(e);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return AN(e);case dt.json:case dt.jsonb:return NN(e);case dt.timestamp:return IN(e);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return j0(e);default:return j0(e)}},j0=t=>t,_N=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},AN=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},NN=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},TN=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const c=t.slice(1,n);try{o=JSON.parse("["+c+"]")}catch{o=c?c.split(","):[]}return o.map(p=>nC(e,p))}return t},IN=t=>typeof t=="string"?t.replace(" ","T"):t,rC=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class tf{constructor(e,n,r={},i=O0){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var xx;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(xx||(xx={}));class fl{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:o,onLeave:c,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fl.syncState(this.state,i,o,c),this.pendingDiffs.forEach(h=>{this.state=fl.syncDiff(this.state,h,o,c)}),this.pendingDiffs=[],p()}),this.channel._on(r.diff,{},i=>{const{onJoin:o,onLeave:c,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=fl.syncDiff(this.state,i,o,c),p())}),this.onJoin((i,o,c)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:c})}),this.onLeave((i,o,c)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const o=this.cloneDeep(e),c=this.transformState(n),p={},h={};return this.map(o,(m,y)=>{c[m]||(h[m]=y)}),this.map(c,(m,y)=>{const v=o[m];if(v){const C=y.map(k=>k.presence_ref),E=v.map(k=>k.presence_ref),_=y.filter(k=>E.indexOf(k.presence_ref)<0),T=v.filter(k=>C.indexOf(k.presence_ref)<0);_.length>0&&(p[m]=_),T.length>0&&(h[m]=T)}else p[m]=y}),this.syncDiff(o,{joins:p,leaves:h},r,i)}static syncDiff(e,n,r,i){const{joins:o,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(p,h)=>{var m;const y=(m=e[p])!==null&&m!==void 0?m:[];if(e[p]=this.cloneDeep(h),y.length>0){const v=e[p].map(E=>E.presence_ref),C=y.filter(E=>v.indexOf(E.presence_ref)<0);e[p].unshift(...C)}r(p,y,h)}),this.map(c,(p,h)=>{let m=e[p];if(!m)return;const y=h.map(v=>v.presence_ref);m=m.filter(v=>y.indexOf(v.presence_ref)<0),e[p]=m,i(p,m,h),m.length===0&&delete e[p]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yx;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(yx||(yx={}));var pl;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(pl||(pl={}));var gs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(gs||(gs={}));class Cp{constructor(e,n={config:{}},r){var i,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=rn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new tf(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new tC(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rn.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=rn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(c,p)=>{this._trigger(this._replyEventName(p),c)}),this.presence=new fl(this),this.broadcastEndpointURL=rC(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==rn.closed){const{config:{broadcast:c,presence:p,private:h}}=this.params,m=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(E=>E.filter))!==null&&i!==void 0?i:[],y=!!this.bindings[pl.PRESENCE]&&this.bindings[pl.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,v={},C={broadcast:c,presence:Object.assign(Object.assign({},p),{enabled:y}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(E=>e==null?void 0:e(gs.CHANNEL_ERROR,E)),this._onClose(()=>e==null?void 0:e(gs.CLOSED)),this.updateJoinPayload(Object.assign({config:C},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:E})=>{var _;if(this.socket.setAuth(),E===void 0){e==null||e(gs.SUBSCRIBED);return}else{const T=this.bindings.postgres_changes,k=(_=T==null?void 0:T.length)!==null&&_!==void 0?_:0,S=[];for(let I=0;I<k;I++){const N=T[I],{filter:{event:M,schema:F,table:V,filter:B}}=N,z=E&&E[I];if(z&&z.event===M&&z.schema===F&&z.table===V&&z.filter===B)S.push(Object.assign(Object.assign({},N),{id:z.id}));else{this.unsubscribe(),this.state=rn.errored,e==null||e(gs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(gs.SUBSCRIBED);return}}).receive("error",E=>{this.state=rn.errored,e==null||e(gs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===rn.joined&&e===pl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(p.status===202)return{success:!0};let h=p.statusText;try{const m=await p.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:c}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=m.body)===null||i===void 0?void 0:i.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var c,p,h;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(p=(c=this.params)===null||c===void 0?void 0:c.config)===null||p===void 0?void 0:p.broadcast)===null||h===void 0)&&h.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new tf(this,Vr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=rn.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,o=setTimeout(()=>i.abort(),r),c=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),c}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new tf(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>CN){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,o;const c=e.toLocaleLowerCase(),{close:p,error:h,leave:m,join:y}=Vr;if(r&&[p,h,m,y].indexOf(c)>=0&&r!==this._joinRef())return;let C=this._onMessage(c,n,r);if(n&&!C)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(E=>{var _,T,k;return((_=E.filter)===null||_===void 0?void 0:_.event)==="*"||((k=(T=E.filter)===null||T===void 0?void 0:T.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===c}).map(E=>E.callback(C,r)):(o=this.bindings[c])===null||o===void 0||o.filter(E=>{var _,T,k,S,I,N;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in E){const M=E.id,F=(_=E.filter)===null||_===void 0?void 0:_.event;return M&&((T=n.ids)===null||T===void 0?void 0:T.includes(M))&&(F==="*"||(F==null?void 0:F.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const M=(I=(S=E==null?void 0:E.filter)===null||S===void 0?void 0:S.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return M==="*"||M===((N=n==null?void 0:n.event)===null||N===void 0?void 0:N.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===c}).map(E=>{if(typeof C=="object"&&"ids"in C){const _=C.data,{schema:T,table:k,commit_timestamp:S,type:I,errors:N}=_;C=Object.assign(Object.assign({},{schema:T,table:k,commit_timestamp:S,eventType:I,new:{},old:{},errors:N}),this._getPayloadRecords(_))}E.callback(C,r)})}_isClosed(){return this.state===rn.closed}_isJoined(){return this.state===rn.joined}_isJoining(){return this.state===rn.joining}_isLeaving(){return this.state===rn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Cp.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vr.close,{},e)}_onError(e){this._on(Vr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=gx(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=gx(e.columns,e.old_record)),n}}const nf=()=>{},Gc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},kN=[1e3,2e3,5e3,1e4],ON=1e4,RN=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class jN{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=O0,this.transport=null,this.heartbeatIntervalMs=Gc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=nf,this.ref=0,this.reconnectTimer=null,this.vsn=mx,this.logger=nf,this.conn=null,this.sendBuffer=[],this.serializer=new EN,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${R0.websocket}`,this.httpEndpoint=rC(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=xN.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return ji.Connecting;case Ri.open:return ji.Open;case Ri.closing:return ji.Closing;default:return ji.Closed}}isConnected(){return this.connectionState()===ji.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{const o=new Cp(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:i,ref:o}=e,c=()=>{this.encode(e,p=>{var h;(h=this.conn)===null||h===void 0||h.send(p)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(bN,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Gc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:o,ref:c}=n,p=c?`(${c})`:"",h=o.status||"";this.log("receive",`${h} ${r} ${i} ${p}`.trim(),o),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(i,o,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ri.open||this.conn.readyState===Ri.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([RN],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:vN};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Vr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new tC(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Gc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,o,c,p,h,m,y,v,C,E;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:O0,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Gc.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(c=e==null?void 0:e.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(p=e==null?void 0:e.heartbeatCallback)!==null&&p!==void 0?p:nf,this.vsn=(h=e==null?void 0:e.vsn)!==null&&h!==void 0?h:mx,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=e==null?void 0:e.reconnectAfterMs)!==null&&m!==void 0?m:_=>kN[_-1]||ON,this.vsn){case eC:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(_,T)=>T(JSON.stringify(_)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(_,T)=>T(JSON.parse(_));break;case wN:this.encode=(C=e==null?void 0:e.encode)!==null&&C!==void 0?C:this.serializer.encode.bind(this.serializer),this.decode=(E=e==null?void 0:e.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function At(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class PN extends Vd{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class P0 extends Vd{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Ep=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),MN=()=>Response,M0=t=>{if(Array.isArray(t))return t.map(n=>M0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=M0(r)}),e},DN=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},LN=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),rf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},BN=(t,e,n)=>ye(void 0,void 0,void 0,function*(){const r=yield MN();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,c=(i==null?void 0:i.statusCode)||o+"";e(new PN(rf(i),o,c))}).catch(i=>{e(new P0(rf(i),i))}):e(new P0(rf(t),t))}),FN=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(DN(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function ic(t,e,n,r,i,o){return ye(this,void 0,void 0,function*(){return new Promise((c,p)=>{t(n,FN(e,r,i,o)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>c(h)).catch(h=>BN(h,p,r))})})}function Vl(t,e,n,r){return ye(this,void 0,void 0,function*(){return ic(t,"GET",e,n,r)})}function Br(t,e,n,r,i){return ye(this,void 0,void 0,function*(){return ic(t,"POST",e,r,i,n)})}function D0(t,e,n,r,i){return ye(this,void 0,void 0,function*(){return ic(t,"PUT",e,r,i,n)})}function VN(t,e,n,r){return ye(this,void 0,void 0,function*(){return ic(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Sp(t,e,n,r,i){return ye(this,void 0,void 0,function*(){return ic(t,"DELETE",e,r,i,n)})}class UN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ye(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}var sC;class zN{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[sC]="BlobDownloadBuilder",this.promise=null}asStream(){return new UN(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ye(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(At(e))return{data:null,error:e};throw e}})}}sC=Symbol.toStringTag;const HN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class WN{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Ep(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return ye(this,void 0,void 0,function*(){try{let o;const c=Object.assign(Object.assign({},vx),i);let p=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(c.upsert)});const h=c.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",c.cacheControl),h&&o.append("metadata",this.encodeMetadata(h)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",c.cacheControl),h&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(h))):(o=r,p["cache-control"]=`max-age=${c.cacheControl}`,p["content-type"]=c.contentType,h&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(h))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!c.duplex&&(c.duplex="half")),i!=null&&i.headers&&(p=Object.assign(Object.assign({},p),i.headers));const m=this._removeEmptyFolders(n),y=this._getFinalPath(m),v=yield(e=="PUT"?D0:Br)(this.fetch,`${this.url}/object/${y}`,o,Object.assign({headers:p},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:v.Id,fullPath:v.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(At(o))return{data:null,error:o};throw o}})}upload(e,n,r){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return ye(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),c=this._getFinalPath(o),p=new URL(this.url+`/object/upload/sign/${c}`);p.searchParams.set("token",n);try{let h;const m=Object.assign({upsert:vx.upsert},i),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",m.cacheControl)):(h=r,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType);const v=yield D0(this.fetch,p.toString(),h,{headers:y});return{data:{path:o,fullPath:v.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(At(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const o=yield Br(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),c=new URL(this.url+o.url),p=c.searchParams.get("token");if(!p)throw new Vd("No token returned by API");return{data:{signedUrl:c.toString(),path:e,token:p},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}update(e,n,r){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ye(this,void 0,void 0,function*(){try{return{data:yield Br(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}copy(e,n,r){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Br(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return ye(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield Br(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const c=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${c}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return ye(this,void 0,void 0,function*(){try{const i=yield Br(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=o?`?${o}`:"",p=this._getFinalPath(e),h=()=>Vl(this.fetch,`${this.url}/${i}/${p}${c}`,{headers:this.headers,noResolveJson:!0});return new zN(h,this.shouldThrowOnError)}info(e){return ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Vl(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:M0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}exists(e){return ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield VN(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r)&&r instanceof P0){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&i.push(o);const p=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&i.push(h);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${r}${m}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Sp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}list(e,n,r){return ye(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},HN),n),{prefix:e||""});return{data:yield Br(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}listV2(e,n){return ye(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Br(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const iC="2.86.0",oC={"X-Client-Info":`storage-js/${iC}`};class $N{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oC),n),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ye(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Vl(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}createBucket(e){return ye(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Br(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(At(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ye(this,void 0,void 0,function*(){try{return{data:yield D0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(At(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Br(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Sp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Ul=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function GN(t,e,n){const r=new URL(e,t);if(n)for(const[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function XN(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function KN(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:c}){const p=GN(t.baseUrl,r,i),h=await XN(t.auth),m=await e(p,{method:n,headers:{...o?{"Content-Type":"application/json"}:{},...h,...c},body:o?JSON.stringify(o):void 0}),y=await m.text(),v=(m.headers.get("content-type")||"").includes("application/json"),C=v&&y?JSON.parse(y):y;if(!m.ok){const E=v?C:void 0,_=E==null?void 0:E.error;throw new Ul((_==null?void 0:_.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:E})}return{status:m.status,headers:m.headers,data:C}}}}function Xc(t){return t.join("")}var qN=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:Xc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Xc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Xc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Xc(t.namespace)}`}),!0}catch(e){if(e instanceof Ul&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof Ul&&n.status===409)return;throw n}}};function xo(t){return t.join("")}var YN=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${xo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof Ul&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof Ul&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},ZN=class{constructor(t){var r;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=KN({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(r=t.accessDelegation)==null?void 0:r.join(","),this.namespaceOps=new qN(this.client,e),this.tableOps=new YN(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class QN{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oC),n),this.fetch=Ep(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Br(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}listBuckets(e){return ye(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Vl(this.fetch,i,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Sp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(At(n))return{data:null,error:n};throw n}})}from(e){if(!LN(e))throw new Vd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new ZN({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>ye(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const _p={"X-Client-Info":`storage-js/${iC}`,"Content-Type":"application/json"};class aC extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function cr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class sf extends aC{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class JN extends aC{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var wx;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(wx||(wx={}));const Ap=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),e8=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},bx=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),t8=(t,e,n)=>ye(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(c=>{const p=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||i+"";e(new sf(bx(c),i,p))}).catch(()=>{const c=i+"",p=o.statusText||`HTTP ${i} error`;e(new sf(p,i,c))});else{const c=i+"",p=o.statusText||`HTTP ${i} error`;e(new sf(p,i,c))}}else e(new JN(bx(t),t))}),n8=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(e8(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n)):i};function r8(t,e,n,r,i,o){return ye(this,void 0,void 0,function*(){return new Promise((c,p)=>{t(n,n8(e,r,i,o)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>c(h)).catch(h=>t8(h,p,r))})})}function ur(t,e,n,r,i){return ye(this,void 0,void 0,function*(){return r8(t,"POST",e,r,i,n)})}class s8{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),n),this.fetch=Ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ye(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}})}listIndexes(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ye(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cr(r))return{data:null,error:r};throw r}})}}class i8{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),n),this.fetch=Ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}getVectors(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}listVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ur(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}queryVectors(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ur(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}}class o8{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},_p),n),this.fetch=Ap(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield ur(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}listBuckets(){return ye(this,arguments,void 0,function*(e={}){try{return{data:yield ur(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield ur(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(cr(n))return{data:null,error:n};throw n}})}}class a8 extends o8{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new l8(this.url,this.headers,e,this.fetch)}createBucket(e){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return ye(this,void 0,void 0,function*(){return n.createBucket.call(this,e)})}getBucket(e){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return ye(this,void 0,void 0,function*(){return n.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return ye(this,arguments,void 0,function*(n={}){return e.listBuckets.call(this,n)})}deleteBucket(e){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return ye(this,void 0,void 0,function*(){return n.deleteBucket.call(this,e)})}}class l8 extends s8{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ye(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ye(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ye(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ye(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new c8(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class c8 extends i8{constructor(e,n,r,i,o){super(e,n,o),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ye(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ye(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ye(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ye(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ye(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class u8 extends $N{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new WN(this.url,this.headers,e,this.fetch)}get vectors(){return new a8(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new QN(this.url+"/iceberg",this.headers,this.fetch)}}const d8="2.86.0";let el="";typeof Deno<"u"?el="deno":typeof document<"u"?el="web":typeof navigator<"u"&&navigator.product==="ReactNative"?el="react-native":el="node";const h8={"X-Client-Info":`supabase-js-${el}/${d8}`},f8={headers:h8},p8={schema:"public"},m8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},g8={},x8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),y8=()=>Headers,v8=(t,e,n)=>{const r=x8(n),i=y8();return async(o,c)=>{var p;const h=(p=await e())!==null&&p!==void 0?p:t;let m=new i(c==null?void 0:c.headers);return m.has("apikey")||m.set("apikey",t),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),r(o,Object.assign(Object.assign({},c),{headers:m}))}};function w8(t){return t.endsWith("/")?t:t+"/"}function b8(t,e){var n,r;const{db:i,auth:o,realtime:c,global:p}=t,{db:h,auth:m,realtime:y,global:v}=e,C={db:Object.assign(Object.assign({},h),i),auth:Object.assign(Object.assign({},m),o),realtime:Object.assign(Object.assign({},y),c),storage:{},global:Object.assign(Object.assign(Object.assign({},v),p),{headers:Object.assign(Object.assign({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(r=p==null?void 0:p.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?C.accessToken=t.accessToken:delete C.accessToken,C}function C8(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(w8(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const lC="2.86.0",So=30*1e3,L0=3,of=L0*So,E8="http://localhost:9999",S8="supabase.auth.token",_8={"X-Client-Info":`gotrue-js/${lC}`},B0="X-Supabase-Api-Version",cC={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},A8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,N8=10*60*1e3;class zl extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function Ee(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class T8 extends zl{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function I8(t){return Ee(t)&&t.name==="AuthApiError"}class Pi extends zl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class xi extends zl{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class or extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function k8(t){return Ee(t)&&t.name==="AuthSessionMissingError"}class yo extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kc extends xi{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qc extends xi{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function O8(t){return Ee(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cx extends xi{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class F0 extends xi{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function af(t){return Ee(t)&&t.name==="AuthRetryableFetchError"}class Ex extends xi{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class V0 extends xi{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Qu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Sx=` 	
\r=`.split(""),R8=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Sx.length;e+=1)t[Sx[e].charCodeAt(0)]=-2;for(let e=0;e<Qu.length;e+=1)t[Qu[e].charCodeAt(0)]=e;return t})();function _x(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Qu[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Qu[r]),e.queuedBits-=6}}function uC(t,e,n){const r=R8[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Ax(t){const e=[],n=c=>{e.push(String.fromCodePoint(c))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=c=>{M8(c,r,n)};for(let c=0;c<t.length;c+=1)uC(t.charCodeAt(c),i,o);return e.join("")}function j8(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function P8(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}j8(r,e)}}function M8(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Jo(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)uC(t.charCodeAt(i),n,r);return new Uint8Array(e)}function D8(t){const e=[];return P8(t,n=>e.push(n)),new Uint8Array(e)}function Bi(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>_x(i,n,r)),_x(null,n,r),e.join("")}function L8(t){return Math.round(Date.now()/1e3)+t}function B8(){return Symbol("auth-callback")}const yn=()=>typeof window<"u"&&typeof document<"u",Si={tested:!1,writable:!1},dC=()=>{if(!yn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Si.tested)return Si.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Si.tested=!0,Si.writable=!0}catch{Si.tested=!0,Si.writable=!1}return Si.writable};function F8(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const hC=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),V8=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",_o=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},_i=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},zs=async(t,e)=>{await t.removeItem(e)};class Ud{constructor(){this.promise=new Ud.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ud.promiseConstructor=Promise;function lf(t){const e=t.split(".");if(e.length!==3)throw new V0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!A8.test(e[r]))throw new V0("JWT not in base64url format");return{header:JSON.parse(Ax(e[0])),payload:JSON.parse(Ax(e[1])),signature:Jo(e[2]),raw:{header:e[0],payload:e[1]}}}async function U8(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function z8(t,e){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const c=await t(o);if(!e(o,null,c)){r(c);return}}catch(c){if(!e(o,c)){i(c);return}}})()})}function H8(t){return("0"+t.toString(16)).substr(-2)}function W8(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,H8).join("")}async function $8(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function G8(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await $8(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function vo(t,e,n=!1){const r=W8();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await _o(t,`${e}-code-verifier`,i);const o=await G8(r);return[o,r===o?"plain":"s256"]}const X8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function K8(t){const e=t.headers.get(B0);if(!e||!e.match(X8))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function q8(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Y8(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Z8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wo(t){if(!Z8.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function cf(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Q8(t,e){return new Proxy(t,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,i)}})}function Nx(t){return JSON.parse(JSON.stringify(t))}const Ii=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),J8=[502,503,504];async function Tx(t){var e;if(!V8(t))throw new F0(Ii(t),0);if(J8.includes(t.status))throw new F0(Ii(t),t.status);let n;try{n=await t.json()}catch(o){throw new Pi(Ii(o),o)}let r;const i=K8(t);if(i&&i.getTime()>=cC["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Ex(Ii(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new or}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0))throw new Ex(Ii(n),t.status,n.weak_password.reasons);throw new T8(Ii(n),t.status||500,r)}const eT=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function Re(t,e,n,r){var i;const o=Object.assign({},r==null?void 0:r.headers);o[B0]||(o[B0]=cC["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const c=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(c.redirect_to=r.redirectTo);const p=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",h=await tT(t,e,n+p,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function tT(t,e,n,r,i,o){const c=eT(e,r,i,o);let p;try{p=await t(n,Object.assign({},c))}catch(h){throw console.error(h),new F0(Ii(h),0)}if(p.ok||await Tx(p),r!=null&&r.noResolveJson)return p;try{return await p.json()}catch(h){await Tx(h)}}function Mr(t){var e;let n=null;sT(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=L8(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function Ix(t){const e=Mr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function qs(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function nT(t){return{data:t,error:null}}function rT(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=t,c=va(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},h=Object.assign({},c);return{data:{properties:p,user:h},error:null}}function kx(t){return t}function sT(t){return t.access_token&&t.refresh_token&&t.expires_in}const uf=["global","local","others"];class iT{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=hC(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=uf[0]){if(uf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uf.join(", ")}`);try{return await Re(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await Re(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qs})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=va(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await Re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:rT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ee(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qs})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,o,c,p,h;try{const m={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kx});if(y.error)throw y.error;const v=await y.json(),C=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(h=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&h!==void 0?h:[];return E.length>0&&(E.forEach(_=>{const T=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);m[`${k}Page`]=T}),m.total=parseInt(C)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Ee(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){wo(e);try{return await Re(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qs})}catch(n){if(Ee(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){wo(e);try{return await Re(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:qs})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){wo(e);try{return await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:qs})}catch(r){if(Ee(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){wo(e.userId);try{const{data:n,error:r}=await Re(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _deleteFactor(e){wo(e.userId),wo(e.id);try{return{data:await Re(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,o,c,p,h;try{const m={nextPage:null,lastPage:0,total:0},y=await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:kx});if(y.error)throw y.error;const v=await y.json(),C=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,E=(h=(p=y.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&h!==void 0?h:[];return E.length>0&&(E.forEach(_=>{const T=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(_.split(";")[1].split("=")[1]);m[`${k}Page`]=T}),m.total=parseInt(C)),{data:Object.assign(Object.assign({},v),m),error:null}}catch(m){if(Ee(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Re(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Re(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Ee(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await Re(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ee(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Re(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ee(n))return{data:null,error:n};throw n}}}function Ox(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const bo={debug:!!(globalThis&&dC()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fC extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class oT extends fC{}async function aT(t,e,n){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new oT(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function lT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function pC(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function cT(t){return parseInt(t,16)}function uT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function dT(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:c,notBefore:p,requestId:h,resources:m,scheme:y,uri:v,version:C}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(C!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${C}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const E=pC(t.address),_=y?`${y}://${r}`:r,T=t.statement?`${t.statement}
`:"",k=`${_} wants you to sign in with your Ethereum account:
${E}

${T}`;let S=`URI: ${v}
Version: ${C}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${o.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),p&&(S+=`
Not Before: ${p.toISOString()}`),h&&(S+=`
Request ID: ${h}`),m){let I=`
Resources:`;for(const N of m){if(!N||typeof N!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${N}`);I+=`
- ${N}`}S+=I}return`${k}
${S}`}class Gt extends Error{constructor({message:e,code:n,cause:r,name:i}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Ju extends Gt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function hT({error:t,options:e}){var n,r,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Gt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Gt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Gt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Gt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new Gt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Gt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const c=window.location.hostname;if(mC(c)){if(o.rp.id!==c)return new Gt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Gt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function fT({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Gt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Gt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(mC(r)){if(n.rpId!==r)return new Gt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Gt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Gt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Gt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class pT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const mT=new pT;function gT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=va(t,["challenge","user","excludeCredentials"]),o=Jo(e).buffer,c=Object.assign(Object.assign({},n),{id:Jo(n.id).buffer}),p=Object.assign(Object.assign({},i),{challenge:o,user:c});if(r&&r.length>0){p.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];p.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Jo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return p}function xT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=va(t,["challenge","allowCredentials"]),i=Jo(e).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const p=n[c];o.allowCredentials[c]=Object.assign(Object.assign({},p),{id:Jo(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return o}function yT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Bi(new Uint8Array(t.response.attestationObject)),clientDataJSON:Bi(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function vT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Bi(new Uint8Array(i.authenticatorData)),clientDataJSON:Bi(new Uint8Array(i.clientDataJSON)),signature:Bi(new Uint8Array(i.signature)),userHandle:i.userHandle?Bi(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function mC(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function Rx(){var t,e;return!!(yn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function wT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ju("Browser returned unexpected credential type",e)}:{data:null,error:new Ju("Empty credential response",e)}}catch(e){return{data:null,error:hT({error:e,options:t})}}}async function bT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Ju("Browser returned unexpected credential type",e)}:{data:null,error:new Ju("Empty credential response",e)}}catch(e){return{data:null,error:fT({error:e,options:t})}}}const CT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ET={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function ed(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const o in i){const c=i[o];if(c!==void 0)if(Array.isArray(c))r[o]=c;else if(n(c))r[o]=c;else if(e(c)){const p=r[o];e(p)?r[o]=ed(p,c):r[o]=ed(c)}else r[o]=c}return r}function ST(t,e){return ed(CT,t,e||{})}function _T(t,e){return ed(ET,t,e||{})}class AT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},o){try{const{data:c,error:p}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!c)return{data:null,error:p};const h=i??mT.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=ST(c.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:y,error:v}=await wT({publicKey:m,signal:h});return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const m=_T(c.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:y,error:v}=await bT(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:h}));return y?{data:{factorId:e,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Pi("Unexpected error in challenge",c)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zl("rpId is required for WebAuthn authentication")};try{if(!Rx())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!c)return{data:null,error:p};const{webauthn:h}=c;return this._verify({factorId:e,challengeId:c.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Pi("Unexpected error in authenticate",c)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new zl("rpId is required for WebAuthn registration")};try{if(!Rx())return{data:null,error:new Pi("Browser does not support WebAuthn",null)};const{data:c,error:p}=await this._enroll({friendlyName:e});if(!c)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(C=>C.factor_type==="webauthn"&&C.friendly_name===e&&C.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:p};const{data:h,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return h?this._verify({factorId:c.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(c){return Ee(c)?{data:null,error:c}:{data:null,error:new Pi("Unexpected error in register",c)}}}}lT();const NT={url:E8,storageKey:S8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:_8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function jx(t,e,n){return await n()}const Co={};class Hl{get jwks(){var e,n;return(n=(e=Co[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Co[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},NT),e);if(this.storageKey=o.storageKey,this.instanceID=(n=Hl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,Hl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&yn()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new iT({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=hC(o.fetch),this.lock=o.lock||jx,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:yn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=aT:this.lock=jx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new AT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:dC()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Ox(this.memoryStorage)),yn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${lC}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(yn()&&(n=F8(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),yn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),O8(o)){const h=(e=o.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:c,redirectType:p}=i;return this._debug("#_initialize()","detected session in URL",c,"redirect type",p),await this._saveSession(c),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ee(n)?this._returnResult({error:n}):this._returnResult({error:new Pi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const o=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Mr}),{data:c,error:p}=o;if(p||!c)return this._returnResult({data:{user:null,session:null},error:p});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(Ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,i;try{let o;if("email"in e){const{email:y,password:v,options:C}=e;let E=null,_=null;this.flowType==="pkce"&&([E,_]=await vo(this.storage,this.storageKey)),o=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:C==null?void 0:C.emailRedirectTo,body:{email:y,password:v,data:(n=C==null?void 0:C.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken},code_challenge:E,code_challenge_method:_},xform:Mr})}else if("phone"in e){const{phone:y,password:v,options:C}=e;o=await Re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(r=C==null?void 0:C.data)!==null&&r!==void 0?r:{},channel:(i=C==null?void 0:C.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:Mr})}else throw new Kc("You must provide either an email or phone number and a password");const{data:c,error:p}=o;if(p||!c)return this._returnResult({data:{user:null,session:null},error:p});const h=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(o){if(Ee(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:c,options:p}=e;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ix})}else if("phone"in e){const{phone:o,password:c,options:p}=e;n=await Re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:c,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Ix})}else throw new Kc("You must provide either an email or phone number and a password");const{data:r,error:i}=n;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!r||!r.session||!r.user){const o=new yo;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(Ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,o,c,p,h,m,y,v,C;let E,_;if("message"in e)E=e.message,_=e.signature;else{const{chain:T,wallet:k,statement:S,options:I}=e;let N;if(yn())if(typeof k=="object")N=k;else{const H=window;if("ethereum"in H&&typeof H.ethereum=="object"&&"request"in H.ethereum&&typeof H.ethereum.request=="function")N=H.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=k}const M=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href),F=await N.request({method:"eth_requestAccounts"}).then(H=>H).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!F||F.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const V=pC(F[0]);let B=(r=I==null?void 0:I.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!B){const H=await N.request({method:"eth_chainId"});B=cT(H)}const z={domain:M.host,address:V,statement:S,uri:M.href,version:"1",chainId:B,nonce:(i=I==null?void 0:I.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(c=(o=I==null?void 0:I.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(h=I==null?void 0:I.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=I==null?void 0:I.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=I==null?void 0:I.signInWithEthereum)===null||y===void 0?void 0:y.resources};E=dT(z),_=await N.request({method:"personal_sign",params:[uT(E),V]})}try{const{data:T,error:k}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:_},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Mr});if(k)throw k;if(!T||!T.session||!T.user){const S=new yo;return this._returnResult({data:{user:null,session:null},error:S})}return T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:k})}catch(T){if(Ee(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}}async signInWithSolana(e){var n,r,i,o,c,p,h,m,y,v,C,E;let _,T;if("message"in e)_=e.message,T=e.signature;else{const{chain:k,wallet:S,statement:I,options:N}=e;let M;if(yn())if(typeof S=="object")M=S;else{const V=window;if("solana"in V&&typeof V.solana=="object"&&("signIn"in V.solana&&typeof V.solana.signIn=="function"||"signMessage"in V.solana&&typeof V.solana.signMessage=="function"))M=V.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(N!=null&&N.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=S}const F=new URL((n=N==null?void 0:N.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const V=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},N==null?void 0:N.signInWithSolana),{version:"1",domain:F.host,uri:F.href}),I?{statement:I}:null));let B;if(Array.isArray(V)&&V[0]&&typeof V[0]=="object")B=V[0];else if(V&&typeof V=="object"&&"signedMessage"in V&&"signature"in V)B=V;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in B&&"signature"in B&&(typeof B.signedMessage=="string"||B.signedMessage instanceof Uint8Array)&&B.signature instanceof Uint8Array)_=typeof B.signedMessage=="string"?B.signedMessage:new TextDecoder().decode(B.signedMessage),T=B.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${F.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${F.href}`,`Issued At: ${(i=(r=N==null?void 0:N.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=N==null?void 0:N.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${N.signInWithSolana.notBefore}`]:[],...!((c=N==null?void 0:N.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${N.signInWithSolana.expirationTime}`]:[],...!((p=N==null?void 0:N.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${N.signInWithSolana.chainId}`]:[],...!((h=N==null?void 0:N.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${N.signInWithSolana.nonce}`]:[],...!((m=N==null?void 0:N.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${N.signInWithSolana.requestId}`]:[],...!((v=(y=N==null?void 0:N.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",...N.signInWithSolana.resources.map(B=>`- ${B}`)]:[]].join(`
`);const V=await M.signMessage(new TextEncoder().encode(_),"utf8");if(!V||!(V instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=V}}try{const{data:k,error:S}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Bi(T)},!((C=e.options)===null||C===void 0)&&C.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Mr});if(S)throw S;if(!k||!k.session||!k.user){const I=new yo;return this._returnResult({data:{user:null,session:null},error:I})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:S})}catch(k){if(Ee(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async _exchangeCodeForSession(e){const n=await _i(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:o,error:c}=await Re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Mr});if(await zs(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!o||!o.session||!o.user){const p=new yo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:c})}catch(o){if(Ee(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:o,nonce:c}=e,p=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:o,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Mr}),{data:h,error:m}=p;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!h||!h.session||!h.user){const y=new yo;return this._returnResult({data:{user:null,session:null},error:y})}return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),this._returnResult({data:h,error:m})}catch(n){if(Ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,i,o,c;try{if("email"in e){const{email:p,options:h}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await vo(this.storage,this.storageKey));const{error:v}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:p,options:h}=e,{data:m,error:y}=await Re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(i=h==null?void 0:h.data)!==null&&i!==void 0?i:{},create_user:(o=h==null?void 0:h.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(c=h==null?void 0:h.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:y})}throw new Kc("You must provide either an email or phone number.")}catch(p){if(Ee(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(e){var n,r;try{let i,o;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:c,error:p}=await Re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:Mr});if(p)throw p;if(!c)throw new Error("An error occurred on token verification.");const h=c.session,m=c.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),this._returnResult({data:{user:m,session:h},error:null})}catch(i){if(Ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var n,r,i,o,c;try{let p=null,h=null;this.flowType==="pkce"&&([p,h]=await vo(this.storage,this.storageKey));const m=await Re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:h}),headers:this.headers,xform:nT});return!((o=m.data)===null||o===void 0)&&o.url&&yn()&&!(!((c=e.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(p){if(Ee(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new or;const{error:i}=await Re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(Ee(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:o}=e,{error:c}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in e){const{phone:r,type:i,options:o}=e,{data:c,error:p}=await Re(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:p})}throw new Kc("You must provide either an email or phone number and a type")}catch(n){if(Ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<of:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const c=await _i(this.userStorage,this.storageKey+"-user");c!=null&&c.user?e.user=c.user:e.user=cf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};e.user=Q8(e.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qs}):await this._useSession(async n=>{var r,i,o;const{data:c,error:p}=n;if(p)throw p;return!(!((r=c.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new or}:await Re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=c.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:qs})})}catch(n){if(Ee(n))return k8(n)&&(await this._removeSession(),await zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:o}=r;if(o)throw o;if(!i.session)throw new or;const c=i.session;let p=null,h=null;this.flowType==="pkce"&&e.email!=null&&([p,h]=await vo(this.storage,this.storageKey));const{data:m,error:y}=await Re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:p,code_challenge_method:h}),jwt:c.access_token,xform:qs});if(y)throw y;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(r){if(Ee(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new or;const n=Date.now()/1e3;let r=n,i=!0,o=null;const{payload:c}=lf(e.access_token);if(c.exp&&(r=c.exp,i=r<=n),i){const{data:p,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return this._returnResult({data:{user:null,session:null},error:h});if(!p)return{data:{user:null,session:null},error:null};o=p}else{const{data:p,error:h}=await this._getUser(e.access_token);if(h)throw h;o={access_token:e.access_token,refresh_token:e.refresh_token,user:p.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(Ee(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:c,error:p}=n;if(p)throw p;e=(r=c.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new or;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ee(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!yn())throw new qc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cx("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cx("No code detected.");const{data:I,error:N}=await this._exchangeCodeForSession(e.code);if(N)throw N;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:o,refresh_token:c,expires_in:p,expires_at:h,token_type:m}=e;if(!o||!p||!c||!m)throw new qc("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(p);let C=y+v;h&&(C=parseInt(h));const E=C-y;E*1e3<=So&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${v}s`);const _=C-v;y-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,C,y):y-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,C,y);const{data:T,error:k}=await this._getUser(o);if(k)throw k;const S={provider_token:r,provider_refresh_token:i,access_token:o,expires_in:v,expires_at:C,refresh_token:c,token_type:m,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:S,redirectType:e.type},error:null})}catch(r){if(Ee(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({error:o});const c=(r=i.session)===null||r===void 0?void 0:r.access_token;if(c){const{error:p}=await this.admin.signOut(c,e);if(p&&!(I8(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return e!=="others"&&(await this._removeSession(),await zs(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=B8(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:o},error:c}=n;if(c)throw c;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await vo(this.storage,this.storageKey,!0));try{return await Re(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(Ee(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async o=>{var c,p,h,m,y;const{data:v,error:C}=o;if(C)throw C;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(c=e.options)===null||c===void 0?void 0:c.redirectTo,scopes:(p=e.options)===null||p===void 0?void 0:p.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await Re(this.fetch,"GET",E,{headers:this.headers,jwt:(y=(m=v.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(i)throw i;return yn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(Ee(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:o}}=n;if(i)throw i;const{options:c,provider:p,token:h,access_token:m,nonce:y}=e,v=await Re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:p,id_token:h,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:Mr}),{data:C,error:E}=v;return E?this._returnResult({data:{user:null,session:null},error:E}):!C||!C.session||!C.user?this._returnResult({data:{user:null,session:null},error:new yo}):(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("USER_UPDATED",C.session)),this._returnResult({data:C,error:E}))}catch(i){if(Ee(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:c}=n;if(c)throw c;return await Re(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await z8(async i=>(i>0&&await U8(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await Re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Mr})),(i,o)=>{const c=200*Math.pow(2,i);return o&&af(o)&&Date.now()+c-r<So})}catch(r){if(this._debug(n,"error",r),Ee(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),yn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await _i(this.storage,this.storageKey);if(i&&this.userStorage){let c=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:i.user},await _o(this.userStorage,this.storageKey+"-user",c)),i.user=(e=c==null?void 0:c.user)!==null&&e!==void 0?e:cf()}else if(i&&!i.user&&!i.user){const c=await _i(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(i.user=c.user,await zs(this.storage,this.storageKey+"-user"),await _o(this.storage,this.storageKey,i)):i.user=cf()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const o=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<of;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${of}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:c}=await this._callRefreshToken(i.refresh_token);c&&(console.error(c),af(c)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:p}=await this._getUser(i.access_token);!p&&(c!=null&&c.user)?(i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(r,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new or;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ud;const{data:o,error:c}=await this._refreshAccessToken(e);if(c)throw c;if(!o.session)throw new or;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const p={data:o.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(o){if(this._debug(i,"error",o),Ee(o)){const c={data:null,error:o};return af(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],c=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(e,n)}catch(h){o.push(h)}});if(await Promise.all(c),o.length>0){for(let p=0;p<o.length;p+=1)console.error(o[p]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await _o(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const o=Nx(i);await _o(this.storage,this.storageKey,o)}else{const i=Nx(n);await _o(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await zs(this.storage,this.storageKey),await zs(this.storage,this.storageKey+"-code-verifier"),await zs(this.storage,this.storageKey+"-user"),this.userStorage&&await zs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&yn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),So);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/So);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${So}ms, refresh threshold is ${L0} ticks`),i<=L0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fC)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,c]=await vo(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(c)}`});i.push(p.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);i.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;return o?this._returnResult({data:null,error:o}):await Re(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const p=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await Re(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&h.type==="totp"&&(!((i=h==null?void 0:h.totp)===null||i===void 0)&&i.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),this._returnResult({data:h,error:null}))})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?yT(e.webauthn.credential_response):vT(e.webauthn.credential_response)})}:{code:e.code}),{data:p,error:h}=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:c,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return h?this._returnResult({data:null,error:h}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:h}))})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:o}=n;if(o)return this._returnResult({data:null,error:o});const c=await Re(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(c.error)return c;const{data:p}=c;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:gT(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:xT(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=lf(r.access_token);let c=null;o.aal&&(c=o.aal);let p=c;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(p="aal2");const m=o.amr||[];return{data:{currentLevel:c,nextLevel:p,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await Re(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new or})})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new or});const c=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new or});const c=await Re(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return c.data&&c.data.redirect_url&&yn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;return r?this._returnResult({data:null,error:r}):n?await Re(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new or})})}catch(e){if(Ee(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?(await Re(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new or})})}catch(n){if(Ee(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(p=>p.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(p=>p.kid===e),r&&this.jwks_cached_at+N8>i)return r;const{data:o,error:c}=await Re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,r=o.keys.find(p=>p.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:E,error:_}=await this.getSession();if(_||!E.session)return this._returnResult({data:null,error:_});r=E.session.access_token}const{header:i,payload:o,signature:c,raw:{header:p,payload:h}}=lf(r);n!=null&&n.allowExpired||q8(o.exp);const m=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:E}=await this.getUser(r);if(E)throw E;return{data:{claims:o,header:i,signature:c},error:null}}const y=Y8(i.alg),v=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,c,D8(`${p}.${h}`)))throw new V0("Invalid JWT signature");return{data:{claims:o,header:i,signature:c},error:null}}catch(r){if(Ee(r))return this._returnResult({data:null,error:r});throw r}}}Hl.nextInstanceID={};const TT=Hl;class IT extends TT{constructor(e){super(e)}}class kT{constructor(e,n,r){var i,o,c;this.supabaseUrl=e,this.supabaseKey=n;const p=C8(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const h=`sb-${p.hostname.split(".")[0]}-auth-token`,m={db:p8,realtime:g8,auth:Object.assign(Object.assign({},m8),{storageKey:h}),global:f8},y=b8(r??{},m);this.storageKey=(i=y.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=y.global.headers)!==null&&o!==void 0?o:{},y.accessToken?(this.accessToken=y.accessToken,this.auth=new Proxy({},{get:(v,C)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(C)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=y.auth)!==null&&c!==void 0?c:{},this.headers,y.global.fetch),this.fetch=v8(n,this._getAccessToken.bind(this),y.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},y.realtime)),this.accessToken&&this.accessToken().then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new gN(new URL("rest/v1",p).href,{headers:this.headers,schema:y.db.schema,fetch:this.fetch}),this.storage=new u8(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),y.accessToken||this._listenForAuthEvents()}get functions(){return new fN(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,storageKey:c,flowType:p,lock:h,debug:m,throwOnError:y},v,C){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new IT({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),v),storageKey:c,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:o,flowType:p,lock:h,debug:m,throwOnError:y,fetch:C,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new jN(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const OT=(t,e,n)=>new kT(t,e,n);function RT(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}RT()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const jT="https://fhszilqjyynhbqemgrro.supabase.co",PT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZoc3ppbHFqeXluaGJxZW1ncnJvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NTYxMTYsImV4cCI6MjA3NjAzMjExNn0.9ehEnEEuDG8b7HfgKvPY1KhtWvMyDhNfAA_oWOa0IWo",_e=OT(jT,PT),MT="modulepreload",DT=function(t){return"/"+t},Px={},zd=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),p=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=Promise.allSettled(n.map(h=>{if(h=DT(h),h in Px)return;Px[h]=!0;const m=h.endsWith(".css"),y=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${y}`))return;const v=document.createElement("link");if(v.rel=m?"stylesheet":MT,m||(v.as="script"),v.crossOrigin="",v.href=h,p&&v.setAttribute("nonce",p),document.head.appendChild(v),m)return new Promise((C,E)=>{v.addEventListener("load",C),v.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${h}`)))})}))}function o(c){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=c,window.dispatchEvent(p),!p.defaultPrevented)throw c}return i.then(c=>{for(const p of c||[])p.status==="rejected"&&o(p.reason);return e().catch(o)})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Mx=t=>{const e=BT(t);return e.charAt(0).toUpperCase()+e.slice(1)},gC=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),FT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:c,...p},h)=>O.createElement("svg",{ref:h,...VT,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:gC("lucide",i),...!o&&!FT(p)&&{"aria-hidden":"true"},...p},[...c.map(([m,y])=>O.createElement(m,y)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=(t,e)=>{const n=O.forwardRef(({className:r,...i},o)=>O.createElement(UT,{ref:o,iconNode:e,className:gC(`lucide-${LT(Mx(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Mx(t),n};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ca=be("arrow-left",zT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Wl=be("arrow-right",HT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Ao=be("award",WT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M16 8.2A2.22 2.22 0 0 0 13.8 6c-.8 0-1.4.3-1.8.9-.4-.6-1-.9-1.8-.9A2.22 2.22 0 0 0 8 8.2c0 .6.3 1.2.7 1.6A226.652 226.652 0 0 0 12 13a404 404 0 0 0 3.3-3.1 2.413 2.413 0 0 0 .7-1.7",key:"1t75a8"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]],Yi=be("book-heart",$T);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Kt=be("book-open",GT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]],KT=be("book-text",XT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ca=be("calendar",qT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],ZT=be("camera",YT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],JT=be("chart-column",QT);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e6=[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]],t6=be("chart-no-axes-column",e6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],U0=be("check",n6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],s6=be("chevron-down",r6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],o6=be("chevron-left",i6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],l6=be("chevron-right",a6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],u6=be("circle-alert",c6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],z0=be("circle-check-big",d6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Ga=be("circle-check",h6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],xC=be("circle-x",f6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Dx=be("clock",p6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m6=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Hd=be("dollar-sign",m6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],x6=be("download",g6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y6=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],v6=be("file-text",y6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w6=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],H0=be("folder",w6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],C6=be("funnel",b6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Np=be("globe",E6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S6=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$l=be("hash",S6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Tp=be("info",_6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],N6=be("key-round",A6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]],Lx=be("library",T6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],k6=be("lightbulb",I6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],jn=be("loader-circle",O6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],j6=be("lock",R6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],M6=be("log-out",P6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],L6=be("mail",D6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],F6=be("menu",B6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],W0=be("message-square",V6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],z6=be("mic-off",U6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],W6=be("mic",H6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],yC=be("package",$6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ml=be("plus",G6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],gl=be("printer",X6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Bx=be("qr-code",K6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Fx=be("refresh-cw",q6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],zr=be("search",Y6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Q6=be("shield",Z6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Ip=be("sparkles",J6);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],td=be("square-pen",eI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],vC=be("star",tI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],kp=be("tag",nI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],nd=be("trash-2",rI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Fi=be("trending-up",sI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Ts=be("triangle-alert",iI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],Vx=be("trophy",oI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aI=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],lI=be("type",aI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],uI=be("user-check",cI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hr=be("user",dI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vi=be("users",hI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Pn=be("x",fI);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],wC=be("zap",pI),Op=O.createContext({});function Rp(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const Wd=O.createContext(null),jp=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class mI extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function gI({children:t,isPresent:e}){const n=O.useId(),r=O.useRef(null),i=O.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=O.useContext(jp);return O.useInsertionEffect(()=>{const{width:c,height:p,top:h,left:m}=i.current;if(e||!r.current||!c||!p)return;r.current.dataset.motionPopId=n;const y=document.createElement("style");return o&&(y.nonce=o),document.head.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${p}px !important;
            top: ${h}px !important;
            left: ${m}px !important;
          }
        `),()=>{document.head.removeChild(y)}},[e]),f.jsx(mI,{isPresent:e,childRef:r,sizeRef:i,children:O.cloneElement(t,{ref:r})})}const xI=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:o,mode:c})=>{const p=Rp(yI),h=O.useId(),m=O.useCallback(v=>{p.set(v,!0);for(const C of p.values())if(!C)return;r&&r()},[p,r]),y=O.useMemo(()=>({id:h,initial:e,isPresent:n,custom:i,onExitComplete:m,register:v=>(p.set(v,!1),()=>p.delete(v))}),o?[Math.random(),m]:[n,m]);return O.useMemo(()=>{p.forEach((v,C)=>p.set(C,!1))},[n]),O.useEffect(()=>{!n&&!p.size&&r&&r()},[n]),c==="popLayout"&&(t=f.jsx(gI,{isPresent:n,children:t})),f.jsx(Wd.Provider,{value:y,children:t})};function yI(){return new Map}function bC(t=!0){const e=O.useContext(Wd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,o=O.useId();O.useEffect(()=>{t&&i(o)},[t]);const c=O.useCallback(()=>t&&r&&r(o),[o,r,t]);return!n&&r?[!1,c]:[!0]}const Yc=t=>t.key||"";function Ux(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Pp=typeof window<"u",CC=Pp?O.useLayoutEffect:O.useEffect,ui=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:o="sync",propagate:c=!1})=>{const[p,h]=bC(c),m=O.useMemo(()=>Ux(t),[t]),y=c&&!p?[]:m.map(Yc),v=O.useRef(!0),C=O.useRef(m),E=Rp(()=>new Map),[_,T]=O.useState(m),[k,S]=O.useState(m);CC(()=>{v.current=!1,C.current=m;for(let M=0;M<k.length;M++){const F=Yc(k[M]);y.includes(F)?E.delete(F):E.get(F)!==!0&&E.set(F,!1)}},[k,y.length,y.join("-")]);const I=[];if(m!==_){let M=[...m];for(let F=0;F<k.length;F++){const V=k[F],B=Yc(V);y.includes(B)||(M.splice(F,0,V),I.push(V))}o==="wait"&&I.length&&(M=I),S(Ux(M)),T(m);return}const{forceRender:N}=O.useContext(Op);return f.jsx(f.Fragment,{children:k.map(M=>{const F=Yc(M),V=c&&!p?!1:m===k||y.includes(F),B=()=>{if(E.has(F))E.set(F,!0);else return;let z=!0;E.forEach(H=>{H||(z=!1)}),z&&(N==null||N(),S(C.current),c&&(h==null||h()),r&&r())};return f.jsx(xI,{isPresent:V,initial:!v.current||n?void 0:!1,custom:V?void 0:e,presenceAffectsLayout:i,mode:o,onExitComplete:V?void 0:B,children:M},F)})})},fr=t=>t;let EC=fr;function Mp(t){let e;return()=>(e===void 0&&(e=t()),e)}const ua=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},Cs=t=>t*1e3,Es=t=>t/1e3,vI={useManualTiming:!1};function wI(t){let e=new Set,n=new Set,r=!1,i=!1;const o=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function p(m){o.has(m)&&(h.schedule(m),t()),m(c)}const h={schedule:(m,y=!1,v=!1)=>{const E=v&&r?e:n;return y&&o.add(m),E.has(m)||E.add(m),m},cancel:m=>{n.delete(m),o.delete(m)},process:m=>{if(c=m,r){i=!0;return}r=!0,[e,n]=[n,e],e.forEach(p),e.clear(),r=!1,i&&(i=!1,h.process(m))}};return h}const Zc=["read","resolveKeyframes","update","preRender","render","postRender"],bI=40;function SC(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,c=Zc.reduce((S,I)=>(S[I]=wI(o),S),{}),{read:p,resolveKeyframes:h,update:m,preRender:y,render:v,postRender:C}=c,E=()=>{const S=performance.now();n=!1,i.delta=r?1e3/60:Math.max(Math.min(S-i.timestamp,bI),1),i.timestamp=S,i.isProcessing=!0,p.process(i),h.process(i),m.process(i),y.process(i),v.process(i),C.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(E))},_=()=>{n=!0,r=!0,i.isProcessing||t(E)};return{schedule:Zc.reduce((S,I)=>{const N=c[I];return S[I]=(M,F=!1,V=!1)=>(n||_(),N.schedule(M,F,V)),S},{}),cancel:S=>{for(let I=0;I<Zc.length;I++)c[Zc[I]].cancel(S)},state:i,steps:c}}const{schedule:yt,cancel:di,state:wn,steps:df}=SC(typeof requestAnimationFrame<"u"?requestAnimationFrame:fr,!0),_C=O.createContext({strict:!1}),zx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},da={};for(const t in zx)da[t]={isEnabled:e=>zx[t].some(n=>!!e[n])};function CI(t){for(const e in t)da[e]={...da[e],...t[e]}}const EI=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function rd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||EI.has(t)}let AC=t=>!rd(t);function SI(t){t&&(AC=e=>e.startsWith("on")?!rd(e):t(e))}try{SI(require("@emotion/is-prop-valid").default)}catch{}function _I(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(AC(i)||n===!0&&rd(i)||!e&&!rd(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function AI(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const $d=O.createContext({});function Gl(t){return typeof t=="string"||Array.isArray(t)}function Gd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Dp=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Lp=["initial",...Dp];function Xd(t){return Gd(t.animate)||Lp.some(e=>Gl(t[e]))}function NC(t){return!!(Xd(t)||t.variants)}function NI(t,e){if(Xd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||Gl(n)?n:void 0,animate:Gl(r)?r:void 0}}return t.inherit!==!1?e:{}}function TI(t){const{initial:e,animate:n}=NI(t,O.useContext($d));return O.useMemo(()=>({initial:e,animate:n}),[Hx(e),Hx(n)])}function Hx(t){return Array.isArray(t)?t.join(" "):t}const II=Symbol.for("motionComponentSymbol");function Fo(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function kI(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Fo(n)&&(n.current=r))},[e])}const Bp=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),OI="framerAppearId",TC="data-"+Bp(OI),{schedule:Fp}=SC(queueMicrotask,!1),IC=O.createContext({});function RI(t,e,n,r,i){var o,c;const{visualElement:p}=O.useContext($d),h=O.useContext(_C),m=O.useContext(Wd),y=O.useContext(jp).reducedMotion,v=O.useRef(null);r=r||h.renderer,!v.current&&r&&(v.current=r(t,{visualState:e,parent:p,props:n,presenceContext:m,blockInitialAnimation:m?m.initial===!1:!1,reducedMotionConfig:y}));const C=v.current,E=O.useContext(IC);C&&!C.projection&&i&&(C.type==="html"||C.type==="svg")&&jI(v.current,n,i,E);const _=O.useRef(!1);O.useInsertionEffect(()=>{C&&_.current&&C.update(n,m)});const T=n[TC],k=O.useRef(!!T&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,T))&&((c=window.MotionHasOptimisedAnimation)===null||c===void 0?void 0:c.call(window,T)));return CC(()=>{C&&(_.current=!0,window.MotionIsMounted=!0,C.updateFeatures(),Fp.render(C.render),k.current&&C.animationState&&C.animationState.animateChanges())}),O.useEffect(()=>{C&&(!k.current&&C.animationState&&C.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)===null||S===void 0||S.call(window,T)}),k.current=!1))}),C}function jI(t,e,n,r){const{layoutId:i,layout:o,drag:c,dragConstraints:p,layoutScroll:h,layoutRoot:m}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:kC(t.parent)),t.projection.setOptions({layoutId:i,layout:o,alwaysMeasureLayout:!!c||p&&Fo(p),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:h,layoutRoot:m})}function kC(t){if(t)return t.options.allowProjection!==!1?t.projection:kC(t.parent)}function PI({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){var o,c;t&&CI(t);function p(m,y){let v;const C={...O.useContext(jp),...m,layoutId:MI(m)},{isStatic:E}=C,_=TI(m),T=r(m,E);if(!E&&Pp){DI();const k=LI(C);v=k.MeasureLayout,_.visualElement=RI(i,T,C,e,k.ProjectionNode)}return f.jsxs($d.Provider,{value:_,children:[v&&_.visualElement?f.jsx(v,{visualElement:_.visualElement,...C}):null,n(i,m,kI(T,_.visualElement,y),T,E,_.visualElement)]})}p.displayName=`motion.${typeof i=="string"?i:`create(${(c=(o=i.displayName)!==null&&o!==void 0?o:i.name)!==null&&c!==void 0?c:""})`}`;const h=O.forwardRef(p);return h[II]=i,h}function MI({layoutId:t}){const e=O.useContext(Op).id;return e&&t!==void 0?e+"-"+t:t}function DI(t,e){O.useContext(_C).strict}function LI(t){const{drag:e,layout:n}=da;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const BI=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Vp(t){return typeof t!="string"||t.includes("-")?!1:!!(BI.indexOf(t)>-1||/[A-Z]/u.test(t))}function Wx(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Up(t,e,n,r){if(typeof e=="function"){const[i,o]=Wx(r);e=e(n!==void 0?n:t.custom,i,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,o]=Wx(r);e=e(n!==void 0?n:t.custom,i,o)}return e}const $0=t=>Array.isArray(t),FI=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),VI=t=>$0(t)?t[t.length-1]||0:t,On=t=>!!(t&&t.getVelocity);function yu(t){const e=On(t)?t.get():t;return FI(e)?e.toValue():e}function UI({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},r,i,o){const c={latestValues:zI(r,i,o,t),renderState:e()};return n&&(c.onMount=p=>n({props:r,current:p,...c}),c.onUpdate=p=>n(p)),c}const OC=t=>(e,n)=>{const r=O.useContext($d),i=O.useContext(Wd),o=()=>UI(t,e,r,i);return n?o():Rp(o)};function zI(t,e,n,r){const i={},o=r(t,{});for(const C in o)i[C]=yu(o[C]);let{initial:c,animate:p}=t;const h=Xd(t),m=NC(t);e&&m&&!h&&t.inherit!==!1&&(c===void 0&&(c=e.initial),p===void 0&&(p=e.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const v=y?p:c;if(v&&typeof v!="boolean"&&!Gd(v)){const C=Array.isArray(v)?v:[v];for(let E=0;E<C.length;E++){const _=Up(t,C[E]);if(_){const{transitionEnd:T,transition:k,...S}=_;for(const I in S){let N=S[I];if(Array.isArray(N)){const M=y?N.length-1:0;N=N[M]}N!==null&&(i[I]=N)}for(const I in T)i[I]=T[I]}}}return i}const Ea=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],so=new Set(Ea),RC=t=>e=>typeof e=="string"&&e.startsWith(t),jC=RC("--"),HI=RC("var(--"),zp=t=>HI(t)?WI.test(t.split("/*")[0].trim()):!1,WI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,PC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Is=(t,e,n)=>n>e?e:n<t?t:n,Sa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Xl={...Sa,transform:t=>Is(0,1,t)},Qc={...Sa,default:1},oc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ws=oc("deg"),cs=oc("%"),je=oc("px"),$I=oc("vh"),GI=oc("vw"),$x={...cs,parse:t=>cs.parse(t)/100,transform:t=>cs.transform(t*100)},XI={borderWidth:je,borderTopWidth:je,borderRightWidth:je,borderBottomWidth:je,borderLeftWidth:je,borderRadius:je,radius:je,borderTopLeftRadius:je,borderTopRightRadius:je,borderBottomRightRadius:je,borderBottomLeftRadius:je,width:je,maxWidth:je,height:je,maxHeight:je,top:je,right:je,bottom:je,left:je,padding:je,paddingTop:je,paddingRight:je,paddingBottom:je,paddingLeft:je,margin:je,marginTop:je,marginRight:je,marginBottom:je,marginLeft:je,backgroundPositionX:je,backgroundPositionY:je},KI={rotate:Ws,rotateX:Ws,rotateY:Ws,rotateZ:Ws,scale:Qc,scaleX:Qc,scaleY:Qc,scaleZ:Qc,skew:Ws,skewX:Ws,skewY:Ws,distance:je,translateX:je,translateY:je,translateZ:je,x:je,y:je,z:je,perspective:je,transformPerspective:je,opacity:Xl,originX:$x,originY:$x,originZ:je},Gx={...Sa,transform:Math.round},Hp={...XI,...KI,zIndex:Gx,size:je,fillOpacity:Xl,strokeOpacity:Xl,numOctaves:Gx},qI={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},YI=Ea.length;function ZI(t,e,n){let r="",i=!0;for(let o=0;o<YI;o++){const c=Ea[o],p=t[c];if(p===void 0)continue;let h=!0;if(typeof p=="number"?h=p===(c.startsWith("scale")?1:0):h=parseFloat(p)===0,!h||n){const m=PC(p,Hp[c]);if(!h){i=!1;const y=qI[c]||c;r+=`${y}(${m}) `}n&&(e[c]=m)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Wp(t,e,n){const{style:r,vars:i,transformOrigin:o}=t;let c=!1,p=!1;for(const h in e){const m=e[h];if(so.has(h)){c=!0;continue}else if(jC(h)){i[h]=m;continue}else{const y=PC(m,Hp[h]);h.startsWith("origin")?(p=!0,o[h]=y):r[h]=y}}if(e.transform||(c||n?r.transform=ZI(e,t.transform,n):r.transform&&(r.transform="none")),p){const{originX:h="50%",originY:m="50%",originZ:y=0}=o;r.transformOrigin=`${h} ${m} ${y}`}}const QI={offset:"stroke-dashoffset",array:"stroke-dasharray"},JI={offset:"strokeDashoffset",array:"strokeDasharray"};function ek(t,e,n=1,r=0,i=!0){t.pathLength=1;const o=i?QI:JI;t[o.offset]=je.transform(-r);const c=je.transform(e),p=je.transform(n);t[o.array]=`${c} ${p}`}function Xx(t,e,n){return typeof t=="string"?t:je.transform(e+n*t)}function tk(t,e,n){const r=Xx(e,t.x,t.width),i=Xx(n,t.y,t.height);return`${r} ${i}`}function $p(t,{attrX:e,attrY:n,attrScale:r,originX:i,originY:o,pathLength:c,pathSpacing:p=1,pathOffset:h=0,...m},y,v){if(Wp(t,m,v),y){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:C,style:E,dimensions:_}=t;C.transform&&(_&&(E.transform=C.transform),delete C.transform),_&&(i!==void 0||o!==void 0||E.transform)&&(E.transformOrigin=tk(_,i!==void 0?i:.5,o!==void 0?o:.5)),e!==void 0&&(C.x=e),n!==void 0&&(C.y=n),r!==void 0&&(C.scale=r),c!==void 0&&ek(C,c,p,h,!1)}const Gp=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),MC=()=>({...Gp(),attrs:{}}),Xp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function DC(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const LC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function BC(t,e,n,r){DC(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(LC.has(i)?i:Bp(i),e.attrs[i])}const sd={};function nk(t){Object.assign(sd,t)}function FC(t,{layout:e,layoutId:n}){return so.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!sd[t]||t==="opacity")}function Kp(t,e,n){var r;const{style:i}=t,o={};for(const c in i)(On(i[c])||e.style&&On(e.style[c])||FC(c,t)||((r=n==null?void 0:n.getValue(c))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[c]=i[c]);return o}function VC(t,e,n){const r=Kp(t,e,n);for(const i in t)if(On(t[i])||On(e[i])){const o=Ea.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[o]=t[i]}return r}function rk(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const Kx=["x","y","width","height","cx","cy","r"],sk={useVisualState:OC({scrapeMotionValuesFromProps:VC,createRenderState:MC,onUpdate:({props:t,prevProps:e,current:n,renderState:r,latestValues:i})=>{if(!n)return;let o=!!t.drag;if(!o){for(const p in i)if(so.has(p)){o=!0;break}}if(!o)return;let c=!e;if(e)for(let p=0;p<Kx.length;p++){const h=Kx[p];t[h]!==e[h]&&(c=!0)}c&&yt.read(()=>{rk(n,r),yt.render(()=>{$p(r,i,Xp(n.tagName),t.transformTemplate),BC(n,r)})})}})},ik={useVisualState:OC({scrapeMotionValuesFromProps:Kp,createRenderState:Gp})};function UC(t,e,n){for(const r in e)!On(e[r])&&!FC(r,n)&&(t[r]=e[r])}function ok({transformTemplate:t},e){return O.useMemo(()=>{const n=Gp();return Wp(n,e,t),Object.assign({},n.vars,n.style)},[e])}function ak(t,e){const n=t.style||{},r={};return UC(r,n,t),Object.assign(r,ok(t,e)),r}function lk(t,e){const n={},r=ak(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}function ck(t,e,n,r){const i=O.useMemo(()=>{const o=MC();return $p(o,e,Xp(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};UC(o,t.style,t),i.style={...o,...i.style}}return i}function uk(t=!1){return(n,r,i,{latestValues:o},c)=>{const h=(Vp(n)?ck:lk)(r,o,c,n),m=_I(r,typeof n=="string",t),y=n!==O.Fragment?{...m,...h,ref:i}:{},{children:v}=r,C=O.useMemo(()=>On(v)?v.get():v,[v]);return O.createElement(n,{...y,children:C})}}function dk(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const c={...Vp(r)?sk:ik,preloadedFeatures:t,useRender:uk(i),createVisualElement:e,Component:r};return PI(c)}}function zC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Kd(t,e,n){const r=t.getProps();return Up(r,e,n!==void 0?n:r.custom,t)}const hk=Mp(()=>window.ScrollTimeline!==void 0);class fk{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(i=>{if(hk()&&i.attachTimeline)return i.attachTimeline(e);if(typeof n=="function")return n(i)});return()=>{r.forEach((i,o)=>{i&&i(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class pk extends fk{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function qp(t,e){return t?t[e]||t.default||t:void 0}const G0=2e4;function HC(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<G0;)e+=n,r=t.next(e);return e>=G0?1/0:e}function Yp(t){return typeof t=="function"}function qx(t,e){t.timeline=e,t.onfinish=null}const Zp=t=>Array.isArray(t)&&typeof t[0]=="number",mk={linearEasing:void 0};function gk(t,e){const n=Mp(t);return()=>{var r;return(r=mk[e])!==null&&r!==void 0?r:n()}}const id=gk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),WC=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let o=0;o<i;o++)r+=t(ua(0,i-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function $C(t){return!!(typeof t=="function"&&id()||!t||typeof t=="string"&&(t in X0||id())||Zp(t)||Array.isArray(t)&&t.every($C))}const tl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,X0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tl([0,.65,.55,1]),circOut:tl([.55,0,1,.45]),backIn:tl([.31,.01,.66,-.59]),backOut:tl([.33,1.53,.69,.99])};function GC(t,e){if(t)return typeof t=="function"&&id()?WC(t,e):Zp(t)?tl(t):Array.isArray(t)?t.map(n=>GC(n,e)||X0.easeOut):X0[t]}const Dr={x:!1,y:!1};function XC(){return Dr.x||Dr.y}function xk(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let i=document;const o=(r=void 0)!==null&&r!==void 0?r:i.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function KC(t,e){const n=xk(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function Yx(t){return e=>{e.pointerType==="touch"||XC()||t(e)}}function yk(t,e,n={}){const[r,i,o]=KC(t,n),c=Yx(p=>{const{target:h}=p,m=e(p);if(typeof m!="function"||!h)return;const y=Yx(v=>{m(v),h.removeEventListener("pointerleave",y)});h.addEventListener("pointerleave",y,i)});return r.forEach(p=>{p.addEventListener("pointerenter",c,i)}),o}const qC=(t,e)=>e?t===e?!0:qC(t,e.parentElement):!1,Qp=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,vk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function wk(t){return vk.has(t.tagName)||t.tabIndex!==-1}const nl=new WeakSet;function Zx(t){return e=>{e.key==="Enter"&&t(e)}}function hf(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const bk=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=Zx(()=>{if(nl.has(n))return;hf(n,"down");const i=Zx(()=>{hf(n,"up")}),o=()=>hf(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function Qx(t){return Qp(t)&&!XC()}function Ck(t,e,n={}){const[r,i,o]=KC(t,n),c=p=>{const h=p.currentTarget;if(!Qx(p)||nl.has(h))return;nl.add(h);const m=e(p),y=(E,_)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",C),!(!Qx(E)||!nl.has(h))&&(nl.delete(h),typeof m=="function"&&m(E,{success:_}))},v=E=>{y(E,n.useGlobalTarget||qC(h,E.target))},C=E=>{y(E,!1)};window.addEventListener("pointerup",v,i),window.addEventListener("pointercancel",C,i)};return r.forEach(p=>{!wk(p)&&p.getAttribute("tabindex")===null&&(p.tabIndex=0),(n.useGlobalTarget?window:p).addEventListener("pointerdown",c,i),p.addEventListener("focus",m=>bk(m,i),i)}),o}function Ek(t){return t==="x"||t==="y"?Dr[t]?null:(Dr[t]=!0,()=>{Dr[t]=!1}):Dr.x||Dr.y?null:(Dr.x=Dr.y=!0,()=>{Dr.x=Dr.y=!1})}const YC=new Set(["width","height","top","left","right","bottom",...Ea]);let vu;function Sk(){vu=void 0}const us={now:()=>(vu===void 0&&us.set(wn.isProcessing||vI.useManualTiming?wn.timestamp:performance.now()),vu),set:t=>{vu=t,queueMicrotask(Sk)}};function Jp(t,e){t.indexOf(e)===-1&&t.push(e)}function em(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class tm{constructor(){this.subscriptions=[]}add(e){return Jp(this.subscriptions,e),()=>em(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let o=0;o<i;o++){const c=this.subscriptions[o];c&&c(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function ZC(t,e){return e?t*(1e3/e):0}const Jx=30,_k=t=>!isNaN(parseFloat(t));class Ak{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const o=us.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=us.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=_k(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new tm);const r=this.events[e].add(n);return e==="change"?()=>{r(),yt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=us.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Jx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Jx);return ZC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kl(t,e){return new Ak(t,e)}function Nk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Kl(n))}function Tk(t,e){const n=Kd(t,e);let{transitionEnd:r={},transition:i={},...o}=n||{};o={...o,...r};for(const c in o){const p=VI(o[c]);Nk(t,c,p)}}function Ik(t){return!!(On(t)&&t.add)}function K0(t,e){const n=t.getValue("willChange");if(Ik(n))return n.add(e)}function QC(t){return t.props[TC]}const JC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,kk=1e-7,Ok=12;function Rk(t,e,n,r,i){let o,c,p=0;do c=e+(n-e)/2,o=JC(c,r,i)-t,o>0?n=c:e=c;while(Math.abs(o)>kk&&++p<Ok);return c}function ac(t,e,n,r){if(t===e&&n===r)return fr;const i=o=>Rk(o,0,1,t,n);return o=>o===0||o===1?o:JC(i(o),e,r)}const eE=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,tE=t=>e=>1-t(1-e),nE=ac(.33,1.53,.69,.99),nm=tE(nE),rE=eE(nm),sE=t=>(t*=2)<1?.5*nm(t):.5*(2-Math.pow(2,-10*(t-1))),rm=t=>1-Math.sin(Math.acos(t)),iE=tE(rm),oE=eE(rm),aE=t=>/^0[^.\s]+$/u.test(t);function jk(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||aE(t):!0}const xl=t=>Math.round(t*1e5)/1e5,sm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Pk(t){return t==null}const Mk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,im=(t,e)=>n=>!!(typeof n=="string"&&Mk.test(n)&&n.startsWith(t)||e&&!Pk(n)&&Object.prototype.hasOwnProperty.call(n,e)),lE=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,o,c,p]=r.match(sm);return{[t]:parseFloat(i),[e]:parseFloat(o),[n]:parseFloat(c),alpha:p!==void 0?parseFloat(p):1}},Dk=t=>Is(0,255,t),ff={...Sa,transform:t=>Math.round(Dk(t))},Ui={test:im("rgb","red"),parse:lE("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+ff.transform(t)+", "+ff.transform(e)+", "+ff.transform(n)+", "+xl(Xl.transform(r))+")"};function Lk(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const q0={test:im("#"),parse:Lk,transform:Ui.transform},Vo={test:im("hsl","hue"),parse:lE("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+cs.transform(xl(e))+", "+cs.transform(xl(n))+", "+xl(Xl.transform(r))+")"},In={test:t=>Ui.test(t)||q0.test(t)||Vo.test(t),parse:t=>Ui.test(t)?Ui.parse(t):Vo.test(t)?Vo.parse(t):q0.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ui.transform(t):Vo.transform(t)},Bk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fk(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(sm))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Bk))===null||n===void 0?void 0:n.length)||0)>0}const cE="number",uE="color",Vk="var",Uk="var(",ey="${}",zk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ql(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let o=0;const p=e.replace(zk,h=>(In.test(h)?(r.color.push(o),i.push(uE),n.push(In.parse(h))):h.startsWith(Uk)?(r.var.push(o),i.push(Vk),n.push(h)):(r.number.push(o),i.push(cE),n.push(parseFloat(h))),++o,ey)).split(ey);return{values:n,split:p,indexes:r,types:i}}function dE(t){return ql(t).values}function hE(t){const{split:e,types:n}=ql(t),r=e.length;return i=>{let o="";for(let c=0;c<r;c++)if(o+=e[c],i[c]!==void 0){const p=n[c];p===cE?o+=xl(i[c]):p===uE?o+=In.transform(i[c]):o+=i[c]}return o}}const Hk=t=>typeof t=="number"?0:t;function Wk(t){const e=dE(t);return hE(t)(e.map(Hk))}const hi={test:Fk,parse:dE,createTransformer:hE,getAnimatableNone:Wk},$k=new Set(["brightness","contrast","saturate","opacity"]);function Gk(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(sm)||[];if(!r)return t;const i=n.replace(r,"");let o=$k.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+i+")"}const Xk=/\b([a-z-]*)\(.*?\)/gu,Y0={...hi,getAnimatableNone:t=>{const e=t.match(Xk);return e?e.map(Gk).join(" "):t}},Kk={...Hp,color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:Y0,WebkitFilter:Y0},om=t=>Kk[t];function fE(t,e){let n=om(t);return n!==Y0&&(n=hi),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const qk=new Set(["auto","none","0"]);function Yk(t,e,n){let r=0,i;for(;r<t.length&&!i;){const o=t[r];typeof o=="string"&&!qk.has(o)&&ql(o).values.length&&(i=t[r]),r++}if(i&&n)for(const o of e)t[o]=fE(n,i)}const ty=t=>t===Sa||t===je,ny=(t,e)=>parseFloat(t.split(", ")[e]),ry=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const i=r.match(/^matrix3d\((.+)\)$/u);if(i)return ny(i[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?ny(o[1],t):0}},Zk=new Set(["x","y","z"]),Qk=Ea.filter(t=>!Zk.has(t));function Jk(t){const e=[];return Qk.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const ha={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:ry(4,13),y:ry(5,14)};ha.translateX=ha.x;ha.translateY=ha.y;const Wi=new Set;let Z0=!1,Q0=!1;function pE(){if(Q0){const t=Array.from(Wi).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=Jk(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([o,c])=>{var p;(p=r.getValue(o))===null||p===void 0||p.set(c)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Q0=!1,Z0=!1,Wi.forEach(t=>t.complete()),Wi.clear()}function mE(){Wi.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Q0=!0)})}function eO(){mE(),pE()}class am{constructor(e,n,r,i,o,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=o,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Wi.add(this),Z0||(Z0=!0,yt.read(mE),yt.resolveKeyframes(pE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const c=i==null?void 0:i.get(),p=e[e.length-1];if(c!==void 0)e[0]=c;else if(r&&n){const h=r.readValue(n,p);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=p),i&&c===void 0&&i.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Wi.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Wi.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const gE=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),tO=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function nO(t){const e=tO.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function xE(t,e,n=1){const[r,i]=nO(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const c=o.trim();return gE(c)?parseFloat(c):c}return zp(i)?xE(i,e,n+1):i}const yE=t=>e=>e.test(t),rO={test:t=>t==="auto",parse:t=>t},vE=[Sa,je,cs,Ws,GI,$I,rO],sy=t=>vE.find(yE(t));class wE extends am{constructor(e,n,r,i,o){super(e,n,r,i,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let m=e[h];if(typeof m=="string"&&(m=m.trim(),zp(m))){const y=xE(m,n.current);y!==void 0&&(e[h]=y),h===e.length-1&&(this.finalKeyframe=m)}}if(this.resolveNoneKeyframes(),!YC.has(r)||e.length!==2)return;const[i,o]=e,c=sy(i),p=sy(o);if(c!==p)if(ty(c)&&ty(p))for(let h=0;h<e.length;h++){const m=e[h];typeof m=="string"&&(e[h]=parseFloat(m))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)jk(e[i])&&r.push(i);r.length&&Yk(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ha[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:i}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const c=i.length-1,p=i[c];i[c]=ha[r](n.measureViewportBox(),window.getComputedStyle(n.current)),p!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=p),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,m])=>{n.getValue(h).set(m)}),this.resolveNoneKeyframes()}}const iy=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(hi.test(t)||t==="0")&&!t.startsWith("url("));function sO(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function iO(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],c=iy(i,e),p=iy(o,e);return!c||!p?!1:sO(t)||(n==="spring"||Yp(n))&&r}const oO=t=>t!==null;function qd(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(oO),o=e&&n!=="loop"&&e%2===1?0:i.length-1;return!o||r===void 0?i[o]:r}const aO=40;class bE{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:c="loop",...p}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=us.now(),this.options={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:o,repeatType:c,...p},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>aO?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&eO(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=us.now(),this.hasAttemptedResolve=!0;const{name:r,type:i,velocity:o,delay:c,onComplete:p,onUpdate:h,isGenerator:m}=this.options;if(!m&&!iO(e,r,i,o))if(c)this.options.duration=0;else{h&&h(qd(e,this.options,n)),p&&p(),this.resolveFinishedPromise();return}const y=this.initPlayback(e,n);y!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Tt=(t,e,n)=>t+(e-t)*n;function pf(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lO({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,o=0,c=0;if(!e)i=o=c=n;else{const p=n<.5?n*(1+e):n+e-n*e,h=2*n-p;i=pf(h,p,t+1/3),o=pf(h,p,t),c=pf(h,p,t-1/3)}return{red:Math.round(i*255),green:Math.round(o*255),blue:Math.round(c*255),alpha:r}}function od(t,e){return n=>n>0?e:t}const mf=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},cO=[q0,Ui,Vo],uO=t=>cO.find(e=>e.test(t));function oy(t){const e=uO(t);if(!e)return!1;let n=e.parse(t);return e===Vo&&(n=lO(n)),n}const ay=(t,e)=>{const n=oy(t),r=oy(e);if(!n||!r)return od(t,e);const i={...n};return o=>(i.red=mf(n.red,r.red,o),i.green=mf(n.green,r.green,o),i.blue=mf(n.blue,r.blue,o),i.alpha=Tt(n.alpha,r.alpha,o),Ui.transform(i))},dO=(t,e)=>n=>e(t(n)),lc=(...t)=>t.reduce(dO),J0=new Set(["none","hidden"]);function hO(t,e){return J0.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function fO(t,e){return n=>Tt(t,e,n)}function lm(t){return typeof t=="number"?fO:typeof t=="string"?zp(t)?od:In.test(t)?ay:gO:Array.isArray(t)?CE:typeof t=="object"?In.test(t)?ay:pO:od}function CE(t,e){const n=[...t],r=n.length,i=t.map((o,c)=>lm(o)(o,e[c]));return o=>{for(let c=0;c<r;c++)n[c]=i[c](o);return n}}function pO(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=lm(t[i])(t[i],e[i]));return i=>{for(const o in r)n[o]=r[o](i);return n}}function mO(t,e){var n;const r=[],i={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const c=e.types[o],p=t.indexes[c][i[c]],h=(n=t.values[p])!==null&&n!==void 0?n:0;r[o]=h,i[c]++}return r}const gO=(t,e)=>{const n=hi.createTransformer(e),r=ql(t),i=ql(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?J0.has(t)&&!i.values.length||J0.has(e)&&!r.values.length?hO(t,e):lc(CE(mO(r,i),i.values),n):od(t,e)};function EE(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Tt(t,e,n):lm(t)(t,e)}const xO=5;function SE(t,e,n){const r=Math.max(e-xO,0);return ZC(n-t(r),e-r)}const Lt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},gf=.001;function yO({duration:t=Lt.duration,bounce:e=Lt.bounce,velocity:n=Lt.velocity,mass:r=Lt.mass}){let i,o,c=1-e;c=Is(Lt.minDamping,Lt.maxDamping,c),t=Is(Lt.minDuration,Lt.maxDuration,Es(t)),c<1?(i=m=>{const y=m*c,v=y*t,C=y-n,E=e1(m,c),_=Math.exp(-v);return gf-C/E*_},o=m=>{const v=m*c*t,C=v*n+n,E=Math.pow(c,2)*Math.pow(m,2)*t,_=Math.exp(-v),T=e1(Math.pow(m,2),c);return(-i(m)+gf>0?-1:1)*((C-E)*_)/T}):(i=m=>{const y=Math.exp(-m*t),v=(m-n)*t+1;return-gf+y*v},o=m=>{const y=Math.exp(-m*t),v=(n-m)*(t*t);return y*v});const p=5/t,h=wO(i,o,p);if(t=Cs(t),isNaN(h))return{stiffness:Lt.stiffness,damping:Lt.damping,duration:t};{const m=Math.pow(h,2)*r;return{stiffness:m,damping:c*2*Math.sqrt(r*m),duration:t}}}const vO=12;function wO(t,e,n){let r=n;for(let i=1;i<vO;i++)r=r-t(r)/e(r);return r}function e1(t,e){return t*Math.sqrt(1-e*e)}const bO=["duration","bounce"],CO=["stiffness","damping","mass"];function ly(t,e){return e.some(n=>t[n]!==void 0)}function EO(t){let e={velocity:Lt.velocity,stiffness:Lt.stiffness,damping:Lt.damping,mass:Lt.mass,isResolvedFromDuration:!1,...t};if(!ly(t,CO)&&ly(t,bO))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,o=2*Is(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:Lt.mass,stiffness:i,damping:o}}else{const n=yO(t);e={...e,...n,mass:Lt.mass},e.isResolvedFromDuration=!0}return e}function _E(t=Lt.visualDuration,e=Lt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const o=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],p={done:!1,value:o},{stiffness:h,damping:m,mass:y,duration:v,velocity:C,isResolvedFromDuration:E}=EO({...n,velocity:-Es(n.velocity||0)}),_=C||0,T=m/(2*Math.sqrt(h*y)),k=c-o,S=Es(Math.sqrt(h/y)),I=Math.abs(k)<5;r||(r=I?Lt.restSpeed.granular:Lt.restSpeed.default),i||(i=I?Lt.restDelta.granular:Lt.restDelta.default);let N;if(T<1){const F=e1(S,T);N=V=>{const B=Math.exp(-T*S*V);return c-B*((_+T*S*k)/F*Math.sin(F*V)+k*Math.cos(F*V))}}else if(T===1)N=F=>c-Math.exp(-S*F)*(k+(_+S*k)*F);else{const F=S*Math.sqrt(T*T-1);N=V=>{const B=Math.exp(-T*S*V),z=Math.min(F*V,300);return c-B*((_+T*S*k)*Math.sinh(z)+F*k*Math.cosh(z))/F}}const M={calculatedDuration:E&&v||null,next:F=>{const V=N(F);if(E)p.done=F>=v;else{let B=0;T<1&&(B=F===0?Cs(_):SE(N,F,V));const z=Math.abs(B)<=r,H=Math.abs(c-V)<=i;p.done=z&&H}return p.value=p.done?c:V,p},toString:()=>{const F=Math.min(HC(M),G0),V=WC(B=>M.next(F*B).value,F,30);return F+"ms "+V}};return M}function cy({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:c,min:p,max:h,restDelta:m=.5,restSpeed:y}){const v=t[0],C={done:!1,value:v},E=z=>p!==void 0&&z<p||h!==void 0&&z>h,_=z=>p===void 0?h:h===void 0||Math.abs(p-z)<Math.abs(h-z)?p:h;let T=n*e;const k=v+T,S=c===void 0?k:c(k);S!==k&&(T=S-v);const I=z=>-T*Math.exp(-z/r),N=z=>S+I(z),M=z=>{const H=I(z),se=N(z);C.done=Math.abs(H)<=m,C.value=C.done?S:se};let F,V;const B=z=>{E(C.value)&&(F=z,V=_E({keyframes:[C.value,_(C.value)],velocity:SE(N,z,C.value),damping:i,stiffness:o,restDelta:m,restSpeed:y}))};return B(0),{calculatedDuration:null,next:z=>{let H=!1;return!V&&F===void 0&&(H=!0,M(z),B(z)),F!==void 0&&z>=F?V.next(z-F):(!H&&M(z),C)}}}const SO=ac(.42,0,1,1),_O=ac(0,0,.58,1),AE=ac(.42,0,.58,1),AO=t=>Array.isArray(t)&&typeof t[0]!="number",NO={linear:fr,easeIn:SO,easeInOut:AE,easeOut:_O,circIn:rm,circInOut:oE,circOut:iE,backIn:nm,backInOut:rE,backOut:nE,anticipate:sE},uy=t=>{if(Zp(t)){EC(t.length===4);const[e,n,r,i]=t;return ac(e,n,r,i)}else if(typeof t=="string")return NO[t];return t};function TO(t,e,n){const r=[],i=n||EE,o=t.length-1;for(let c=0;c<o;c++){let p=i(t[c],t[c+1]);if(e){const h=Array.isArray(e)?e[c]||fr:e;p=lc(h,p)}r.push(p)}return r}function IO(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const o=t.length;if(EC(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const c=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const p=TO(e,r,i),h=p.length,m=y=>{if(c&&y<t[0])return e[0];let v=0;if(h>1)for(;v<t.length-2&&!(y<t[v+1]);v++);const C=ua(t[v],t[v+1],y);return p[v](C)};return n?y=>m(Is(t[0],t[o-1],y)):m}function kO(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=ua(0,e,r);t.push(Tt(n,1,i))}}function OO(t){const e=[0];return kO(e,t.length-1),e}function RO(t,e){return t.map(n=>n*e)}function jO(t,e){return t.map(()=>e||AE).splice(0,t.length-1)}function ad({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=AO(r)?r.map(uy):uy(r),o={done:!1,value:e[0]},c=RO(n&&n.length===e.length?n:OO(e),t),p=IO(c,e,{ease:Array.isArray(i)?i:jO(e,i)});return{calculatedDuration:t,next:h=>(o.value=p(h),o.done=h>=t,o)}}const PO=t=>{const e=({timestamp:n})=>t(n);return{start:()=>yt.update(e,!0),stop:()=>di(e),now:()=>wn.isProcessing?wn.timestamp:us.now()}},MO={decay:cy,inertia:cy,tween:ad,keyframes:ad,spring:_E},DO=t=>t/100;class cm extends bE{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:r,element:i,keyframes:o}=this.options,c=(i==null?void 0:i.KeyframeResolver)||am,p=(h,m)=>this.onKeyframesResolved(h,m);this.resolver=new c(o,p,n,r,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:i=0,repeatType:o,velocity:c=0}=this.options,p=Yp(n)?n:MO[n]||ad;let h,m;p!==ad&&typeof e[0]!="number"&&(h=lc(DO,EE(e[0],e[1])),e=[0,100]);const y=p({...this.options,keyframes:e});o==="mirror"&&(m=p({...this.options,keyframes:[...e].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=HC(y));const{calculatedDuration:v}=y,C=v+i,E=C*(r+1)-i;return{generator:y,mirroredGenerator:m,mapPercentToKeyframes:h,calculatedDuration:v,resolvedDuration:C,totalDuration:E}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:z}=this.options;return{done:!0,value:z[z.length-1]}}const{finalKeyframe:i,generator:o,mirroredGenerator:c,mapPercentToKeyframes:p,keyframes:h,calculatedDuration:m,totalDuration:y,resolvedDuration:v}=r;if(this.startTime===null)return o.next(0);const{delay:C,repeat:E,repeatType:_,repeatDelay:T,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-y/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const S=this.currentTime-C*(this.speed>=0?1:-1),I=this.speed>=0?S<0:S>y;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let N=this.currentTime,M=o;if(E){const z=Math.min(this.currentTime,y)/v;let H=Math.floor(z),se=z%1;!se&&z>=1&&(se=1),se===1&&H--,H=Math.min(H,E+1),!!(H%2)&&(_==="reverse"?(se=1-se,T&&(se-=T/v)):_==="mirror"&&(M=c)),N=Is(0,1,se)*v}const F=I?{done:!1,value:h[0]}:M.next(N);p&&(F.value=p(F.value));let{done:V}=F;!I&&m!==null&&(V=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const B=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&V);return B&&i!==void 0&&(F.value=qd(h,this.options,i)),k&&k(F.value),B&&this.finish(),F}get duration(){const{resolved:e}=this;return e?Es(e.calculatedDuration):0}get time(){return Es(this.currentTime)}set time(e){e=Cs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Es(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=PO,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const i=this.driver.now();this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=i):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const LO=new Set(["opacity","clipPath","filter","transform"]);function BO(t,e,n,{delay:r=0,duration:i=300,repeat:o=0,repeatType:c="loop",ease:p="easeInOut",times:h}={}){const m={[e]:n};h&&(m.offset=h);const y=GC(p,i);return Array.isArray(y)&&(m.easing=y),t.animate(m,{delay:r,duration:i,easing:Array.isArray(y)?"linear":y,fill:"both",iterations:o+1,direction:c==="reverse"?"alternate":"normal"})}const FO=Mp(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ld=10,VO=2e4;function UO(t){return Yp(t.type)||t.type==="spring"||!$C(t.ease)}function zO(t,e){const n=new cm({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const i=[];let o=0;for(;!r.done&&o<VO;)r=n.sample(o),i.push(r.value),o+=ld;return{times:void 0,keyframes:i,duration:o-ld,ease:"linear"}}const NE={anticipate:sE,backInOut:rE,circInOut:oE};function HO(t){return t in NE}class dy extends bE{constructor(e){super(e);const{name:n,motionValue:r,element:i,keyframes:o}=this.options;this.resolver=new wE(o,(c,p)=>this.onKeyframesResolved(c,p),n,r,i),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:r=300,times:i,ease:o,type:c,motionValue:p,name:h,startTime:m}=this.options;if(!p.owner||!p.owner.current)return!1;if(typeof o=="string"&&id()&&HO(o)&&(o=NE[o]),UO(this.options)){const{onComplete:v,onUpdate:C,motionValue:E,element:_,...T}=this.options,k=zO(e,T);e=k.keyframes,e.length===1&&(e[1]=e[0]),r=k.duration,i=k.times,o=k.ease,c="keyframes"}const y=BO(p.owner.current,h,e,{...this.options,duration:r,times:i,ease:o});return y.startTime=m??this.calcStartTime(),this.pendingTimeline?(qx(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:v}=this.options;p.set(qd(e,this.options,n)),v&&v(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:i,type:c,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Es(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Es(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Cs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return fr;const{animation:r}=n;qx(r,e)}return fr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:i,type:o,ease:c,times:p}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:m,onUpdate:y,onComplete:v,element:C,...E}=this.options,_=new cm({...E,keyframes:r,duration:i,type:o,ease:c,times:p,isGenerator:!0}),T=Cs(this.time);m.setWithVelocity(_.sample(T-ld).value,_.sample(T).value,ld)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:i,repeatType:o,damping:c,type:p}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:m}=n.owner.getProps();return FO()&&r&&LO.has(r)&&!h&&!m&&!i&&o!=="mirror"&&c!==0&&p!=="inertia"}}const WO={type:"spring",stiffness:500,damping:25,restSpeed:10},$O=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),GO={type:"keyframes",duration:.8},XO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},KO=(t,{keyframes:e})=>e.length>2?GO:so.has(t)?t.startsWith("scale")?$O(e[1]):WO:XO;function qO({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:o,repeatType:c,repeatDelay:p,from:h,elapsed:m,...y}){return!!Object.keys(y).length}const um=(t,e,n,r={},i,o)=>c=>{const p=qp(r,t)||{},h=p.delay||r.delay||0;let{elapsed:m=0}=r;m=m-Cs(h);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...p,delay:-m,onUpdate:C=>{e.set(C),p.onUpdate&&p.onUpdate(C)},onComplete:()=>{c(),p.onComplete&&p.onComplete()},name:t,motionValue:e,element:o?void 0:i};qO(p)||(y={...y,...KO(t,y)}),y.duration&&(y.duration=Cs(y.duration)),y.repeatDelay&&(y.repeatDelay=Cs(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let v=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(v=!0)),v&&!o&&e.get()!==void 0){const C=qd(y.keyframes,p);if(C!==void 0)return yt.update(()=>{y.onUpdate(C),y.onComplete()}),new pk([])}return!o&&dy.supports(y)?new dy(y):new cm(y)};function YO({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function TE(t,e,{delay:n=0,transitionOverride:r,type:i}={}){var o;let{transition:c=t.getDefaultTransition(),transitionEnd:p,...h}=e;r&&(c=r);const m=[],y=i&&t.animationState&&t.animationState.getState()[i];for(const v in h){const C=t.getValue(v,(o=t.latestValues[v])!==null&&o!==void 0?o:null),E=h[v];if(E===void 0||y&&YO(y,v))continue;const _={delay:n,...qp(c||{},v)};let T=!1;if(window.MotionHandoffAnimation){const S=QC(t);if(S){const I=window.MotionHandoffAnimation(S,v,yt);I!==null&&(_.startTime=I,T=!0)}}K0(t,v),C.start(um(v,C,E,t.shouldReduceMotion&&YC.has(v)?{type:!1}:_,t,T));const k=C.animation;k&&m.push(k)}return p&&Promise.all(m).then(()=>{yt.update(()=>{p&&Tk(t,p)})}),m}function t1(t,e,n={}){var r;const i=Kd(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(o=n.transitionOverride);const c=i?()=>Promise.all(TE(t,i,n)):()=>Promise.resolve(),p=t.variantChildren&&t.variantChildren.size?(m=0)=>{const{delayChildren:y=0,staggerChildren:v,staggerDirection:C}=o;return ZO(t,e,y+m,v,C,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[m,y]=h==="beforeChildren"?[c,p]:[p,c];return m().then(()=>y())}else return Promise.all([c(),p(n.delay)])}function ZO(t,e,n=0,r=0,i=1,o){const c=[],p=(t.variantChildren.size-1)*r,h=i===1?(m=0)=>m*r:(m=0)=>p-m*r;return Array.from(t.variantChildren).sort(QO).forEach((m,y)=>{m.notify("AnimationStart",e),c.push(t1(m,e,{...o,delay:n+h(y)}).then(()=>m.notify("AnimationComplete",e)))}),Promise.all(c)}function QO(t,e){return t.sortNodePosition(e)}function JO(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(o=>t1(t,o,n));r=Promise.all(i)}else if(typeof e=="string")r=t1(t,e,n);else{const i=typeof e=="function"?Kd(t,e,n.custom):e;r=Promise.all(TE(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const eR=Lp.length;function IE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?IE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<eR;n++){const r=Lp[n],i=t.props[r];(Gl(i)||i===!1)&&(e[r]=i)}return e}const tR=[...Dp].reverse(),nR=Dp.length;function rR(t){return e=>Promise.all(e.map(({animation:n,options:r})=>JO(t,n,r)))}function sR(t){let e=rR(t),n=hy(),r=!0;const i=h=>(m,y)=>{var v;const C=Kd(t,y,h==="exit"?(v=t.presenceContext)===null||v===void 0?void 0:v.custom:void 0);if(C){const{transition:E,transitionEnd:_,...T}=C;m={...m,...T,..._}}return m};function o(h){e=h(t)}function c(h){const{props:m}=t,y=IE(t.parent)||{},v=[],C=new Set;let E={},_=1/0;for(let k=0;k<nR;k++){const S=tR[k],I=n[S],N=m[S]!==void 0?m[S]:y[S],M=Gl(N),F=S===h?I.isActive:null;F===!1&&(_=k);let V=N===y[S]&&N!==m[S]&&M;if(V&&r&&t.manuallyAnimateOnMount&&(V=!1),I.protectedKeys={...E},!I.isActive&&F===null||!N&&!I.prevProp||Gd(N)||typeof N=="boolean")continue;const B=iR(I.prevProp,N);let z=B||S===h&&I.isActive&&!V&&M||k>_&&M,H=!1;const se=Array.isArray(N)?N:[N];let he=se.reduce(i(S),{});F===!1&&(he={});const{prevResolvedValues:te={}}=I,de={...te,...he},ne=Q=>{z=!0,C.has(Q)&&(H=!0,C.delete(Q)),I.needsAnimating[Q]=!0;const J=t.getValue(Q);J&&(J.liveStyle=!1)};for(const Q in de){const J=he[Q],ee=te[Q];if(E.hasOwnProperty(Q))continue;let ce=!1;$0(J)&&$0(ee)?ce=!zC(J,ee):ce=J!==ee,ce?J!=null?ne(Q):C.add(Q):J!==void 0&&C.has(Q)?ne(Q):I.protectedKeys[Q]=!0}I.prevProp=N,I.prevResolvedValues=he,I.isActive&&(E={...E,...he}),r&&t.blockInitialAnimation&&(z=!1),z&&(!(V&&B)||H)&&v.push(...se.map(Q=>({animation:Q,options:{type:S}})))}if(C.size){const k={};C.forEach(S=>{const I=t.getBaseTarget(S),N=t.getValue(S);N&&(N.liveStyle=!0),k[S]=I??null}),v.push({animation:k})}let T=!!v.length;return r&&(m.initial===!1||m.initial===m.animate)&&!t.manuallyAnimateOnMount&&(T=!1),r=!1,T?e(v):Promise.resolve()}function p(h,m){var y;if(n[h].isActive===m)return Promise.resolve();(y=t.variantChildren)===null||y===void 0||y.forEach(C=>{var E;return(E=C.animationState)===null||E===void 0?void 0:E.setActive(h,m)}),n[h].isActive=m;const v=c(h);for(const C in n)n[C].protectedKeys={};return v}return{animateChanges:c,setActive:p,setAnimateFunction:o,getState:()=>n,reset:()=>{n=hy(),r=!0}}}function iR(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!zC(e,t):!1}function Ai(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hy(){return{animate:Ai(!0),whileInView:Ai(),whileHover:Ai(),whileTap:Ai(),whileDrag:Ai(),whileFocus:Ai(),exit:Ai()}}class yi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class oR extends yi{constructor(e){super(e),e.animationState||(e.animationState=sR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let aR=0;class lR extends yi{constructor(){super(...arguments),this.id=aR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const cR={animation:{Feature:oR},exit:{Feature:lR}};function Yl(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function cc(t){return{point:{x:t.pageX,y:t.pageY}}}const uR=t=>e=>Qp(e)&&t(e,cc(e));function yl(t,e,n,r){return Yl(t,e,uR(n),r)}const fy=(t,e)=>Math.abs(t-e);function dR(t,e){const n=fy(t.x,e.x),r=fy(t.y,e.y);return Math.sqrt(n**2+r**2)}class kE{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=yf(this.lastMoveEventInfo,this.history),C=this.startEvent!==null,E=dR(v.offset,{x:0,y:0})>=3;if(!C&&!E)return;const{point:_}=v,{timestamp:T}=wn;this.history.push({..._,timestamp:T});const{onStart:k,onMove:S}=this.handlers;C||(k&&k(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,v)},this.handlePointerMove=(v,C)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=xf(C,this.transformPagePoint),yt.update(this.updatePoint,!0)},this.handlePointerUp=(v,C)=>{this.end();const{onEnd:E,onSessionEnd:_,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=yf(v.type==="pointercancel"?this.lastMoveEventInfo:xf(C,this.transformPagePoint),this.history);this.startEvent&&E&&E(v,k),_&&_(v,k)},!Qp(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const c=cc(e),p=xf(c,this.transformPagePoint),{point:h}=p,{timestamp:m}=wn;this.history=[{...h,timestamp:m}];const{onSessionStart:y}=n;y&&y(e,yf(p,this.history)),this.removeListeners=lc(yl(this.contextWindow,"pointermove",this.handlePointerMove),yl(this.contextWindow,"pointerup",this.handlePointerUp),yl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),di(this.updatePoint)}}function xf(t,e){return e?{point:e(t.point)}:t}function py(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yf({point:t},e){return{point:t,delta:py(t,OE(e)),offset:py(t,hR(e)),velocity:fR(e,.1)}}function hR(t){return t[0]}function OE(t){return t[t.length-1]}function fR(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=OE(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Cs(e)));)n--;if(!r)return{x:0,y:0};const o=Es(i.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const c={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}const RE=1e-4,pR=1-RE,mR=1+RE,jE=.01,gR=0-jE,xR=0+jE;function gr(t){return t.max-t.min}function yR(t,e,n){return Math.abs(t-e)<=n}function my(t,e,n,r=.5){t.origin=r,t.originPoint=Tt(e.min,e.max,t.origin),t.scale=gr(n)/gr(e),t.translate=Tt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=pR&&t.scale<=mR||isNaN(t.scale))&&(t.scale=1),(t.translate>=gR&&t.translate<=xR||isNaN(t.translate))&&(t.translate=0)}function vl(t,e,n,r){my(t.x,e.x,n.x,r?r.originX:void 0),my(t.y,e.y,n.y,r?r.originY:void 0)}function gy(t,e,n){t.min=n.min+e.min,t.max=t.min+gr(e)}function vR(t,e,n){gy(t.x,e.x,n.x),gy(t.y,e.y,n.y)}function xy(t,e,n){t.min=e.min-n.min,t.max=t.min+gr(e)}function wl(t,e,n){xy(t.x,e.x,n.x),xy(t.y,e.y,n.y)}function wR(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Tt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Tt(n,t,r.max):Math.min(t,n)),t}function yy(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function bR(t,{top:e,left:n,bottom:r,right:i}){return{x:yy(t.x,n,i),y:yy(t.y,e,r)}}function vy(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function CR(t,e){return{x:vy(t.x,e.x),y:vy(t.y,e.y)}}function ER(t,e){let n=.5;const r=gr(t),i=gr(e);return i>r?n=ua(e.min,e.max-r,t.min):r>i&&(n=ua(t.min,t.max-i,e.min)),Is(0,1,n)}function SR(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const n1=.35;function _R(t=n1){return t===!1?t=0:t===!0&&(t=n1),{x:wy(t,"left","right"),y:wy(t,"top","bottom")}}function wy(t,e,n){return{min:by(t,e),max:by(t,n)}}function by(t,e){return typeof t=="number"?t:t[e]||0}const Cy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Uo=()=>({x:Cy(),y:Cy()}),Ey=()=>({min:0,max:0}),Ht=()=>({x:Ey(),y:Ey()});function _r(t){return[t("x"),t("y")]}function PE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function AR({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function NR(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vf(t){return t===void 0||t===1}function r1({scale:t,scaleX:e,scaleY:n}){return!vf(t)||!vf(e)||!vf(n)}function ki(t){return r1(t)||ME(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function ME(t){return Sy(t.x)||Sy(t.y)}function Sy(t){return t&&t!=="0%"}function cd(t,e,n){const r=t-n,i=e*r;return n+i}function _y(t,e,n,r,i){return i!==void 0&&(t=cd(t,i,r)),cd(t,n,r)+e}function s1(t,e=0,n=1,r,i){t.min=_y(t.min,e,n,r,i),t.max=_y(t.max,e,n,r,i)}function DE(t,{x:e,y:n}){s1(t.x,e.translate,e.scale,e.originPoint),s1(t.y,n.translate,n.scale,n.originPoint)}const Ay=.999999999999,Ny=1.0000000000001;function TR(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let o,c;for(let p=0;p<i;p++){o=n[p],c=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ho(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),c&&(e.x*=c.x.scale,e.y*=c.y.scale,DE(t,c)),r&&ki(o.latestValues)&&Ho(t,o.latestValues))}e.x<Ny&&e.x>Ay&&(e.x=1),e.y<Ny&&e.y>Ay&&(e.y=1)}function zo(t,e){t.min=t.min+e,t.max=t.max+e}function Ty(t,e,n,r,i=.5){const o=Tt(t.min,t.max,i);s1(t,e,n,o,r)}function Ho(t,e){Ty(t.x,e.x,e.scaleX,e.scale,e.originX),Ty(t.y,e.y,e.scaleY,e.scale,e.originY)}function LE(t,e){return PE(NR(t.getBoundingClientRect(),e))}function IR(t,e,n){const r=LE(t,n),{scroll:i}=e;return i&&(zo(r.x,i.offset.x),zo(r.y,i.offset.y)),r}const BE=({current:t})=>t?t.ownerDocument.defaultView:null,kR=new WeakMap;class OR{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ht(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=y=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(cc(y).point)},o=(y,v)=>{const{drag:C,dragPropagation:E,onDragStart:_}=this.getProps();if(C&&!E&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ek(C),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),_r(k=>{let S=this.getAxisMotionValue(k).get()||0;if(cs.test(S)){const{projection:I}=this.visualElement;if(I&&I.layout){const N=I.layout.layoutBox[k];N&&(S=gr(N)*(parseFloat(S)/100))}}this.originPoint[k]=S}),_&&yt.postRender(()=>_(y,v)),K0(this.visualElement,"transform");const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},c=(y,v)=>{const{dragPropagation:C,dragDirectionLock:E,onDirectionLock:_,onDrag:T}=this.getProps();if(!C&&!this.openDragLock)return;const{offset:k}=v;if(E&&this.currentDirection===null){this.currentDirection=RR(k),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",v.point,k),this.updateAxis("y",v.point,k),this.visualElement.render(),T&&T(y,v)},p=(y,v)=>this.stop(y,v),h=()=>_r(y=>{var v;return this.getAnimationState(y)==="paused"&&((v=this.getAxisMotionValue(y).animation)===null||v===void 0?void 0:v.play())}),{dragSnapToOrigin:m}=this.getProps();this.panSession=new kE(e,{onSessionStart:i,onStart:o,onMove:c,onSessionEnd:p,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:m,contextWindow:BE(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:o}=this.getProps();o&&yt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!Jc(e,i,this.currentDirection))return;const o=this.getAxisMotionValue(e);let c=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(c=wR(c,this.constraints[e],this.elastic[e])),o.set(c)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Fo(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&i?this.constraints=bR(i.layoutBox,n):this.constraints=!1,this.elastic=_R(r),o!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&_r(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=SR(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Fo(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const o=IR(r,i.root,this.visualElement.getTransformPagePoint());let c=CR(i.layout.layoutBox,o);if(n){const p=n(AR(c));this.hasMutatedConstraints=!!p,p&&(c=PE(p))}return c}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:o,dragSnapToOrigin:c,onDragTransitionEnd:p}=this.getProps(),h=this.constraints||{},m=_r(y=>{if(!Jc(y,n,this.currentDirection))return;let v=h&&h[y]||{};c&&(v={min:0,max:0});const C=i?200:1e6,E=i?40:1e7,_={type:"inertia",velocity:r?e[y]:0,bounceStiffness:C,bounceDamping:E,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(y,_)});return Promise.all(m).then(p)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return K0(this.visualElement,e),r.start(um(e,r,0,n,this.visualElement,!1))}stopAnimation(){_r(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){_r(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){_r(n=>{const{drag:r}=this.getProps();if(!Jc(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,o=this.getAxisMotionValue(n);if(i&&i.layout){const{min:c,max:p}=i.layout.layoutBox[n];o.set(e[n]-Tt(c,p,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Fo(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};_r(c=>{const p=this.getAxisMotionValue(c);if(p&&this.constraints!==!1){const h=p.get();i[c]=ER({min:h,max:h},this.constraints[c])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),_r(c=>{if(!Jc(c,e,null))return;const p=this.getAxisMotionValue(c),{min:h,max:m}=this.constraints[c];p.set(Tt(h,m,i[c]))})}addListeners(){if(!this.visualElement.current)return;kR.set(this.visualElement,this);const e=this.visualElement.current,n=yl(e,"pointerdown",h=>{const{drag:m,dragListener:y=!0}=this.getProps();m&&y&&this.start(h)}),r=()=>{const{dragConstraints:h}=this.getProps();Fo(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,o=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),yt.read(r);const c=Yl(window,"resize",()=>this.scalePositionWithinConstraints()),p=i.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m})=>{this.isDragging&&m&&(_r(y=>{const v=this.getAxisMotionValue(y);v&&(this.originPoint[y]+=h[y].translate,v.set(v.get()+h[y].translate))}),this.visualElement.render())});return()=>{c(),n(),o(),p&&p()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:o=!1,dragElastic:c=n1,dragMomentum:p=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:o,dragElastic:c,dragMomentum:p}}}function Jc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function RR(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class jR extends yi{constructor(e){super(e),this.removeGroupControls=fr,this.removeListeners=fr,this.controls=new OR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||fr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Iy=t=>(e,n)=>{t&&yt.postRender(()=>t(e,n))};class PR extends yi{constructor(){super(...arguments),this.removePointerDownListener=fr}onPointerDown(e){this.session=new kE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:BE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:Iy(e),onStart:Iy(n),onMove:r,onEnd:(o,c)=>{delete this.session,i&&yt.postRender(()=>i(o,c))}}}mount(){this.removePointerDownListener=yl(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const wu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function ky(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Xa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(je.test(t))t=parseFloat(t);else return t;const n=ky(t,e.target.x),r=ky(t,e.target.y);return`${n}% ${r}%`}},MR={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=hi.parse(t);if(i.length>5)return r;const o=hi.createTransformer(t),c=typeof i[0]!="number"?1:0,p=n.x.scale*e.x,h=n.y.scale*e.y;i[0+c]/=p,i[1+c]/=h;const m=Tt(p,h,.5);return typeof i[2+c]=="number"&&(i[2+c]/=m),typeof i[3+c]=="number"&&(i[3+c]/=m),o(i)}};class DR extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:o}=e;nk(LR),o&&(n.group&&n.group.add(o),r&&r.register&&i&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),wu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:o}=this.props,c=r.projection;return c&&(c.isPresent=o,i||e.layoutDependency!==n||n===void 0?c.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?c.promote():c.relegate()||yt.postRender(()=>{const p=c.getStack();(!p||!p.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fp.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function FE(t){const[e,n]=bC(),r=O.useContext(Op);return f.jsx(DR,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(IC),isPresent:e,safeToRemove:n})}const LR={borderRadius:{...Xa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Xa,borderTopRightRadius:Xa,borderBottomLeftRadius:Xa,borderBottomRightRadius:Xa,boxShadow:MR};function BR(t,e,n){const r=On(t)?t:Kl(t);return r.start(um("",r,e,n)),r.animation}function FR(t){return t instanceof SVGElement&&t.tagName!=="svg"}const VR=(t,e)=>t.depth-e.depth;class UR{constructor(){this.children=[],this.isDirty=!1}add(e){Jp(this.children,e),this.isDirty=!0}remove(e){em(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(VR),this.isDirty=!1,this.children.forEach(e)}}function zR(t,e){const n=us.now(),r=({timestamp:i})=>{const o=i-n;o>=e&&(di(r),t(o-e))};return yt.read(r,!0),()=>di(r)}const VE=["TopLeft","TopRight","BottomLeft","BottomRight"],HR=VE.length,Oy=t=>typeof t=="string"?parseFloat(t):t,Ry=t=>typeof t=="number"||je.test(t);function WR(t,e,n,r,i,o){i?(t.opacity=Tt(0,n.opacity!==void 0?n.opacity:1,$R(r)),t.opacityExit=Tt(e.opacity!==void 0?e.opacity:1,0,GR(r))):o&&(t.opacity=Tt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<HR;c++){const p=`border${VE[c]}Radius`;let h=jy(e,p),m=jy(n,p);if(h===void 0&&m===void 0)continue;h||(h=0),m||(m=0),h===0||m===0||Ry(h)===Ry(m)?(t[p]=Math.max(Tt(Oy(h),Oy(m),r),0),(cs.test(m)||cs.test(h))&&(t[p]+="%")):t[p]=m}(e.rotate||n.rotate)&&(t.rotate=Tt(e.rotate||0,n.rotate||0,r))}function jy(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const $R=UE(0,.5,iE),GR=UE(.5,.95,fr);function UE(t,e,n){return r=>r<t?0:r>e?1:n(ua(t,e,r))}function Py(t,e){t.min=e.min,t.max=e.max}function Sr(t,e){Py(t.x,e.x),Py(t.y,e.y)}function My(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Dy(t,e,n,r,i){return t-=e,t=cd(t,1/n,r),i!==void 0&&(t=cd(t,1/i,r)),t}function XR(t,e=0,n=1,r=.5,i,o=t,c=t){if(cs.test(e)&&(e=parseFloat(e),e=Tt(c.min,c.max,e/100)-c.min),typeof e!="number")return;let p=Tt(o.min,o.max,r);t===o&&(p-=e),t.min=Dy(t.min,e,n,p,i),t.max=Dy(t.max,e,n,p,i)}function Ly(t,e,[n,r,i],o,c){XR(t,e[n],e[r],e[i],e.scale,o,c)}const KR=["x","scaleX","originX"],qR=["y","scaleY","originY"];function By(t,e,n,r){Ly(t.x,e,KR,n?n.x:void 0,r?r.x:void 0),Ly(t.y,e,qR,n?n.y:void 0,r?r.y:void 0)}function Fy(t){return t.translate===0&&t.scale===1}function zE(t){return Fy(t.x)&&Fy(t.y)}function Vy(t,e){return t.min===e.min&&t.max===e.max}function YR(t,e){return Vy(t.x,e.x)&&Vy(t.y,e.y)}function Uy(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function HE(t,e){return Uy(t.x,e.x)&&Uy(t.y,e.y)}function zy(t){return gr(t.x)/gr(t.y)}function Hy(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class ZR{constructor(){this.members=[]}add(e){Jp(this.members,e),e.scheduleRender()}remove(e){if(em(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const o=this.members[i];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function QR(t,e,n){let r="";const i=t.x.translate/e.x,o=t.y.translate/e.y,c=(n==null?void 0:n.z)||0;if((i||o||c)&&(r=`translate3d(${i}px, ${o}px, ${c}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:m,rotate:y,rotateX:v,rotateY:C,skewX:E,skewY:_}=n;m&&(r=`perspective(${m}px) ${r}`),y&&(r+=`rotate(${y}deg) `),v&&(r+=`rotateX(${v}deg) `),C&&(r+=`rotateY(${C}deg) `),E&&(r+=`skewX(${E}deg) `),_&&(r+=`skewY(${_}deg) `)}const p=t.x.scale*e.x,h=t.y.scale*e.y;return(p!==1||h!==1)&&(r+=`scale(${p}, ${h})`),r||"none"}const Oi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},rl=typeof window<"u"&&window.MotionDebug!==void 0,wf=["","X","Y","Z"],JR={visibility:"hidden"},Wy=1e3;let e5=0;function bf(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function WE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=QC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",yt,!(i||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&WE(r)}function $E({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(c={},p=e==null?void 0:e()){this.id=e5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,rl&&(Oi.totalNodes=Oi.resolvedTargetDeltas=Oi.recalculatedProjection=0),this.nodes.forEach(r5),this.nodes.forEach(l5),this.nodes.forEach(c5),this.nodes.forEach(s5),rl&&window.MotionDebug.record(Oi)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=p?p.root||p:this,this.path=p?[...p.path,p]:[],this.parent=p,this.depth=p?p.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new UR)}addEventListener(c,p){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new tm),this.eventHandlers.get(c).add(p)}notifyListeners(c,...p){const h=this.eventHandlers.get(c);h&&h.notify(...p)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,p=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=FR(c),this.instance=c;const{layoutId:h,layout:m,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),p&&(m||h)&&(this.isLayoutDirty=!0),t){let v;const C=()=>this.root.updateBlockedByResize=!1;t(c,()=>{this.root.updateBlockedByResize=!0,v&&v(),v=zR(C,250),wu.hasAnimatedSinceResize&&(wu.hasAnimatedSinceResize=!1,this.nodes.forEach(Gy))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&y&&(h||m)&&this.addEventListener("didUpdate",({delta:v,hasLayoutChanged:C,hasRelativeTargetChanged:E,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||y.getDefaultTransition()||p5,{onLayoutAnimationStart:k,onLayoutAnimationComplete:S}=y.getProps(),I=!this.targetLayout||!HE(this.targetLayout,_)||E,N=!C&&E;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||N||C&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(v,N);const M={...qp(T,"layout"),onPlay:k,onComplete:S};(y.shouldReduceMotion||this.options.layoutRoot)&&(M.delay=0,M.type=!1),this.startAnimation(M)}else C||Gy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,di(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(u5),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&WE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const v=this.path[y];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:p,layout:h}=this.options;if(p===void 0&&!h)return;const m=this.getTransformTemplate();this.prevTransformTemplateValue=m?m(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach($y);return}this.isUpdating||this.nodes.forEach(o5),this.isUpdating=!1,this.nodes.forEach(a5),this.nodes.forEach(t5),this.nodes.forEach(n5),this.clearAllSnapshots();const p=us.now();wn.delta=Is(0,1e3/60,p-wn.timestamp),wn.timestamp=p,wn.isProcessing=!0,df.update.process(wn),df.preRender.process(wn),df.render.process(wn),wn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fp.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(i5),this.sharedNodes.forEach(d5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,yt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){yt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ht(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:p}=this.options;p&&p.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let p=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(p=!1),p){const h=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!i)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,p=this.projectionDelta&&!zE(this.projectionDelta),h=this.getTransformTemplate(),m=h?h(this.latestValues,""):void 0,y=m!==this.prevTransformTemplateValue;c&&(p||ki(this.latestValues)||y)&&(i(this.instance,m),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const p=this.measurePageBox();let h=this.removeElementScroll(p);return c&&(h=this.removeTransform(h)),m5(h),{animationId:this.root.animationId,measuredBox:p,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:p}=this.options;if(!p)return Ht();const h=p.measureViewportBox();if(!(((c=this.scroll)===null||c===void 0?void 0:c.wasRoot)||this.path.some(g5))){const{scroll:y}=this.root;y&&(zo(h.x,y.offset.x),zo(h.y,y.offset.y))}return h}removeElementScroll(c){var p;const h=Ht();if(Sr(h,c),!((p=this.scroll)===null||p===void 0)&&p.wasRoot)return h;for(let m=0;m<this.path.length;m++){const y=this.path[m],{scroll:v,options:C}=y;y!==this.root&&v&&C.layoutScroll&&(v.wasRoot&&Sr(h,c),zo(h.x,v.offset.x),zo(h.y,v.offset.y))}return h}applyTransform(c,p=!1){const h=Ht();Sr(h,c);for(let m=0;m<this.path.length;m++){const y=this.path[m];!p&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Ho(h,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),ki(y.latestValues)&&Ho(h,y.latestValues)}return ki(this.latestValues)&&Ho(h,this.latestValues),h}removeTransform(c){const p=Ht();Sr(p,c);for(let h=0;h<this.path.length;h++){const m=this.path[h];if(!m.instance||!ki(m.latestValues))continue;r1(m.latestValues)&&m.updateSnapshot();const y=Ht(),v=m.measurePageBox();Sr(y,v),By(p,m.latestValues,m.snapshot?m.snapshot.layoutBox:void 0,y)}return ki(this.latestValues)&&By(p,this.latestValues),p}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var p;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(c||m&&this.isSharedProjectionDirty||this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:v,layoutId:C}=this.options;if(!(!this.layout||!(v||C))){if(this.resolvedRelativeTargetAt=wn.timestamp,!this.targetDelta&&!this.relativeTarget){const E=this.getClosestProjectingParent();E&&E.layout&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),wl(this.relativeTargetOrigin,this.layout.layoutBox,E.layout.layoutBox),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ht(),this.targetWithTransforms=Ht()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),vR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Sr(this.target,this.layout.layoutBox),DE(this.target,this.targetDelta)):Sr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const E=this.getClosestProjectingParent();E&&!!E.resumingFrom==!!this.resumingFrom&&!E.options.layoutScroll&&E.target&&this.animationProgress!==1?(this.relativeParent=E,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ht(),this.relativeTargetOrigin=Ht(),wl(this.relativeTargetOrigin,this.target,E.target),Sr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}rl&&Oi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||r1(this.parent.latestValues)||ME(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var c;const p=this.getLead(),h=!!this.resumingFrom||this!==p;let m=!0;if((this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===wn.timestamp&&(m=!1),m)return;const{layout:y,layoutId:v}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(y||v))return;Sr(this.layoutCorrected,this.layout.layoutBox);const C=this.treeScale.x,E=this.treeScale.y;TR(this.layoutCorrected,this.treeScale,this.path,h),p.layout&&!p.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(p.target=p.layout.layoutBox,p.targetWithTransforms=Ht());const{target:_}=p;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(My(this.prevProjectionDelta.x,this.projectionDelta.x),My(this.prevProjectionDelta.y,this.projectionDelta.y)),vl(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==C||this.treeScale.y!==E||!Hy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Hy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),rl&&Oi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var p;if((p=this.options.visualElement)===null||p===void 0||p.scheduleRender(),c){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Uo(),this.projectionDelta=Uo(),this.projectionDeltaWithTransform=Uo()}setAnimationOrigin(c,p=!1){const h=this.snapshot,m=h?h.latestValues:{},y={...this.latestValues},v=Uo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!p;const C=Ht(),E=h?h.source:void 0,_=this.layout?this.layout.source:void 0,T=E!==_,k=this.getStack(),S=!k||k.members.length<=1,I=!!(T&&!S&&this.options.crossfade===!0&&!this.path.some(f5));this.animationProgress=0;let N;this.mixTargetDelta=M=>{const F=M/1e3;Xy(v.x,c.x,F),Xy(v.y,c.y,F),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(wl(C,this.layout.layoutBox,this.relativeParent.layout.layoutBox),h5(this.relativeTarget,this.relativeTargetOrigin,C,F),N&&YR(this.relativeTarget,N)&&(this.isProjectionDirty=!1),N||(N=Ht()),Sr(N,this.relativeTarget)),T&&(this.animationValues=y,WR(y,m,this.latestValues,F,I,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(di(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=yt.update(()=>{wu.hasAnimatedSinceResize=!0,this.currentAnimation=BR(0,Wy,{...c,onUpdate:p=>{this.mixTargetDelta(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wy),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:p,target:h,layout:m,latestValues:y}=c;if(!(!p||!h||!m)){if(this!==c&&this.layout&&m&&GE(this.options.animationType,this.layout.layoutBox,m.layoutBox)){h=this.target||Ht();const v=gr(this.layout.layoutBox.x);h.x.min=c.target.x.min,h.x.max=h.x.min+v;const C=gr(this.layout.layoutBox.y);h.y.min=c.target.y.min,h.y.max=h.y.min+C}Sr(p,h),Ho(p,y),vl(this.projectionDeltaWithTransform,this.layoutCorrected,p,y)}}registerSharedNode(c,p){this.sharedNodes.has(c)||this.sharedNodes.set(c,new ZR),this.sharedNodes.get(c).add(p);const m=p.options.initialPromotionConfig;p.promote({transition:m?m.transition:void 0,preserveFollowOpacity:m&&m.shouldPreserveFollowOpacity?m.shouldPreserveFollowOpacity(p):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var c;const{layoutId:p}=this.options;return p?((c=this.getStack())===null||c===void 0?void 0:c.lead)||this:this}getPrevLead(){var c;const{layoutId:p}=this.options;return p?(c=this.getStack())===null||c===void 0?void 0:c.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:p,preserveFollowOpacity:h}={}){const m=this.getStack();m&&m.promote(this,h),c&&(this.projectionDelta=void 0,this.needsReset=!0),p&&this.setOptions({transition:p})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let p=!1;const{latestValues:h}=c;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(p=!0),!p)return;const m={};h.z&&bf("z",c,m,this.animationValues);for(let y=0;y<wf.length;y++)bf(`rotate${wf[y]}`,c,m,this.animationValues),bf(`skew${wf[y]}`,c,m,this.animationValues);c.render();for(const y in m)c.setStaticValue(y,m[y]),this.animationValues&&(this.animationValues[y]=m[y]);c.scheduleRender()}getProjectionStyles(c){var p,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return JR;const m={visibility:""},y=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,m.opacity="",m.pointerEvents=yu(c==null?void 0:c.pointerEvents)||"",m.transform=y?y(this.latestValues,""):"none",m;const v=this.getLead();if(!this.projectionDelta||!this.layout||!v.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=yu(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!ki(this.latestValues)&&(T.transform=y?y({},""):"none",this.hasProjected=!1),T}const C=v.animationValues||v.latestValues;this.applyTransformsToTarget(),m.transform=QR(this.projectionDeltaWithTransform,this.treeScale,C),y&&(m.transform=y(C,m.transform));const{x:E,y:_}=this.projectionDelta;m.transformOrigin=`${E.origin*100}% ${_.origin*100}% 0`,v.animationValues?m.opacity=v===this?(h=(p=C.opacity)!==null&&p!==void 0?p:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:C.opacityExit:m.opacity=v===this?C.opacity!==void 0?C.opacity:"":C.opacityExit!==void 0?C.opacityExit:0;for(const T in sd){if(C[T]===void 0)continue;const{correct:k,applyTo:S}=sd[T],I=m.transform==="none"?C[T]:k(C[T],v);if(S){const N=S.length;for(let M=0;M<N;M++)m[S[M]]=I}else m[T]=I}return this.options.layoutId&&(m.pointerEvents=v===this?yu(c==null?void 0:c.pointerEvents)||"":"none"),m}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var p;return(p=c.currentAnimation)===null||p===void 0?void 0:p.stop()}),this.root.nodes.forEach($y),this.root.sharedNodes.clear()}}}function t5(t){t.updateLayout()}function n5(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:i}=t.layout,{animationType:o}=t.options,c=n.source!==t.layout.source;o==="size"?_r(v=>{const C=c?n.measuredBox[v]:n.layoutBox[v],E=gr(C);C.min=r[v].min,C.max=C.min+E}):GE(o,n.layoutBox,r)&&_r(v=>{const C=c?n.measuredBox[v]:n.layoutBox[v],E=gr(r[v]);C.max=C.min+E,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[v].max=t.relativeTarget[v].min+E)});const p=Uo();vl(p,r,n.layoutBox);const h=Uo();c?vl(h,t.applyTransform(i,!0),n.measuredBox):vl(h,r,n.layoutBox);const m=!zE(p);let y=!1;if(!t.resumeFrom){const v=t.getClosestProjectingParent();if(v&&!v.resumeFrom){const{snapshot:C,layout:E}=v;if(C&&E){const _=Ht();wl(_,n.layoutBox,C.layoutBox);const T=Ht();wl(T,r,E.layoutBox),HE(_,T)||(y=!0),v.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=_,t.relativeParent=v)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:h,layoutDelta:p,hasLayoutChanged:m,hasRelativeTargetChanged:y})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function r5(t){rl&&Oi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function s5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function i5(t){t.clearSnapshot()}function $y(t){t.clearMeasurements()}function o5(t){t.isLayoutDirty=!1}function a5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Gy(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function l5(t){t.resolveTargetDelta()}function c5(t){t.calcProjection()}function u5(t){t.resetSkewAndRotation()}function d5(t){t.removeLeadSnapshot()}function Xy(t,e,n){t.translate=Tt(e.translate,0,n),t.scale=Tt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Ky(t,e,n,r){t.min=Tt(e.min,n.min,r),t.max=Tt(e.max,n.max,r)}function h5(t,e,n,r){Ky(t.x,e.x,n.x,r),Ky(t.y,e.y,n.y,r)}function f5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const p5={duration:.45,ease:[.4,0,.1,1]},qy=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Yy=qy("applewebkit/")&&!qy("chrome/")?Math.round:fr;function Zy(t){t.min=Yy(t.min),t.max=Yy(t.max)}function m5(t){Zy(t.x),Zy(t.y)}function GE(t,e,n){return t==="position"||t==="preserve-aspect"&&!yR(zy(e),zy(n),.2)}function g5(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const x5=$E({attachResizeListener:(t,e)=>Yl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Cf={current:void 0},XE=$E({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Cf.current){const t=new x5({});t.mount(window),t.setOptions({layoutScroll:!0}),Cf.current=t}return Cf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),y5={pan:{Feature:PR},drag:{Feature:jR,ProjectionNode:XE,MeasureLayout:FE}};function Qy(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,o=r[i];o&&yt.postRender(()=>o(e,cc(e)))}class v5 extends yi{mount(){const{current:e}=this.node;e&&(this.unmount=yk(e,n=>(Qy(this.node,n,"Start"),r=>Qy(this.node,r,"End"))))}unmount(){}}class w5 extends yi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=lc(Yl(this.node.current,"focus",()=>this.onFocus()),Yl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Jy(t,e,n){const{props:r}=t;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),o=r[i];o&&yt.postRender(()=>o(e,cc(e)))}class b5 extends yi{mount(){const{current:e}=this.node;e&&(this.unmount=Ck(e,n=>(Jy(this.node,n,"Start"),(r,{success:i})=>Jy(this.node,r,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const i1=new WeakMap,Ef=new WeakMap,C5=t=>{const e=i1.get(t.target);e&&e(t)},E5=t=>{t.forEach(C5)};function S5({root:t,...e}){const n=t||document;Ef.has(n)||Ef.set(n,{});const r=Ef.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(E5,{root:t,...e})),r[i]}function _5(t,e,n){const r=S5(e);return i1.set(t,n),r.observe(t),()=>{i1.delete(t),r.unobserve(t)}}const A5={some:0,all:1};class N5 extends yi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:o}=e,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:A5[i]},p=h=>{const{isIntersecting:m}=h;if(this.isInView===m||(this.isInView=m,o&&!m&&this.hasEnteredView))return;m&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",m);const{onViewportEnter:y,onViewportLeave:v}=this.node.getProps(),C=m?y:v;C&&C(h)};return _5(this.node.current,c,p)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(T5(e,n))&&this.startObserver()}unmount(){}}function T5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const I5={inView:{Feature:N5},tap:{Feature:b5},focus:{Feature:w5},hover:{Feature:v5}},k5={layout:{ProjectionNode:XE,MeasureLayout:FE}},o1={current:null},KE={current:!1};function O5(){if(KE.current=!0,!!Pp)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>o1.current=t.matches;t.addListener(e),e()}else o1.current=!1}const R5=[...vE,In,hi],j5=t=>R5.find(yE(t)),e2=new WeakMap;function P5(t,e,n){for(const r in e){const i=e[r],o=n[r];if(On(i))t.addValue(r,i);else if(On(o))t.addValue(r,Kl(i,{owner:t}));else if(o!==i)if(t.hasValue(r)){const c=t.getValue(r);c.liveStyle===!0?c.jump(i):c.hasAnimated||c.set(i)}else{const c=t.getStaticValue(r);t.addValue(r,Kl(c!==void 0?c:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const t2=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class M5{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:o,visualState:c},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=am,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=us.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,yt.render(this.render,!1,!0))};const{latestValues:h,renderState:m,onUpdate:y}=c;this.onUpdate=y,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=m,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=p,this.blockInitialAnimation=!!o,this.isControllingVariants=Xd(n),this.isVariantNode=NC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:v,...C}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in C){const _=C[E];h[E]!==void 0&&On(_)&&_.set(h[E],!1)}}mount(e){this.current=e,e2.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),KE.current||O5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:o1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){e2.delete(this.current),this.projection&&this.projection.unmount(),di(this.notifyUpdate),di(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=so.has(e),i=n.on("change",p=>{this.latestValues[e]=p,this.props.onUpdate&&yt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),o(),c&&c(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in da){const n=da[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ht()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<t2.length;r++){const i=t2[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const o="on"+i,c=e[o];c&&(this.propEventSubscriptions[i]=this.on(i,c))}this.prevMotionValues=P5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Kl(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(gE(i)||aE(i))?i=parseFloat(i):!j5(i)&&hi.test(n)&&(i=fE(e,n)),this.setBaseTarget(e,On(i)?i.get():i)),On(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let i;if(typeof r=="string"||typeof r=="object"){const c=Up(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);c&&(i=c[e])}if(r&&i!==void 0)return i;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!On(o)?o:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new tm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class qE extends M5{constructor(){super(...arguments),this.KeyframeResolver=wE}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;On(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function D5(t){return window.getComputedStyle(t)}class L5 extends qE{constructor(){super(...arguments),this.type="html",this.renderInstance=DC}readValueFromInstance(e,n){if(so.has(n)){const r=om(n);return r&&r.default||0}else{const r=D5(e),i=(jC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return LE(e,n)}build(e,n,r){Wp(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return Kp(e,n,r)}}class B5 extends qE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ht}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(so.has(n)){const r=om(n);return r&&r.default||0}return n=LC.has(n)?n:Bp(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return VC(e,n,r)}build(e,n,r){$p(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,i){BC(e,n,r,i)}mount(e){this.isSVGTag=Xp(e.tagName),super.mount(e)}}const F5=(t,e)=>Vp(t)?new B5(e):new L5(e,{allowProjection:t!==O.Fragment}),V5=dk({...cR,...I5,...y5,...k5},F5),Ie=AI(V5);function Zi(t){"@babel/helpers - typeof";return Zi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zi(t)}function U5(t,e){if(Zi(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(Zi(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function YE(t){var e=U5(t,"string");return Zi(e)=="symbol"?e:e+""}function Wo(t,e,n){return(e=YE(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function n2(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?n2(Object(n),!0).forEach(function(r){Wo(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function z5(t){if(Array.isArray(t))return t}function H5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r,i,o,c,p=[],h=!0,m=!1;try{if(o=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;h=!1}else for(;!(h=(r=o.call(n)).done)&&(p.push(r.value),p.length!==e);h=!0);}catch(y){m=!0,i=y}finally{try{if(!h&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(m)throw i}}return p}}function a1(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ZE(t,e){if(t){if(typeof t=="string")return a1(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a1(t,e):void 0}}function W5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dn(t,e){return z5(t)||H5(t,e)||ZE(t,e)||W5()}function $5(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hs(t,e){if(t==null)return{};var n,r,i=$5(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var G5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function QE(t){var e=t.defaultInputValue,n=e===void 0?"":e,r=t.defaultMenuIsOpen,i=r===void 0?!1:r,o=t.defaultValue,c=o===void 0?null:o,p=t.inputValue,h=t.menuIsOpen,m=t.onChange,y=t.onInputChange,v=t.onMenuClose,C=t.onMenuOpen,E=t.value,_=hs(t,G5),T=O.useState(p!==void 0?p:n),k=dn(T,2),S=k[0],I=k[1],N=O.useState(h!==void 0?h:i),M=dn(N,2),F=M[0],V=M[1],B=O.useState(E!==void 0?E:c),z=dn(B,2),H=z[0],se=z[1],he=O.useCallback(function(J,ee){typeof m=="function"&&m(J,ee),se(J)},[m]),te=O.useCallback(function(J,ee){var ce;typeof y=="function"&&(ce=y(J,ee)),I(ce!==void 0?ce:J)},[y]),de=O.useCallback(function(){typeof C=="function"&&C(),V(!0)},[C]),ne=O.useCallback(function(){typeof v=="function"&&v(),V(!1)},[v]),$=p!==void 0?p:S,q=h!==void 0?h:F,Q=E!==void 0?E:H;return Ae(Ae({},_),{},{inputValue:$,menuIsOpen:q,onChange:he,onInputChange:te,onMenuClose:ne,onMenuOpen:de,value:Q})}function Oe(){return Oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oe.apply(null,arguments)}function X5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,YE(r.key),r)}}function K5(t,e,n){return e&&r2(t.prototype,e),n&&r2(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function l1(t,e){return l1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},l1(t,e)}function q5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l1(t,e)}function ud(t){return ud=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ud(t)}function JE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JE=function(){return!!t})()}function Y5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Z5(t,e){if(e&&(Zi(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y5(t)}function Q5(t){var e=JE();return function(){var n,r=ud(t);if(e){var i=ud(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Z5(this,n)}}function J5(t){if(Array.isArray(t))return a1(t)}function ej(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function tj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dm(t){return J5(t)||ej(t)||ZE(t)||tj()}function nj(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function rj(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var sj=function(){function t(n){var r=this;this._insertTag=function(i){var o;r.tags.length===0?r.insertionPoint?o=r.insertionPoint.nextSibling:r.prepend?o=r.container.firstChild:o=r.before:o=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,o),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(rj(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var o=nj(i);try{o.insertRule(r,o.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Tn="-ms-",dd="-moz-",et="-webkit-",eS="comm",hm="rule",fm="decl",ij="@import",tS="@keyframes",oj="@layer",aj=Math.abs,Yd=String.fromCharCode,lj=Object.assign;function cj(t,e){return bn(t,0)^45?(((e<<2^bn(t,0))<<2^bn(t,1))<<2^bn(t,2))<<2^bn(t,3):0}function nS(t){return t.trim()}function uj(t,e){return(t=e.exec(t))?t[0]:t}function tt(t,e,n){return t.replace(e,n)}function c1(t,e){return t.indexOf(e)}function bn(t,e){return t.charCodeAt(e)|0}function Zl(t,e,n){return t.slice(e,n)}function ss(t){return t.length}function pm(t){return t.length}function eu(t,e){return e.push(t),t}function dj(t,e){return t.map(e).join("")}var Zd=1,fa=1,rS=0,tr=0,qt=0,_a="";function Qd(t,e,n,r,i,o,c){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Zd,column:fa,length:c,return:""}}function Ka(t,e){return lj(Qd("",null,null,"",null,null,0),t,{length:-t.length},e)}function hj(){return qt}function fj(){return qt=tr>0?bn(_a,--tr):0,fa--,qt===10&&(fa=1,Zd--),qt}function pr(){return qt=tr<rS?bn(_a,tr++):0,fa++,qt===10&&(fa=1,Zd++),qt}function ds(){return bn(_a,tr)}function bu(){return tr}function uc(t,e){return Zl(_a,t,e)}function Ql(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function sS(t){return Zd=fa=1,rS=ss(_a=t),tr=0,[]}function iS(t){return _a="",t}function Cu(t){return nS(uc(tr-1,u1(t===91?t+2:t===40?t+1:t)))}function pj(t){for(;(qt=ds())&&qt<33;)pr();return Ql(t)>2||Ql(qt)>3?"":" "}function mj(t,e){for(;--e&&pr()&&!(qt<48||qt>102||qt>57&&qt<65||qt>70&&qt<97););return uc(t,bu()+(e<6&&ds()==32&&pr()==32))}function u1(t){for(;pr();)switch(qt){case t:return tr;case 34:case 39:t!==34&&t!==39&&u1(qt);break;case 40:t===41&&u1(t);break;case 92:pr();break}return tr}function gj(t,e){for(;pr()&&t+qt!==57;)if(t+qt===84&&ds()===47)break;return"/*"+uc(e,tr-1)+"*"+Yd(t===47?t:pr())}function xj(t){for(;!Ql(ds());)pr();return uc(t,tr)}function yj(t){return iS(Eu("",null,null,null,[""],t=sS(t),0,[0],t))}function Eu(t,e,n,r,i,o,c,p,h){for(var m=0,y=0,v=c,C=0,E=0,_=0,T=1,k=1,S=1,I=0,N="",M=i,F=o,V=r,B=N;k;)switch(_=I,I=pr()){case 40:if(_!=108&&bn(B,v-1)==58){c1(B+=tt(Cu(I),"&","&\f"),"&\f")!=-1&&(S=-1);break}case 34:case 39:case 91:B+=Cu(I);break;case 9:case 10:case 13:case 32:B+=pj(_);break;case 92:B+=mj(bu()-1,7);continue;case 47:switch(ds()){case 42:case 47:eu(vj(gj(pr(),bu()),e,n),h);break;default:B+="/"}break;case 123*T:p[m++]=ss(B)*S;case 125*T:case 59:case 0:switch(I){case 0:case 125:k=0;case 59+y:S==-1&&(B=tt(B,/\f/g,"")),E>0&&ss(B)-v&&eu(E>32?i2(B+";",r,n,v-1):i2(tt(B," ","")+";",r,n,v-2),h);break;case 59:B+=";";default:if(eu(V=s2(B,e,n,m,y,i,p,N,M=[],F=[],v),o),I===123)if(y===0)Eu(B,e,V,V,M,o,v,p,F);else switch(C===99&&bn(B,3)===110?100:C){case 100:case 108:case 109:case 115:Eu(t,V,V,r&&eu(s2(t,V,V,0,0,i,p,N,i,M=[],v),F),i,F,v,p,r?M:F);break;default:Eu(B,V,V,V,[""],F,0,p,F)}}m=y=E=0,T=S=1,N=B="",v=c;break;case 58:v=1+ss(B),E=_;default:if(T<1){if(I==123)--T;else if(I==125&&T++==0&&fj()==125)continue}switch(B+=Yd(I),I*T){case 38:S=y>0?1:(B+="\f",-1);break;case 44:p[m++]=(ss(B)-1)*S,S=1;break;case 64:ds()===45&&(B+=Cu(pr())),C=ds(),y=v=ss(N=B+=xj(bu())),I++;break;case 45:_===45&&ss(B)==2&&(T=0)}}return o}function s2(t,e,n,r,i,o,c,p,h,m,y){for(var v=i-1,C=i===0?o:[""],E=pm(C),_=0,T=0,k=0;_<r;++_)for(var S=0,I=Zl(t,v+1,v=aj(T=c[_])),N=t;S<E;++S)(N=nS(T>0?C[S]+" "+I:tt(I,/&\f/g,C[S])))&&(h[k++]=N);return Qd(t,e,n,i===0?hm:p,h,m,y)}function vj(t,e,n){return Qd(t,e,n,eS,Yd(hj()),Zl(t,2,-2),0)}function i2(t,e,n,r){return Qd(t,e,n,fm,Zl(t,0,r),Zl(t,r+1,-1),r)}function ea(t,e){for(var n="",r=pm(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function wj(t,e,n,r){switch(t.type){case oj:if(t.children.length)break;case ij:case fm:return t.return=t.return||t.value;case eS:return"";case tS:return t.return=t.value+"{"+ea(t.children,r)+"}";case hm:t.value=t.props.join(",")}return ss(n=ea(t.children,r))?t.return=t.value+"{"+n+"}":""}function bj(t){var e=pm(t);return function(n,r,i,o){for(var c="",p=0;p<e;p++)c+=t[p](n,r,i,o)||"";return c}}function Cj(t){return function(e){e.root||(e=e.return)&&t(e)}}function Ej(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Sj=function(e,n,r){for(var i=0,o=0;i=o,o=ds(),i===38&&o===12&&(n[r]=1),!Ql(o);)pr();return uc(e,tr)},_j=function(e,n){var r=-1,i=44;do switch(Ql(i)){case 0:i===38&&ds()===12&&(n[r]=1),e[r]+=Sj(tr-1,n,r);break;case 2:e[r]+=Cu(i);break;case 4:if(i===44){e[++r]=ds()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Yd(i)}while(i=pr());return e},Aj=function(e,n){return iS(_j(sS(e),n))},o2=new WeakMap,Nj=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!o2.get(r))&&!i){o2.set(e,!0);for(var o=[],c=Aj(n,o),p=r.props,h=0,m=0;h<c.length;h++)for(var y=0;y<p.length;y++,m++)e.props[m]=o[h]?c[h].replace(/&\f/g,p[y]):p[y]+" "+c[h]}}},Tj=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function oS(t,e){switch(cj(t,e)){case 5103:return et+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return et+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return et+t+dd+t+Tn+t+t;case 6828:case 4268:return et+t+Tn+t+t;case 6165:return et+t+Tn+"flex-"+t+t;case 5187:return et+t+tt(t,/(\w+).+(:[^]+)/,et+"box-$1$2"+Tn+"flex-$1$2")+t;case 5443:return et+t+Tn+"flex-item-"+tt(t,/flex-|-self/,"")+t;case 4675:return et+t+Tn+"flex-line-pack"+tt(t,/align-content|flex-|-self/,"")+t;case 5548:return et+t+Tn+tt(t,"shrink","negative")+t;case 5292:return et+t+Tn+tt(t,"basis","preferred-size")+t;case 6060:return et+"box-"+tt(t,"-grow","")+et+t+Tn+tt(t,"grow","positive")+t;case 4554:return et+tt(t,/([^-])(transform)/g,"$1"+et+"$2")+t;case 6187:return tt(tt(tt(t,/(zoom-|grab)/,et+"$1"),/(image-set)/,et+"$1"),t,"")+t;case 5495:case 3959:return tt(t,/(image-set\([^]*)/,et+"$1$`$1");case 4968:return tt(tt(t,/(.+:)(flex-)?(.*)/,et+"box-pack:$3"+Tn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+et+t+t;case 4095:case 3583:case 4068:case 2532:return tt(t,/(.+)-inline(.+)/,et+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ss(t)-1-e>6)switch(bn(t,e+1)){case 109:if(bn(t,e+4)!==45)break;case 102:return tt(t,/(.+:)(.+)-([^]+)/,"$1"+et+"$2-$3$1"+dd+(bn(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~c1(t,"stretch")?oS(tt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(bn(t,e+1)!==115)break;case 6444:switch(bn(t,ss(t)-3-(~c1(t,"!important")&&10))){case 107:return tt(t,":",":"+et)+t;case 101:return tt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+et+(bn(t,14)===45?"inline-":"")+"box$3$1"+et+"$2$3$1"+Tn+"$2box$3")+t}break;case 5936:switch(bn(t,e+11)){case 114:return et+t+Tn+tt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return et+t+Tn+tt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return et+t+Tn+tt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return et+t+Tn+t+t}return t}var Ij=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case fm:e.return=oS(e.value,e.length);break;case tS:return ea([Ka(e,{value:tt(e.value,"@","@"+et)})],i);case hm:if(e.length)return dj(e.props,function(o){switch(uj(o,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ea([Ka(e,{props:[tt(o,/:(read-\w+)/,":"+dd+"$1")]})],i);case"::placeholder":return ea([Ka(e,{props:[tt(o,/:(plac\w+)/,":"+et+"input-$1")]}),Ka(e,{props:[tt(o,/:(plac\w+)/,":"+dd+"$1")]}),Ka(e,{props:[tt(o,/:(plac\w+)/,Tn+"input-$1")]})],i)}return""})}},kj=[Ij],Oj=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(T){var k=T.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(T),T.setAttribute("data-s",""))})}var i=e.stylisPlugins||kj,o={},c,p=[];c=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(T){for(var k=T.getAttribute("data-emotion").split(" "),S=1;S<k.length;S++)o[k[S]]=!0;p.push(T)});var h,m=[Nj,Tj];{var y,v=[wj,Cj(function(T){y.insert(T)})],C=bj(m.concat(i,v)),E=function(k){return ea(yj(k),C)};h=function(k,S,I,N){y=I,E(k?k+"{"+S.styles+"}":S.styles),N&&(_.inserted[S.name]=!0)}}var _={key:n,sheet:new sj({key:n,container:c,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:h};return _.sheet.hydrate(p),_},aS={exports:{}},ot={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pn=typeof Symbol=="function"&&Symbol.for,mm=pn?Symbol.for("react.element"):60103,gm=pn?Symbol.for("react.portal"):60106,Jd=pn?Symbol.for("react.fragment"):60107,eh=pn?Symbol.for("react.strict_mode"):60108,th=pn?Symbol.for("react.profiler"):60114,nh=pn?Symbol.for("react.provider"):60109,rh=pn?Symbol.for("react.context"):60110,xm=pn?Symbol.for("react.async_mode"):60111,sh=pn?Symbol.for("react.concurrent_mode"):60111,ih=pn?Symbol.for("react.forward_ref"):60112,oh=pn?Symbol.for("react.suspense"):60113,Rj=pn?Symbol.for("react.suspense_list"):60120,ah=pn?Symbol.for("react.memo"):60115,lh=pn?Symbol.for("react.lazy"):60116,jj=pn?Symbol.for("react.block"):60121,Pj=pn?Symbol.for("react.fundamental"):60117,Mj=pn?Symbol.for("react.responder"):60118,Dj=pn?Symbol.for("react.scope"):60119;function vr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case mm:switch(t=t.type,t){case xm:case sh:case Jd:case th:case eh:case oh:return t;default:switch(t=t&&t.$$typeof,t){case rh:case ih:case lh:case ah:case nh:return t;default:return e}}case gm:return e}}}function lS(t){return vr(t)===sh}ot.AsyncMode=xm;ot.ConcurrentMode=sh;ot.ContextConsumer=rh;ot.ContextProvider=nh;ot.Element=mm;ot.ForwardRef=ih;ot.Fragment=Jd;ot.Lazy=lh;ot.Memo=ah;ot.Portal=gm;ot.Profiler=th;ot.StrictMode=eh;ot.Suspense=oh;ot.isAsyncMode=function(t){return lS(t)||vr(t)===xm};ot.isConcurrentMode=lS;ot.isContextConsumer=function(t){return vr(t)===rh};ot.isContextProvider=function(t){return vr(t)===nh};ot.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===mm};ot.isForwardRef=function(t){return vr(t)===ih};ot.isFragment=function(t){return vr(t)===Jd};ot.isLazy=function(t){return vr(t)===lh};ot.isMemo=function(t){return vr(t)===ah};ot.isPortal=function(t){return vr(t)===gm};ot.isProfiler=function(t){return vr(t)===th};ot.isStrictMode=function(t){return vr(t)===eh};ot.isSuspense=function(t){return vr(t)===oh};ot.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Jd||t===sh||t===th||t===eh||t===oh||t===Rj||typeof t=="object"&&t!==null&&(t.$$typeof===lh||t.$$typeof===ah||t.$$typeof===nh||t.$$typeof===rh||t.$$typeof===ih||t.$$typeof===Pj||t.$$typeof===Mj||t.$$typeof===Dj||t.$$typeof===jj)};ot.typeOf=vr;aS.exports=ot;var Lj=aS.exports,cS=Lj,Bj={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Fj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},uS={};uS[cS.ForwardRef]=Bj;uS[cS.Memo]=Fj;var Vj=!0;function Uj(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):i&&(r+=i+" ")}),r}var dS=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Vj===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},zj=function(e,n,r){dS(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var o=n;do e.insert(n===o?"."+i:"",o,e.sheet,!0),o=o.next;while(o!==void 0)}};function Hj(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Wj={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$j=/[A-Z]|^ms/g,Gj=/_EMO_([^_]+?)_([^]*?)_EMO_/g,hS=function(e){return e.charCodeAt(1)===45},a2=function(e){return e!=null&&typeof e!="boolean"},Sf=Ej(function(t){return hS(t)?t:t.replace($j,"-$&").toLowerCase()}),l2=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Gj,function(r,i,o){return is={name:i,styles:o,next:is},i})}return Wj[e]!==1&&!hS(e)&&typeof n=="number"&&n!==0?n+"px":n};function Jl(t,e,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return is={name:i.name,styles:i.styles,next:is},i.name;var o=n;if(o.styles!==void 0){var c=o.next;if(c!==void 0)for(;c!==void 0;)is={name:c.name,styles:c.styles,next:is},c=c.next;var p=o.styles+";";return p}return Xj(t,e,n)}case"function":{if(t!==void 0){var h=is,m=n(t);return is=h,Jl(t,e,m)}break}}var y=n;return y}function Xj(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Jl(t,e,n[i])+";";else for(var o in n){var c=n[o];if(typeof c!="object"){var p=c;a2(p)&&(r+=Sf(o)+":"+l2(o,p)+";")}else if(Array.isArray(c)&&typeof c[0]=="string"&&e==null)for(var h=0;h<c.length;h++)a2(c[h])&&(r+=Sf(o)+":"+l2(o,c[h])+";");else{var m=Jl(t,e,c);switch(o){case"animation":case"animationName":{r+=Sf(o)+":"+m+";";break}default:r+=o+"{"+m+"}"}}}return r}var c2=/label:\s*([^\s;{]+)\s*(;|$)/g,is;function fS(t,e,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var r=!0,i="";is=void 0;var o=t[0];if(o==null||o.raw===void 0)r=!1,i+=Jl(n,e,o);else{var c=o;i+=c[0]}for(var p=1;p<t.length;p++)if(i+=Jl(n,e,t[p]),r){var h=o;i+=h[p]}c2.lastIndex=0;for(var m="",y;(y=c2.exec(i))!==null;)m+="-"+y[1];var v=Hj(i)+m;return{name:v,styles:i,next:is}}var Kj=function(e){return e()},qj=Of.useInsertionEffect?Of.useInsertionEffect:!1,Yj=qj||Kj,pS=O.createContext(typeof HTMLElement<"u"?Oj({key:"css"}):null);pS.Provider;var Zj=function(e){return O.forwardRef(function(n,r){var i=O.useContext(pS);return e(n,i,r)})},Qj=O.createContext({}),ym={}.hasOwnProperty,d1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",Jj=function(e,n){var r={};for(var i in n)ym.call(n,i)&&(r[i]=n[i]);return r[d1]=e,r},eP=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return dS(n,r,i),Yj(function(){return zj(n,r,i)}),null},tP=Zj(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[d1],o=[r],c="";typeof t.className=="string"?c=Uj(e.registered,o,t.className):t.className!=null&&(c=t.className+" ");var p=fS(o,void 0,O.useContext(Qj));c+=e.key+"-"+p.name;var h={};for(var m in t)ym.call(t,m)&&m!=="css"&&m!==d1&&(h[m]=t[m]);return h.className=c,n&&(h.ref=n),O.createElement(O.Fragment,null,O.createElement(eP,{cache:e,serialized:p,isStringTag:typeof i=="string"}),O.createElement(i,h))}),nP=tP,Ne=function(e,n){var r=arguments;if(n==null||!ym.call(n,"css"))return O.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=nP,o[1]=Jj(e,n);for(var c=2;c<i;c++)o[c]=r[c];return O.createElement.apply(null,o)};(function(t){var e;e||(e=t.JSX||(t.JSX={}))})(Ne||(Ne={}));function vm(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return fS(e)}function rP(){var t=vm.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function sP(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}const iP=Math.min,oP=Math.max,hd=Math.round,tu=Math.floor,fd=t=>({x:t,y:t});function aP(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function ch(){return typeof window<"u"}function mS(t){return xS(t)?(t.nodeName||"").toLowerCase():"#document"}function ks(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function gS(t){var e;return(e=(xS(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function xS(t){return ch()?t instanceof Node||t instanceof ks(t).Node:!1}function lP(t){return ch()?t instanceof Element||t instanceof ks(t).Element:!1}function wm(t){return ch()?t instanceof HTMLElement||t instanceof ks(t).HTMLElement:!1}function u2(t){return!ch()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ks(t).ShadowRoot}const cP=new Set(["inline","contents"]);function yS(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=bm(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!cP.has(i)}function uP(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const dP=new Set(["html","body","#document"]);function hP(t){return dP.has(mS(t))}function bm(t){return ks(t).getComputedStyle(t)}function fP(t){if(mS(t)==="html")return t;const e=t.assignedSlot||t.parentNode||u2(t)&&t.host||gS(t);return u2(e)?e.host:e}function vS(t){const e=fP(t);return hP(e)?t.ownerDocument?t.ownerDocument.body:t.body:wm(e)&&yS(e)?e:vS(e)}function pd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=vS(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),c=ks(i);if(o){const p=h1(c);return e.concat(c,c.visualViewport||[],yS(i)?i:[],p&&n?pd(p):[])}return e.concat(i,pd(i,[],n))}function h1(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function pP(t){const e=bm(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=wm(t),o=i?t.offsetWidth:n,c=i?t.offsetHeight:r,p=hd(n)!==o||hd(r)!==c;return p&&(n=o,r=c),{width:n,height:r,$:p}}function Cm(t){return lP(t)?t:t.contextElement}function d2(t){const e=Cm(t);if(!wm(e))return fd(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=pP(e);let c=(o?hd(n.width):n.width)/r,p=(o?hd(n.height):n.height)/i;return(!c||!Number.isFinite(c))&&(c=1),(!p||!Number.isFinite(p))&&(p=1),{x:c,y:p}}const mP=fd(0);function gP(t){const e=ks(t);return!uP()||!e.visualViewport?mP:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xP(t,e,n){return!1}function h2(t,e,n,r){e===void 0&&(e=!1);const i=t.getBoundingClientRect(),o=Cm(t);let c=fd(1);e&&(c=d2(t));const p=xP()?gP(o):fd(0);let h=(i.left+p.x)/c.x,m=(i.top+p.y)/c.y,y=i.width/c.x,v=i.height/c.y;if(o){const C=ks(o),E=r;let _=C,T=h1(_);for(;T&&r&&E!==_;){const k=d2(T),S=T.getBoundingClientRect(),I=bm(T),N=S.left+(T.clientLeft+parseFloat(I.paddingLeft))*k.x,M=S.top+(T.clientTop+parseFloat(I.paddingTop))*k.y;h*=k.x,m*=k.y,y*=k.x,v*=k.y,h+=N,m+=M,_=ks(T),T=h1(_)}}return aP({width:y,height:v,x:h,y:m})}function wS(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function yP(t,e){let n=null,r;const i=gS(t);function o(){var p;clearTimeout(r),(p=n)==null||p.disconnect(),n=null}function c(p,h){p===void 0&&(p=!1),h===void 0&&(h=1),o();const m=t.getBoundingClientRect(),{left:y,top:v,width:C,height:E}=m;if(p||e(),!C||!E)return;const _=tu(v),T=tu(i.clientWidth-(y+C)),k=tu(i.clientHeight-(v+E)),S=tu(y),N={rootMargin:-_+"px "+-T+"px "+-k+"px "+-S+"px",threshold:oP(0,iP(1,h))||1};let M=!0;function F(V){const B=V[0].intersectionRatio;if(B!==h){if(!M)return c();B?c(!1,B):r=setTimeout(()=>{c(!1,1e-7)},1e3)}B===1&&!wS(m,t.getBoundingClientRect())&&c(),M=!1}try{n=new IntersectionObserver(F,{...N,root:i.ownerDocument})}catch{n=new IntersectionObserver(F,N)}n.observe(t)}return c(!0),o}function vP(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:h=!1}=r,m=Cm(t),y=i||o?[...m?pd(m):[],...pd(e)]:[];y.forEach(S=>{i&&S.addEventListener("scroll",n,{passive:!0}),o&&S.addEventListener("resize",n)});const v=m&&p?yP(m,n):null;let C=-1,E=null;c&&(E=new ResizeObserver(S=>{let[I]=S;I&&I.target===m&&E&&(E.unobserve(e),cancelAnimationFrame(C),C=requestAnimationFrame(()=>{var N;(N=E)==null||N.observe(e)})),n()}),m&&!h&&E.observe(m),E.observe(e));let _,T=h?h2(t):null;h&&k();function k(){const S=h2(t);T&&!wS(T,S)&&n(),T=S,_=requestAnimationFrame(k)}return n(),()=>{var S;y.forEach(I=>{i&&I.removeEventListener("scroll",n),o&&I.removeEventListener("resize",n)}),v==null||v(),(S=E)==null||S.disconnect(),E=null,h&&cancelAnimationFrame(_)}}var f1=O.useLayoutEffect,wP=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],md=function(){};function bP(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function CP(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(e&&t)for(var c in e)e.hasOwnProperty(c)&&e[c]&&o.push("".concat(bP(t,c)));return o.filter(function(p){return p}).map(function(p){return String(p).trim()}).join(" ")}var f2=function(e){return RP(e)?e.filter(Boolean):Zi(e)==="object"&&e!==null?[e]:[]},bS=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=hs(e,wP);return Ae({},n)},Ft=function(e,n,r){var i=e.cx,o=e.getStyles,c=e.getClassNames,p=e.className;return{css:o(n,e),className:i(r??{},c(n,e),p)}};function EP(t,e,n){if(n){var r=n(t,e);if(typeof r=="string")return r}return t}function uh(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function SP(t){return uh(t)?window.innerHeight:t.clientHeight}function CS(t){return uh(t)?window.pageYOffset:t.scrollTop}function gd(t,e){if(uh(t)){window.scrollTo(0,e);return}t.scrollTop=e}function _P(t){var e=getComputedStyle(t),n=e.position==="absolute",r=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var i=t;i=i.parentElement;)if(e=getComputedStyle(i),!(n&&e.position==="static")&&r.test(e.overflow+e.overflowY+e.overflowX))return i;return document.documentElement}function AP(t,e,n,r){return n*((t=t/r-1)*t*t+1)+e}function nu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:md,i=CS(t),o=e-i,c=10,p=0;function h(){p+=c;var m=AP(p,i,o,n);gd(t,m),p<n?window.requestAnimationFrame(h):r(t)}h()}function p2(t,e){var n=t.getBoundingClientRect(),r=e.getBoundingClientRect(),i=e.offsetHeight/3;r.bottom+i>n.bottom?gd(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+i,t.scrollHeight)):r.top-i<n.top&&gd(t,Math.max(e.offsetTop-i,0))}function NP(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function m2(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function TP(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var ES=!1,IP={get passive(){return ES=!0}},ru=typeof window<"u"?window:{};ru.addEventListener&&ru.removeEventListener&&(ru.addEventListener("p",md,IP),ru.removeEventListener("p",md,!1));var kP=ES;function OP(t){return t!=null}function RP(t){return Array.isArray(t)}function su(t,e,n){return t?e:n}var jP=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=Object.entries(e).filter(function(c){var p=dn(c,1),h=p[0];return!r.includes(h)});return o.reduce(function(c,p){var h=dn(p,2),m=h[0],y=h[1];return c[m]=y,c},{})},PP=["children","innerProps"],MP=["children","innerProps"];function DP(t){var e=t.maxHeight,n=t.menuEl,r=t.minHeight,i=t.placement,o=t.shouldScroll,c=t.isFixedPosition,p=t.controlHeight,h=_P(n),m={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return m;var y=h.getBoundingClientRect(),v=y.height,C=n.getBoundingClientRect(),E=C.bottom,_=C.height,T=C.top,k=n.offsetParent.getBoundingClientRect(),S=k.top,I=c?window.innerHeight:SP(h),N=CS(h),M=parseInt(getComputedStyle(n).marginBottom,10),F=parseInt(getComputedStyle(n).marginTop,10),V=S-F,B=I-T,z=V+N,H=v-N-T,se=E-I+N+M,he=N+T-F,te=160;switch(i){case"auto":case"bottom":if(B>=_)return{placement:"bottom",maxHeight:e};if(H>=_&&!c)return o&&nu(h,se,te),{placement:"bottom",maxHeight:e};if(!c&&H>=r||c&&B>=r){o&&nu(h,se,te);var de=c?B-M:H-M;return{placement:"bottom",maxHeight:de}}if(i==="auto"||c){var ne=e,$=c?V:z;return $>=r&&(ne=Math.min($-M-p,e)),{placement:"top",maxHeight:ne}}if(i==="bottom")return o&&gd(h,se),{placement:"bottom",maxHeight:e};break;case"top":if(V>=_)return{placement:"top",maxHeight:e};if(z>=_&&!c)return o&&nu(h,he,te),{placement:"top",maxHeight:e};if(!c&&z>=r||c&&V>=r){var q=e;return(!c&&z>=r||c&&V>=r)&&(q=c?V-F:z-F),o&&nu(h,he,te),{placement:"top",maxHeight:q}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return m}function LP(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var SS=function(e){return e==="auto"?"bottom":e},BP=function(e,n){var r,i=e.placement,o=e.theme,c=o.borderRadius,p=o.spacing,h=o.colors;return Ae((r={label:"menu"},Wo(r,LP(i),"100%"),Wo(r,"position","absolute"),Wo(r,"width","100%"),Wo(r,"zIndex",1),r),n?{}:{backgroundColor:h.neutral0,borderRadius:c,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:p.menuGutter,marginTop:p.menuGutter})},_S=O.createContext(null),FP=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,c=e.menuPosition,p=e.menuShouldScrollIntoView,h=e.theme,m=O.useContext(_S)||{},y=m.setPortalPlacement,v=O.useRef(null),C=O.useState(i),E=dn(C,2),_=E[0],T=E[1],k=O.useState(null),S=dn(k,2),I=S[0],N=S[1],M=h.spacing.controlHeight;return f1(function(){var F=v.current;if(F){var V=c==="fixed",B=p&&!V,z=DP({maxHeight:i,menuEl:F,minHeight:r,placement:o,shouldScroll:B,isFixedPosition:V,controlHeight:M});T(z.maxHeight),N(z.placement),y==null||y(z.placement)}},[i,o,c,p,r,y,M]),n({ref:v,placerProps:Ae(Ae({},e),{},{placement:I||SS(o),maxHeight:_})})},VP=function(e){var n=e.children,r=e.innerRef,i=e.innerProps;return Ne("div",Oe({},Ft(e,"menu",{menu:!0}),{ref:r},i),n)},UP=VP,zP=function(e,n){var r=e.maxHeight,i=e.theme.spacing.baseUnit;return Ae({maxHeight:r,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:i,paddingTop:i})},HP=function(e){var n=e.children,r=e.innerProps,i=e.innerRef,o=e.isMulti;return Ne("div",Oe({},Ft(e,"menuList",{"menu-list":!0,"menu-list--is-multi":o}),{ref:i},r),n)},AS=function(e,n){var r=e.theme,i=r.spacing.baseUnit,o=r.colors;return Ae({textAlign:"center"},n?{}:{color:o.neutral40,padding:"".concat(i*2,"px ").concat(i*3,"px")})},WP=AS,$P=AS,GP=function(e){var n=e.children,r=n===void 0?"No options":n,i=e.innerProps,o=hs(e,PP);return Ne("div",Oe({},Ft(Ae(Ae({},o),{},{children:r,innerProps:i}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),r)},XP=function(e){var n=e.children,r=n===void 0?"Loading...":n,i=e.innerProps,o=hs(e,MP);return Ne("div",Oe({},Ft(Ae(Ae({},o),{},{children:r,innerProps:i}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),r)},KP=function(e){var n=e.rect,r=e.offset,i=e.position;return{left:n.left,position:i,top:r,width:n.width,zIndex:1}},qP=function(e){var n=e.appendTo,r=e.children,i=e.controlElement,o=e.innerProps,c=e.menuPlacement,p=e.menuPosition,h=O.useRef(null),m=O.useRef(null),y=O.useState(SS(c)),v=dn(y,2),C=v[0],E=v[1],_=O.useMemo(function(){return{setPortalPlacement:E}},[]),T=O.useState(null),k=dn(T,2),S=k[0],I=k[1],N=O.useCallback(function(){if(i){var B=NP(i),z=p==="fixed"?0:window.pageYOffset,H=B[C]+z;(H!==(S==null?void 0:S.offset)||B.left!==(S==null?void 0:S.rect.left)||B.width!==(S==null?void 0:S.rect.width))&&I({offset:H,rect:B})}},[i,p,C,S==null?void 0:S.offset,S==null?void 0:S.rect.left,S==null?void 0:S.rect.width]);f1(function(){N()},[N]);var M=O.useCallback(function(){typeof m.current=="function"&&(m.current(),m.current=null),i&&h.current&&(m.current=vP(i,h.current,N,{elementResize:"ResizeObserver"in window}))},[i,N]);f1(function(){M()},[M]);var F=O.useCallback(function(B){h.current=B,M()},[M]);if(!n&&p!=="fixed"||!S)return null;var V=Ne("div",Oe({ref:F},Ft(Ae(Ae({},e),{},{offset:S.offset,position:p,rect:S.rect}),"menuPortal",{"menu-portal":!0}),o),r);return Ne(_S.Provider,{value:_},n?eb.createPortal(V,n):V)},YP=function(e){var n=e.isDisabled,r=e.isRtl;return{label:"container",direction:r?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},ZP=function(e){var n=e.children,r=e.innerProps,i=e.isDisabled,o=e.isRtl;return Ne("div",Oe({},Ft(e,"container",{"--is-disabled":i,"--is-rtl":o}),r),n)},QP=function(e,n){var r=e.theme.spacing,i=e.isMulti,o=e.hasValue,c=e.selectProps.controlShouldRenderValue;return Ae({alignItems:"center",display:i&&o&&c?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(r.baseUnit/2,"px ").concat(r.baseUnit*2,"px")})},JP=function(e){var n=e.children,r=e.innerProps,i=e.isMulti,o=e.hasValue;return Ne("div",Oe({},Ft(e,"valueContainer",{"value-container":!0,"value-container--is-multi":i,"value-container--has-value":o}),r),n)},eM=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},tM=function(e){var n=e.children,r=e.innerProps;return Ne("div",Oe({},Ft(e,"indicatorsContainer",{indicators:!0}),r),n)},g2,nM=["size"],rM=["innerProps","isRtl","size"],sM={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},NS=function(e){var n=e.size,r=hs(e,nM);return Ne("svg",Oe({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:sM},r))},Em=function(e){return Ne(NS,Oe({size:20},e),Ne("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},TS=function(e){return Ne(NS,Oe({size:20},e),Ne("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},IS=function(e,n){var r=e.isFocused,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return Ae({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:r?c.neutral60:c.neutral20,padding:o*2,":hover":{color:r?c.neutral80:c.neutral40}})},iM=IS,oM=function(e){var n=e.children,r=e.innerProps;return Ne("div",Oe({},Ft(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),r),n||Ne(TS,null))},aM=IS,lM=function(e){var n=e.children,r=e.innerProps;return Ne("div",Oe({},Ft(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),r),n||Ne(Em,null))},cM=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing.baseUnit,c=i.colors;return Ae({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:r?c.neutral10:c.neutral20,marginBottom:o*2,marginTop:o*2})},uM=function(e){var n=e.innerProps;return Ne("span",Oe({},n,Ft(e,"indicatorSeparator",{"indicator-separator":!0})))},dM=rP(g2||(g2=sP([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),hM=function(e,n){var r=e.isFocused,i=e.size,o=e.theme,c=o.colors,p=o.spacing.baseUnit;return Ae({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:i,lineHeight:1,marginRight:i,textAlign:"center",verticalAlign:"middle"},n?{}:{color:r?c.neutral60:c.neutral20,padding:p*2})},_f=function(e){var n=e.delay,r=e.offset;return Ne("span",{css:vm({animation:"".concat(dM," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},fM=function(e){var n=e.innerProps,r=e.isRtl,i=e.size,o=i===void 0?4:i,c=hs(e,rM);return Ne("div",Oe({},Ft(Ae(Ae({},c),{},{innerProps:n,isRtl:r,size:o}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),Ne(_f,{delay:0,offset:r}),Ne(_f,{delay:160,offset:!0}),Ne(_f,{delay:320,offset:!r}))},pM=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.theme,c=o.colors,p=o.borderRadius,h=o.spacing;return Ae({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:h.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:r?c.neutral5:c.neutral0,borderColor:r?c.neutral10:i?c.primary:c.neutral20,borderRadius:p,borderStyle:"solid",borderWidth:1,boxShadow:i?"0 0 0 1px ".concat(c.primary):void 0,"&:hover":{borderColor:i?c.primary:c.neutral30}})},mM=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.innerRef,c=e.innerProps,p=e.menuIsOpen;return Ne("div",Oe({ref:o},Ft(e,"control",{control:!0,"control--is-disabled":r,"control--is-focused":i,"control--menu-is-open":p}),c,{"aria-disabled":r||void 0}),n)},gM=mM,xM=["data"],yM=function(e,n){var r=e.theme.spacing;return n?{}:{paddingBottom:r.baseUnit*2,paddingTop:r.baseUnit*2}},vM=function(e){var n=e.children,r=e.cx,i=e.getStyles,o=e.getClassNames,c=e.Heading,p=e.headingProps,h=e.innerProps,m=e.label,y=e.theme,v=e.selectProps;return Ne("div",Oe({},Ft(e,"group",{group:!0}),h),Ne(c,Oe({},p,{selectProps:v,theme:y,getStyles:i,getClassNames:o,cx:r}),m),Ne("div",null,n))},wM=function(e,n){var r=e.theme,i=r.colors,o=r.spacing;return Ae({label:"group",cursor:"default",display:"block"},n?{}:{color:i.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:o.baseUnit*3,paddingRight:o.baseUnit*3,textTransform:"uppercase"})},bM=function(e){var n=bS(e);n.data;var r=hs(n,xM);return Ne("div",Oe({},Ft(e,"groupHeading",{"group-heading":!0}),r))},CM=vM,EM=["innerRef","isDisabled","isHidden","inputClassName"],SM=function(e,n){var r=e.isDisabled,i=e.value,o=e.theme,c=o.spacing,p=o.colors;return Ae(Ae({visibility:r?"hidden":"visible",transform:i?"translateZ(0)":""},_M),n?{}:{margin:c.baseUnit/2,paddingBottom:c.baseUnit/2,paddingTop:c.baseUnit/2,color:p.neutral80})},kS={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},_M={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Ae({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},kS)},AM=function(e){return Ae({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},kS)},NM=function(e){var n=e.cx,r=e.value,i=bS(e),o=i.innerRef,c=i.isDisabled,p=i.isHidden,h=i.inputClassName,m=hs(i,EM);return Ne("div",Oe({},Ft(e,"input",{"input-container":!0}),{"data-value":r||""}),Ne("input",Oe({className:n({input:!0},h),ref:o,style:AM(p),disabled:c},m)))},TM=NM,IM=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors;return Ae({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:c.neutral10,borderRadius:o/2,margin:i.baseUnit/2})},kM=function(e,n){var r=e.theme,i=r.borderRadius,o=r.colors,c=e.cropWithEllipsis;return Ae({overflow:"hidden",textOverflow:c||c===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:i/2,color:o.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},OM=function(e,n){var r=e.theme,i=r.spacing,o=r.borderRadius,c=r.colors,p=e.isFocused;return Ae({alignItems:"center",display:"flex"},n?{}:{borderRadius:o/2,backgroundColor:p?c.dangerLight:void 0,paddingLeft:i.baseUnit,paddingRight:i.baseUnit,":hover":{backgroundColor:c.dangerLight,color:c.danger}})},OS=function(e){var n=e.children,r=e.innerProps;return Ne("div",r,n)},RM=OS,jM=OS;function PM(t){var e=t.children,n=t.innerProps;return Ne("div",Oe({role:"button"},n),e||Ne(Em,{size:14}))}var MM=function(e){var n=e.children,r=e.components,i=e.data,o=e.innerProps,c=e.isDisabled,p=e.removeProps,h=e.selectProps,m=r.Container,y=r.Label,v=r.Remove;return Ne(m,{data:i,innerProps:Ae(Ae({},Ft(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":c})),o),selectProps:h},Ne(y,{data:i,innerProps:Ae({},Ft(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:h},n),Ne(v,{data:i,innerProps:Ae(Ae({},Ft(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},p),selectProps:h}))},DM=MM,LM=function(e,n){var r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.theme,p=c.spacing,h=c.colors;return Ae({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:o?h.primary:i?h.primary25:"transparent",color:r?h.neutral20:o?h.neutral0:"inherit",padding:"".concat(p.baseUnit*2,"px ").concat(p.baseUnit*3,"px"),":active":{backgroundColor:r?void 0:o?h.primary:h.primary50}})},BM=function(e){var n=e.children,r=e.isDisabled,i=e.isFocused,o=e.isSelected,c=e.innerRef,p=e.innerProps;return Ne("div",Oe({},Ft(e,"option",{option:!0,"option--is-disabled":r,"option--is-focused":i,"option--is-selected":o}),{ref:c,"aria-disabled":r},p),n)},FM=BM,VM=function(e,n){var r=e.theme,i=r.spacing,o=r.colors;return Ae({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:o.neutral50,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},UM=function(e){var n=e.children,r=e.innerProps;return Ne("div",Oe({},Ft(e,"placeholder",{placeholder:!0}),r),n)},zM=UM,HM=function(e,n){var r=e.isDisabled,i=e.theme,o=i.spacing,c=i.colors;return Ae({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:r?c.neutral40:c.neutral80,marginLeft:o.baseUnit/2,marginRight:o.baseUnit/2})},WM=function(e){var n=e.children,r=e.isDisabled,i=e.innerProps;return Ne("div",Oe({},Ft(e,"singleValue",{"single-value":!0,"single-value--is-disabled":r}),i),n)},$M=WM,GM={ClearIndicator:lM,Control:gM,DropdownIndicator:oM,DownChevron:TS,CrossIcon:Em,Group:CM,GroupHeading:bM,IndicatorsContainer:tM,IndicatorSeparator:uM,Input:TM,LoadingIndicator:fM,Menu:UP,MenuList:HP,MenuPortal:qP,LoadingMessage:XP,NoOptionsMessage:GP,MultiValue:DM,MultiValueContainer:RM,MultiValueLabel:jM,MultiValueRemove:PM,Option:FM,Placeholder:zM,SelectContainer:ZP,SingleValue:$M,ValueContainer:JP},XM=function(e){return Ae(Ae({},GM),e.components)},x2=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function KM(t,e){return!!(t===e||x2(t)&&x2(e))}function qM(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!KM(t[n],e[n]))return!1;return!0}function YM(t,e){e===void 0&&(e=qM);var n=null;function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(n&&n.lastThis===this&&e(i,n.lastArgs))return n.lastResult;var c=t.apply(this,i);return n={lastResult:c,lastArgs:i,lastThis:this},c}return r.clear=function(){n=null},r}var ZM={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},QM=function(e){return Ne("span",Oe({css:ZM},e))},y2=QM,JM={guidance:function(e){var n=e.isSearchable,r=e.isMulti,i=e.tabSelectsValue,o=e.context,c=e.isInitialFocus;switch(o){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return c?"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(r?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,r=e.label,i=r===void 0?"":r,o=e.labels,c=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(i,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(o.length>1?"s":""," ").concat(o.join(","),", selected.");case"select-option":return c?"option ".concat(i," is disabled. Select another option."):"option ".concat(i,", selected.");default:return""}},onFocus:function(e){var n=e.context,r=e.focused,i=e.options,o=e.label,c=o===void 0?"":o,p=e.selectValue,h=e.isDisabled,m=e.isSelected,y=e.isAppleDevice,v=function(T,k){return T&&T.length?"".concat(T.indexOf(k)+1," of ").concat(T.length):""};if(n==="value"&&p)return"value ".concat(c," focused, ").concat(v(p,r),".");if(n==="menu"&&y){var C=h?" disabled":"",E="".concat(m?" selected":"").concat(C);return"".concat(c).concat(E,", ").concat(v(i,r),".")}return""},onFilter:function(e){var n=e.inputValue,r=e.resultsMessage;return"".concat(r).concat(n?" for search term "+n:"",".")}},eD=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,c=e.isFocused,p=e.selectValue,h=e.selectProps,m=e.id,y=e.isAppleDevice,v=h.ariaLiveMessages,C=h.getOptionLabel,E=h.inputValue,_=h.isMulti,T=h.isOptionDisabled,k=h.isSearchable,S=h.menuIsOpen,I=h.options,N=h.screenReaderStatus,M=h.tabSelectsValue,F=h.isLoading,V=h["aria-label"],B=h["aria-live"],z=O.useMemo(function(){return Ae(Ae({},JM),v||{})},[v]),H=O.useMemo(function(){var $="";if(n&&z.onChange){var q=n.option,Q=n.options,J=n.removedValue,ee=n.removedValues,ce=n.value,Me=function(Xe){return Array.isArray(Xe)?null:Xe},ve=J||q||Me(ce),Ke=ve?C(ve):"",Be=Q||ee||void 0,ft=Be?Be.map(C):[],pe=Ae({isDisabled:ve&&T(ve,p),label:Ke,labels:ft},n);$=z.onChange(pe)}return $},[n,z,T,p,C]),se=O.useMemo(function(){var $="",q=r||i,Q=!!(r&&p&&p.includes(r));if(q&&z.onFocus){var J={focused:q,label:C(q),isDisabled:T(q,p),isSelected:Q,options:o,context:q===r?"menu":"value",selectValue:p,isAppleDevice:y};$=z.onFocus(J)}return $},[r,i,C,T,z,o,p,y]),he=O.useMemo(function(){var $="";if(S&&I.length&&!F&&z.onFilter){var q=N({count:o.length});$=z.onFilter({inputValue:E,resultsMessage:q})}return $},[o,E,S,z,I,N,F]),te=(n==null?void 0:n.action)==="initial-input-focus",de=O.useMemo(function(){var $="";if(z.guidance){var q=i?"value":S?"menu":"input";$=z.guidance({"aria-label":V,context:q,isDisabled:r&&T(r,p),isMulti:_,isSearchable:k,tabSelectsValue:M,isInitialFocus:te})}return $},[V,r,i,_,T,k,S,z,p,M,te]),ne=Ne(O.Fragment,null,Ne("span",{id:"aria-selection"},H),Ne("span",{id:"aria-focused"},se),Ne("span",{id:"aria-results"},he),Ne("span",{id:"aria-guidance"},de));return Ne(O.Fragment,null,Ne(y2,{id:m},te&&ne),Ne(y2,{"aria-live":B,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},c&&!te&&ne))},tD=eD,p1=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],nD=new RegExp("["+p1.map(function(t){return t.letters}).join("")+"]","g"),RS={};for(var Af=0;Af<p1.length;Af++)for(var Nf=p1[Af],Tf=0;Tf<Nf.letters.length;Tf++)RS[Nf.letters[Tf]]=Nf.base;var jS=function(e){return e.replace(nD,function(n){return RS[n]})},rD=YM(jS),v2=function(e){return e.replace(/^\s+|\s+$/g,"")},sD=function(e){return"".concat(e.label," ").concat(e.value)},iD=function(e){return function(n,r){if(n.data.__isNew__)return!0;var i=Ae({ignoreCase:!0,ignoreAccents:!0,stringify:sD,trim:!0,matchFrom:"any"},e),o=i.ignoreCase,c=i.ignoreAccents,p=i.stringify,h=i.trim,m=i.matchFrom,y=h?v2(r):r,v=h?v2(p(n)):p(n);return o&&(y=y.toLowerCase(),v=v.toLowerCase()),c&&(y=rD(y),v=jS(v)),m==="start"?v.substr(0,y.length)===y:v.indexOf(y)>-1}},oD=["innerRef"];function aD(t){var e=t.innerRef,n=hs(t,oD),r=jP(n,"onExited","in","enter","exit","appear");return Ne("input",Oe({ref:e},r,{css:vm({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var lD=function(e){e.cancelable&&e.preventDefault(),e.stopPropagation()};function cD(t){var e=t.isEnabled,n=t.onBottomArrive,r=t.onBottomLeave,i=t.onTopArrive,o=t.onTopLeave,c=O.useRef(!1),p=O.useRef(!1),h=O.useRef(0),m=O.useRef(null),y=O.useCallback(function(k,S){if(m.current!==null){var I=m.current,N=I.scrollTop,M=I.scrollHeight,F=I.clientHeight,V=m.current,B=S>0,z=M-F-N,H=!1;z>S&&c.current&&(r&&r(k),c.current=!1),B&&p.current&&(o&&o(k),p.current=!1),B&&S>z?(n&&!c.current&&n(k),V.scrollTop=M,H=!0,c.current=!0):!B&&-S>N&&(i&&!p.current&&i(k),V.scrollTop=0,H=!0,p.current=!0),H&&lD(k)}},[n,r,i,o]),v=O.useCallback(function(k){y(k,k.deltaY)},[y]),C=O.useCallback(function(k){h.current=k.changedTouches[0].clientY},[]),E=O.useCallback(function(k){var S=h.current-k.changedTouches[0].clientY;y(k,S)},[y]),_=O.useCallback(function(k){if(k){var S=kP?{passive:!1}:!1;k.addEventListener("wheel",v,S),k.addEventListener("touchstart",C,S),k.addEventListener("touchmove",E,S)}},[E,C,v]),T=O.useCallback(function(k){k&&(k.removeEventListener("wheel",v,!1),k.removeEventListener("touchstart",C,!1),k.removeEventListener("touchmove",E,!1))},[E,C,v]);return O.useEffect(function(){if(e){var k=m.current;return _(k),function(){T(k)}}},[e,_,T]),function(k){m.current=k}}var w2=["boxSizing","height","overflow","paddingRight","position"],b2={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function C2(t){t.cancelable&&t.preventDefault()}function E2(t){t.stopPropagation()}function S2(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function _2(){return"ontouchstart"in window||navigator.maxTouchPoints}var A2=!!(typeof window<"u"&&window.document&&window.document.createElement),qa=0,Eo={capture:!1,passive:!1};function uD(t){var e=t.isEnabled,n=t.accountForScrollbars,r=n===void 0?!0:n,i=O.useRef({}),o=O.useRef(null),c=O.useCallback(function(h){if(A2){var m=document.body,y=m&&m.style;if(r&&w2.forEach(function(_){var T=y&&y[_];i.current[_]=T}),r&&qa<1){var v=parseInt(i.current.paddingRight,10)||0,C=document.body?document.body.clientWidth:0,E=window.innerWidth-C+v||0;Object.keys(b2).forEach(function(_){var T=b2[_];y&&(y[_]=T)}),y&&(y.paddingRight="".concat(E,"px"))}m&&_2()&&(m.addEventListener("touchmove",C2,Eo),h&&(h.addEventListener("touchstart",S2,Eo),h.addEventListener("touchmove",E2,Eo))),qa+=1}},[r]),p=O.useCallback(function(h){if(A2){var m=document.body,y=m&&m.style;qa=Math.max(qa-1,0),r&&qa<1&&w2.forEach(function(v){var C=i.current[v];y&&(y[v]=C)}),m&&_2()&&(m.removeEventListener("touchmove",C2,Eo),h&&(h.removeEventListener("touchstart",S2,Eo),h.removeEventListener("touchmove",E2,Eo)))}},[r]);return O.useEffect(function(){if(e){var h=o.current;return c(h),function(){p(h)}}},[e,c,p]),function(h){o.current=h}}var dD=function(e){var n=e.target;return n.ownerDocument.activeElement&&n.ownerDocument.activeElement.blur()},hD={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function fD(t){var e=t.children,n=t.lockEnabled,r=t.captureEnabled,i=r===void 0?!0:r,o=t.onBottomArrive,c=t.onBottomLeave,p=t.onTopArrive,h=t.onTopLeave,m=cD({isEnabled:i,onBottomArrive:o,onBottomLeave:c,onTopArrive:p,onTopLeave:h}),y=uD({isEnabled:n}),v=function(E){m(E),y(E)};return Ne(O.Fragment,null,n&&Ne("div",{onClick:dD,css:hD}),e(v))}var pD={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},mD=function(e){var n=e.name,r=e.onFocus;return Ne("input",{required:!0,name:n,tabIndex:-1,"aria-hidden":"true",onFocus:r,css:pD,value:"",onChange:function(){}})},gD=mD;function Sm(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function xD(){return Sm(/^iPhone/i)}function PS(){return Sm(/^Mac/i)}function yD(){return Sm(/^iPad/i)||PS()&&navigator.maxTouchPoints>1}function vD(){return xD()||yD()}function wD(){return PS()||vD()}var bD=function(e){return e.label},CD=function(e){return e.label},ED=function(e){return e.value},SD=function(e){return!!e.isDisabled},_D={clearIndicator:aM,container:YP,control:pM,dropdownIndicator:iM,group:yM,groupHeading:wM,indicatorsContainer:eM,indicatorSeparator:cM,input:SM,loadingIndicator:hM,loadingMessage:$P,menu:BP,menuList:zP,menuPortal:KP,multiValue:IM,multiValueLabel:kM,multiValueRemove:OM,noOptionsMessage:WP,option:LM,placeholder:VM,singleValue:HM,valueContainer:QP},AD={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},ND=4,MS=4,TD=38,ID=MS*2,kD={baseUnit:MS,controlHeight:TD,menuGutter:ID},If={borderRadius:ND,colors:AD,spacing:kD},OD={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:m2(),captureMenuScroll:!m2(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:iD(),formatGroupLabel:bD,getOptionLabel:CD,getOptionValue:ED,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:SD,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!TP(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function N2(t,e,n,r){var i=BS(t,e,n),o=FS(t,e,n),c=LS(t,e),p=xd(t,e);return{type:"option",data:e,isDisabled:i,isSelected:o,label:c,value:p,index:r}}function Su(t,e){return t.options.map(function(n,r){if("options"in n){var i=n.options.map(function(c,p){return N2(t,c,e,p)}).filter(function(c){return I2(t,c)});return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=N2(t,n,e,r);return I2(t,o)?o:void 0}).filter(OP)}function DS(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,dm(n.options.map(function(r){return r.data}))):e.push(n.data),e},[])}function T2(t,e){return t.reduce(function(n,r){return r.type==="group"?n.push.apply(n,dm(r.options.map(function(i){return{data:i.data,id:"".concat(e,"-").concat(r.index,"-").concat(i.index)}}))):n.push({data:r.data,id:"".concat(e,"-").concat(r.index)}),n},[])}function RD(t,e){return DS(Su(t,e))}function I2(t,e){var n=t.inputValue,r=n===void 0?"":n,i=e.data,o=e.isSelected,c=e.label,p=e.value;return(!US(t)||!o)&&VS(t,{label:c,value:p,data:i},r)}function jD(t,e){var n=t.focusedValue,r=t.selectValue,i=r.indexOf(n);if(i>-1){var o=e.indexOf(n);if(o>-1)return n;if(i<e.length)return e[i]}return null}function PD(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var kf=function(e,n){var r,i=(r=e.find(function(o){return o.data===n}))===null||r===void 0?void 0:r.id;return i||null},LS=function(e,n){return e.getOptionLabel(n)},xd=function(e,n){return e.getOptionValue(n)};function BS(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function FS(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var r=xd(t,e);return n.some(function(i){return xd(t,i)===r})}function VS(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var US=function(e){var n=e.hideSelectedOptions,r=e.isMulti;return n===void 0?r:n},MD=1,_m=function(t){q5(n,t);var e=Q5(n);function n(r){var i;if(X5(this,n),i=e.call(this,r),i.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},i.blockOptionHover=!1,i.isComposing=!1,i.commonProps=void 0,i.initialTouchX=0,i.initialTouchY=0,i.openAfterFocus=!1,i.scrollToFocusedOptionOnUpdate=!1,i.userIsDragging=void 0,i.controlRef=null,i.getControlRef=function(h){i.controlRef=h},i.focusedOptionRef=null,i.getFocusedOptionRef=function(h){i.focusedOptionRef=h},i.menuListRef=null,i.getMenuListRef=function(h){i.menuListRef=h},i.inputRef=null,i.getInputRef=function(h){i.inputRef=h},i.focus=i.focusInput,i.blur=i.blurInput,i.onChange=function(h,m){var y=i.props,v=y.onChange,C=y.name;m.name=C,i.ariaOnChange(h,m),v(h,m)},i.setValue=function(h,m,y){var v=i.props,C=v.closeMenuOnSelect,E=v.isMulti,_=v.inputValue;i.onInputChange("",{action:"set-value",prevInputValue:_}),C&&(i.setState({inputIsHiddenAfterUpdate:!E}),i.onMenuClose()),i.setState({clearFocusValueOnUpdate:!0}),i.onChange(h,{action:m,option:y})},i.selectOption=function(h){var m=i.props,y=m.blurInputOnSelect,v=m.isMulti,C=m.name,E=i.state.selectValue,_=v&&i.isOptionSelected(h,E),T=i.isOptionDisabled(h,E);if(_){var k=i.getOptionValue(h);i.setValue(E.filter(function(S){return i.getOptionValue(S)!==k}),"deselect-option",h)}else if(!T)v?i.setValue([].concat(dm(E),[h]),"select-option",h):i.setValue(h,"select-option");else{i.ariaOnChange(h,{action:"select-option",option:h,name:C});return}y&&i.blurInput()},i.removeValue=function(h){var m=i.props.isMulti,y=i.state.selectValue,v=i.getOptionValue(h),C=y.filter(function(_){return i.getOptionValue(_)!==v}),E=su(m,C,C[0]||null);i.onChange(E,{action:"remove-value",removedValue:h}),i.focusInput()},i.clearValue=function(){var h=i.state.selectValue;i.onChange(su(i.props.isMulti,[],null),{action:"clear",removedValues:h})},i.popValue=function(){var h=i.props.isMulti,m=i.state.selectValue,y=m[m.length-1],v=m.slice(0,m.length-1),C=su(h,v,v[0]||null);y&&i.onChange(C,{action:"pop-value",removedValue:y})},i.getFocusedOptionId=function(h){return kf(i.state.focusableOptionsWithIds,h)},i.getFocusableOptionsWithIds=function(){return T2(Su(i.props,i.state.selectValue),i.getElementId("option"))},i.getValue=function(){return i.state.selectValue},i.cx=function(){for(var h=arguments.length,m=new Array(h),y=0;y<h;y++)m[y]=arguments[y];return CP.apply(void 0,[i.props.classNamePrefix].concat(m))},i.getOptionLabel=function(h){return LS(i.props,h)},i.getOptionValue=function(h){return xd(i.props,h)},i.getStyles=function(h,m){var y=i.props.unstyled,v=_D[h](m,y);v.boxSizing="border-box";var C=i.props.styles[h];return C?C(v,m):v},i.getClassNames=function(h,m){var y,v;return(y=(v=i.props.classNames)[h])===null||y===void 0?void 0:y.call(v,m)},i.getElementId=function(h){return"".concat(i.state.instancePrefix,"-").concat(h)},i.getComponents=function(){return XM(i.props)},i.buildCategorizedOptions=function(){return Su(i.props,i.state.selectValue)},i.getCategorizedOptions=function(){return i.props.menuIsOpen?i.buildCategorizedOptions():[]},i.buildFocusableOptions=function(){return DS(i.buildCategorizedOptions())},i.getFocusableOptions=function(){return i.props.menuIsOpen?i.buildFocusableOptions():[]},i.ariaOnChange=function(h,m){i.setState({ariaSelection:Ae({value:h},m)})},i.onMenuMouseDown=function(h){h.button===0&&(h.stopPropagation(),h.preventDefault(),i.focusInput())},i.onMenuMouseMove=function(h){i.blockOptionHover=!1},i.onControlMouseDown=function(h){if(!h.defaultPrevented){var m=i.props.openMenuOnClick;i.state.isFocused?i.props.menuIsOpen?h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&i.onMenuClose():m&&i.openMenu("first"):(m&&(i.openAfterFocus=!0),i.focusInput()),h.target.tagName!=="INPUT"&&h.target.tagName!=="TEXTAREA"&&h.preventDefault()}},i.onDropdownIndicatorMouseDown=function(h){if(!(h&&h.type==="mousedown"&&h.button!==0)&&!i.props.isDisabled){var m=i.props,y=m.isMulti,v=m.menuIsOpen;i.focusInput(),v?(i.setState({inputIsHiddenAfterUpdate:!y}),i.onMenuClose()):i.openMenu("first"),h.preventDefault()}},i.onClearIndicatorMouseDown=function(h){h&&h.type==="mousedown"&&h.button!==0||(i.clearValue(),h.preventDefault(),i.openAfterFocus=!1,h.type==="touchend"?i.focusInput():setTimeout(function(){return i.focusInput()}))},i.onScroll=function(h){typeof i.props.closeMenuOnScroll=="boolean"?h.target instanceof HTMLElement&&uh(h.target)&&i.props.onMenuClose():typeof i.props.closeMenuOnScroll=="function"&&i.props.closeMenuOnScroll(h)&&i.props.onMenuClose()},i.onCompositionStart=function(){i.isComposing=!0},i.onCompositionEnd=function(){i.isComposing=!1},i.onTouchStart=function(h){var m=h.touches,y=m&&m.item(0);y&&(i.initialTouchX=y.clientX,i.initialTouchY=y.clientY,i.userIsDragging=!1)},i.onTouchMove=function(h){var m=h.touches,y=m&&m.item(0);if(y){var v=Math.abs(y.clientX-i.initialTouchX),C=Math.abs(y.clientY-i.initialTouchY),E=5;i.userIsDragging=v>E||C>E}},i.onTouchEnd=function(h){i.userIsDragging||(i.controlRef&&!i.controlRef.contains(h.target)&&i.menuListRef&&!i.menuListRef.contains(h.target)&&i.blurInput(),i.initialTouchX=0,i.initialTouchY=0)},i.onControlTouchEnd=function(h){i.userIsDragging||i.onControlMouseDown(h)},i.onClearIndicatorTouchEnd=function(h){i.userIsDragging||i.onClearIndicatorMouseDown(h)},i.onDropdownIndicatorTouchEnd=function(h){i.userIsDragging||i.onDropdownIndicatorMouseDown(h)},i.handleInputChange=function(h){var m=i.props.inputValue,y=h.currentTarget.value;i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange(y,{action:"input-change",prevInputValue:m}),i.props.menuIsOpen||i.onMenuOpen()},i.onInputFocus=function(h){i.props.onFocus&&i.props.onFocus(h),i.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(i.openAfterFocus||i.props.openMenuOnFocus)&&i.openMenu("first"),i.openAfterFocus=!1},i.onInputBlur=function(h){var m=i.props.inputValue;if(i.menuListRef&&i.menuListRef.contains(document.activeElement)){i.inputRef.focus();return}i.props.onBlur&&i.props.onBlur(h),i.onInputChange("",{action:"input-blur",prevInputValue:m}),i.onMenuClose(),i.setState({focusedValue:null,isFocused:!1})},i.onOptionHover=function(h){if(!(i.blockOptionHover||i.state.focusedOption===h)){var m=i.getFocusableOptions(),y=m.indexOf(h);i.setState({focusedOption:h,focusedOptionId:y>-1?i.getFocusedOptionId(h):null})}},i.shouldHideSelectedOptions=function(){return US(i.props)},i.onValueInputFocus=function(h){h.preventDefault(),h.stopPropagation(),i.focus()},i.onKeyDown=function(h){var m=i.props,y=m.isMulti,v=m.backspaceRemovesValue,C=m.escapeClearsValue,E=m.inputValue,_=m.isClearable,T=m.isDisabled,k=m.menuIsOpen,S=m.onKeyDown,I=m.tabSelectsValue,N=m.openMenuOnFocus,M=i.state,F=M.focusedOption,V=M.focusedValue,B=M.selectValue;if(!T&&!(typeof S=="function"&&(S(h),h.defaultPrevented))){switch(i.blockOptionHover=!0,h.key){case"ArrowLeft":if(!y||E)return;i.focusValue("previous");break;case"ArrowRight":if(!y||E)return;i.focusValue("next");break;case"Delete":case"Backspace":if(E)return;if(V)i.removeValue(V);else{if(!v)return;y?i.popValue():_&&i.clearValue()}break;case"Tab":if(i.isComposing||h.shiftKey||!k||!I||!F||N&&i.isOptionSelected(F,B))return;i.selectOption(F);break;case"Enter":if(h.keyCode===229)break;if(k){if(!F||i.isComposing)return;i.selectOption(F);break}return;case"Escape":k?(i.setState({inputIsHiddenAfterUpdate:!1}),i.onInputChange("",{action:"menu-close",prevInputValue:E}),i.onMenuClose()):_&&C&&i.clearValue();break;case" ":if(E)return;if(!k){i.openMenu("first");break}if(!F)return;i.selectOption(F);break;case"ArrowUp":k?i.focusOption("up"):i.openMenu("last");break;case"ArrowDown":k?i.focusOption("down"):i.openMenu("first");break;case"PageUp":if(!k)return;i.focusOption("pageup");break;case"PageDown":if(!k)return;i.focusOption("pagedown");break;case"Home":if(!k)return;i.focusOption("first");break;case"End":if(!k)return;i.focusOption("last");break;default:return}h.preventDefault()}},i.state.instancePrefix="react-select-"+(i.props.instanceId||++MD),i.state.selectValue=f2(r.value),r.menuIsOpen&&i.state.selectValue.length){var o=i.getFocusableOptionsWithIds(),c=i.buildFocusableOptions(),p=c.indexOf(i.state.selectValue[0]);i.state.focusableOptionsWithIds=o,i.state.focusedOption=c[p],i.state.focusedOptionId=kf(o,c[p])}return i}return K5(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&p2(this.menuListRef,this.focusedOptionRef),wD()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(i){var o=this.props,c=o.isDisabled,p=o.menuIsOpen,h=this.state.isFocused;(h&&!c&&i.isDisabled||h&&p&&!i.menuIsOpen)&&this.focusInput(),h&&c&&!i.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!h&&!c&&i.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(p2(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(i,o){this.props.onInputChange(i,o)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(i){var o=this,c=this.state,p=c.selectValue,h=c.isFocused,m=this.buildFocusableOptions(),y=i==="first"?0:m.length-1;if(!this.props.isMulti){var v=m.indexOf(p[0]);v>-1&&(y=v)}this.scrollToFocusedOptionOnUpdate=!(h&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:m[y],focusedOptionId:this.getFocusedOptionId(m[y])},function(){return o.onMenuOpen()})}},{key:"focusValue",value:function(i){var o=this.state,c=o.selectValue,p=o.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var h=c.indexOf(p);p||(h=-1);var m=c.length-1,y=-1;if(c.length){switch(i){case"previous":h===0?y=0:h===-1?y=m:y=h-1;break;case"next":h>-1&&h<m&&(y=h+1);break}this.setState({inputIsHidden:y!==-1,focusedValue:c[y]})}}}},{key:"focusOption",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",o=this.props.pageSize,c=this.state.focusedOption,p=this.getFocusableOptions();if(p.length){var h=0,m=p.indexOf(c);c||(m=-1),i==="up"?h=m>0?m-1:p.length-1:i==="down"?h=(m+1)%p.length:i==="pageup"?(h=m-o,h<0&&(h=0)):i==="pagedown"?(h=m+o,h>p.length-1&&(h=p.length-1)):i==="last"&&(h=p.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:p[h],focusedValue:null,focusedOptionId:this.getFocusedOptionId(p[h])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(If):Ae(Ae({},If),this.props.theme):If}},{key:"getCommonProps",value:function(){var i=this.clearValue,o=this.cx,c=this.getStyles,p=this.getClassNames,h=this.getValue,m=this.selectOption,y=this.setValue,v=this.props,C=v.isMulti,E=v.isRtl,_=v.options,T=this.hasValue();return{clearValue:i,cx:o,getStyles:c,getClassNames:p,getValue:h,hasValue:T,isMulti:C,isRtl:E,options:_,selectOption:m,selectProps:v,setValue:y,theme:this.getTheme()}}},{key:"hasValue",value:function(){var i=this.state.selectValue;return i.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var i=this.props,o=i.isClearable,c=i.isMulti;return o===void 0?c:o}},{key:"isOptionDisabled",value:function(i,o){return BS(this.props,i,o)}},{key:"isOptionSelected",value:function(i,o){return FS(this.props,i,o)}},{key:"filterOption",value:function(i,o){return VS(this.props,i,o)}},{key:"formatOptionLabel",value:function(i,o){if(typeof this.props.formatOptionLabel=="function"){var c=this.props.inputValue,p=this.state.selectValue;return this.props.formatOptionLabel(i,{context:o,inputValue:c,selectValue:p})}else return this.getOptionLabel(i)}},{key:"formatGroupLabel",value:function(i){return this.props.formatGroupLabel(i)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var i=this.props,o=i.isDisabled,c=i.isSearchable,p=i.inputId,h=i.inputValue,m=i.tabIndex,y=i.form,v=i.menuIsOpen,C=i.required,E=this.getComponents(),_=E.Input,T=this.state,k=T.inputIsHidden,S=T.ariaSelection,I=this.commonProps,N=p||this.getElementId("input"),M=Ae(Ae(Ae({"aria-autocomplete":"list","aria-expanded":v,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":C,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},v&&{"aria-controls":this.getElementId("listbox")}),!c&&{"aria-readonly":!0}),this.hasValue()?(S==null?void 0:S.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return c?O.createElement(_,Oe({},I,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:N,innerRef:this.getInputRef,isDisabled:o,isHidden:k,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:m,form:y,type:"text",value:h},M)):O.createElement(aD,Oe({id:N,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:md,onFocus:this.onInputFocus,disabled:o,tabIndex:m,inputMode:"none",form:y,value:""},M))}},{key:"renderPlaceholderOrValue",value:function(){var i=this,o=this.getComponents(),c=o.MultiValue,p=o.MultiValueContainer,h=o.MultiValueLabel,m=o.MultiValueRemove,y=o.SingleValue,v=o.Placeholder,C=this.commonProps,E=this.props,_=E.controlShouldRenderValue,T=E.isDisabled,k=E.isMulti,S=E.inputValue,I=E.placeholder,N=this.state,M=N.selectValue,F=N.focusedValue,V=N.isFocused;if(!this.hasValue()||!_)return S?null:O.createElement(v,Oe({},C,{key:"placeholder",isDisabled:T,isFocused:V,innerProps:{id:this.getElementId("placeholder")}}),I);if(k)return M.map(function(z,H){var se=z===F,he="".concat(i.getOptionLabel(z),"-").concat(i.getOptionValue(z));return O.createElement(c,Oe({},C,{components:{Container:p,Label:h,Remove:m},isFocused:se,isDisabled:T,key:he,index:H,removeProps:{onClick:function(){return i.removeValue(z)},onTouchEnd:function(){return i.removeValue(z)},onMouseDown:function(de){de.preventDefault()}},data:z}),i.formatOptionLabel(z,"value"))});if(S)return null;var B=M[0];return O.createElement(y,Oe({},C,{data:B,isDisabled:T}),this.formatOptionLabel(B,"value"))}},{key:"renderClearIndicator",value:function(){var i=this.getComponents(),o=i.ClearIndicator,c=this.commonProps,p=this.props,h=p.isDisabled,m=p.isLoading,y=this.state.isFocused;if(!this.isClearable()||!o||h||!this.hasValue()||m)return null;var v={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(o,Oe({},c,{innerProps:v,isFocused:y}))}},{key:"renderLoadingIndicator",value:function(){var i=this.getComponents(),o=i.LoadingIndicator,c=this.commonProps,p=this.props,h=p.isDisabled,m=p.isLoading,y=this.state.isFocused;if(!o||!m)return null;var v={"aria-hidden":"true"};return O.createElement(o,Oe({},c,{innerProps:v,isDisabled:h,isFocused:y}))}},{key:"renderIndicatorSeparator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator,c=i.IndicatorSeparator;if(!o||!c)return null;var p=this.commonProps,h=this.props.isDisabled,m=this.state.isFocused;return O.createElement(c,Oe({},p,{isDisabled:h,isFocused:m}))}},{key:"renderDropdownIndicator",value:function(){var i=this.getComponents(),o=i.DropdownIndicator;if(!o)return null;var c=this.commonProps,p=this.props.isDisabled,h=this.state.isFocused,m={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return O.createElement(o,Oe({},c,{innerProps:m,isDisabled:p,isFocused:h}))}},{key:"renderMenu",value:function(){var i=this,o=this.getComponents(),c=o.Group,p=o.GroupHeading,h=o.Menu,m=o.MenuList,y=o.MenuPortal,v=o.LoadingMessage,C=o.NoOptionsMessage,E=o.Option,_=this.commonProps,T=this.state.focusedOption,k=this.props,S=k.captureMenuScroll,I=k.inputValue,N=k.isLoading,M=k.loadingMessage,F=k.minMenuHeight,V=k.maxMenuHeight,B=k.menuIsOpen,z=k.menuPlacement,H=k.menuPosition,se=k.menuPortalTarget,he=k.menuShouldBlockScroll,te=k.menuShouldScrollIntoView,de=k.noOptionsMessage,ne=k.onMenuScrollToTop,$=k.onMenuScrollToBottom;if(!B)return null;var q=function(Ke,Be){var ft=Ke.type,pe=Ke.data,Ct=Ke.isDisabled,Xe=Ke.isSelected,Hn=Ke.label,nr=Ke.value,Vt=T===pe,rr=Ct?void 0:function(){return i.onOptionHover(pe)},ze=Ct?void 0:function(){return i.selectOption(pe)},Mn="".concat(i.getElementId("option"),"-").concat(Be),an={id:Mn,onClick:ze,onMouseMove:rr,onMouseOver:rr,tabIndex:-1,role:"option","aria-selected":i.state.isAppleDevice?void 0:Xe};return O.createElement(E,Oe({},_,{innerProps:an,data:pe,isDisabled:Ct,isSelected:Xe,key:Mn,label:Hn,type:ft,value:nr,isFocused:Vt,innerRef:Vt?i.getFocusedOptionRef:void 0}),i.formatOptionLabel(Ke.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(ve){if(ve.type==="group"){var Ke=ve.data,Be=ve.options,ft=ve.index,pe="".concat(i.getElementId("group"),"-").concat(ft),Ct="".concat(pe,"-heading");return O.createElement(c,Oe({},_,{key:pe,data:Ke,options:Be,Heading:p,headingProps:{id:Ct,data:ve.data},label:i.formatGroupLabel(ve.data)}),ve.options.map(function(Xe){return q(Xe,"".concat(ft,"-").concat(Xe.index))}))}else if(ve.type==="option")return q(ve,"".concat(ve.index))});else if(N){var J=M({inputValue:I});if(J===null)return null;Q=O.createElement(v,_,J)}else{var ee=de({inputValue:I});if(ee===null)return null;Q=O.createElement(C,_,ee)}var ce={minMenuHeight:F,maxMenuHeight:V,menuPlacement:z,menuPosition:H,menuShouldScrollIntoView:te},Me=O.createElement(FP,Oe({},_,ce),function(ve){var Ke=ve.ref,Be=ve.placerProps,ft=Be.placement,pe=Be.maxHeight;return O.createElement(h,Oe({},_,ce,{innerRef:Ke,innerProps:{onMouseDown:i.onMenuMouseDown,onMouseMove:i.onMenuMouseMove},isLoading:N,placement:ft}),O.createElement(fD,{captureEnabled:S,onTopArrive:ne,onBottomArrive:$,lockEnabled:he},function(Ct){return O.createElement(m,Oe({},_,{innerRef:function(Hn){i.getMenuListRef(Hn),Ct(Hn)},innerProps:{role:"listbox","aria-multiselectable":_.isMulti,id:i.getElementId("listbox")},isLoading:N,maxHeight:pe,focusedOption:T}),Q)}))});return se||H==="fixed"?O.createElement(y,Oe({},_,{appendTo:se,controlElement:this.controlRef,menuPlacement:z,menuPosition:H}),Me):Me}},{key:"renderFormField",value:function(){var i=this,o=this.props,c=o.delimiter,p=o.isDisabled,h=o.isMulti,m=o.name,y=o.required,v=this.state.selectValue;if(y&&!this.hasValue()&&!p)return O.createElement(gD,{name:m,onFocus:this.onValueInputFocus});if(!(!m||p))if(h)if(c){var C=v.map(function(T){return i.getOptionValue(T)}).join(c);return O.createElement("input",{name:m,type:"hidden",value:C})}else{var E=v.length>0?v.map(function(T,k){return O.createElement("input",{key:"i-".concat(k),name:m,type:"hidden",value:i.getOptionValue(T)})}):O.createElement("input",{name:m,type:"hidden",value:""});return O.createElement("div",null,E)}else{var _=v[0]?this.getOptionValue(v[0]):"";return O.createElement("input",{name:m,type:"hidden",value:_})}}},{key:"renderLiveRegion",value:function(){var i=this.commonProps,o=this.state,c=o.ariaSelection,p=o.focusedOption,h=o.focusedValue,m=o.isFocused,y=o.selectValue,v=this.getFocusableOptions();return O.createElement(tD,Oe({},i,{id:this.getElementId("live-region"),ariaSelection:c,focusedOption:p,focusedValue:h,isFocused:m,selectValue:y,focusableOptions:v,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var i=this.getComponents(),o=i.Control,c=i.IndicatorsContainer,p=i.SelectContainer,h=i.ValueContainer,m=this.props,y=m.className,v=m.id,C=m.isDisabled,E=m.menuIsOpen,_=this.state.isFocused,T=this.commonProps=this.getCommonProps();return O.createElement(p,Oe({},T,{className:y,innerProps:{id:v,onKeyDown:this.onKeyDown},isDisabled:C,isFocused:_}),this.renderLiveRegion(),O.createElement(o,Oe({},T,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:C,isFocused:_,menuIsOpen:E}),O.createElement(h,Oe({},T,{isDisabled:C}),this.renderPlaceholderOrValue(),this.renderInput()),O.createElement(c,Oe({},T,{isDisabled:C}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(i,o){var c=o.prevProps,p=o.clearFocusValueOnUpdate,h=o.inputIsHiddenAfterUpdate,m=o.ariaSelection,y=o.isFocused,v=o.prevWasFocused,C=o.instancePrefix,E=i.options,_=i.value,T=i.menuIsOpen,k=i.inputValue,S=i.isMulti,I=f2(_),N={};if(c&&(_!==c.value||E!==c.options||T!==c.menuIsOpen||k!==c.inputValue)){var M=T?RD(i,I):[],F=T?T2(Su(i,I),"".concat(C,"-option")):[],V=p?jD(o,I):null,B=PD(o,M),z=kf(F,B);N={selectValue:I,focusedOption:B,focusedOptionId:z,focusableOptionsWithIds:F,focusedValue:V,clearFocusValueOnUpdate:!1}}var H=h!=null&&i!==c?{inputIsHidden:h,inputIsHiddenAfterUpdate:void 0}:{},se=m,he=y&&v;return y&&!he&&(se={value:su(S,I,I[0]||null),options:I,action:"initial-input-focus"},he=!v),(m==null?void 0:m.action)==="initial-input-focus"&&(se=null),Ae(Ae(Ae({},N),H),{},{prevProps:i,ariaSelection:se,prevWasFocused:he})}}]),n}(O.Component);_m.defaultProps=OD;var DD=O.forwardRef(function(t,e){var n=QE(t);return O.createElement(_m,Oe({ref:e},n))}),LD=DD;const BD=["Staff","BS 5","BS 4","BS 3A","BS 3B","BS 2A","BS 2B","BS 1A","BS 1B","HS 2A","HS 2B","HS 2C","HS 1A","HS 1B","HS 1C","HS 1D","QURAN ACADEMY","Usthad","Librarian","5th","6th","7th","8th","9th","10th","11th","12th","Other"],FD={control:t=>({...t,borderColor:"#d1d5db",minHeight:"42px",height:"42px","&:hover":{borderColor:"#a5b4fc"},boxShadow:"none"}),option:(t,{isFocused:e,isSelected:n})=>({...t,backgroundColor:n?"#8b5cf6":e?"#ede9fe":void 0,color:n?"white":"black"})},VD=({member:t,onClose:e,onSave:n})=>{const[r,i]=O.useState({name:"",email:"",phone:"",place:"",register_number:"",class:"",address:"",membership_type:"student",status:"active"}),[o,c]=O.useState(!1),[p,h]=O.useState(!1),[m,y]=O.useState(BD),[v,C]=O.useState(""),[E,_]=O.useState(!1),T=m.map(N=>({value:N,label:N}));O.useEffect(()=>{t?i({name:t.name,email:t.email,phone:t.phone||"",place:t.place||"",register_number:t.register_number||"",class:t.class||"",address:t.address||"",membership_type:t.membership_type,status:t.status}):((async()=>{h(!0);const{data:M,error:F}=await _e.rpc("get_next_register_number");F?(console.error("Error fetching next register number:",F),alert("Could not fetch the next register number.")):i(V=>({...V,register_number:M})),h(!1)})(),i(M=>({...M,name:"",phone:"",place:"",class:"",address:"",email:`member_${Date.now()}@placeholder.email`,membership_type:"student",status:"active"})))},[t]);const k=async N=>{N.preventDefault(),c(!0);try{if(t){const M={...r,updated_at:new Date().toISOString()},{error:F}=await _e.from("members").update(M).eq("id",t.id);if(F)throw F}else{const{name:M,place:F,class:V,register_number:B,email:z,membership_type:H,status:se,phone:he}=r,te={name:M,place:F,class:V,register_number:B,email:z,membership_type:H,status:se,phone:he,membership_date:new Date().toISOString(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{error:de}=await _e.from("members").insert(te);if(de)throw de}n()}catch(M){console.error("Error saving member:",M),alert("Error saving member")}finally{c(!1)}},S=()=>{v.trim()&&!m.includes(v.trim())&&(y([...m,v.trim()]),C(""),_(!1))},I=N=>{window.confirm(`Are you sure you want to remove "${N}" from the class list?`)&&(y(m.filter(M=>M!==N)),r.class===N&&i({...r,class:""}))};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold",children:t?"Edit Member":"Add New Member"}),f.jsx("button",{onClick:e,children:f.jsx(Pn,{})})]}),f.jsxs("form",{onSubmit:k,className:"p-6 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),f.jsx("input",{type:"text",required:!0,value:r.name,onChange:N=>i({...r,name:N.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),f.jsx("input",{type:"tel",value:r.phone,onChange:N=>i({...r,phone:N.target.value}),className:"w-full px-3 py-2 border rounded-md"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Place"}),f.jsx("input",{type:"text",value:r.place,onChange:N=>i({...r,place:N.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Class"}),f.jsxs("button",{type:"button",onClick:()=>_(!E),className:"text-xs text-primary hover:text-primary-dark flex items-center gap-1 font-semibold",children:[f.jsx(ml,{size:14})," Add New Class"]})]}),E&&f.jsxs("div",{className:"mb-2 flex gap-2",children:[f.jsx("input",{type:"text",value:v,onChange:N=>C(N.target.value),placeholder:"Enter new class name...",className:"flex-1 px-3 py-2 border rounded-md text-sm",onKeyPress:N=>N.key==="Enter"&&(N.preventDefault(),S())}),f.jsx("button",{type:"button",onClick:S,className:"bg-primary text-white px-4 py-2 rounded-md text-sm hover:bg-primary-dark",children:"Add"})]}),f.jsx(LD,{options:T,value:T.find(N=>N.value===r.class),onChange:N=>i({...r,class:N?N.value:""}),placeholder:"Search and select a class...",isClearable:!0,styles:FD,components:{Option:N=>f.jsxs("div",{className:"flex items-center justify-between px-3 py-2 hover:bg-neutral-100 cursor-pointer",children:[f.jsx("div",{onClick:()=>N.selectOption(N.data),className:"flex-1",children:N.data.label}),f.jsx("button",{type:"button",onClick:M=>{M.stopPropagation(),I(N.data.value)},className:"text-red-500 hover:text-red-700 p-1",title:"Delete this class",children:f.jsx(nd,{size:14})})]})}})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Register Number"}),f.jsxs("div",{className:"relative",children:[f.jsx("input",{type:"text",readOnly:!t,value:r.register_number,onChange:N=>t&&i({...r,register_number:N.target.value}),className:`w-full px-3 py-2 border rounded-md ${t?"":"bg-gray-100"}`}),p&&f.jsx(jn,{className:"absolute right-3 top-1/2 -translate-y-1/2 animate-spin text-gray-400"})]})]}),t&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email *"}),f.jsx("input",{type:"email",required:!0,value:r.email,onChange:N=>i({...r,email:N.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),f.jsx("textarea",{rows:3,value:r.address,onChange:N=>i({...r,address:N.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Membership Type"}),f.jsxs("select",{value:r.membership_type,onChange:N=>i({...r,membership_type:N.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[f.jsx("option",{value:"student",children:"Student"}),f.jsx("option",{value:"regular",children:"Regular"}),f.jsx("option",{value:"premium",children:"Premium"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),f.jsxs("select",{value:r.status,onChange:N=>i({...r,status:N.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[f.jsx("option",{value:"active",children:"Active"}),f.jsx("option",{value:"inactive",children:"Inactive"}),f.jsx("option",{value:"suspended",children:"Suspended"})]})]})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-gray-100 rounded-md",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:o||p,className:"px-4 py-2 bg-purple-600 text-white rounded-md disabled:opacity-50",children:o?"Saving...":"Save Member"})]})]})]})})};var UD=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"];function zD(t){var e=t.defaultOptions,n=e===void 0?!1:e,r=t.cacheOptions,i=r===void 0?!1:r,o=t.loadOptions;t.options;var c=t.isLoading,p=c===void 0?!1:c,h=t.onInputChange,m=t.filterOption,y=m===void 0?null:m,v=hs(t,UD),C=v.inputValue,E=O.useRef(void 0),_=O.useRef(!1),T=O.useState(Array.isArray(n)?n:void 0),k=dn(T,2),S=k[0],I=k[1],N=O.useState(typeof C<"u"?C:""),M=dn(N,2),F=M[0],V=M[1],B=O.useState(n===!0),z=dn(B,2),H=z[0],se=z[1],he=O.useState(void 0),te=dn(he,2),de=te[0],ne=te[1],$=O.useState([]),q=dn($,2),Q=q[0],J=q[1],ee=O.useState(!1),ce=dn(ee,2),Me=ce[0],ve=ce[1],Ke=O.useState({}),Be=dn(Ke,2),ft=Be[0],pe=Be[1],Ct=O.useState(void 0),Xe=dn(Ct,2),Hn=Xe[0],nr=Xe[1],Vt=O.useState(void 0),rr=dn(Vt,2),ze=rr[0],Mn=rr[1];i!==ze&&(pe({}),Mn(i)),n!==Hn&&(I(Array.isArray(n)?n:void 0),nr(n)),O.useEffect(function(){return _.current=!0,function(){_.current=!1}},[]);var an=O.useCallback(function(Ue,De){if(!o)return De();var Ot=o(Ue,De);Ot&&typeof Ot.then=="function"&&Ot.then(De,function(){return De()})},[o]);O.useEffect(function(){n===!0&&an(F,function(Ue){_.current&&(I(Ue||[]),se(!!E.current))})},[]);var sr=O.useCallback(function(Ue,De){var Ot=EP(Ue,De,h);if(!Ot){E.current=void 0,V(""),ne(""),J([]),se(!1),ve(!1);return}if(i&&ft[Ot])V(Ot),ne(Ot),J(ft[Ot]),se(!1),ve(!1);else{var ge=E.current={};V(Ot),se(!0),ve(!de),an(Ot,function(Dn){_&&ge===E.current&&(E.current=void 0,se(!1),ne(Ot),J(Dn||[]),ve(!1),pe(Dn?Ae(Ae({},ft),{},Wo({},Ot,Dn)):ft))})}},[i,an,de,ft,h]),Ut=Me?[]:F&&de?Q:S||[];return Ae(Ae({},v),{},{options:Ut,isLoading:H||p,onInputChange:sr,filterOption:y})}var HD=O.forwardRef(function(t,e){var n=zD(t),r=QE(n);return O.createElement(_m,Oe({ref:e},r))}),WD=HD;const Qi=({value:t,onChange:e,placeholder:n,tableName:r,labelField:i,searchFields:o,required:c,onlyAvailableBooks:p})=>{const h=async m=>{let y=_e.from(r).select("*");if(m){const E=o.map(_=>`${_}.ilike.%${m}%`).join(",");y=y.or(E)}r==="books"&&p&&(y=y.gt("available_copies",0));const{data:v,error:C}=await y.limit(20);return C?(console.error(`Error fetching ${r}:`,C),[]):v.map(E=>({value:E.id,label:E[i],data:E}))};return f.jsx(WD,{cacheOptions:!0,defaultOptions:!0,value:t,onChange:e,loadOptions:h,isClearable:!0,placeholder:n,required:c,noOptionsMessage:({inputValue:m})=>m?"No results found":"No options available",loadingMessage:()=>"Searching...",styles:{control:m=>({...m,borderColor:"#cbd5e1","&:hover":{borderColor:"#a5b4fc"},boxShadow:"none"}),option:(m,{isFocused:y,isSelected:v})=>({...m,backgroundColor:v?"#4338CA":y?"#E0E7FF":void 0,color:v?"white":"black"})}})},$D={success:f.jsx(z0,{className:"text-green-500"}),error:f.jsx(xC,{className:"text-red-500"}),info:f.jsx(Tp,{className:"text-blue-500"})},GD=({message:t,type:e,onClose:n})=>(O.useEffect(()=>{const r=setTimeout(n,5e3);return()=>clearTimeout(r)},[n]),f.jsx(Ie.div,{initial:{opacity:0,y:-50,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},layout:!0,className:"fixed top-5 right-5 z-[100] w-full max-w-sm bg-white shadow-lg rounded-lg pointer-events-auto flex ring-1 ring-black ring-opacity-5",children:f.jsxs("div",{className:"w-full rounded-lg p-4 flex items-start",children:[f.jsx("div",{className:"flex-shrink-0",children:$D[e]}),f.jsx("div",{className:"ml-3 w-0 flex-1",children:f.jsx("p",{className:"text-sm font-medium text-neutral-900",children:t})}),f.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:f.jsx("button",{onClick:n,className:"inline-flex text-neutral-400 hover:text-neutral-500",children:f.jsx(Pn,{size:20})})})]})})),zS=O.createContext(void 0),XD=({children:t})=>{const[e,n]=O.useState([]),r=O.useCallback((o,c="info")=>{const p=Date.now();n(h=>[...h,{id:p,message:o,type:c}])},[]),i=o=>{n(c=>c.filter(p=>p.id!==o))};return f.jsxs(zS.Provider,{value:{addNotification:r},children:[t,f.jsx("div",{className:"fixed top-5 right-5 z-[100] space-y-2",children:f.jsx(ui,{children:e.map(o=>f.jsx(GD,{message:o.message,type:o.type,onClose:()=>i(o.id)},o.id))})})]})},dh=()=>{const t=O.useContext(zS);if(t===void 0)throw new Error("useNotification must be used within a NotificationProvider");return t},KD=({onClose:t,onSave:e})=>{const{addNotification:n}=dh(),[r,i]=O.useState(null),[o,c]=O.useState(null),[p,h]=O.useState(14),[m,y]=O.useState(!1),v=async C=>{if(C.preventDefault(),!r||!o){n("Please select both a book and a member.","error");return}y(!0);try{const E=new Date;E.setDate(new Date().getDate()+p);const{error:_}=await _e.rpc("issue_book",{p_book_id:r.value,p_member_id:o.value,p_due_date:E.toISOString()});if(_)throw _;n(`Successfully issued "${r.label}" to ${o.label}.`,"success"),e()}catch(E){console.error("Error issuing book:",E),n(`Error issuing book: ${E.message}`,"error")}finally{y(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-neutral-200",children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"Issue Book"}),f.jsx("button",{onClick:t,className:"text-neutral-400 hover:text-neutral-600",children:f.jsx(Pn,{size:24})})]}),f.jsxs("form",{onSubmit:v,className:"p-6 space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Select Book *"}),f.jsx(Qi,{value:r,onChange:i,placeholder:"Type DDC or book title...",tableName:"books",labelField:"title",searchFields:["title","ddc_number"],onlyAvailableBooks:!0,required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Select Member *"}),f.jsx(Qi,{value:o,onChange:c,placeholder:"Type register no. or member name...",tableName:"members",labelField:"name",searchFields:["name","register_number"],required:!0})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Loan Period (Days) *"}),f.jsxs("select",{value:p,onChange:C=>h(parseInt(C.target.value)),className:"w-full px-3 py-2 border border-neutral-300 rounded-md bg-white",children:[f.jsx("option",{value:7,children:"7 days"}),f.jsx("option",{value:14,children:"14 days"}),f.jsx("option",{value:21,children:"21 days"}),f.jsx("option",{value:30,children:"30 days"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 bg-neutral-100 rounded-md",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:m||!r||!o,className:"px-4 py-2 bg-primary text-white rounded-md disabled:opacity-50 flex items-center justify-center min-w-[110px]",children:m?f.jsx(jn,{className:"animate-spin"}):"Issue Book"})]})]})]})})},qD=({categories:t,onSave:e})=>{const{addNotification:n}=dh(),[r,i]=O.useState({title:"",author:"",category_id:"",language:"",price:"0",publisher:"",ddc_number:"",total_copies:1}),[o,c]=O.useState(!1),p=async h=>{h.preventDefault(),c(!0);try{const m={title:r.title,author:r.author,category_id:r.category_id||null,language:r.language||null,price:r.price?parseFloat(r.price):0,publisher:r.publisher,ddc_number:r.ddc_number,total_copies:r.total_copies,available_copies:r.total_copies,status:"available",updated_at:new Date().toISOString(),created_at:new Date().toISOString(),register_date:new Date().toISOString()},{error:y}=await _e.from("books").insert(m);if(y)throw y;n("Book added successfully!","success"),i({title:"",author:"",category_id:"",language:"",price:"0",publisher:"",ddc_number:"",total_copies:1}),e()}catch(m){console.error("Error saving book:",m),n(`Error saving book: ${m.message}`,"error")}finally{c(!1)}};return f.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md border border-neutral-200",children:[f.jsx("h3",{className:"text-2xl font-bold text-secondary-dark mb-6",children:"Add New Book"}),f.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Book Title"}),f.jsx("input",{type:"text",required:!0,value:r.title,onChange:h=>i({...r,title:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-primary-light focus:border-primary-light",placeholder:"Enter book title"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Author Name"}),f.jsx("input",{type:"text",required:!0,value:r.author,onChange:h=>i({...r,author:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-primary-light focus:border-primary-light",placeholder:"Enter author's name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Book Category"}),f.jsxs("select",{value:r.category_id,onChange:h=>i({...r,category_id:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md bg-white focus:ring-primary-light focus:border-primary-light",children:[f.jsx("option",{value:"",children:"Select a category..."}),t.map(h=>f.jsx("option",{value:h.id,children:h.name},h.id))]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Language"}),f.jsxs("select",{value:r.language,onChange:h=>i({...r,language:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md bg-white focus:ring-primary-light focus:border-primary-light",children:[f.jsx("option",{value:"",children:"Select a language"}),f.jsx("option",{children:"English"}),f.jsx("option",{children:"Kannada"}),f.jsx("option",{children:"Malayalam"}),f.jsx("option",{children:"Urdu"}),f.jsx("option",{children:"Arabic"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Book Price ()"}),f.jsx("input",{type:"number",step:"0.01",value:r.price,onChange:h=>i({...r,price:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-primary-light focus:border-primary-light",placeholder:"0"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"Publisher Name"}),f.jsx("input",{type:"text",value:r.publisher,onChange:h=>i({...r,publisher:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-primary-light focus:border-primary-light",placeholder:"Enter publisher name"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-1",children:"DDC"}),f.jsx("input",{type:"text",value:r.ddc_number,onChange:h=>i({...r,ddc_number:h.target.value}),className:"w-full px-3 py-2 border border-neutral-300 rounded-md focus:ring-primary-light focus:border-primary-light",placeholder:"e.g. 813.6"})]})]}),f.jsx("div",{className:"pt-2",children:f.jsx("button",{type:"submit",disabled:o,className:"w-full px-4 py-3 bg-primary text-white font-semibold rounded-md disabled:opacity-50 hover:bg-primary-dark transition-colors",children:o?"Adding...":"Add Book"})})]})]})},HS=({isOpen:t,title:e,message:n,onConfirm:r,onCancel:i,confirmText:o="Confirm",cancelText:c="Cancel",isConfirming:p=!1})=>f.jsx(ui,{children:t&&f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-[60]",children:f.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:[f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0",children:f.jsx(Ts,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),f.jsxs("div",{className:"mt-0 text-left",children:[f.jsx("h3",{className:"text-lg leading-6 font-bold text-neutral-900",children:e}),f.jsx("div",{className:"mt-2",children:f.jsx("p",{className:"text-sm text-neutral-600",children:n})})]})]})}),f.jsxs("div",{className:"bg-neutral-50 px-6 py-4 flex flex-row-reverse gap-3 rounded-b-xl",children:[f.jsx("button",{type:"button",onClick:r,disabled:p,className:"inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:text-sm disabled:opacity-50 min-w-[100px]",children:p?f.jsx(jn,{className:"animate-spin"}):o}),f.jsx("button",{type:"button",onClick:i,disabled:p,className:"inline-flex justify-center rounded-lg border border-neutral-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-neutral-700 hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-light sm:text-sm",children:c})]})]})})}),YD=({onClose:t,onSave:e})=>{const{addNotification:n}=dh(),[r,i]=O.useState([]),[o,c]=O.useState(""),[p,h]=O.useState(!0),[m,y]=O.useState(null),[v,C]=O.useState(null),[E,_]=O.useState(""),[T,k]=O.useState(!1),[S,I]=O.useState(!1),[N,M]=O.useState(()=>{});O.useEffect(()=>{F()},[]);const F=async()=>{h(!0),y(null);const{data:te,error:de}=await _e.from("categories").select("*").order("name");de?(y("Failed to load categories."),console.error(de)):i(te||[]),h(!1)},V=async te=>{if(te.preventDefault(),!o.trim()||T)return;k(!0);const{error:de}=await _e.rpc("add_category",{p_name:o.trim()});de?n(`Error adding category: ${de.message}`,"error"):(c(""),await F(),e(),n("Category added.","success")),k(!1)},B=te=>{M(()=>()=>z(te)),I(!0)},z=async te=>{const{error:de}=await _e.rpc("delete_category",{p_id:te});de?n(`Error deleting category: ${de.message}. It might be in use.`,"error"):(await F(),e(),n("Category deleted.","success")),I(!1)},H=te=>{C(te),_(te.name)},se=()=>{C(null),_("")},he=async()=>{if(!v||!E.trim()||T)return;k(!0);const{error:te}=await _e.from("categories").update({name:E.trim()}).eq("id",v.id);te?n(`Error updating category: ${te.message}`,"error"):(se(),await F(),e(),n("Category updated.","success")),k(!1)};return f.jsxs(f.Fragment,{children:[f.jsx(HS,{isOpen:S,title:"Delete Category?",message:"Are you sure? This might affect existing books.",onConfirm:N,onCancel:()=>I(!1),confirmText:"Delete"}),f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Manage Categories"}),f.jsx("button",{onClick:t,children:f.jsx(Pn,{})})]}),f.jsxs("div",{className:"p-6 space-y-4",children:[f.jsxs("form",{onSubmit:V,className:"flex gap-2",children:[f.jsx("input",{type:"text",value:o,onChange:te=>c(te.target.value),placeholder:"New category name",className:"flex-grow px-3 py-2 border rounded-md"}),f.jsxs("button",{type:"submit",disabled:T,className:"px-4 py-2 bg-primary text-white rounded-md flex items-center gap-2 disabled:opacity-50",children:[T&&!v?f.jsx(jn,{size:18,className:"animate-spin"}):f.jsx(ml,{size:18})," Add"]})]}),m&&f.jsx("p",{className:"text-red-500 text-sm",children:m}),f.jsx("div",{className:"max-h-64 overflow-y-auto space-y-2",children:p?f.jsx("p",{children:"Loading..."}):r.map(te=>f.jsx("div",{className:"flex justify-between items-center p-2 bg-neutral-50 rounded-md",children:(v==null?void 0:v.id)===te.id?f.jsxs("div",{className:"flex-grow flex items-center gap-2",children:[f.jsx("input",{type:"text",value:E,onChange:de=>_(de.target.value),className:"flex-grow px-2 py-1 border border-primary-light rounded-md",autoFocus:!0}),f.jsx("button",{onClick:he,disabled:T,className:"text-green-500 hover:text-green-700 disabled:opacity-50",children:T&&(v==null?void 0:v.id)===te.id?f.jsx(jn,{size:20,className:"animate-spin"}):f.jsx(U0,{size:20})}),f.jsx("button",{onClick:se,className:"text-red-500 hover:text-red-700",children:f.jsx(Pn,{size:20})})]}):f.jsxs(f.Fragment,{children:[f.jsx("span",{children:te.name}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>H(te),className:"text-neutral-400 hover:text-primary",children:f.jsx(td,{size:16})}),f.jsx("button",{onClick:()=>B(te.id),className:"text-neutral-400 hover:text-red-500",children:f.jsx(nd,{size:16})})]})]})},te.id))})]})]})})]})};var me;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(me||(me={}));var k2=new Map([[me.QR_CODE,"QR_CODE"],[me.AZTEC,"AZTEC"],[me.CODABAR,"CODABAR"],[me.CODE_39,"CODE_39"],[me.CODE_93,"CODE_93"],[me.CODE_128,"CODE_128"],[me.DATA_MATRIX,"DATA_MATRIX"],[me.MAXICODE,"MAXICODE"],[me.ITF,"ITF"],[me.EAN_13,"EAN_13"],[me.EAN_8,"EAN_8"],[me.PDF_417,"PDF_417"],[me.RSS_14,"RSS_14"],[me.RSS_EXPANDED,"RSS_EXPANDED"],[me.UPC_A,"UPC_A"],[me.UPC_E,"UPC_E"],[me.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),O2;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(O2||(O2={}));function ZD(t){return Object.values(me).includes(t)}var yd;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(yd||(yd={}));var QD=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[yd.SCAN_TYPE_CAMERA,yd.SCAN_TYPE_FILE],t}(),WS=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!k2.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,k2.get(e))},t}(),R2=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),m1;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(m1||(m1={}));var JD=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:m1.UNKWOWN_ERROR}},t}(),e7=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ps(t){return typeof t>"u"||t===null}var $o=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),$S=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var r=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var i=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],o=new Set(i),c=Object.keys(e),p=0,h=c;p<h.length;p++){var m=h[p];if(o.has(m))return n.logError("".concat(m," is not supported videoConstaints."),!0),!1}return!0},t}(),g1={exports:{}};(function(t,e){(function(n,r){r(e)})(La,function(n){function r(R){return R==null}var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,s){R.__proto__=s}||function(R,s){for(var a in s)s.hasOwnProperty(a)&&(R[a]=s[a])};function o(R,s){i(R,s);function a(){this.constructor=R}R.prototype=s===null?Object.create(s):(a.prototype=s.prototype,new a)}function c(R,s){var a=Object.setPrototypeOf;a?a(R,s):R.__proto__=s}function p(R,s){s===void 0&&(s=R.constructor);var a=Error.captureStackTrace;a&&a(R,s)}var h=function(R){o(s,R);function s(a){var l=this.constructor,u=R.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),c(u,l.prototype),p(u),u}return s}(Error);class m extends h{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}m.kind="Exception";class y extends m{}y.kind="ArgumentException";class v extends m{}v.kind="IllegalArgumentException";class C{constructor(s){if(this.binarizer=s,s===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,a){return this.binarizer.getBlackRow(s,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,a,l,u){const d=this.binarizer.getLuminanceSource().crop(s,a,l,u);return new C(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class E extends m{static getChecksumInstance(){return new E}}E.kind="ChecksumException";class _{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class T{static arraycopy(s,a,l,u,d){for(;d--;)l[u++]=s[a++]}static currentTimeMillis(){return Date.now()}}class k extends m{}k.kind="IndexOutOfBoundsException";class S extends k{constructor(s=void 0,a=void 0){super(a),this.index=s,this.message=a}}S.kind="ArrayIndexOutOfBoundsException";class I{static fill(s,a){for(let l=0,u=s.length;l<u;l++)s[l]=a}static fillWithin(s,a,l,u){I.rangeCheck(s.length,a,l);for(let d=a;d<l;d++)s[d]=u}static rangeCheck(s,a,l){if(a>l)throw new v("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new S(a);if(l>s)throw new S(l)}static asList(...s){return s}static create(s,a,l){return Array.from({length:s}).map(d=>Array.from({length:a}).fill(l))}static createInt32Array(s,a,l){return Array.from({length:s}).map(d=>Int32Array.from({length:a}).fill(l))}static equals(s,a){if(!s||!a||!s.length||!a.length||s.length!==a.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==a[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let a=1;for(const l of s)a=31*a+l;return a}static fillUint8Array(s,a){for(let l=0;l!==s.length;l++)s[l]=a}static copyOf(s,a){return s.slice(0,a)}static copyOfUint8Array(s,a){if(s.length<=a){const l=new Uint8Array(a);return l.set(s),l}return s.slice(0,a)}static copyOfRange(s,a,l){const u=l-a,d=new Int32Array(u);return T.arraycopy(s,a,d,0,u),d}static binarySearch(s,a,l){l===void 0&&(l=I.numberComparator);let u=0,d=s.length-1;for(;u<=d;){const g=d+u>>1,x=l(a,s[g]);if(x>0)u=g+1;else if(x<0)d=g-1;else return g}return-u-1}static numberComparator(s,a){return s-a}}class N{static numberOfTrailingZeros(s){let a;if(s===0)return 32;let l=31;return a=s<<16,a!==0&&(l-=16,s=a),a=s<<8,a!==0&&(l-=8,s=a),a=s<<4,a!==0&&(l-=4,s=a),a=s<<2,a!==0&&(l-=2,s=a),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let a=1;return s>>>16||(a+=16,s<<=16),s>>>24||(a+=8,s<<=8),s>>>28||(a+=4,s<<=4),s>>>30||(a+=2,s<<=2),a-=s>>>31,a}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,a){return Math.trunc(s/a)}static parseInt(s,a=void 0){return parseInt(s,a)}}N.MIN_VALUE_32_BITS=-2147483648,N.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(s,a){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,a==null?this.bits=M.makeArray(s):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const a=M.makeArray(s);T.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),d=l[u];d&=~((1<<(s&31))-1);const g=l.length;for(;d===0;){if(++u===g)return a;d=l[u]}const x=u*32+N.numberOfTrailingZeros(d);return x>a?a:x}getNextUnset(s){const a=this.size;if(s>=a)return a;const l=this.bits;let u=Math.floor(s/32),d=~l[u];d&=~((1<<(s&31))-1);const g=l.length;for(;d===0;){if(++u===g)return a;d=~l[u]}const x=u*32+N.numberOfTrailingZeros(d);return x>a?a:x}setBulk(s,a){this.bits[Math.floor(s/32)]=a}setRange(s,a){if(a<s||s<0||a>this.size)throw new v;if(a===s)return;a--;const l=Math.floor(s/32),u=Math.floor(a/32),d=this.bits;for(let g=l;g<=u;g++){const x=g>l?0:s&31,b=(2<<(g<u?31:a&31))-(1<<x);d[g]|=b}}clear(){const s=this.bits.length,a=this.bits;for(let l=0;l<s;l++)a[l]=0}isRange(s,a,l){if(a<s||s<0||a>this.size)throw new v;if(a===s)return!0;a--;const u=Math.floor(s/32),d=Math.floor(a/32),g=this.bits;for(let x=u;x<=d;x++){const w=x>u?0:s&31,A=(2<<(x<d?31:a&31))-(1<<w)&4294967295;if((g[x]&A)!==(l?A:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,a){if(a<0||a>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const a=s.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new v("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=s.bits[l]}toBytes(s,a,l,u){for(let d=0;d<u;d++){let g=0;for(let x=0;x<8;x++)this.get(s)&&(g|=1<<7-x),s++;a[l+d]=g}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let d=0;d<l;d++){let g=u[d];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,s[a-d]=g}if(this.size!==l*32){const d=l*32-this.size;let g=s[0]>>>d;for(let x=1;x<l;x++){const w=s[x];g|=w<<32-d,s[x-1]=g,g=w>>>d}s[l-1]=g}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof M))return!1;const a=s;return this.size===a.size&&I.equals(this.bits,a.bits)}hashCode(){return 31*this.size+I.hashCode(this.bits)}toString(){let s="";for(let a=0,l=this.size;a<l;a++)a&7||(s+=" "),s+=this.get(a)?"X":".";return s}clone(){return new M(this.size,this.bits.slice())}}var F;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(F||(F={}));var V=F;class B extends m{static getFormatInstance(){return new B}}B.kind="FormatException";var z;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(z||(z={}));class H{constructor(s,a,l,...u){this.valueIdentifier=s,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,H.VALUE_IDENTIFIER_TO_ECI.set(s,this),H.NAME_TO_ECI.set(l,this);const d=this.values;for(let g=0,x=d.length;g!==x;g++){const w=d[g];H.VALUES_TO_ECI.set(w,this)}for(const g of u)H.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new B("incorect value");const a=H.VALUES_TO_ECI.get(s);if(a===void 0)throw new B("incorect value");return a}static getCharacterSetECIByName(s){const a=H.NAME_TO_ECI.get(s);if(a===void 0)throw new B("incorect value");return a}equals(s){if(!(s instanceof H))return!1;const a=s;return this.getName()===a.getName()}}H.VALUE_IDENTIFIER_TO_ECI=new Map,H.VALUES_TO_ECI=new Map,H.NAME_TO_ECI=new Map,H.Cp437=new H(z.Cp437,Int32Array.from([0,2]),"Cp437"),H.ISO8859_1=new H(z.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),H.ISO8859_2=new H(z.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),H.ISO8859_3=new H(z.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),H.ISO8859_4=new H(z.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),H.ISO8859_5=new H(z.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),H.ISO8859_6=new H(z.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),H.ISO8859_7=new H(z.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),H.ISO8859_8=new H(z.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),H.ISO8859_9=new H(z.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),H.ISO8859_10=new H(z.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),H.ISO8859_11=new H(z.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),H.ISO8859_13=new H(z.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),H.ISO8859_14=new H(z.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),H.ISO8859_15=new H(z.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),H.ISO8859_16=new H(z.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),H.SJIS=new H(z.SJIS,20,"SJIS","Shift_JIS"),H.Cp1250=new H(z.Cp1250,21,"Cp1250","windows-1250"),H.Cp1251=new H(z.Cp1251,22,"Cp1251","windows-1251"),H.Cp1252=new H(z.Cp1252,23,"Cp1252","windows-1252"),H.Cp1256=new H(z.Cp1256,24,"Cp1256","windows-1256"),H.UnicodeBigUnmarked=new H(z.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),H.UTF8=new H(z.UTF8,26,"UTF8","UTF-8"),H.ASCII=new H(z.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),H.Big5=new H(z.Big5,28,"Big5"),H.GB18030=new H(z.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),H.EUC_KR=new H(z.EUC_KR,30,"EUC_KR","EUC-KR");class se extends m{}se.kind="UnsupportedOperationException";class he{static decode(s,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!he.isBrowser()&&s==="ISO-8859-1"}static encode(s,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof H?s:H.getCharacterSetECIByName(s)}static decodeFallback(s,a){const l=this.encodingCharacterSet(a);if(he.isDecodeFallbackSupported(l)){let u="";for(let d=0,g=s.length;d<g;d++){let x=s[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(H.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new se(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(H.UTF8)||s.equals(H.ISO8859_1)||s.equals(H.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class te{static castAsNonUtf8Char(s,a=null){const l=a?a.getName():this.ISO88591;return he.decode(new Uint8Array([s]),l)}static guessEncoding(s,a){if(a!=null&&a.get(V.CHARACTER_SET)!==void 0)return a.get(V.CHARACTER_SET).toString();const l=s.length;let u=!0,d=!0,g=!0,x=0,w=0,b=0,A=0,j=0,P=0,L=0,U=0,W=0,X=0,Z=0;const ae=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let le=0;le<l&&(u||d||g);le++){const ie=s[le]&255;g&&(x>0?ie&128?x--:g=!1:ie&128&&(ie&64?(x++,ie&32?(x++,ie&16?(x++,ie&8?g=!1:A++):b++):w++):g=!1)),u&&(ie>127&&ie<160?u=!1:ie>159&&(ie<192||ie===215||ie===247)&&Z++),d&&(j>0?ie<64||ie===127||ie>252?d=!1:j--:ie===128||ie===160||ie>239?d=!1:ie>160&&ie<224?(P++,U=0,L++,L>W&&(W=L)):ie>127?(j++,L=0,U++,U>X&&(X=U)):(L=0,U=0))}return g&&x>0&&(g=!1),d&&j>0&&(d=!1),g&&(ae||w+b+A>0)?te.UTF8:d&&(te.ASSUME_SHIFT_JIS||W>=3||X>=3)?te.SHIFT_JIS:u&&d?W===2&&P===2||Z*10>=l?te.SHIFT_JIS:te.ISO88591:u?te.ISO88591:d?te.SHIFT_JIS:g?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(s,...a){let l=-1;function u(g,x,w,b,A,j){if(g==="%%")return"%";if(a[++l]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let P=A?parseInt(A.substr(1)):void 0,L;switch(j){case"s":L=a[l];break;case"c":L=a[l][0];break;case"f":L=parseFloat(a[l]).toFixed(g);break;case"p":L=parseFloat(a[l]).toPrecision(g);break;case"e":L=parseFloat(a[l]).toExponential(g);break;case"x":L=parseInt(a[l]).toString(P||16);break;case"d":L=parseFloat(parseInt(a[l],P||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(P);let U=parseInt(w),W=w&&w[0]+""=="0"?"0":" ";for(;L.length<U;)L=x!==void 0?L+W:W+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,a){return he.encode(s,a)}static getCharCode(s,a=0){return s.charCodeAt(a)}static getCharAt(s){return String.fromCharCode(s)}}te.SHIFT_JIS=H.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=H.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=H.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class de{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=te.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,a,l){for(let u=a;a<a+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+1)}substring(s,a){return this.value.substring(s,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,a){this.value=this.value.substr(0,s)+a+this.value.substr(s+a.length)}}class ne{constructor(s,a,l,u){if(this.width=s,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=s),this.height=a,s<1||a<1)throw new v("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const a=s.length,l=s[0].length,u=new ne(l,a);for(let d=0;d<a;d++){const g=s[d];for(let x=0;x<l;x++)g[x]&&u.set(x,d)}return u}static parseFromString(s,a,l){if(s===null)throw new v("stringRepresentation cannot be null");const u=new Array(s.length);let d=0,g=0,x=-1,w=0,b=0;for(;b<s.length;)if(s.charAt(b)===`
`||s.charAt(b)==="\r"){if(d>g){if(x===-1)x=d-g;else if(d-g!==x)throw new v("row lengths do not match");g=d,w++}b++}else if(s.substring(b,b+a.length)===a)b+=a.length,u[d]=!0,d++;else if(s.substring(b,b+l.length)===l)b+=l.length,u[d]=!1,d++;else throw new v("illegal character encountered: "+s.substring(b));if(d>g){if(x===-1)x=d-g;else if(d-g!==x)throw new v("row lengths do not match");w++}const A=new ne(x,w);for(let j=0;j<d;j++)u[j]&&A.set(Math.floor(j%x),Math.floor(j/x));return A}get(s,a){const l=a*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,a){const l=a*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new v("input matrix dimensions do not match");const a=new M(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,g=this.height;d<g;d++){const x=d*l,w=s.getRow(d,a).getBitArray();for(let b=0;b<l;b++)u[x+b]^=w[b]}}clear(){const s=this.bits,a=s.length;for(let l=0;l<a;l++)s[l]=0}setRegion(s,a,l,u){if(a<0||s<0)throw new v("Left and top must be nonnegative");if(u<1||l<1)throw new v("Height and width must be at least 1");const d=s+l,g=a+u;if(g>this.height||d>this.width)throw new v("The region must fit inside the matrix");const x=this.rowSize,w=this.bits;for(let b=a;b<g;b++){const A=b*x;for(let j=s;j<d;j++)w[A+Math.floor(j/32)]|=1<<(j&31)&4294967295}}getRow(s,a){a==null||a.getSize()<this.width?a=new M(this.width):a.clear();const l=this.rowSize,u=this.bits,d=s*l;for(let g=0;g<l;g++)a.setBulk(g*32,u[d+g]);return a}setRow(s,a){T.arraycopy(a.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),a=this.getHeight();let l=new M(s),u=new M(s);for(let d=0,g=Math.floor((a+1)/2);d<g;d++)l=this.getRow(d,l),u=this.getRow(a-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(a-1-d,l)}getEnclosingRectangle(){const s=this.width,a=this.height,l=this.rowSize,u=this.bits;let d=s,g=a,x=-1,w=-1;for(let b=0;b<a;b++)for(let A=0;A<l;A++){const j=u[b*l+A];if(j!==0){if(b<g&&(g=b),b>w&&(w=b),A*32<d){let P=0;for(;!(j<<31-P&4294967295);)P++;A*32+P<d&&(d=A*32+P)}if(A*32+31>x){let P=31;for(;!(j>>>P);)P--;A*32+P>x&&(x=A*32+P)}}}return x<d||w<g?null:Int32Array.from([d,g,x-d+1,w-g+1])}getTopLeftOnBit(){const s=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/s;let d=l%s*32;const g=a[l];let x=0;for(;!(g<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const s=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/s);let d=Math.floor(l%s)*32;const g=a[l];let x=31;for(;!(g>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof ne))return!1;const a=s;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&I.equals(this.bits,a.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+I.hashCode(this.bits),s}toString(s="X ",a="  ",l=`
`){return this.buildToString(s,a,l)}buildToString(s,a,l){let u=new de;for(let d=0,g=this.height;d<g;d++){for(let x=0,w=this.width;x<w;x++)u.append(this.get(x,d)?s:a);u.append(l)}return u.toString()}clone(){return new ne(this.width,this.height,this.rowSize,this.bits.slice())}}class $ extends m{static getNotFoundInstance(){return new $}}$.kind="NotFoundException";class q extends _{constructor(s){super(s),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(s,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new M(u):a.clear(),this.initArrays(u);const d=l.getRow(s,this.luminances),g=this.buckets;for(let w=0;w<u;w++)g[(d[w]&255)>>q.LUMINANCE_SHIFT]++;const x=q.estimateBlackPoint(g);if(u<3)for(let w=0;w<u;w++)(d[w]&255)<x&&a.set(w);else{let w=d[0]&255,b=d[1]&255;for(let A=1;A<u-1;A++){const j=d[A+1]&255;(b*4-w-j)/2<x&&a.set(A),w=b,b=j}}return a}getBlackMatrix(){const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight(),u=new ne(a,l);this.initArrays(a);const d=this.buckets;for(let w=1;w<5;w++){const b=Math.floor(l*w/5),A=s.getRow(b,this.luminances),j=Math.floor(a*4/5);for(let P=Math.floor(a/5);P<j;P++){const L=A[P]&255;d[L>>q.LUMINANCE_SHIFT]++}}const g=q.estimateBlackPoint(d),x=s.getMatrix();for(let w=0;w<l;w++){const b=w*a;for(let A=0;A<a;A++)(x[b+A]&255)<g&&u.set(A,w)}return u}createBinarizer(s){return new q(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const a=this.buckets;for(let l=0;l<q.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(s){const a=s.length;let l=0,u=0,d=0;for(let A=0;A<a;A++)s[A]>d&&(u=A,d=s[A]),s[A]>l&&(l=s[A]);let g=0,x=0;for(let A=0;A<a;A++){const j=A-u,P=s[A]*j*j;P>x&&(g=A,x=P)}if(u>g){const A=u;u=g,g=A}if(g-u<=a/16)throw new $;let w=g-1,b=-1;for(let A=g-1;A>u;A--){const j=A-u,P=j*j*(g-A)*(l-s[A]);P>b&&(w=A,b=P)}return w<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class Q extends q{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),a=s.getWidth(),l=s.getHeight();if(a>=Q.MINIMUM_DIMENSION&&l>=Q.MINIMUM_DIMENSION){const u=s.getMatrix();let d=a>>Q.BLOCK_SIZE_POWER;a&Q.BLOCK_SIZE_MASK&&d++;let g=l>>Q.BLOCK_SIZE_POWER;l&Q.BLOCK_SIZE_MASK&&g++;const x=Q.calculateBlackPoints(u,d,g,a,l),w=new ne(a,l);Q.calculateThresholdForBlock(u,d,g,a,l,x,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new Q(s)}static calculateThresholdForBlock(s,a,l,u,d,g,x){const w=d-Q.BLOCK_SIZE,b=u-Q.BLOCK_SIZE;for(let A=0;A<l;A++){let j=A<<Q.BLOCK_SIZE_POWER;j>w&&(j=w);const P=Q.cap(A,2,l-3);for(let L=0;L<a;L++){let U=L<<Q.BLOCK_SIZE_POWER;U>b&&(U=b);const W=Q.cap(L,2,a-3);let X=0;for(let ae=-2;ae<=2;ae++){const le=g[P+ae];X+=le[W-2]+le[W-1]+le[W]+le[W+1]+le[W+2]}const Z=X/25;Q.thresholdBlock(s,U,j,Z,u,x)}}}static cap(s,a,l){return s<a?a:s>l?l:s}static thresholdBlock(s,a,l,u,d,g){for(let x=0,w=l*d+a;x<Q.BLOCK_SIZE;x++,w+=d)for(let b=0;b<Q.BLOCK_SIZE;b++)(s[w+b]&255)<=u&&g.set(a+b,l+x)}static calculateBlackPoints(s,a,l,u,d){const g=d-Q.BLOCK_SIZE,x=u-Q.BLOCK_SIZE,w=new Array(l);for(let b=0;b<l;b++){w[b]=new Int32Array(a);let A=b<<Q.BLOCK_SIZE_POWER;A>g&&(A=g);for(let j=0;j<a;j++){let P=j<<Q.BLOCK_SIZE_POWER;P>x&&(P=x);let L=0,U=255,W=0;for(let Z=0,ae=A*u+P;Z<Q.BLOCK_SIZE;Z++,ae+=u){for(let le=0;le<Q.BLOCK_SIZE;le++){const ie=s[ae+le]&255;L+=ie,ie<U&&(U=ie),ie>W&&(W=ie)}if(W-U>Q.MIN_DYNAMIC_RANGE)for(Z++,ae+=u;Z<Q.BLOCK_SIZE;Z++,ae+=u)for(let le=0;le<Q.BLOCK_SIZE;le++)L+=s[ae+le]&255}let X=L>>Q.BLOCK_SIZE_POWER*2;if(W-U<=Q.MIN_DYNAMIC_RANGE&&(X=U/2,b>0&&j>0)){const Z=(w[b-1][j]+2*w[b][j-1]+w[b-1][j-1])/4;U<Z&&(X=Z)}w[b][j]=X}}return w}}Q.BLOCK_SIZE_POWER=3,Q.BLOCK_SIZE=1<<Q.BLOCK_SIZE_POWER,Q.BLOCK_SIZE_MASK=Q.BLOCK_SIZE-1,Q.MINIMUM_DIMENSION=Q.BLOCK_SIZE*5,Q.MIN_DYNAMIC_RANGE=24;class J{constructor(s,a){this.width=s,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,a,l,u){throw new se("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new se("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new se("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let a=new de;for(let l=0;l<this.height;l++){const u=this.getRow(l,s);for(let d=0;d<this.width;d++){const g=u[d]&255;let x;g<64?x="#":g<128?x="+":g<192?x=".":x=" ",a.append(x)}a.append(`
`)}return a.toString()}}class ee extends J{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,a){const l=this.delegate.getRow(s,a),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,a,l,u){return new ee(this.delegate.crop(s,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ee(this.delegate.rotateCounterClockwise45())}}class ce extends J{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=ce.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const a=s.getContext("2d").getImageData(0,0,s.width,s.height);return ce.toGrayscaleBuffer(a.data,s.width,s.height)}static toGrayscaleBuffer(s,a,l){const u=new Uint8ClampedArray(a*l);for(let d=0,g=0,x=s.length;d<x;d+=4,g++){let w;if(s[d+3]===0)w=255;else{const A=s[d],j=s[d+1],P=s[d+2];w=306*A+601*j+117*P+512>>10}u[g]=w}return u}getRow(s,a){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const l=this.getWidth(),u=s*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,a,l,u){return super.crop(s,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=s*ce.DEGREE_TO_RADIANS,d=this.canvas.width,g=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*g),w=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*g);return a.width=x,a.height=w,l.translate(x/2,w/2),l.rotate(u),l.drawImage(this.canvas,d/-2,g/-2),this.buffer=ce.makeBufferFromCanvasImageData(a),this}invert(){return new ee(this)}}ce.DEGREE_TO_RADIANS=Math.PI/180;class Me{constructor(s,a,l){this.deviceId=s,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ve=(globalThis||La||self||window||void 0)&&(globalThis||La||self||window||void 0).__awaiter||function(R,s,a,l){function u(d){return d instanceof a?d:new a(function(g){g(d)})}return new(a||(a=Promise))(function(d,g){function x(A){try{b(l.next(A))}catch(j){g(j)}}function w(A){try{b(l.throw(A))}catch(j){g(j)}}function b(A){A.done?d(A.value):u(A.value).then(x,w)}b((l=l.apply(R,s||[])).next())})};class Ke{constructor(s,a=500,l){this.reader=s,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return ve(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of s){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,g=l.label||`Video device ${a.length+1}`,x=l.groupId,w={deviceId:d,label:g,kind:u,groupId:x};a.push(w)}return a})}getVideoInputDevices(){return ve(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new Me(a.deviceId,a.label))})}findDeviceById(s){return ve(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,a){return ve(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,a)})}decodeOnceFromVideoDevice(s,a){return ve(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(s,a){return ve(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(s,a){return ve(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,a,l){return ve(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,a,l)})}decodeFromVideoDevice(s,a,l){return ve(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,a,l)})}decodeFromConstraints(s,a,l){return ve(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(s,a,l){return ve(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,a){return ve(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((a,l)=>this.playVideoOnLoad(s,()=>a()))}playVideoOnLoad(s,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",a),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return ve(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,a){const l=document.getElementById(s);if(!l)throw new y(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new y(`element with id '${s}' must be an ${a} element`);return l}decodeFromImage(s,a){if(!s&&!a)throw new y("either imageElement with a src set or an url must be provided");return a&&!s?this.decodeFromImageUrl(a):this.decodeFromImageElement(s)}decodeFromVideo(s,a){if(!s&&!a)throw new y("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,a,l){if(s===void 0&&a===void 0)throw new y("Either an element with a src set or an URL must be provided");return a&&!s?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new y("An image element must be provided.");this.reset();const a=this.prepareImageElement(s);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(s){const a=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(s,a){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(s){if(!s)throw new y("A video element must be provided.");this.reset();const a=this.prepareVideoElement(s);return this.videoElement=a,a}decodeFromImageUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=s,l}decodeFromVideoUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=s,l}decodeFromVideoUrlContinuously(s,a){if(!s)throw new y("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(a,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return ve(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,a){return ve(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,a)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let a;return typeof s>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(a=s),a}prepareVideoElement(s){let a;return!s&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof s=="string"&&(a=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(a=s),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(s,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,g)=>{if(this._stopAsyncDecode){g(new $("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(s);d(x)}catch(x){const w=a&&x instanceof $,A=(x instanceof E||x instanceof B)&&l;if(w||A)return setTimeout(u,this._timeBetweenDecodingAttempts,d,g);g(x)}};return new Promise((d,g)=>u(d,g))}decodeContinuously(s,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(s);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const d=u instanceof E||u instanceof B,g=u instanceof $;(d||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const a=this.createBinaryBitmap(s);return this.decodeBitmap(a)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,a,l){a||(a={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(s,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const a=this.getCaptureCanvas(s),l=new ce(a),u=new Q(l);return new C(u)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const a=this.createCaptureCanvas(s);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,a){try{s.srcObject=a}catch{s.src=URL.createObjectURL(a)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Be{constructor(s,a,l=a==null?0:8*a.length,u,d,g=T.currentTimeMillis()){this.text=s,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=g,this.text=s,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,g==null?this.timestamp=T.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,a)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const a=this.resultPoints;if(a===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(a.length+s.length);T.arraycopy(a,0,l,0,a.length),T.arraycopy(s,0,l,a.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ft;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ft||(ft={}));var pe=ft,Ct;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ct||(Ct={}));var Xe=Ct;class Hn{constructor(s,a,l,u,d=-1,g=-1){this.rawBytes=s,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=g,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nr{exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}static addOrSubtract(s,a){return s^a}}class Vt{constructor(s,a){if(a.length===0)throw new v;this.field=s;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),T.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(s===1){l=0;for(let g=0,x=a.length;g!==x;g++){const w=a[g];l=nr.addOrSubtract(l,w)}return l}l=a[0];const u=a.length,d=this.field;for(let g=1;g<u;g++)l=nr.addOrSubtract(d.multiply(s,l),a[g]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){const g=a;a=l,l=g}let u=new Int32Array(l.length);const d=l.length-a.length;T.arraycopy(l,0,u,0,d);for(let g=d;g<l.length;g++)u[g]=nr.addOrSubtract(a[g-d],l[g]);return new Vt(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,g=new Int32Array(l+d-1),x=this.field;for(let w=0;w<l;w++){const b=a[w];for(let A=0;A<d;A++)g[w+A]=nr.addOrSubtract(g[w+A],x.multiply(b,u[A]))}return new Vt(x,g)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),d=this.coefficients;for(let g=0;g<a;g++)u[g]=l.multiply(d[g],s);return new Vt(l,u)}multiplyByMonomial(s,a){if(s<0)throw new v;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+s),g=this.field;for(let x=0;x<u;x++)d[x]=g.multiply(l[x],a);return new Vt(g,d)}divide(s){if(!this.field.equals(s.field))throw new v("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new v("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const d=s.getCoefficient(s.getDegree()),g=a.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){const x=u.getDegree()-s.getDegree(),w=a.multiply(u.getCoefficient(u.getDegree()),g),b=s.multiplyByMonomial(x,w),A=a.buildMonomial(x,w);l=l.addOrSubtract(A),u=u.addOrSubtract(b)}return[l,u]}toString(){let s="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}a!==0&&(a===1?s+="x":(s+="x^",s+=a))}}return s}}class rr extends m{}rr.kind="ArithmeticException";class ze extends nr{constructor(s,a,l){super(),this.primitive=s,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let d=1;for(let x=0;x<a;x++)u[x]=d,d*=2,d>=a&&(d^=s,d&=a-1);this.expTable=u;const g=new Int32Array(a);for(let x=0;x<a-1;x++)g[u[x]]=x;this.logTable=g,this.zero=new Vt(this,Int32Array.from([0])),this.one=new Vt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new v;if(a===0)return this.zero;const l=new Int32Array(s+1);return l[0]=a,new Vt(this,l)}inverse(s){if(s===0)throw new rr;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+N.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ze.AZTEC_DATA_12=new ze(4201,4096,1),ze.AZTEC_DATA_10=new ze(1033,1024,1),ze.AZTEC_DATA_6=new ze(67,64,1),ze.AZTEC_PARAM=new ze(19,16,1),ze.QR_CODE_FIELD_256=new ze(285,256,0),ze.DATA_MATRIX_FIELD_256=new ze(301,256,1),ze.AZTEC_DATA_8=ze.DATA_MATRIX_FIELD_256,ze.MAXICODE_FIELD_64=ze.AZTEC_DATA_6;class Mn extends m{}Mn.kind="ReedSolomonException";class an extends m{}an.kind="IllegalStateException";class sr{constructor(s){this.field=s}decode(s,a){const l=this.field,u=new Vt(l,s),d=new Int32Array(a);let g=!0;for(let L=0;L<a;L++){const U=u.evaluateAt(l.exp(L+l.getGeneratorBase()));d[d.length-1-L]=U,U!==0&&(g=!1)}if(g)return;const x=new Vt(l,d),w=this.runEuclideanAlgorithm(l.buildMonomial(a,1),x,a),b=w[0],A=w[1],j=this.findErrorLocations(b),P=this.findErrorMagnitudes(A,j);for(let L=0;L<j.length;L++){const U=s.length-1-l.log(j[L]);if(U<0)throw new Mn("Bad error location");s[U]=ze.addOrSubtract(s[U],P[L])}}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){const L=s;s=a,a=L}const u=this.field;let d=s,g=a,x=u.getZero(),w=u.getOne();for(;g.getDegree()>=(l/2|0);){let L=d,U=x;if(d=g,x=w,d.isZero())throw new Mn("r_{i-1} was zero");g=L;let W=u.getZero();const X=d.getCoefficient(d.getDegree()),Z=u.inverse(X);for(;g.getDegree()>=d.getDegree()&&!g.isZero();){const ae=g.getDegree()-d.getDegree(),le=u.multiply(g.getCoefficient(g.getDegree()),Z);W=W.addOrSubtract(u.buildMonomial(ae,le)),g=g.addOrSubtract(d.multiplyByMonomial(ae,le))}if(w=W.multiply(x).addOrSubtract(U),g.getDegree()>=d.getDegree())throw new an("Division algorithm failed to reduce polynomial?")}const b=w.getCoefficient(0);if(b===0)throw new Mn("sigmaTilde(0) was zero");const A=u.inverse(b),j=w.multiplyScalar(A),P=g.multiplyScalar(A);return[j,P]}findErrorLocations(s){const a=s.getDegree();if(a===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const d=this.field;for(let g=1;g<d.getSize()&&u<a;g++)s.evaluateAt(g)===0&&(l[u]=d.inverse(g),u++);if(u!==a)throw new Mn("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,a){const l=a.length,u=new Int32Array(l),d=this.field;for(let g=0;g<l;g++){const x=d.inverse(a[g]);let w=1;for(let b=0;b<l;b++)if(g!==b){const A=d.multiply(a[b],x),j=A&1?A&-2:A|1;w=d.multiply(w,j)}u[g]=d.multiply(s.evaluateAt(x),d.inverse(w)),d.getGeneratorBase()!==0&&(u[g]=d.multiply(u[g],x))}return u}}var Ut;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(Ut||(Ut={}));class Ue{decode(s){this.ddata=s;let a=s.getBits(),l=this.extractBits(a),u=this.correctBits(l),d=Ue.convertBoolArrayToByteArray(u),g=Ue.getEncodedData(u),x=new Hn(d,g,null,null);return x.setNumBits(u.length),x}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let a=s.length,l=Ut.UPPER,u=Ut.UPPER,d="",g=0;for(;g<a;)if(u===Ut.BINARY){if(a-g<5)break;let x=Ue.readCode(s,g,5);if(g+=5,x===0){if(a-g<11)break;x=Ue.readCode(s,g,11)+31,g+=11}for(let w=0;w<x;w++){if(a-g<8){g=a;break}const b=Ue.readCode(s,g,8);d+=te.castAsNonUtf8Char(b),g+=8}u=l}else{let x=u===Ut.DIGIT?4:5;if(a-g<x)break;let w=Ue.readCode(s,g,x);g+=x;let b=Ue.getCharacter(u,w);b.startsWith("CTRL_")?(l=u,u=Ue.getTable(b.charAt(5)),b.charAt(6)==="L"&&(l=u)):(d+=b,u=l)}return d}static getTable(s){switch(s){case"L":return Ut.LOWER;case"P":return Ut.PUNCT;case"M":return Ut.MIXED;case"D":return Ut.DIGIT;case"B":return Ut.BINARY;case"U":default:return Ut.UPPER}}static getCharacter(s,a){switch(s){case Ut.UPPER:return Ue.UPPER_TABLE[a];case Ut.LOWER:return Ue.LOWER_TABLE[a];case Ut.MIXED:return Ue.MIXED_TABLE[a];case Ut.PUNCT:return Ue.PUNCT_TABLE[a];case Ut.DIGIT:return Ue.DIGIT_TABLE[a];default:throw new an("Bad table")}}correctBits(s){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=ze.AZTEC_DATA_10):(l=12,a=ze.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=s.length/l;if(d<u)throw new B;let g=s.length%l,x=new Int32Array(d);for(let P=0;P<d;P++,g+=l)x[P]=Ue.readCode(s,g,l);try{new sr(a).decode(x,d-u)}catch(P){throw new B(P)}let w=(1<<l)-1,b=0;for(let P=0;P<u;P++){let L=x[P];if(L===0||L===w)throw new B;(L===1||L===w-1)&&b++}let A=new Array(u*l-b),j=0;for(let P=0;P<u;P++){let L=x[P];if(L===1||L===w-1)A.fill(L>1,j,j+l-1),j+=l-1;else for(let U=l-1;U>=0;--U)A[j++]=(L&1<<U)!==0}return A}extractBits(s){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,d=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,a));if(a)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*N.truncDivision(N.truncDivision(u,2)-1,15),w=u/2,b=N.truncDivision(x,2);for(let A=0;A<w;A++){let j=A+N.truncDivision(A,15);d[w-A-1]=b-j-1,d[w+A]=b+j+1}}for(let x=0,w=0;x<l;x++){let b=(l-x)*4+(a?9:12),A=x*2,j=u-1-A;for(let P=0;P<b;P++){let L=P*2;for(let U=0;U<2;U++)g[w+L+U]=s.get(d[A+U],d[A+P]),g[w+2*b+L+U]=s.get(d[A+P],d[j-U]),g[w+4*b+L+U]=s.get(d[j-U],d[j-P]),g[w+6*b+L+U]=s.get(d[j-P],d[A+U])}w+=b*8}return g}static readCode(s,a,l){let u=0;for(let d=a;d<a+l;d++)u<<=1,s[d]&&(u|=1);return u}static readByte(s,a){let l=s.length-a;return l>=8?Ue.readCode(s,a,8):Ue.readCode(s,a,l)<<8-l}static convertBoolArrayToByteArray(s){let a=new Uint8Array((s.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Ue.readByte(s,8*l);return a}totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}Ue.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ue.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ue.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ue.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class De{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,a,l,u){const d=s-l,g=a-u;return Math.sqrt(d*d+g*g)}static sum(s){let a=0;for(let l=0,u=s.length;l!==u;l++){const d=s[l];a+=d}return a}}class Ot{static floatToIntBits(s){return s}}Ot.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(s,a){this.x=s,this.y=a}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof ge){const a=s;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Ot.floatToIntBits(this.x)+Ot.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const a=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]);let d,g,x;if(l>=a&&l>=u?(g=s[0],d=s[1],x=s[2]):u>=l&&u>=a?(g=s[1],d=s[0],x=s[2]):(g=s[2],d=s[0],x=s[1]),this.crossProductZ(d,g,x)<0){const w=d;d=x,x=w}s[0]=d,s[1]=g,s[2]=x}static distance(s,a){return De.distance(s.x,s.y,a.x,a.y)}static crossProductZ(s,a,l){const u=a.x,d=a.y;return(l.x-u)*(s.y-d)-(l.y-d)*(s.x-u)}}class Dn{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Kr extends Dn{constructor(s,a,l,u,d){super(s,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Wn{constructor(s,a,l,u){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),a==null&&(a=Wn.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),u==null&&(u=s.getHeight()/2|0);const d=a/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new $}detect(){let s=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,d=!1,g=!0,x=!1,w=!1,b=!1,A=!1,j=!1;const P=this.width,L=this.height;for(;g;){g=!1;let U=!0;for(;(U||!w)&&a<P;)U=this.containsBlackPoint(l,u,a,!1),U?(a++,g=!0,w=!0):w||a++;if(a>=P){d=!0;break}let W=!0;for(;(W||!b)&&u<L;)W=this.containsBlackPoint(s,a,u,!0),W?(u++,g=!0,b=!0):b||u++;if(u>=L){d=!0;break}let X=!0;for(;(X||!A)&&s>=0;)X=this.containsBlackPoint(l,u,s,!1),X?(s--,g=!0,A=!0):A||s--;if(s<0){d=!0;break}let Z=!0;for(;(Z||!j)&&l>=0;)Z=this.containsBlackPoint(s,a,l,!0),Z?(l--,g=!0,j=!0):j||l--;if(l<0){d=!0;break}g&&(x=!0)}if(!d&&x){const U=a-s;let W=null;for(let le=1;W===null&&le<U;le++)W=this.getBlackPointOnSegment(s,u-le,s+le,u);if(W==null)throw new $;let X=null;for(let le=1;X===null&&le<U;le++)X=this.getBlackPointOnSegment(s,l+le,s+le,l);if(X==null)throw new $;let Z=null;for(let le=1;Z===null&&le<U;le++)Z=this.getBlackPointOnSegment(a,l+le,a-le,l);if(Z==null)throw new $;let ae=null;for(let le=1;ae===null&&le<U;le++)ae=this.getBlackPointOnSegment(a,u-le,a-le,u);if(ae==null)throw new $;return this.centerEdges(ae,W,Z,X)}else throw new $}getBlackPointOnSegment(s,a,l,u){const d=De.round(De.distance(s,a,l,u)),g=(l-s)/d,x=(u-a)/d,w=this.image;for(let b=0;b<d;b++){const A=De.round(s+b*g),j=De.round(a+b*x);if(w.get(A,j))return new ge(A,j)}return null}centerEdges(s,a,l,u){const d=s.getX(),g=s.getY(),x=a.getX(),w=a.getY(),b=l.getX(),A=l.getY(),j=u.getX(),P=u.getY(),L=Wn.CORR;return d<this.width/2?[new ge(j-L,P+L),new ge(x+L,w+L),new ge(b-L,A-L),new ge(d+L,g-L)]:[new ge(j+L,P+L),new ge(x+L,w-L),new ge(b-L,A+L),new ge(d-L,g-L)]}containsBlackPoint(s,a,l,u){const d=this.image;if(u){for(let g=s;g<=a;g++)if(d.get(g,l))return!0}else for(let g=s;g<=a;g++)if(d.get(l,g))return!0;return!1}}Wn.INIT_SIZE=10,Wn.CORR=1;class io{static checkAndNudgePoints(s,a){const l=s.getWidth(),u=s.getHeight();let d=!0;for(let g=0;g<a.length&&d;g+=2){const x=Math.floor(a[g]),w=Math.floor(a[g+1]);if(x<-1||x>l||w<-1||w>u)throw new $;d=!1,x===-1?(a[g]=0,d=!0):x===l&&(a[g]=l-1,d=!0),w===-1?(a[g+1]=0,d=!0):w===u&&(a[g+1]=u-1,d=!0)}d=!0;for(let g=a.length-2;g>=0&&d;g-=2){const x=Math.floor(a[g]),w=Math.floor(a[g+1]);if(x<-1||x>l||w<-1||w>u)throw new $;d=!1,x===-1?(a[g]=0,d=!0):x===l&&(a[g]=l-1,d=!0),w===-1?(a[g+1]=0,d=!0):w===u&&(a[g+1]=u-1,d=!0)}}}class Zt{constructor(s,a,l,u,d,g,x,w,b){this.a11=s,this.a21=a,this.a31=l,this.a12=u,this.a22=d,this.a32=g,this.a13=x,this.a23=w,this.a33=b}static quadrilateralToQuadrilateral(s,a,l,u,d,g,x,w,b,A,j,P,L,U,W,X){const Z=Zt.quadrilateralToSquare(s,a,l,u,d,g,x,w);return Zt.squareToQuadrilateral(b,A,j,P,L,U,W,X).times(Z)}transformPoints(s){const a=s.length,l=this.a11,u=this.a12,d=this.a13,g=this.a21,x=this.a22,w=this.a23,b=this.a31,A=this.a32,j=this.a33;for(let P=0;P<a;P+=2){const L=s[P],U=s[P+1],W=d*L+w*U+j;s[P]=(l*L+g*U+b)/W,s[P+1]=(u*L+x*U+A)/W}}transformPointsWithValues(s,a){const l=this.a11,u=this.a12,d=this.a13,g=this.a21,x=this.a22,w=this.a23,b=this.a31,A=this.a32,j=this.a33,P=s.length;for(let L=0;L<P;L++){const U=s[L],W=a[L],X=d*U+w*W+j;s[L]=(l*U+g*W+b)/X,a[L]=(u*U+x*W+A)/X}}static squareToQuadrilateral(s,a,l,u,d,g,x,w){const b=s-l+d-x,A=a-u+g-w;if(b===0&&A===0)return new Zt(l-s,d-l,s,u-a,g-u,a,0,0,1);{const j=l-d,P=x-d,L=u-g,U=w-g,W=j*U-P*L,X=(b*U-P*A)/W,Z=(j*A-b*L)/W;return new Zt(l-s+X*l,x-s+Z*x,s,u-a+X*u,w-a+Z*w,a,X,Z,1)}}static quadrilateralToSquare(s,a,l,u,d,g,x,w){return Zt.squareToQuadrilateral(s,a,l,u,d,g,x,w).buildAdjoint()}buildAdjoint(){return new Zt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Zt(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class hc extends io{sampleGrid(s,a,l,u,d,g,x,w,b,A,j,P,L,U,W,X,Z,ae,le){const ie=Zt.quadrilateralToQuadrilateral(u,d,g,x,w,b,A,j,P,L,U,W,X,Z,ae,le);return this.sampleGridWithTransform(s,a,l,ie)}sampleGridWithTransform(s,a,l,u){if(a<=0||l<=0)throw new $;const d=new ne(a,l),g=new Float32Array(2*a);for(let x=0;x<l;x++){const w=g.length,b=x+.5;for(let A=0;A<w;A+=2)g[A]=A/2+.5,g[A+1]=b;u.transformPoints(g),io.checkAndNudgePoints(s,g);try{for(let A=0;A<w;A+=2)s.get(Math.floor(g[A]),Math.floor(g[A+1]))&&d.set(A/2,x)}catch{throw new $}}return d}}class $n{static setGridSampler(s){$n.gridSampler=s}static getInstance(){return $n.gridSampler}}$n.gridSampler=new hc;class Qt{constructor(s,a){this.x=s,this.y=a}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class fc{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(s){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Kr(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new $;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],a),this.sampleLine(s[1],s[2],a),this.sampleLine(s[2],s[3],a),this.sampleLine(s[3],s[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let g=0;g<4;g++){let x=l[(this.shift+g)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,a){let l=0;s.forEach((u,d,g)=>{let x=(u>>a-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(N.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new $}getCorrectedParameterData(s,a){let l,u;a?(l=7,u=2):(l=10,u=4);let d=l-u,g=new Int32Array(l);for(let w=l-1;w>=0;--w)g[w]=s&15,s>>=4;try{new sr(ze.AZTEC_PARAM).decode(g,d)}catch{throw new $}let x=0;for(let w=0;w<u;w++)x=(x<<4)+g[w];return x}getBullsEyeCorners(s){let a=s,l=s,u=s,d=s,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let j=this.getFirstDifferent(a,g,1,-1),P=this.getFirstDifferent(l,g,1,1),L=this.getFirstDifferent(u,g,-1,1),U=this.getFirstDifferent(d,g,-1,-1);if(this.nbCenterLayers>2){let W=this.distancePoint(U,j)*this.nbCenterLayers/(this.distancePoint(d,a)*(this.nbCenterLayers+2));if(W<.75||W>1.25||!this.isWhiteOrBlackRectangle(j,P,L,U))break}a=j,l=P,u=L,d=U,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new $;this.compact=this.nbCenterLayers===5;let x=new ge(a.getX()+.5,a.getY()-.5),w=new ge(l.getX()+.5,l.getY()+.5),b=new ge(u.getX()-.5,u.getY()+.5),A=new ge(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,w,b,A],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,a,l,u;try{let x=new Wn(this.image).detect();s=x[0],a=x[1],l=x[2],u=x[3]}catch{let w=this.image.getWidth()/2,b=this.image.getHeight()/2;s=this.getFirstDifferent(new Qt(w+7,b-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Qt(w+7,b+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qt(w-7,b+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Qt(w-7,b-7),!1,-1,-1).toResultPoint()}let d=De.round((s.getX()+u.getX()+a.getX()+l.getX())/4),g=De.round((s.getY()+u.getY()+a.getY()+l.getY())/4);try{let x=new Wn(this.image,15,d,g).detect();s=x[0],a=x[1],l=x[2],u=x[3]}catch{s=this.getFirstDifferent(new Qt(d+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new Qt(d+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new Qt(d-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new Qt(d-7,g-7),!1,-1,-1).toResultPoint()}return d=De.round((s.getX()+u.getX()+a.getX()+l.getX())/4),g=De.round((s.getY()+u.getY()+a.getY()+l.getY())/4),new Qt(d,g)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,a,l,u,d){let g=$n.getInstance(),x=this.getDimension(),w=x/2-this.nbCenterLayers,b=x/2+this.nbCenterLayers;return g.sampleGrid(s,x,x,w,w,b,w,b,b,w,b,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,a,l){let u=0,d=this.distanceResultPoint(s,a),g=d/l,x=s.getX(),w=s.getY(),b=g*(a.getX()-s.getX())/d,A=g*(a.getY()-s.getY())/d;for(let j=0;j<l;j++)this.image.get(De.round(x+j*b),De.round(w+j*A))&&(u|=1<<l-j-1);return u}isWhiteOrBlackRectangle(s,a,l,u){let d=3;s=new Qt(s.getX()-d,s.getY()+d),a=new Qt(a.getX()-d,a.getY()-d),l=new Qt(l.getX()+d,l.getY()-d),u=new Qt(u.getX()+d,u.getY()+d);let g=this.getColor(u,s);if(g===0)return!1;let x=this.getColor(s,a);return x!==g||(x=this.getColor(a,l),x!==g)?!1:(x=this.getColor(l,u),x===g)}getColor(s,a){let l=this.distancePoint(s,a),u=(a.getX()-s.getX())/l,d=(a.getY()-s.getY())/l,g=0,x=s.getX(),w=s.getY(),b=this.image.get(s.getX(),s.getY()),A=Math.ceil(l);for(let P=0;P<A;P++)x+=u,w+=d,this.image.get(De.round(x),De.round(w))!==b&&g++;let j=g/l;return j>.1&&j<.9?0:j<=.1===b?1:-1}getFirstDifferent(s,a,l,u){let d=s.getX()+l,g=s.getY()+u;for(;this.isValid(d,g)&&this.image.get(d,g)===a;)d+=l,g+=u;for(d-=l,g-=u;this.isValid(d,g)&&this.image.get(d,g)===a;)d+=l;for(d-=l;this.isValid(d,g)&&this.image.get(d,g)===a;)g+=u;return g-=u,new Qt(d,g)}expandSquare(s,a,l){let u=l/(2*a),d=s[0].getX()-s[2].getX(),g=s[0].getY()-s[2].getY(),x=(s[0].getX()+s[2].getX())/2,w=(s[0].getY()+s[2].getY())/2,b=new ge(x+u*d,w+u*g),A=new ge(x-u*d,w-u*g);d=s[1].getX()-s[3].getX(),g=s[1].getY()-s[3].getY(),x=(s[1].getX()+s[3].getX())/2,w=(s[1].getY()+s[3].getY())/2;let j=new ge(x+u*d,w+u*g),P=new ge(x-u*d,w-u*g);return[b,j,A,P]}isValid(s,a){return s>=0&&s<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(s){let a=De.round(s.getX()),l=De.round(s.getY());return this.isValid(a,l)}distancePoint(s,a){return De.distance(s.getX(),s.getY(),a.getX(),a.getY())}distanceResultPoint(s,a){return De.distance(s.getX(),s.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(N.truncDivision(this.nbLayers-4,8)+1)+15}}class vi{decode(s,a=null){let l=null,u=new fc(s.getBlackMatrix()),d=null,g=null;try{let A=u.detectMirror(!1);d=A.getPoints(),this.reportFoundResultPoints(a,d),g=new Ue().decode(A)}catch(A){l=A}if(g==null)try{let A=u.detectMirror(!0);d=A.getPoints(),this.reportFoundResultPoints(a,d),g=new Ue().decode(A)}catch(A){throw l??A}let x=new Be(g.getText(),g.getRawBytes(),g.getNumBits(),d,pe.AZTEC,T.currentTimeMillis()),w=g.getByteSegments();w!=null&&x.putMetadata(Xe.BYTE_SEGMENTS,w);let b=g.getECLevel();return b!=null&&x.putMetadata(Xe.ERROR_CORRECTION_LEVEL,b),x}reportFoundResultPoints(s,a){if(s!=null){let l=s.get(V.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,d,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class pc extends Ke{constructor(s=500){super(new vi,s)}}class Rt{decode(s,a){try{return this.doDecode(s,a)}catch{if(a&&a.get(V.TRY_HARDER)===!0&&s.isRotateSupported()){const d=s.rotateCounterClockwise(),g=this.doDecode(d,a),x=g.getResultMetadata();let w=270;x!==null&&x.get(Xe.ORIENTATION)===!0&&(w=w+x.get(Xe.ORIENTATION)%360),g.putMetadata(Xe.ORIENTATION,w);const b=g.getResultPoints();if(b!==null){const A=d.getHeight();for(let j=0;j<b.length;j++)b[j]=new ge(A-b[j].getY()-1,b[j].getX())}return g}else throw new $}}reset(){}doDecode(s,a){const l=s.getWidth(),u=s.getHeight();let d=new M(l);const g=a&&a.get(V.TRY_HARDER)===!0,x=Math.max(1,u>>(g?8:5));let w;g?w=u:w=15;const b=Math.trunc(u/2);for(let A=0;A<w;A++){const j=Math.trunc((A+1)/2),P=(A&1)===0,L=b+x*(P?j:-j);if(L<0||L>=u)break;try{d=s.getBlackRow(L,d)}catch{continue}for(let U=0;U<2;U++){if(U===1&&(d.reverse(),a&&a.get(V.NEED_RESULT_POINT_CALLBACK)===!0)){const W=new Map;a.forEach((X,Z)=>W.set(Z,X)),W.delete(V.NEED_RESULT_POINT_CALLBACK),a=W}try{const W=this.decodeRow(L,d,a);if(U===1){W.putMetadata(Xe.ORIENTATION,180);const X=W.getResultPoints();X!==null&&(X[0]=new ge(l-X[0].getX()-1,X[0].getY()),X[1]=new ge(l-X[1].getX()-1,X[1].getY()))}return W}catch{}}}throw new $}static recordPattern(s,a,l){const u=l.length;for(let b=0;b<u;b++)l[b]=0;const d=s.getSize();if(a>=d)throw new $;let g=!s.get(a),x=0,w=a;for(;w<d;){if(s.get(w)!==g)l[x]++;else{if(++x===u)break;l[x]=1,g=!g}w++}if(!(x===u||x===u-1&&w===d))throw new $}static recordPatternInReverse(s,a,l){let u=l.length,d=s.get(a);for(;a>0&&u>=0;)s.get(--a)!==d&&(u--,d=!d);if(u>=0)throw new $;Rt.recordPattern(s,a+1,l)}static patternMatchVariance(s,a,l){const u=s.length;let d=0,g=0;for(let b=0;b<u;b++)d+=s[b],g+=a[b];if(d<g)return Number.POSITIVE_INFINITY;const x=d/g;l*=x;let w=0;for(let b=0;b<u;b++){const A=s[b],j=a[b]*x,P=A>j?A-j:j-A;if(P>l)return Number.POSITIVE_INFINITY;w+=P}return w/d}}class ue extends Rt{static findStartPattern(s){const a=s.getSize(),l=s.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),g=l,x=!1;const w=6;for(let b=l;b<a;b++)if(s.get(b)!==x)d[u]++;else{if(u===w-1){let A=ue.MAX_AVG_VARIANCE,j=-1;for(let P=ue.CODE_START_A;P<=ue.CODE_START_C;P++){const L=Rt.patternMatchVariance(d,ue.CODE_PATTERNS[P],ue.MAX_INDIVIDUAL_VARIANCE);L<A&&(A=L,j=P)}if(j>=0&&s.isRange(Math.max(0,g-(b-g)/2),g,!1))return Int32Array.from([g,b,j]);g+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new $}static decodeCode(s,a,l){Rt.recordPattern(s,l,a);let u=ue.MAX_AVG_VARIANCE,d=-1;for(let g=0;g<ue.CODE_PATTERNS.length;g++){const x=ue.CODE_PATTERNS[g],w=this.patternMatchVariance(a,x,ue.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,d=g)}if(d>=0)return d;throw new $}decodeRow(s,a,l){const u=l&&l.get(V.ASSUME_GS1)===!0,d=ue.findStartPattern(a),g=d[2];let x=0;const w=new Uint8Array(20);w[x++]=g;let b;switch(g){case ue.CODE_START_A:b=ue.CODE_CODE_A;break;case ue.CODE_START_B:b=ue.CODE_CODE_B;break;case ue.CODE_START_C:b=ue.CODE_CODE_C;break;default:throw new B}let A=!1,j=!1,P="",L=d[0],U=d[1];const W=Int32Array.from([0,0,0,0,0,0]);let X=0,Z=0,ae=g,le=0,ie=!0,$e=!1,Le=!1;for(;!A;){const mo=j;switch(j=!1,X=Z,Z=ue.decodeCode(a,W,U),w[x++]=Z,Z!==ue.CODE_STOP&&(ie=!0),Z!==ue.CODE_STOP&&(le++,ae+=le*Z),L=U,U+=W.reduce((O3,R3)=>O3+R3,0),Z){case ue.CODE_START_A:case ue.CODE_START_B:case ue.CODE_START_C:throw new B}switch(b){case ue.CODE_CODE_A:if(Z<64)Le===$e?P+=String.fromCharCode(32+Z):P+=String.fromCharCode(32+Z+128),Le=!1;else if(Z<96)Le===$e?P+=String.fromCharCode(Z-64):P+=String.fromCharCode(Z+64),Le=!1;else switch(Z!==ue.CODE_STOP&&(ie=!1),Z){case ue.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case ue.CODE_FNC_2:case ue.CODE_FNC_3:break;case ue.CODE_FNC_4_A:!$e&&Le?($e=!0,Le=!1):$e&&Le?($e=!1,Le=!1):Le=!0;break;case ue.CODE_SHIFT:j=!0,b=ue.CODE_CODE_B;break;case ue.CODE_CODE_B:b=ue.CODE_CODE_B;break;case ue.CODE_CODE_C:b=ue.CODE_CODE_C;break;case ue.CODE_STOP:A=!0;break}break;case ue.CODE_CODE_B:if(Z<96)Le===$e?P+=String.fromCharCode(32+Z):P+=String.fromCharCode(32+Z+128),Le=!1;else switch(Z!==ue.CODE_STOP&&(ie=!1),Z){case ue.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case ue.CODE_FNC_2:case ue.CODE_FNC_3:break;case ue.CODE_FNC_4_B:!$e&&Le?($e=!0,Le=!1):$e&&Le?($e=!1,Le=!1):Le=!0;break;case ue.CODE_SHIFT:j=!0,b=ue.CODE_CODE_A;break;case ue.CODE_CODE_A:b=ue.CODE_CODE_A;break;case ue.CODE_CODE_C:b=ue.CODE_CODE_C;break;case ue.CODE_STOP:A=!0;break}break;case ue.CODE_CODE_C:if(Z<100)Z<10&&(P+="0"),P+=Z;else switch(Z!==ue.CODE_STOP&&(ie=!1),Z){case ue.CODE_FNC_1:u&&(P.length===0?P+="]C1":P+="");break;case ue.CODE_CODE_A:b=ue.CODE_CODE_A;break;case ue.CODE_CODE_B:b=ue.CODE_CODE_B;break;case ue.CODE_STOP:A=!0;break}break}mo&&(b=b===ue.CODE_CODE_A?ue.CODE_CODE_B:ue.CODE_CODE_A)}const Kn=U-L;if(U=a.getNextUnset(U),!a.isRange(U,Math.min(a.getSize(),U+(U-L)/2),!1))throw new $;if(ae-=le*X,ae%103!==X)throw new E;const jr=P.length;if(jr===0)throw new $;jr>0&&ie&&(b===ue.CODE_CODE_C?P=P.substring(0,jr-2):P=P.substring(0,jr-1));const qn=(d[1]+d[0])/2,ct=L+Kn/2,xn=w.length,ir=new Uint8Array(xn);for(let mo=0;mo<xn;mo++)ir[mo]=w[mo];const po=[new ge(qn,s),new ge(ct,s)];return new Be(P,ir,0,po,pe.CODE_128,new Date().getTime())}}ue.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ue.MAX_AVG_VARIANCE=.25,ue.MAX_INDIVIDUAL_VARIANCE=.7,ue.CODE_SHIFT=98,ue.CODE_CODE_C=99,ue.CODE_CODE_B=100,ue.CODE_CODE_A=101,ue.CODE_FNC_1=102,ue.CODE_FNC_2=97,ue.CODE_FNC_3=96,ue.CODE_FNC_4_A=101,ue.CODE_FNC_4_B=100,ue.CODE_START_A=103,ue.CODE_START_B=104,ue.CODE_START_C=105,ue.CODE_STOP=106;class Et extends Rt{constructor(s=!1,a=!1){super(),this.usingCheckDigit=s,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Et.findAsteriskPattern(a,u),g=a.getNextSet(d[1]),x=a.getSize(),w,b;do{Et.recordPattern(a,g,u);let W=Et.toNarrowWidePattern(u);if(W<0)throw new $;w=Et.patternToChar(W),this.decodeRowResult+=w,b=g;for(let X of u)g+=X;g=a.getNextSet(g)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let A=0;for(let W of u)A+=W;let j=g-b-A;if(g!==x&&j*2<A)throw new $;if(this.usingCheckDigit){let W=this.decodeRowResult.length-1,X=0;for(let Z=0;Z<W;Z++)X+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Z));if(this.decodeRowResult.charAt(W)!==Et.ALPHABET_STRING.charAt(X%43))throw new E;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new $;let P;this.extendedMode?P=Et.decodeExtended(this.decodeRowResult):P=this.decodeRowResult;let L=(d[1]+d[0])/2,U=b+A/2;return new Be(P,null,0,[new ge(L,s),new ge(U,s)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(s,a){let l=s.getSize(),u=s.getNextSet(0),d=0,g=u,x=!1,w=a.length;for(let b=u;b<l;b++)if(s.get(b)!==x)a[d]++;else{if(d===w-1){if(this.toNarrowWidePattern(a)===Et.ASTERISK_ENCODING&&s.isRange(Math.max(0,g-Math.floor((b-g)/2)),g,!1))return[g,b];g+=a[0]+a[1],a.copyWithin(0,2,2+d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,x=!x}throw new $}static toNarrowWidePattern(s){let a=s.length,l=0,u;do{let d=2147483647;for(let w of s)w<d&&w>l&&(d=w);l=d,u=0;let g=0,x=0;for(let w=0;w<a;w++){let b=s[w];b>l&&(x|=1<<a-1-w,u++,g+=b)}if(u===3){for(let w=0;w<a&&u>0;w++){let b=s[w];if(b>l&&(u--,b*2>=g))return-1}return x}}while(u>3);return-1}static patternToChar(s){for(let a=0;a<Et.CHARACTER_ENCODINGS.length;a++)if(Et.CHARACTER_ENCODINGS[a]===s)return Et.ALPHABET_STRING.charAt(a);if(s===Et.ASTERISK_ENCODING)return"*";throw new $}static decodeExtended(s){let a=s.length,l="";for(let u=0;u<a;u++){let d=s.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let g=s.charAt(u+1),x="\0";switch(d){case"+":if(g>="A"&&g<="Z")x=String.fromCharCode(g.charCodeAt(0)+32);else throw new B;break;case"$":if(g>="A"&&g<="Z")x=String.fromCharCode(g.charCodeAt(0)-64);else throw new B;break;case"%":if(g>="A"&&g<="E")x=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")x=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")x=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")x=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")x="\0";else if(g==="V")x="@";else if(g==="W")x="`";else if(g==="X"||g==="Y"||g==="Z")x="";else throw new B;break;case"/":if(g>="A"&&g<="O")x=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")x=":";else throw new B;break}l+=x,u++}else l+=d}return l}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class rt extends Rt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,a,l){let u=this.decodeStart(a),d=this.decodeEnd(a),g=new de;rt.decodeMiddle(a,u[1],d[0],g);let x=g.toString(),w=null;l!=null&&(w=l.get(V.ALLOWED_LENGTHS)),w==null&&(w=rt.DEFAULT_ALLOWED_LENGTHS);let b=x.length,A=!1,j=0;for(let U of w){if(b===U){A=!0;break}U>j&&(j=U)}if(!A&&b>j&&(A=!0),!A)throw new B;const P=[new ge(u[1],s),new ge(d[0],s)];return new Be(x,null,0,P,pe.ITF,new Date().getTime())}static decodeMiddle(s,a,l,u){let d=new Int32Array(10),g=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),g.fill(0),x.fill(0);a<l;){Rt.recordPattern(s,a,d);for(let b=0;b<5;b++){let A=2*b;g[b]=d[A],x[b]=d[A+1]}let w=rt.decodeDigit(g);u.append(w.toString()),w=this.decodeDigit(x),u.append(w.toString()),d.forEach(function(b){a+=b})}}decodeStart(s){let a=rt.skipWhiteSpace(s),l=rt.findGuardPattern(s,a,rt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new $}static skipWhiteSpace(s){const a=s.getSize(),l=s.getNextSet(0);if(l===a)throw new $;return l}decodeEnd(s){s.reverse();try{let a=rt.skipWhiteSpace(s),l;try{l=rt.findGuardPattern(s,a,rt.END_PATTERN_REVERSED[0])}catch(d){d instanceof $&&(l=rt.findGuardPattern(s,a,rt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,a,l){let u=l.length,d=new Int32Array(u),g=s.getSize(),x=!1,w=0,b=a;d.fill(0);for(let A=a;A<g;A++)if(s.get(A)!==x)d[w]++;else{if(w===u-1){if(Rt.patternMatchVariance(d,l,rt.MAX_INDIVIDUAL_VARIANCE)<rt.MAX_AVG_VARIANCE)return[b,A];b+=d[0]+d[1],T.arraycopy(d,2,d,0,w-1),d[w-1]=0,d[w]=0,w--}else w++;d[w]=1,x=!x}throw new $}static decodeDigit(s){let a=rt.MAX_AVG_VARIANCE,l=-1,u=rt.PATTERNS.length;for(let d=0;d<u;d++){let g=rt.PATTERNS[d],x=Rt.patternMatchVariance(s,g,rt.MAX_INDIVIDUAL_VARIANCE);x<a?(a=x,l=d):x===a&&(l=-1)}if(l>=0)return l%10;throw new $}}rt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],rt.MAX_AVG_VARIANCE=.38,rt.MAX_INDIVIDUAL_VARIANCE=.5,rt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],rt.START_PATTERN=Int32Array.from([1,1,1,1]),rt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends Rt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let a=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!a;){d=Int32Array.from([0,0,0]),l=vt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let g=l[0];u=l[1];let x=g-(u-g);x>=0&&(a=s.isRange(x,g,!1))}return l}static checkChecksum(s){return vt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return vt.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}static decodeEnd(s,a){return vt.findGuardPattern(s,a,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,a,l,u){return this.findGuardPattern(s,a,l,u,new Int32Array(u.length))}static findGuardPattern(s,a,l,u,d){let g=s.getSize();a=l?s.getNextUnset(a):s.getNextSet(a);let x=0,w=a,b=u.length,A=l;for(let j=a;j<g;j++)if(s.get(j)!==A)d[x]++;else{if(x===b-1){if(Rt.patternMatchVariance(d,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([w,j]);w+=d[0]+d[1];let P=d.slice(2,d.length-1);for(let L=0;L<x-1;L++)d[L]=P[L];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,A=!A}throw new $}static decodeDigit(s,a,l,u){this.recordPattern(s,l,a);let d=this.MAX_AVG_VARIANCE,g=-1,x=u.length;for(let w=0;w<x;w++){let b=u[w],A=Rt.patternMatchVariance(a,b,vt.MAX_INDIVIDUAL_VARIANCE);A<d&&(d=A,g=w)}if(g>=0)return g;throw new $}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class wi{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),g=u.toString(),x=wi.parseExtensionString(g),w=[new ge((l[0]+l[1])/2,s),new ge(d,s)],b=new Be(g,null,0,w,pe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&b.putAllMetadata(x),b}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g=a[1],x=0;for(let b=0;b<5&&g<d;b++){let A=vt.decodeDigit(s,u,g,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let j of u)g+=j;A>=10&&(x|=1<<4-b),b!==4&&(g=s.getNextSet(g),g=s.getNextUnset(g))}if(l.length!==5)throw new $;let w=this.determineCheckDigit(x);if(wi.extensionChecksum(l.toString())!==w)throw new $;return g}static extensionChecksum(s){let a=s.length,l=0;for(let u=a-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let a=0;a<10;a++)if(s===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new $}static parseExtensionString(s){if(s.length!==5)return null;let a=wi.parseExtension5String(s);return a==null?null:new Map([[Xe.SUGGESTED_PRICE,a]])}static parseExtension5String(s){let a;switch(s.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),d=l%100,g=d<10?"0"+d:d.toString();return a+u+"."+g}}class Aa{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,a,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(a,l,u),g=u.toString(),x=Aa.parseExtensionString(g),w=[new ge((l[0]+l[1])/2,s),new ge(d,s)],b=new Be(g,null,0,w,pe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&b.putAllMetadata(x),b}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g=a[1],x=0;for(let w=0;w<2&&g<d;w++){let b=vt.decodeDigit(s,u,g,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+b%10);for(let A of u)g+=A;b>=10&&(x|=1<<1-w),w!==1&&(g=s.getNextSet(g),g=s.getNextUnset(g))}if(l.length!==2)throw new $;if(parseInt(l.toString())%4!==x)throw new $;return g}static parseExtensionString(s){return s.length!==2?null:new Map([[Xe.ISSUE_NUMBER,parseInt(s)]])}}class mc{static decodeRow(s,a,l){let u=vt.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new wi().decodeRow(s,a,u)}catch{return new Aa().decodeRow(s,a,u)}}}mc.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends vt{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let a=qe.L_PATTERNS[s-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];qe.L_AND_G_PATTERNS[s]=l}}decodeRow(s,a,l){let u=qe.findStartGuardPattern(a),d=l==null?null:l.get(V.NEED_RESULT_POINT_CALLBACK);if(d!=null){const ie=new ge((u[0]+u[1])/2,s);d.foundPossibleResultPoint(ie)}let g=this.decodeMiddle(a,u,this.decodeRowStringBuffer),x=g.rowOffset,w=g.resultString;if(d!=null){const ie=new ge(x,s);d.foundPossibleResultPoint(ie)}let b=this.decodeEnd(a,x);if(d!=null){const ie=new ge((b[0]+b[1])/2,s);d.foundPossibleResultPoint(ie)}let A=b[1],j=A+(A-b[0]);if(j>=a.getSize()||!a.isRange(A,j,!1))throw new $;let P=w.toString();if(P.length<8)throw new B;if(!qe.checkChecksum(P))throw new E;let L=(u[1]+u[0])/2,U=(b[1]+b[0])/2,W=this.getBarcodeFormat(),X=[new ge(L,s),new ge(U,s)],Z=new Be(P,null,0,X,W,new Date().getTime()),ae=0;try{let ie=mc.decodeRow(s,a,b[1]);Z.putMetadata(Xe.UPC_EAN_EXTENSION,ie.getText()),Z.putAllMetadata(ie.getResultMetadata()),Z.addResultPoints(ie.getResultPoints()),ae=ie.getText().length}catch{}let le=l==null?null:l.get(V.ALLOWED_EAN_EXTENSIONS);if(le!=null){let ie=!1;for(let $e in le)if(ae.toString()===$e){ie=!0;break}if(!ie)throw new $}return Z}decodeEnd(s,a){return qe.findGuardPattern(s,a,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return qe.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let a=s.length;if(a===0)return!1;let l=parseInt(s.charAt(a-1),10);return qe.getStandardUPCEANChecksum(s.substring(0,a-1))===l}static getStandardUPCEANChecksum(s){let a=s.length,l=0;for(let u=a-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}l*=3;for(let u=a-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new B;l+=d}return(1e3-l)%10}}class qr extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g=a[1],x=0;for(let b=0;b<6&&g<d;b++){let A=qe.decodeDigit(s,u,g,qe.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let j of u)g+=j;A>=10&&(x|=1<<5-b)}l=qr.determineFirstDigit(l,x),g=qe.findGuardPattern(s,g,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&g<d;b++){let A=qe.decodeDigit(s,u,g,qe.L_PATTERNS);l+=String.fromCharCode(48+A);for(let j of u)g+=j}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(s,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new $}}qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class gc extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g=a[1];for(let w=0;w<4&&g<d;w++){let b=qe.decodeDigit(s,u,g,qe.L_PATTERNS);l+=String.fromCharCode(48+b);for(let A of u)g+=A}g=qe.findGuardPattern(s,g,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&g<d;w++){let b=qe.decodeDigit(s,u,g,qe.L_PATTERNS);l+=String.fromCharCode(48+b);for(let A of u)g+=A}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return pe.EAN_8}}class Na extends qe{constructor(){super(...arguments),this.ean13Reader=new qr}getBarcodeFormat(){return pe.UPC_A}decode(s,a){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,a,l))}decodeMiddle(s,a,l){return this.ean13Reader.decodeMiddle(s,a,l)}maybeReturnResult(s){let a=s.getText();if(a.charAt(0)==="0"){let l=new Be(a.substring(1),null,null,s.getResultPoints(),pe.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new $}reset(){this.ean13Reader.reset()}}class Sn extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,a,l){const u=this.decodeMiddleCounters.map(b=>b);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=s.getSize();let g=a[1],x=0;for(let b=0;b<6&&g<d;b++){const A=Sn.decodeDigit(s,u,g,Sn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let j of u)g+=j;A>=10&&(x|=1<<5-b)}let w=Sn.determineNumSysAndCheckDigit(l,x);return{rowOffset:g,resultString:w}}decodeEnd(s,a){return Sn.findGuardPatternWithoutCounters(s,a,!0,Sn.MIDDLE_END_PATTERN)}checkChecksum(s){return qe.checkChecksum(Sn.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return d+s+g}throw $.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(s){const a=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new de;l.append(s.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}Sn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Sn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ta extends Rt{constructor(s){super();let a=s==null?null:s.get(V.POSSIBLE_FORMATS),l=[];r(a)?(l.push(new qr),l.push(new Na),l.push(new gc),l.push(new Sn)):(a.indexOf(pe.EAN_13)>-1&&l.push(new qr),a.indexOf(pe.UPC_A)>-1&&l.push(new Na),a.indexOf(pe.EAN_8)>-1&&l.push(new gc),a.indexOf(pe.UPC_E)>-1&&l.push(new Sn)),this.readers=l}decodeRow(s,a,l){for(let u of this.readers)try{const d=u.decodeRow(s,a,l),g=d.getBarcodeFormat()===pe.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(V.POSSIBLE_FORMATS),w=x==null||x.includes(pe.UPC_A);if(g&&w){const b=d.getRawBytes(),A=new Be(d.getText().substring(1),b,b?b.length:null,d.getResultPoints(),pe.UPC_A);return A.putAllMetadata(d.getResultMetadata()),A}return d}catch{}throw new $}reset(){for(let s of this.readers)s.reset()}}class Jt extends Rt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,a){for(let l=0;l<a.length;l++)if(Rt.patternMatchVariance(s,a[l],Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return l;throw new $}static count(s){return De.sum(new Int32Array(s))}static increment(s,a){let l=0,u=a[0];for(let d=1;d<s.length;d++)a[d]>u&&(u=a[d],l=d);s[l]++}static decrement(s,a){let l=0,u=a[0];for(let d=1;d<s.length;d++)a[d]<u&&(u=a[d],l=d);s[l]--}static isFinderPattern(s){let a=s[0]+s[1],l=a+s[2]+s[3],u=a/l;if(u>=Jt.MIN_FINDER_PATTERN_RATIO&&u<=Jt.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let x of s)x>g&&(g=x),x<d&&(d=x);return g<10*d}return!1}}Jt.MAX_AVG_VARIANCE=.2,Jt.MAX_INDIVIDUAL_VARIANCE=.45,Jt.MIN_FINDER_PATTERN_RATIO=9.5/12,Jt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Yr{constructor(s,a){this.value=s,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Yr))return!1;const a=s;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class oo{constructor(s,a,l,u,d){this.value=s,this.startEnd=a,this.value=s,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new ge(l,d)),this.resultPoints.push(new ge(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof oo))return!1;const a=s;return this.value===a.value}hashCode(){return this.value}}class G{constructor(){}static getRSSvalue(s,a,l){let u=0;for(let w of s)u+=w;let d=0,g=0,x=s.length;for(let w=0;w<x-1;w++){let b;for(b=1,g|=1<<w;b<s[w];b++,g&=~(1<<w)){let A=G.combins(u-b-1,x-w-2);if(l&&g===0&&u-b-(x-w-1)>=x-w-1&&(A-=G.combins(u-b-(x-w),x-w-2)),x-w-1>1){let j=0;for(let P=u-b-(x-w-2);P>a;P--)j+=G.combins(u-b-P-1,x-w-3);A-=j*(x-1-w)}else u-b>a&&A--;d+=A}u-=b}return d}static combins(s,a){let l,u;s-a>a?(u=a,l=s-a):(u=s-a,l=a);let d=1,g=1;for(let x=s;x>l;x--)d*=x,g<=u&&(d/=g,g++);for(;g<=u;)d/=g,g++;return d}}class we{static buildBitArray(s){let a=s.length*2-1;s[s.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new M(l),d=0,x=s[0].getRightChar().getValue();for(let w=11;w>=0;--w)x&1<<w&&u.set(d),d++;for(let w=1;w<s.length;++w){let b=s[w],A=b.getLeftChar().getValue();for(let j=11;j>=0;--j)A&1<<j&&u.set(d),d++;if(b.getRightChar()!=null){let j=b.getRightChar().getValue();for(let P=11;P>=0;--P)j&1<<P&&u.set(d),d++}}return u}}class Ce{constructor(s,a){a?this.decodedInformation=null:(this.finished=s,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class en{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Qe extends en{constructor(s,a){super(s),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Qe.FNC1}}Qe.FNC1="$";class ln extends en{constructor(s,a,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class St extends en{constructor(s,a,l){if(super(s),a<0||a>10||l<0||l>10)throw new B;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===St.FNC1}isSecondDigitFNC1(){return this.secondDigit===St.FNC1}isAnyFNC1(){return this.firstDigit===St.FNC1||this.secondDigit===St.FNC1}}St.FNC1=10;class fe{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new $;let a=s.substring(0,2);for(let d of fe.TWO_DIGIT_DATA_LENGTH)if(d[0]===a)return d[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(2,d[2],s):fe.processFixedAI(2,d[1],s);if(s.length<3)throw new $;let l=s.substring(0,3);for(let d of fe.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(3,d[2],s):fe.processFixedAI(3,d[1],s);for(let d of fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,d[2],s):fe.processFixedAI(4,d[1],s);if(s.length<4)throw new $;let u=s.substring(0,4);for(let d of fe.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===fe.VARIABLE_LENGTH?fe.processVariableAI(4,d[2],s):fe.processFixedAI(4,d[1],s);throw new $}static processFixedAI(s,a,l){if(l.length<s)throw new $;let u=l.substring(0,s);if(l.length<s+a)throw new $;let d=l.substring(s,s+a),g=l.substring(s+a),x="("+u+")"+d,w=fe.parseFieldsInGeneralPurpose(g);return w==null?x:x+w}static processVariableAI(s,a,l){let u=l.substring(0,s),d;l.length<s+a?d=l.length:d=s+a;let g=l.substring(s,d),x=l.substring(d),w="("+u+")"+g,b=fe.parseFieldsInGeneralPurpose(x);return b==null?w:w+b}}fe.VARIABLE_LENGTH=[],fe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",fe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",fe.VARIABLE_LENGTH,20],["22",fe.VARIABLE_LENGTH,29],["30",fe.VARIABLE_LENGTH,8],["37",fe.VARIABLE_LENGTH,8],["90",fe.VARIABLE_LENGTH,30],["91",fe.VARIABLE_LENGTH,30],["92",fe.VARIABLE_LENGTH,30],["93",fe.VARIABLE_LENGTH,30],["94",fe.VARIABLE_LENGTH,30],["95",fe.VARIABLE_LENGTH,30],["96",fe.VARIABLE_LENGTH,30],["97",fe.VARIABLE_LENGTH,3],["98",fe.VARIABLE_LENGTH,30],["99",fe.VARIABLE_LENGTH,30]],fe.THREE_DIGIT_DATA_LENGTH=[["240",fe.VARIABLE_LENGTH,30],["241",fe.VARIABLE_LENGTH,30],["242",fe.VARIABLE_LENGTH,6],["250",fe.VARIABLE_LENGTH,30],["251",fe.VARIABLE_LENGTH,30],["253",fe.VARIABLE_LENGTH,17],["254",fe.VARIABLE_LENGTH,20],["400",fe.VARIABLE_LENGTH,30],["401",fe.VARIABLE_LENGTH,30],["402",17],["403",fe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",fe.VARIABLE_LENGTH,20],["421",fe.VARIABLE_LENGTH,15],["422",3],["423",fe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],fe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",fe.VARIABLE_LENGTH,15],["391",fe.VARIABLE_LENGTH,18],["392",fe.VARIABLE_LENGTH,15],["393",fe.VARIABLE_LENGTH,18],["703",fe.VARIABLE_LENGTH,30]],fe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",fe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",fe.VARIABLE_LENGTH,20],["8003",fe.VARIABLE_LENGTH,30],["8004",fe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",fe.VARIABLE_LENGTH,30],["8008",fe.VARIABLE_LENGTH,12],["8018",18],["8020",fe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",fe.VARIABLE_LENGTH,70],["8200",fe.VARIABLE_LENGTH,70]];class Gn{constructor(s){this.buffer=new de,this.information=s}decodeAllCodes(s,a){let l=a,u=null;do{let d=this.decodeGeneralPurposeField(l,u),g=fe.parseFieldsInGeneralPurpose(d.getNewString());if(g!=null&&s.append(g),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let a=s;a<s+3;++a)if(this.information.get(a))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new St(this.information.getSize(),St.FNC1,St.FNC1):new St(this.information.getSize(),d-1,St.FNC1)}let a=this.extractNumericValueFromBitArray(s,7),l=(a-8)/11,u=(a-8)%11;return new St(s+7,l,u)}extractNumericValueFromBitArray(s,a){return Gn.extractNumericValueFromBitArray(this.information,s,a)}static extractNumericValueFromBitArray(s,a,l){let u=0;for(let d=0;d<l;++d)s.get(a+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(s,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ln(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ln(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),s=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),s=a.isFinished()):(a=this.parseNumericBlock(),s=a.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let a;return s.isSecondDigitFNC1()?a=new ln(this.current.getPosition(),this.buffer.toString()):a=new ln(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Ce(!0,a)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new Ce(!0,a)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ce(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new Ce(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ce(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let a=new ln(this.current.getPosition(),this.buffer.toString());return new Ce(!0,a)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ce(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Qe(s+5,Qe.FNC1);if(a>=5&&a<15)return new Qe(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new Qe(s+7,""+(l+1));if(l>=90&&l<116)return new Qe(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new B}return new Qe(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(s,5);if(a>=5&&a<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let a=this.extractNumericValueFromBitArray(s,5);if(a===15)return new Qe(s+5,Qe.FNC1);if(a>=5&&a<15)return new Qe(s+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new Qe(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new an("Decoding invalid alphanumeric value: "+l)}return new Qe(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<5&&a+s<this.information.getSize();++a)if(a===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+a))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let a=s;a<s+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let a=0;a<4&&a+s<this.information.getSize();++a)if(this.information.get(s+a))return!1;return!0}}class Rr{constructor(s){this.information=s,this.generalDecoder=new Gn(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class st extends Rr{constructor(s){super(s)}encodeCompressedGtin(s,a){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,a,l)}encodeCompressedGtinWithoutAI(s,a,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);d/100===0&&s.append("0"),d/10===0&&s.append("0"),s.append(d)}st.appendCheckDigit(s,l)}static appendCheckDigit(s,a){let l=0;for(let u=0;u<13;u++){let d=s.charAt(u+a).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),s.append(l)}}st.GTIN_SIZE=40;class js extends st{constructor(s){super(s)}parseInformation(){let s=new de;s.append("(01)");let a=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(js.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,js.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(s,js.HEADER_SIZE+44)}}js.HEADER_SIZE=4;class ao extends Rr{constructor(s){super(s)}parseInformation(){let s=new de;return this.getGeneralDecoder().decodeAllCodes(s,ao.HEADER_SIZE)}}ao.HEADER_SIZE=5;class lo extends st{constructor(s){super(s)}encodeCompressedWeight(s,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(s,u);let d=this.checkWeight(u),g=1e5;for(let x=0;x<5;++x)d/g===0&&s.append("0"),g/=10;s.append(d)}}class wr extends lo{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=wr.HEADER_SIZE+lo.GTIN_SIZE+wr.WEIGHT_SIZE)throw new $;let s=new de;return this.encodeCompressedGtin(s,wr.HEADER_SIZE),this.encodeCompressedWeight(s,wr.HEADER_SIZE+lo.GTIN_SIZE,wr.WEIGHT_SIZE),s.toString()}}wr.HEADER_SIZE=5,wr.WEIGHT_SIZE=15;class Ps extends wr{constructor(s){super(s)}addWeightCode(s,a){s.append("(3103)")}checkWeight(s){return s}}class hh extends wr{constructor(s){super(s)}addWeightCode(s,a){a<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Zr extends st{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Zr.HEADER_SIZE+st.GTIN_SIZE)throw new $;let s=new de;this.encodeCompressedGtin(s,Zr.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Zr.HEADER_SIZE+st.GTIN_SIZE,Zr.LAST_DIGIT_SIZE);s.append("(392"),s.append(a),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Zr.HEADER_SIZE+st.GTIN_SIZE+Zr.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}Zr.HEADER_SIZE=8,Zr.LAST_DIGIT_SIZE=2;class Ln extends st{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+st.GTIN_SIZE)throw new $;let s=new de;this.encodeCompressedGtin(s,Ln.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+st.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);s.append("(393"),s.append(a),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+st.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+st.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return s.append(u.getNewString()),s.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class wt extends lo{constructor(s,a,l){super(s),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE+wt.DATE_SIZE)throw new $;let s=new de;return this.encodeCompressedGtin(s,wt.HEADER_SIZE),this.encodeCompressedWeight(s,wt.HEADER_SIZE+wt.GTIN_SIZE,wt.WEIGHT_SIZE),this.encodeCompressedDate(s,wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,wt.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let g=l;g/10==0&&s.append("0"),s.append(g),d/10==0&&s.append("0"),s.append(d),u/10==0&&s.append("0"),s.append(u)}addWeightCode(s,a){s.append("("),s.append(this.firstAIdigits),s.append(a/1e5),s.append(")")}checkWeight(s){return s%1e5}}wt.HEADER_SIZE=8,wt.WEIGHT_SIZE=20,wt.DATE_SIZE=16;function Im(R){try{if(R.get(1))return new js(R);if(!R.get(2))return new ao(R);switch(Gn.extractNumericValueFromBitArray(R,1,4)){case 4:return new Ps(R);case 5:return new hh(R)}switch(Gn.extractNumericValueFromBitArray(R,1,5)){case 12:return new Zr(R);case 13:return new Ln(R)}switch(Gn.extractNumericValueFromBitArray(R,1,7)){case 56:return new wt(R,"310","11");case 57:return new wt(R,"320","11");case 58:return new wt(R,"310","13");case 59:return new wt(R,"320","13");case 60:return new wt(R,"310","15");case 61:return new wt(R,"320","15");case 62:return new wt(R,"310","17");case 63:return new wt(R,"320","17")}}catch(s){throw console.log(s),new an("unknown decoder: "+R)}}class Ms{constructor(s,a,l,u){this.leftchar=s,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,a){return s instanceof Ms?Ms.equalsOrNull(s.leftchar,a.leftchar)&&Ms.equalsOrNull(s.rightchar,a.rightchar)&&Ms.equalsOrNull(s.finderpattern,a.finderpattern):!1}static equalsOrNull(s,a){return s===null?a===null:Ms.equals(s,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class fh{constructor(s,a,l){this.pairs=s,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,a){return s instanceof fh?this.checkEqualitity(s,a)&&s.wasReversed===a.wasReversed:!1}checkEqualitity(s,a){if(!s||!a)return;let l;return s.forEach((u,d)=>{a.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class re extends Jt{constructor(s){super(...arguments),this.pairs=new Array(re.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,a,l){this.pairs.length=0,this.startFromEven=!1;try{return re.constructResult(this.decodeRow2pairs(s,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,re.constructResult(this.decodeRow2pairs(s,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,s))}catch(d){if(d instanceof $){if(!this.pairs.length)throw new $;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new $}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),a}checkRows(s,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of s)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!re.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,l+1)}catch(g){this.verbose&&console.log(g)}}throw new $}static isValidSequence(s){for(let a of re.FINDER_PATTERN_SEQUENCES){if(s.length>a.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,a){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>s){d=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}d||u||re.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new fh(this.pairs,s,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,a){for(let l of a)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let d of s)if(Ms.equals(u,d))break}}static isPartialRow(s,a){for(let l of a){let u=!0;for(let d of s){let g=!1;for(let x of l.getPairs())if(d.equals(x)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let a=we.buildBitArray(s),u=Im(a).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),g=s[s.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],g[0],g[1]];return new Be(u,null,null,x,pe.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),a=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let w=this.pairs.get(x);u+=w.getLeftChar().getChecksumPortion(),d++;let b=w.getRightChar();b!=null&&(u+=b.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==a.getValue()}static getNextSecondBar(s,a){let l;return s.get(a)?(l=s.getNextUnset(a),l=s.getNextSet(l)):(l=s.getNextSet(a),l=s.getNextUnset(l)),l}retrieveNextPair(s,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let d,g=!0,x=-1;do this.findNextPair(s,a,x),d=this.parseFoundFinderPattern(s,l,u),d==null?x=re.getNextSecondBar(s,this.startEnd[0]):g=!1;while(g);let w=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new $;let b;try{b=this.decodeDataCharacter(s,d,u,!1)}catch(A){b=null,this.verbose&&console.log(A)}return new Ms(w,b,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),g;l>=0?g=l:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let x=a.length%2!=0;this.startFromEven&&(x=!x);let w=!1;for(;g<d&&(w=!s.get(g),!!w);)g++;let b=0,A=g;for(let j=g;j<d;j++)if(s.get(j)!=w)u[b]++;else{if(b==3){if(x&&re.reverseCounters(u),re.isFinderPattern(u)){this.startEnd[0]=A,this.startEnd[1]=j;return}x&&re.reverseCounters(u),A+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,b--}else b++;u[b]=1,w=!w}throw new $}static reverseCounters(s){let a=s.length;for(let l=0;l<a/2;++l){let u=s[l];s[l]=s[a-l-1],s[a-l-1]=u}}parseFoundFinderPattern(s,a,l){let u,d,g;if(l){let b=this.startEnd[0]-1;for(;b>=0&&!s.get(b);)b--;b++,u=this.startEnd[0]-b,d=b,g=this.startEnd[1]}else d=this.startEnd[0],g=s.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let x=this.getDecodeFinderCounters();T.arraycopy(x,0,x,1,x.length-1),x[0]=u;let w;try{w=this.parseFinderValue(x,re.FINDER_PATTERNS)}catch{return null}return new oo(w,[d,g],d,g,a)}decodeDataCharacter(s,a,l,u){let d=this.getDataCharacterCounters();for(let ct=0;ct<d.length;ct++)d[ct]=0;if(u)re.recordPatternInReverse(s,a.getStartEnd()[0],d);else{re.recordPattern(s,a.getStartEnd()[1],d);for(let ct=0,xn=d.length-1;ct<xn;ct++,xn--){let ir=d[ct];d[ct]=d[xn],d[xn]=ir}}let g=17,x=De.sum(new Int32Array(d))/g,w=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(x-w)/w>.3)throw new $;let b=this.getOddCounts(),A=this.getEvenCounts(),j=this.getOddRoundingErrors(),P=this.getEvenRoundingErrors();for(let ct=0;ct<d.length;ct++){let xn=1*d[ct]/x,ir=xn+.5;if(ir<1){if(xn<.3)throw new $;ir=1}else if(ir>8){if(xn>8.7)throw new $;ir=8}let po=ct/2;ct&1?(A[po]=ir,P[po]=xn-ir):(b[po]=ir,j[po]=xn-ir)}this.adjustOddEvenCounts(g);let L=4*a.getValue()+(l?0:2)+(u?0:1)-1,U=0,W=0;for(let ct=b.length-1;ct>=0;ct--){if(re.isNotA1left(a,l,u)){let xn=re.WEIGHTS[L][2*ct];W+=b[ct]*xn}U+=b[ct]}let X=0;for(let ct=A.length-1;ct>=0;ct--)if(re.isNotA1left(a,l,u)){let xn=re.WEIGHTS[L][2*ct+1];X+=A[ct]*xn}let Z=W+X;if(U&1||U>13||U<4)throw new $;let ae=(13-U)/2,le=re.SYMBOL_WIDEST[ae],ie=9-le,$e=G.getRSSvalue(b,le,!0),Le=G.getRSSvalue(A,ie,!1),Kn=re.EVEN_TOTAL_SUBSET[ae],jr=re.GSUM[ae],qn=$e*Kn+Le+jr;return new Yr(qn,Z)}static isNotA1left(s,a,l){return!(s.getValue()==0&&a&&l)}adjustOddEvenCounts(s){let a=De.sum(new Int32Array(this.getOddCounts())),l=De.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;a>13?d=!0:a<4&&(u=!0);let g=!1,x=!1;l>13?x=!0:l<4&&(g=!0);let w=a+l-s,b=(a&1)==1,A=(l&1)==0;if(w==1)if(b){if(A)throw new $;d=!0}else{if(!A)throw new $;x=!0}else if(w==-1)if(b){if(A)throw new $;u=!0}else{if(!A)throw new $;g=!0}else if(w==0){if(b){if(!A)throw new $;a<l?(u=!0,x=!0):(d=!0,g=!0)}else if(A)throw new $}else throw new $;if(u){if(d)throw new $;re.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&re.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(x)throw new $;re.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&re.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}re.SYMBOL_WIDEST=[7,5,4,3,1],re.EVEN_TOTAL_SUBSET=[4,20,52,104,204],re.GSUM=[0,348,1388,2948,3988],re.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],re.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],re.FINDER_PAT_A=0,re.FINDER_PAT_B=1,re.FINDER_PAT_C=2,re.FINDER_PAT_D=3,re.FINDER_PAT_E=4,re.FINDER_PAT_F=5,re.FINDER_PATTERN_SEQUENCES=[[re.FINDER_PAT_A,re.FINDER_PAT_A],[re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B],[re.FINDER_PAT_A,re.FINDER_PAT_C,re.FINDER_PAT_B,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_C],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_E,re.FINDER_PAT_B,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F],[re.FINDER_PAT_A,re.FINDER_PAT_A,re.FINDER_PAT_B,re.FINDER_PAT_B,re.FINDER_PAT_C,re.FINDER_PAT_D,re.FINDER_PAT_D,re.FINDER_PAT_E,re.FINDER_PAT_E,re.FINDER_PAT_F,re.FINDER_PAT_F]],re.MAX_PAIRS=11;class o3 extends Yr{constructor(s,a,l){super(s,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class jt extends Jt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,a,l){const u=this.decodePair(a,!1,s,l);jt.addOrTally(this.possibleLeftPairs,u),a.reverse();let d=this.decodePair(a,!0,s,l);jt.addOrTally(this.possibleRightPairs,d),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&jt.checkChecksum(g,x))return jt.constructResult(g,x)}throw new $}static addOrTally(s,a){if(a==null)return;let l=!1;for(let u of s)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||s.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,a){let l=4537077*s.getValue()+a.getValue(),u=new String(l).toString(),d=new de;for(let b=13-u.length;b>0;b--)d.append("0");d.append(u);let g=0;for(let b=0;b<13;b++){let A=d.charAt(b).charCodeAt(0)-48;g+=b&1?A:3*A}g=10-g%10,g===10&&(g=0),d.append(g.toString());let x=s.getFinderPattern().getResultPoints(),w=a.getFinderPattern().getResultPoints();return new Be(d.toString(),null,0,[x[0],x[1],w[0],w[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(s,a){let l=(s.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,a,l,u){try{let d=this.findFinderPattern(s,a),g=this.parseFoundFinderPattern(s,l,a,d),x=u==null?null:u.get(V.NEED_RESULT_POINT_CALLBACK);if(x!=null){let A=(d[0]+d[1])/2;a&&(A=s.getSize()-1-A),x.foundPossibleResultPoint(new ge(A,l))}let w=this.decodeDataCharacter(s,g,!0),b=this.decodeDataCharacter(s,g,!1);return new o3(1597*w.getValue()+b.getValue(),w.getChecksumPortion()+4*b.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(s,a,l){let u=this.getDataCharacterCounters();for(let X=0;X<u.length;X++)u[X]=0;if(l)Rt.recordPatternInReverse(s,a.getStartEnd()[0],u);else{Rt.recordPattern(s,a.getStartEnd()[1]+1,u);for(let X=0,Z=u.length-1;X<Z;X++,Z--){let ae=u[X];u[X]=u[Z],u[Z]=ae}}let d=l?16:15,g=De.sum(new Int32Array(u))/d,x=this.getOddCounts(),w=this.getEvenCounts(),b=this.getOddRoundingErrors(),A=this.getEvenRoundingErrors();for(let X=0;X<u.length;X++){let Z=u[X]/g,ae=Math.floor(Z+.5);ae<1?ae=1:ae>8&&(ae=8);let le=Math.floor(X/2);X&1?(w[le]=ae,A[le]=Z-ae):(x[le]=ae,b[le]=Z-ae)}this.adjustOddEvenCounts(l,d);let j=0,P=0;for(let X=x.length-1;X>=0;X--)P*=9,P+=x[X],j+=x[X];let L=0,U=0;for(let X=w.length-1;X>=0;X--)L*=9,L+=w[X],U+=w[X];let W=P+3*L;if(l){if(j&1||j>12||j<4)throw new $;let X=(12-j)/2,Z=jt.OUTSIDE_ODD_WIDEST[X],ae=9-Z,le=G.getRSSvalue(x,Z,!1),ie=G.getRSSvalue(w,ae,!0),$e=jt.OUTSIDE_EVEN_TOTAL_SUBSET[X],Le=jt.OUTSIDE_GSUM[X];return new Yr(le*$e+ie+Le,W)}else{if(U&1||U>10||U<4)throw new $;let X=(10-U)/2,Z=jt.INSIDE_ODD_WIDEST[X],ae=9-Z,le=G.getRSSvalue(x,Z,!0),ie=G.getRSSvalue(w,ae,!1),$e=jt.INSIDE_ODD_TOTAL_SUBSET[X],Le=jt.INSIDE_GSUM[X];return new Yr(ie*$e+le+Le,W)}}findFinderPattern(s,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),d=!1,g=0;for(;g<u&&(d=!s.get(g),a!==d);)g++;let x=0,w=g;for(let b=g;b<u;b++)if(s.get(b)!==d)l[x]++;else{if(x===3){if(Jt.isFinderPattern(l))return[w,b];w+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new $}parseFoundFinderPattern(s,a,l,u){let d=s.get(u[0]),g=u[0]-1;for(;g>=0&&d!==s.get(g);)g--;g++;const x=u[0]-g,w=this.getDecodeFinderCounters(),b=new Int32Array(w.length);T.arraycopy(w,0,b,1,w.length-1),b[0]=x;const A=this.parseFinderValue(b,jt.FINDER_PATTERNS);let j=g,P=u[1];return l&&(j=s.getSize()-1-j,P=s.getSize()-1-P),new oo(A,[g,u[1]],j,P,a)}adjustOddEvenCounts(s,a){let l=De.sum(new Int32Array(this.getOddCounts())),u=De.sum(new Int32Array(this.getEvenCounts())),d=!1,g=!1,x=!1,w=!1;s?(l>12?g=!0:l<4&&(d=!0),u>12?w=!0:u<4&&(x=!0)):(l>11?g=!0:l<5&&(d=!0),u>10?w=!0:u<4&&(x=!0));let b=l+u-a,A=(l&1)===(s?1:0),j=(u&1)===1;if(b===1)if(A){if(j)throw new $;g=!0}else{if(!j)throw new $;w=!0}else if(b===-1)if(A){if(j)throw new $;d=!0}else{if(!j)throw new $;x=!0}else if(b===0){if(A){if(!j)throw new $;l<u?(d=!0,w=!0):(g=!0,x=!0)}else if(j)throw new $}else throw new $;if(d){if(g)throw new $;Jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(w)throw new $;Jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}jt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],jt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],jt.OUTSIDE_GSUM=[0,161,961,2015,2715],jt.INSIDE_GSUM=[0,336,1036,1516],jt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],jt.INSIDE_ODD_WIDEST=[2,4,6,8],jt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class co extends Rt{constructor(s,a){super(),this.readers=[],this.verbose=a===!0;const l=s?s.get(V.POSSIBLE_FORMATS):null,u=s&&s.get(V.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(pe.EAN_13)||l.includes(pe.UPC_A)||l.includes(pe.EAN_8)||l.includes(pe.UPC_E))&&this.readers.push(new Ta(s)),l.includes(pe.CODE_39)&&this.readers.push(new Et(u)),l.includes(pe.CODE_128)&&this.readers.push(new ue),l.includes(pe.ITF)&&this.readers.push(new rt),l.includes(pe.RSS_14)&&this.readers.push(new jt),l.includes(pe.RSS_EXPANDED)&&this.readers.push(new re(this.verbose))):(this.readers.push(new Ta(s)),this.readers.push(new Et),this.readers.push(new Ta(s)),this.readers.push(new ue),this.readers.push(new rt),this.readers.push(new jt),this.readers.push(new re(this.verbose)))}decodeRow(s,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,a,l)}catch{}throw new $}reset(){this.readers.forEach(s=>s.reset())}}class a3 extends Ke{constructor(s=500,a){super(new co(a),s,a)}}class nt{constructor(s,a,l){this.ecCodewords=s,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Je{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(s,a,l,u,d,g){this.versionNumber=s,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=g;let x=0;const w=g.getECCodewords(),b=g.getECBlocks();for(let A of b)x+=A.getCount()*(A.getDataCodewords()+w);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,a){if(s&1||a&1)throw new B;for(let l of Ge.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===a)return l;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new Ge(1,10,10,8,8,new nt(5,new Je(1,3))),new Ge(2,12,12,10,10,new nt(7,new Je(1,5))),new Ge(3,14,14,12,12,new nt(10,new Je(1,8))),new Ge(4,16,16,14,14,new nt(12,new Je(1,12))),new Ge(5,18,18,16,16,new nt(14,new Je(1,18))),new Ge(6,20,20,18,18,new nt(18,new Je(1,22))),new Ge(7,22,22,20,20,new nt(20,new Je(1,30))),new Ge(8,24,24,22,22,new nt(24,new Je(1,36))),new Ge(9,26,26,24,24,new nt(28,new Je(1,44))),new Ge(10,32,32,14,14,new nt(36,new Je(1,62))),new Ge(11,36,36,16,16,new nt(42,new Je(1,86))),new Ge(12,40,40,18,18,new nt(48,new Je(1,114))),new Ge(13,44,44,20,20,new nt(56,new Je(1,144))),new Ge(14,48,48,22,22,new nt(68,new Je(1,174))),new Ge(15,52,52,24,24,new nt(42,new Je(2,102))),new Ge(16,64,64,14,14,new nt(56,new Je(2,140))),new Ge(17,72,72,16,16,new nt(36,new Je(4,92))),new Ge(18,80,80,18,18,new nt(48,new Je(4,114))),new Ge(19,88,88,20,20,new nt(56,new Je(4,144))),new Ge(20,96,96,22,22,new nt(68,new Je(4,174))),new Ge(21,104,104,24,24,new nt(56,new Je(6,136))),new Ge(22,120,120,18,18,new nt(68,new Je(6,175))),new Ge(23,132,132,20,20,new nt(62,new Je(8,163))),new Ge(24,144,144,22,22,new nt(62,new Je(8,156),new Je(2,155))),new Ge(25,8,18,6,16,new nt(7,new Je(1,5))),new Ge(26,8,32,6,14,new nt(11,new Je(1,10))),new Ge(27,12,26,10,24,new nt(14,new Je(1,16))),new Ge(28,12,36,10,16,new nt(18,new Je(1,22))),new Ge(29,16,36,14,16,new nt(24,new Je(1,32))),new Ge(30,16,48,14,22,new nt(28,new Je(1,49)))]}}Ge.VERSIONS=Ge.buildVersions();class ph{constructor(s){const a=s.getHeight();if(a<8||a>144||a&1)throw new B;this.version=ph.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new ne(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const a=s.getHeight(),l=s.getWidth();return Ge.getVersionForDimensions(a,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let x=!1,w=!1,b=!1,A=!1;do if(l===d&&u===0&&!x)s[a++]=this.readCorner1(d,g)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&g&3&&!w)s[a++]=this.readCorner2(d,g)&255,l-=2,u+=2,w=!0;else if(l===d+4&&u===2&&!(g&7)&&!b)s[a++]=this.readCorner3(d,g)&255,l-=2,u+=2,b=!0;else if(l===d-2&&u===0&&(g&7)===4&&!A)s[a++]=this.readCorner4(d,g)&255,l-=2,u+=2,A=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(s[a++]=this.readUtah(l,u,d,g)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<g);if(a!==this.version.getTotalCodewords())throw new B;return s}readModule(s,a,l,u){return s<0&&(s+=l,a+=4-(l+4&7)),a<0&&(a+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(a,s),this.mappingBitMatrix.get(a,s)}readUtah(s,a,l,u){let d=0;return this.readModule(s-2,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-2,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,a,l,u)&&(d|=1),d<<=1,this.readModule(s,a-2,l,u)&&(d|=1),d<<=1,this.readModule(s,a-1,l,u)&&(d|=1),d<<=1,this.readModule(s,a,l,u)&&(d|=1),d}readCorner1(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,1,s,a)&&(l|=1),l<<=1,this.readModule(s-1,2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}readCorner2(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-4,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner3(s,a){let l=0;return this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(0,a-3,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-3,s,a)&&(l|=1),l<<=1,this.readModule(1,a-2,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l}readCorner4(s,a){let l=0;return this.readModule(s-3,0,s,a)&&(l|=1),l<<=1,this.readModule(s-2,0,s,a)&&(l|=1),l<<=1,this.readModule(s-1,0,s,a)&&(l|=1),l<<=1,this.readModule(0,a-2,s,a)&&(l|=1),l<<=1,this.readModule(0,a-1,s,a)&&(l|=1),l<<=1,this.readModule(1,a-1,s,a)&&(l|=1),l<<=1,this.readModule(2,a-1,s,a)&&(l|=1),l<<=1,this.readModule(3,a-1,s,a)&&(l|=1),l}extractDataRegion(s){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==a)throw new v("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),g=a/u|0,x=l/d|0,w=g*u,b=x*d,A=new ne(b,w);for(let j=0;j<g;++j){const P=j*u;for(let L=0;L<x;++L){const U=L*d;for(let W=0;W<u;++W){const X=j*(u+2)+1+W,Z=P+W;for(let ae=0;ae<d;++ae){const le=L*(d+2)+1+ae;if(s.get(le,X)){const ie=U+ae;A.set(ie,Z)}}}}}return A}}class mh{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a){const l=a.getECBlocks();let u=0;const d=l.getECBlocks();for(let W of d)u+=W.getCount();const g=new Array(u);let x=0;for(let W of d)for(let X=0;X<W.getCount();X++){const Z=W.getDataCodewords(),ae=l.getECCodewords()+Z;g[x++]=new mh(Z,new Uint8Array(ae))}const b=g[0].codewords.length-l.getECCodewords(),A=b-1;let j=0;for(let W=0;W<A;W++)for(let X=0;X<x;X++)g[X].codewords[W]=s[j++];const P=a.getVersionNumber()===24,L=P?8:x;for(let W=0;W<L;W++)g[W].codewords[b-1]=s[j++];const U=g[0].codewords.length;for(let W=b;W<U;W++)for(let X=0;X<x;X++){const Z=P?(X+8)%x:X,ae=P&&Z>7?W-1:W;g[Z].codewords[ae]=s[j++]}if(j!==s.length)throw new v;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class gh{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new v(""+s);let a=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const g=8-l,x=s<g?s:g,w=g-x,b=255>>8-x<<w;a=(d[u]&b)>>w,s-=x,l+=x,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)a=a<<8|d[u]&255,u++,s-=8;if(s>0){const g=8-s,x=255>>g<<g;a=a<<s|(d[u]&x)>>g,l+=s}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var tn;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(tn||(tn={}));class Ds{static decode(s){const a=new gh(s),l=new de,u=new de,d=new Array;let g=tn.ASCII_ENCODE;do if(g===tn.ASCII_ENCODE)g=this.decodeAsciiSegment(a,l,u);else{switch(g){case tn.C40_ENCODE:this.decodeC40Segment(a,l);break;case tn.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case tn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case tn.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case tn.BASE256_ENCODE:this.decodeBase256Segment(a,l,d);break;default:throw new B}g=tn.ASCII_ENCODE}while(g!==tn.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new Hn(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,a,l){let u=!1;do{let d=s.readBits(8);if(d===0)throw new B;if(d<=128)return u&&(d+=128),a.append(String.fromCharCode(d-1)),tn.ASCII_ENCODE;if(d===129)return tn.PAD_ENCODE;if(d<=229){const g=d-130;g<10&&a.append("0"),a.append(""+g)}else switch(d){case 230:return tn.C40_ENCODE;case 231:return tn.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return tn.ANSIX12_ENCODE;case 239:return tn.TEXT_ENCODE;case 240:return tn.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new B;break}}while(s.available()>0);return tn.ASCII_ENCODE}static decodeC40Segment(s,a){let l=!1;const u=[];let d=0;do{if(s.available()===8)return;const g=s.readBits(8);if(g===254)return;this.parseTwoBytes(g,s.readBits(8),u);for(let x=0;x<3;x++){const w=u[x];switch(d){case 0:if(w<3)d=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):a.append(b)}else throw new B;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):a.append(b)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:l?(a.append(String.fromCharCode(w+224)),l=!1):a.append(String.fromCharCode(w+96)),d=0;break;default:throw new B}}}while(s.available()>0)}static decodeTextSegment(s,a){let l=!1,u=[],d=0;do{if(s.available()===8)return;const g=s.readBits(8);if(g===254)return;this.parseTwoBytes(g,s.readBits(8),u);for(let x=0;x<3;x++){const w=u[x];switch(d){case 0:if(w<3)d=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[w];l?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):a.append(b)}else throw new B;break;case 1:l?(a.append(String.fromCharCode(w+128)),l=!1):a.append(String.fromCharCode(w)),d=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[w];l?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):a.append(b)}else switch(w){case 27:a.append("");break;case 30:l=!0;break;default:throw new B}d=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[w];l?(a.append(String.fromCharCode(b.charCodeAt(0)+128)),l=!1):a.append(b),d=0}else throw new B;break;default:throw new B}}}while(s.available()>0)}static decodeAnsiX12Segment(s,a){const l=[];do{if(s.available()===8)return;const u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let d=0;d<3;d++){const g=l[d];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new B;break}}}while(s.available()>0)}static parseTwoBytes(s,a,l){let u=(s<<8)+a-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(s,a){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){const d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),a.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,a,l){let u=1+s.getByteOffset();const d=this.unrandomize255State(s.readBits(8),u++);let g;if(d===0?g=s.available()/8|0:d<250?g=d:g=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),g<0)throw new B;const x=new Uint8Array(g);for(let w=0;w<g;w++){if(s.available()<8)throw new B;x[w]=this.unrandomize255State(s.readBits(8),u++)}l.push(x);try{a.append(he.decode(x,te.ISO88591))}catch(w){throw new an("Platform does not support required encoding: "+w.message)}}static unrandomize255State(s,a){const l=149*a%255+1,u=s-l;return u>=0?u:u+256}}Ds.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ds.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ds.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ds.TEXT_SHIFT2_SET_CHARS=Ds.C40_SHIFT2_SET_CHARS,Ds.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class l3{constructor(){this.rsDecoder=new sr(ze.DATA_MATRIX_FIELD_256)}decode(s){const a=new ph(s),l=a.getVersion(),u=a.readCodewords(),d=mh.getDataBlocks(u,l);let g=0;for(let b of d)g+=b.getNumDataCodewords();const x=new Uint8Array(g),w=d.length;for(let b=0;b<w;b++){const A=d[b],j=A.getCodewords(),P=A.getNumDataCodewords();this.correctErrors(j,P);for(let L=0;L<P;L++)x[L*w+b]=j[L]}return Ds.decode(x)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new E}for(let u=0;u<a;u++)s[u]=l[u]}}class zt{constructor(s){this.image=s,this.rectangleDetector=new Wn(this.image)}detect(){const s=this.rectangleDetector.detect();let a=this.detectSolid1(s);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new $;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],d=a[2],g=a[3];let x=this.transitionsBetween(l,g)+1,w=this.transitionsBetween(d,g)+1;(x&1)===1&&(x+=1),(w&1)===1&&(w+=1),4*x<7*w&&4*w<7*x&&(x=w=Math.max(x,w));let b=zt.sampleGrid(this.image,l,u,d,g,x,w);return new Dn(b,[l,u,d,g])}static shiftPoint(s,a,l){let u=(a.getX()-s.getX())/(l+1),d=(a.getY()-s.getY())/(l+1);return new ge(s.getX()+u,s.getY()+d)}static moveAway(s,a,l){let u=s.getX(),d=s.getY();return u<a?u-=1:u+=1,d<l?d-=1:d+=1,new ge(u,d)}detectSolid1(s){let a=s[0],l=s[1],u=s[3],d=s[2],g=this.transitionsBetween(a,l),x=this.transitionsBetween(l,u),w=this.transitionsBetween(u,d),b=this.transitionsBetween(d,a),A=g,j=[d,a,l,u];return A>x&&(A=x,j[0]=a,j[1]=l,j[2]=u,j[3]=d),A>w&&(A=w,j[0]=l,j[1]=u,j[2]=d,j[3]=a),A>b&&(j[0]=u,j[1]=d,j[2]=a,j[3]=l),j}detectSolid2(s){let a=s[0],l=s[1],u=s[2],d=s[3],g=this.transitionsBetween(a,d),x=zt.shiftPoint(l,u,(g+1)*4),w=zt.shiftPoint(u,l,(g+1)*4),b=this.transitionsBetween(x,a),A=this.transitionsBetween(w,d);return b<A?(s[0]=a,s[1]=l,s[2]=u,s[3]=d):(s[0]=l,s[1]=u,s[2]=d,s[3]=a),s}correctTopRight(s){let a=s[0],l=s[1],u=s[2],d=s[3],g=this.transitionsBetween(a,d),x=this.transitionsBetween(l,d),w=zt.shiftPoint(a,l,(x+1)*4),b=zt.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(w,d),x=this.transitionsBetween(b,d);let A=new ge(d.getX()+(u.getX()-l.getX())/(g+1),d.getY()+(u.getY()-l.getY())/(g+1)),j=new ge(d.getX()+(a.getX()-l.getX())/(x+1),d.getY()+(a.getY()-l.getY())/(x+1));if(!this.isValid(A))return this.isValid(j)?j:null;if(!this.isValid(j))return A;let P=this.transitionsBetween(w,A)+this.transitionsBetween(b,A),L=this.transitionsBetween(w,j)+this.transitionsBetween(b,j);return P>L?A:j}shiftToModuleCenter(s){let a=s[0],l=s[1],u=s[2],d=s[3],g=this.transitionsBetween(a,d)+1,x=this.transitionsBetween(u,d)+1,w=zt.shiftPoint(a,l,x*4),b=zt.shiftPoint(u,l,g*4);g=this.transitionsBetween(w,d)+1,x=this.transitionsBetween(b,d)+1,(g&1)===1&&(g+=1),(x&1)===1&&(x+=1);let A=(a.getX()+l.getX()+u.getX()+d.getX())/4,j=(a.getY()+l.getY()+u.getY()+d.getY())/4;a=zt.moveAway(a,A,j),l=zt.moveAway(l,A,j),u=zt.moveAway(u,A,j),d=zt.moveAway(d,A,j);let P,L;return w=zt.shiftPoint(a,l,x*4),w=zt.shiftPoint(w,d,g*4),P=zt.shiftPoint(l,a,x*4),P=zt.shiftPoint(P,u,g*4),b=zt.shiftPoint(u,d,x*4),b=zt.shiftPoint(b,l,g*4),L=zt.shiftPoint(d,u,x*4),L=zt.shiftPoint(L,a,g*4),[w,P,b,L]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,a,l,u,d,g,x){return $n.getInstance().sampleGrid(s,g,x,.5,.5,g-.5,.5,g-.5,x-.5,.5,x-.5,a.getX(),a.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,a){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(a.getX()),g=Math.trunc(a.getY()),x=Math.abs(g-u)>Math.abs(d-l);if(x){let W=l;l=u,u=W,W=d,d=g,g=W}let w=Math.abs(d-l),b=Math.abs(g-u),A=-w/2,j=u<g?1:-1,P=l<d?1:-1,L=0,U=this.image.get(x?u:l,x?l:u);for(let W=l,X=u;W!==d;W+=P){let Z=this.image.get(x?X:W,x?W:X);if(Z!==U&&(L++,U=Z),A+=b,A>0){if(X===g)break;X+=j,A-=w}}return L}}class Ls{constructor(){this.decoder=new l3}decode(s,a=null){let l,u;if(a!=null&&a.has(V.PURE_BARCODE)){const b=Ls.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(b),u=Ls.NO_POINTS}else{const b=new zt(s.getBlackMatrix()).detect();l=this.decoder.decode(b.getBits()),u=b.getPoints()}const d=l.getRawBytes(),g=new Be(l.getText(),d,8*d.length,u,pe.DATA_MATRIX,T.currentTimeMillis()),x=l.getByteSegments();x!=null&&g.putMetadata(Xe.BYTE_SEGMENTS,x);const w=l.getECLevel();return w!=null&&g.putMetadata(Xe.ERROR_CORRECTION_LEVEL,w),g}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a==null||l==null)throw new $;const u=this.moduleSize(a,s);let d=a[1];const g=l[1];let x=a[0];const b=(l[0]-x+1)/u,A=(g-d+1)/u;if(b<=0||A<=0)throw new $;const j=u/2;d+=j,x+=j;const P=new ne(b,A);for(let L=0;L<A;L++){const U=d+L*u;for(let W=0;W<b;W++)s.get(x+W*u,U)&&P.set(W,L)}return P}static moduleSize(s,a){const l=a.getWidth();let u=s[0];const d=s[1];for(;u<l&&a.get(u,d);)u++;if(u===l)throw new $;const g=u-s[0];if(g===0)throw new $;return g}}Ls.NO_POINTS=[];class c3 extends Ke{constructor(s=500){super(new Ls,s)}}var uo;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(uo||(uo={}));class ut{constructor(s,a,l){this.value=s,this.stringValue=a,this.bits=l,ut.FOR_BITS.set(l,this),ut.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return ut.L;case"M":return ut.M;case"Q":return ut.Q;case"H":return ut.H;default:throw new y(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof ut))return!1;const a=s;return this.value===a.value}static forBits(s){if(s<0||s>=ut.FOR_BITS.size)throw new v;return ut.FOR_BITS.get(s)}}ut.FOR_BITS=new Map,ut.FOR_VALUE=new Map,ut.L=new ut(uo.L,"L",1),ut.M=new ut(uo.M,"M",0),ut.Q=new ut(uo.Q,"Q",3),ut.H=new ut(uo.H,"H",2);class _n{constructor(s){this.errorCorrectionLevel=ut.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,a){return N.bitCount(s^a)}static decodeFormatInformation(s,a){const l=_n.doDecodeFormatInformation(s,a);return l!==null?l:_n.doDecodeFormatInformation(s^_n.FORMAT_INFO_MASK_QR,a^_n.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of _n.FORMAT_INFO_DECODE_LOOKUP){const g=d[0];if(g===s||g===a)return new _n(d[1]);let x=_n.numBitsDiffering(s,g);x<l&&(u=d[1],l=x),s!==a&&(x=_n.numBitsDiffering(a,g),x<l&&(u=d[1],l=x))}return l<=3?new _n(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof _n))return!1;const a=s;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}_n.FORMAT_INFO_MASK_QR=21522,_n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class K{constructor(s,...a){this.ecCodewordsPerBlock=s,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const a=this.ecBlocks;for(const l of a)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(s,a){this.count=s,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Se{constructor(s,a,...l){this.versionNumber=s,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const x of g)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new B;try{return this.getVersionForNumber((s-17)/4)}catch{throw new B}}static getVersionForNumber(s){if(s<1||s>40)throw new v;return Se.VERSIONS[s-1]}static decodeVersionInformation(s){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<Se.VERSION_DECODE_INFO.length;u++){const d=Se.VERSION_DECODE_INFO[u];if(d===s)return Se.getVersionForNumber(u+7);const g=_n.numBitsDiffering(s,d);g<a&&(l=u+7,a=g)}return a<=3?Se.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),a=new ne(s);a.setRegion(0,0,9,9),a.setRegion(s-8,0,8,9),a.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,d,5,5)}return a.setRegion(6,9,1,s-17),a.setRegion(9,6,s-17,1),this.versionNumber>6&&(a.setRegion(s-11,0,3,6),a.setRegion(0,s-11,6,3)),a}toString(){return""+this.versionNumber}}Se.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Se.VERSIONS=[new Se(1,new Int32Array(0),new K(7,new D(1,19)),new K(10,new D(1,16)),new K(13,new D(1,13)),new K(17,new D(1,9))),new Se(2,Int32Array.from([6,18]),new K(10,new D(1,34)),new K(16,new D(1,28)),new K(22,new D(1,22)),new K(28,new D(1,16))),new Se(3,Int32Array.from([6,22]),new K(15,new D(1,55)),new K(26,new D(1,44)),new K(18,new D(2,17)),new K(22,new D(2,13))),new Se(4,Int32Array.from([6,26]),new K(20,new D(1,80)),new K(18,new D(2,32)),new K(26,new D(2,24)),new K(16,new D(4,9))),new Se(5,Int32Array.from([6,30]),new K(26,new D(1,108)),new K(24,new D(2,43)),new K(18,new D(2,15),new D(2,16)),new K(22,new D(2,11),new D(2,12))),new Se(6,Int32Array.from([6,34]),new K(18,new D(2,68)),new K(16,new D(4,27)),new K(24,new D(4,19)),new K(28,new D(4,15))),new Se(7,Int32Array.from([6,22,38]),new K(20,new D(2,78)),new K(18,new D(4,31)),new K(18,new D(2,14),new D(4,15)),new K(26,new D(4,13),new D(1,14))),new Se(8,Int32Array.from([6,24,42]),new K(24,new D(2,97)),new K(22,new D(2,38),new D(2,39)),new K(22,new D(4,18),new D(2,19)),new K(26,new D(4,14),new D(2,15))),new Se(9,Int32Array.from([6,26,46]),new K(30,new D(2,116)),new K(22,new D(3,36),new D(2,37)),new K(20,new D(4,16),new D(4,17)),new K(24,new D(4,12),new D(4,13))),new Se(10,Int32Array.from([6,28,50]),new K(18,new D(2,68),new D(2,69)),new K(26,new D(4,43),new D(1,44)),new K(24,new D(6,19),new D(2,20)),new K(28,new D(6,15),new D(2,16))),new Se(11,Int32Array.from([6,30,54]),new K(20,new D(4,81)),new K(30,new D(1,50),new D(4,51)),new K(28,new D(4,22),new D(4,23)),new K(24,new D(3,12),new D(8,13))),new Se(12,Int32Array.from([6,32,58]),new K(24,new D(2,92),new D(2,93)),new K(22,new D(6,36),new D(2,37)),new K(26,new D(4,20),new D(6,21)),new K(28,new D(7,14),new D(4,15))),new Se(13,Int32Array.from([6,34,62]),new K(26,new D(4,107)),new K(22,new D(8,37),new D(1,38)),new K(24,new D(8,20),new D(4,21)),new K(22,new D(12,11),new D(4,12))),new Se(14,Int32Array.from([6,26,46,66]),new K(30,new D(3,115),new D(1,116)),new K(24,new D(4,40),new D(5,41)),new K(20,new D(11,16),new D(5,17)),new K(24,new D(11,12),new D(5,13))),new Se(15,Int32Array.from([6,26,48,70]),new K(22,new D(5,87),new D(1,88)),new K(24,new D(5,41),new D(5,42)),new K(30,new D(5,24),new D(7,25)),new K(24,new D(11,12),new D(7,13))),new Se(16,Int32Array.from([6,26,50,74]),new K(24,new D(5,98),new D(1,99)),new K(28,new D(7,45),new D(3,46)),new K(24,new D(15,19),new D(2,20)),new K(30,new D(3,15),new D(13,16))),new Se(17,Int32Array.from([6,30,54,78]),new K(28,new D(1,107),new D(5,108)),new K(28,new D(10,46),new D(1,47)),new K(28,new D(1,22),new D(15,23)),new K(28,new D(2,14),new D(17,15))),new Se(18,Int32Array.from([6,30,56,82]),new K(30,new D(5,120),new D(1,121)),new K(26,new D(9,43),new D(4,44)),new K(28,new D(17,22),new D(1,23)),new K(28,new D(2,14),new D(19,15))),new Se(19,Int32Array.from([6,30,58,86]),new K(28,new D(3,113),new D(4,114)),new K(26,new D(3,44),new D(11,45)),new K(26,new D(17,21),new D(4,22)),new K(26,new D(9,13),new D(16,14))),new Se(20,Int32Array.from([6,34,62,90]),new K(28,new D(3,107),new D(5,108)),new K(26,new D(3,41),new D(13,42)),new K(30,new D(15,24),new D(5,25)),new K(28,new D(15,15),new D(10,16))),new Se(21,Int32Array.from([6,28,50,72,94]),new K(28,new D(4,116),new D(4,117)),new K(26,new D(17,42)),new K(28,new D(17,22),new D(6,23)),new K(30,new D(19,16),new D(6,17))),new Se(22,Int32Array.from([6,26,50,74,98]),new K(28,new D(2,111),new D(7,112)),new K(28,new D(17,46)),new K(30,new D(7,24),new D(16,25)),new K(24,new D(34,13))),new Se(23,Int32Array.from([6,30,54,78,102]),new K(30,new D(4,121),new D(5,122)),new K(28,new D(4,47),new D(14,48)),new K(30,new D(11,24),new D(14,25)),new K(30,new D(16,15),new D(14,16))),new Se(24,Int32Array.from([6,28,54,80,106]),new K(30,new D(6,117),new D(4,118)),new K(28,new D(6,45),new D(14,46)),new K(30,new D(11,24),new D(16,25)),new K(30,new D(30,16),new D(2,17))),new Se(25,Int32Array.from([6,32,58,84,110]),new K(26,new D(8,106),new D(4,107)),new K(28,new D(8,47),new D(13,48)),new K(30,new D(7,24),new D(22,25)),new K(30,new D(22,15),new D(13,16))),new Se(26,Int32Array.from([6,30,58,86,114]),new K(28,new D(10,114),new D(2,115)),new K(28,new D(19,46),new D(4,47)),new K(28,new D(28,22),new D(6,23)),new K(30,new D(33,16),new D(4,17))),new Se(27,Int32Array.from([6,34,62,90,118]),new K(30,new D(8,122),new D(4,123)),new K(28,new D(22,45),new D(3,46)),new K(30,new D(8,23),new D(26,24)),new K(30,new D(12,15),new D(28,16))),new Se(28,Int32Array.from([6,26,50,74,98,122]),new K(30,new D(3,117),new D(10,118)),new K(28,new D(3,45),new D(23,46)),new K(30,new D(4,24),new D(31,25)),new K(30,new D(11,15),new D(31,16))),new Se(29,Int32Array.from([6,30,54,78,102,126]),new K(30,new D(7,116),new D(7,117)),new K(28,new D(21,45),new D(7,46)),new K(30,new D(1,23),new D(37,24)),new K(30,new D(19,15),new D(26,16))),new Se(30,Int32Array.from([6,26,52,78,104,130]),new K(30,new D(5,115),new D(10,116)),new K(28,new D(19,47),new D(10,48)),new K(30,new D(15,24),new D(25,25)),new K(30,new D(23,15),new D(25,16))),new Se(31,Int32Array.from([6,30,56,82,108,134]),new K(30,new D(13,115),new D(3,116)),new K(28,new D(2,46),new D(29,47)),new K(30,new D(42,24),new D(1,25)),new K(30,new D(23,15),new D(28,16))),new Se(32,Int32Array.from([6,34,60,86,112,138]),new K(30,new D(17,115)),new K(28,new D(10,46),new D(23,47)),new K(30,new D(10,24),new D(35,25)),new K(30,new D(19,15),new D(35,16))),new Se(33,Int32Array.from([6,30,58,86,114,142]),new K(30,new D(17,115),new D(1,116)),new K(28,new D(14,46),new D(21,47)),new K(30,new D(29,24),new D(19,25)),new K(30,new D(11,15),new D(46,16))),new Se(34,Int32Array.from([6,34,62,90,118,146]),new K(30,new D(13,115),new D(6,116)),new K(28,new D(14,46),new D(23,47)),new K(30,new D(44,24),new D(7,25)),new K(30,new D(59,16),new D(1,17))),new Se(35,Int32Array.from([6,30,54,78,102,126,150]),new K(30,new D(12,121),new D(7,122)),new K(28,new D(12,47),new D(26,48)),new K(30,new D(39,24),new D(14,25)),new K(30,new D(22,15),new D(41,16))),new Se(36,Int32Array.from([6,24,50,76,102,128,154]),new K(30,new D(6,121),new D(14,122)),new K(28,new D(6,47),new D(34,48)),new K(30,new D(46,24),new D(10,25)),new K(30,new D(2,15),new D(64,16))),new Se(37,Int32Array.from([6,28,54,80,106,132,158]),new K(30,new D(17,122),new D(4,123)),new K(28,new D(29,46),new D(14,47)),new K(30,new D(49,24),new D(10,25)),new K(30,new D(24,15),new D(46,16))),new Se(38,Int32Array.from([6,32,58,84,110,136,162]),new K(30,new D(4,122),new D(18,123)),new K(28,new D(13,46),new D(32,47)),new K(30,new D(48,24),new D(14,25)),new K(30,new D(42,15),new D(32,16))),new Se(39,Int32Array.from([6,26,54,82,110,138,166]),new K(30,new D(20,117),new D(4,118)),new K(28,new D(40,47),new D(7,48)),new K(30,new D(43,24),new D(22,25)),new K(30,new D(10,15),new D(67,16))),new Se(40,Int32Array.from([6,30,58,86,114,142,170]),new K(30,new D(19,118),new D(6,119)),new K(28,new D(18,47),new D(31,48)),new K(30,new D(34,24),new D(34,25)),new K(30,new D(20,15),new D(61,16)))];var cn;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(cn||(cn={}));class br{constructor(s,a){this.value=s,this.isMasked=a}unmaskBitMatrix(s,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&s.flip(u,l)}}br.values=new Map([[cn.DATA_MASK_000,new br(cn.DATA_MASK_000,(R,s)=>(R+s&1)===0)],[cn.DATA_MASK_001,new br(cn.DATA_MASK_001,(R,s)=>(R&1)===0)],[cn.DATA_MASK_010,new br(cn.DATA_MASK_010,(R,s)=>s%3===0)],[cn.DATA_MASK_011,new br(cn.DATA_MASK_011,(R,s)=>(R+s)%3===0)],[cn.DATA_MASK_100,new br(cn.DATA_MASK_100,(R,s)=>(Math.floor(R/2)+Math.floor(s/3)&1)===0)],[cn.DATA_MASK_101,new br(cn.DATA_MASK_101,(R,s)=>R*s%6===0)],[cn.DATA_MASK_110,new br(cn.DATA_MASK_110,(R,s)=>R*s%6<3)],[cn.DATA_MASK_111,new br(cn.DATA_MASK_111,(R,s)=>(R+s+R*s%3&1)===0)]]);class u3{constructor(s){const a=s.getHeight();if(a<21||(a&3)!==1)throw new B;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let d=a-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=a-8;d<a;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=_n.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),a=Math.floor((s-17)/4);if(a<=6)return Se.getVersionForNumber(a);let l=0;const u=s-11;for(let g=5;g>=0;g--)for(let x=s-9;x>=u;x--)l=this.copyBit(x,g,l);let d=Se.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let g=5;g>=0;g--)for(let x=s-9;x>=u;x--)l=this.copyBit(g,x,l);if(d=Se.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new B}copyBit(s,a,l){return(this.isMirror?this.bitMatrix.get(a,s):this.bitMatrix.get(s,a))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),a=this.readVersion(),l=br.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=a.buildFunctionPattern();let g=!0;const x=new Uint8Array(a.getTotalCodewords());let w=0,b=0,A=0;for(let j=u-1;j>0;j-=2){j===6&&j--;for(let P=0;P<u;P++){const L=g?u-1-P:P;for(let U=0;U<2;U++)d.get(j-U,L)||(A++,b<<=1,this.bitMatrix.get(j-U,L)&&(b|=1),A===8&&(x[w++]=b,A=0,b=0))}g=!g}if(w!==a.getTotalCodewords())throw new B;return x}remask(){if(this.parsedFormatInfo===null)return;const s=br.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,a)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let a=0,l=s.getWidth();a<l;a++)for(let u=a+1,d=s.getHeight();u<d;u++)s.get(a,u)!==s.get(u,a)&&(s.flip(u,a),s.flip(a,u))}}class xh{constructor(s,a){this.numDataCodewords=s,this.codewords=a}static getDataBlocks(s,a,l){if(s.length!==a.getTotalCodewords())throw new v;const u=a.getECBlocksForLevel(l);let d=0;const g=u.getECBlocks();for(const U of g)d+=U.getCount();const x=new Array(d);let w=0;for(const U of g)for(let W=0;W<U.getCount();W++){const X=U.getDataCodewords(),Z=u.getECCodewordsPerBlock()+X;x[w++]=new xh(X,new Uint8Array(Z))}const b=x[0].codewords.length;let A=x.length-1;for(;A>=0&&x[A].codewords.length!==b;)A--;A++;const j=b-u.getECCodewordsPerBlock();let P=0;for(let U=0;U<j;U++)for(let W=0;W<w;W++)x[W].codewords[U]=s[P++];for(let U=A;U<w;U++)x[U].codewords[j]=s[P++];const L=x[0].codewords.length;for(let U=j;U<L;U++)for(let W=0;W<w;W++){const X=W<A?U:U+1;x[W].codewords[X]=s[P++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Cr;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(Cr||(Cr={}));class Te{constructor(s,a,l,u){this.value=s,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,Te.FOR_BITS.set(u,this),Te.FOR_VALUE.set(s,this)}static forBits(s){const a=Te.FOR_BITS.get(s);if(a===void 0)throw new v;return a}getCharacterCountBits(s){const a=s.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Te))return!1;const a=s;return this.value===a.value}toString(){return this.stringValue}}Te.FOR_BITS=new Map,Te.FOR_VALUE=new Map,Te.TERMINATOR=new Te(Cr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Te.NUMERIC=new Te(Cr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Te.ALPHANUMERIC=new Te(Cr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Te.STRUCTURED_APPEND=new Te(Cr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Te.BYTE=new Te(Cr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Te.ECI=new Te(Cr.ECI,"ECI",Int32Array.from([0,0,0]),7),Te.KANJI=new Te(Cr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Te.FNC1_FIRST_POSITION=new Te(Cr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Te.FNC1_SECOND_POSITION=new Te(Cr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Te.HANZI=new Te(Cr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class _t{static decode(s,a,l,u){const d=new gh(s);let g=new de;const x=new Array;let w=-1,b=-1;try{let A=null,j=!1,P;do{if(d.available()<4)P=Te.TERMINATOR;else{const L=d.readBits(4);P=Te.forBits(L)}switch(P){case Te.TERMINATOR:break;case Te.FNC1_FIRST_POSITION:case Te.FNC1_SECOND_POSITION:j=!0;break;case Te.STRUCTURED_APPEND:if(d.available()<16)throw new B;w=d.readBits(8),b=d.readBits(8);break;case Te.ECI:const L=_t.parseECIValue(d);if(A=H.getCharacterSetECIByValue(L),A===null)throw new B;break;case Te.HANZI:const U=d.readBits(4),W=d.readBits(P.getCharacterCountBits(a));U===_t.GB2312_SUBSET&&_t.decodeHanziSegment(d,g,W);break;default:const X=d.readBits(P.getCharacterCountBits(a));switch(P){case Te.NUMERIC:_t.decodeNumericSegment(d,g,X);break;case Te.ALPHANUMERIC:_t.decodeAlphanumericSegment(d,g,X,j);break;case Te.BYTE:_t.decodeByteSegment(d,g,X,A,x,u);break;case Te.KANJI:_t.decodeKanjiSegment(d,g,X);break;default:throw new B}break}}while(P!==Te.TERMINATOR)}catch{throw new B}return new Hn(s,g.toString(),x.length===0?null:x,l===null?null:l.toString(),w,b)}static decodeHanziSegment(s,a,l){if(l*13>s.available())throw new B;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const g=s.readBits(13);let x=g/96<<8&4294967295|g%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{a.append(he.decode(u,te.GB2312))}catch(g){throw new B(g)}}static decodeKanjiSegment(s,a,l){if(l*13>s.available())throw new B;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const g=s.readBits(13);let x=g/192<<8&4294967295|g%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{a.append(he.decode(u,te.SHIFT_JIS))}catch(g){throw new B(g)}}static decodeByteSegment(s,a,l,u,d,g){if(8*l>s.available())throw new B;const x=new Uint8Array(l);for(let b=0;b<l;b++)x[b]=s.readBits(8);let w;u===null?w=te.guessEncoding(x,g):w=u.getName();try{a.append(he.decode(x,w))}catch(b){throw new B(b)}d.push(x)}static toAlphaNumericChar(s){if(s>=_t.ALPHANUMERIC_CHARS.length)throw new B;return _t.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,a,l,u){const d=a.length();for(;l>1;){if(s.available()<11)throw new B;const g=s.readBits(11);a.append(_t.toAlphaNumericChar(Math.floor(g/45))),a.append(_t.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(s.available()<6)throw new B;a.append(_t.toAlphaNumericChar(s.readBits(6)))}if(u)for(let g=d;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(s,a,l){for(;l>=3;){if(s.available()<10)throw new B;const u=s.readBits(10);if(u>=1e3)throw new B;a.append(_t.toAlphaNumericChar(Math.floor(u/100))),a.append(_t.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(_t.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(s.available()<7)throw new B;const u=s.readBits(7);if(u>=100)throw new B;a.append(_t.toAlphaNumericChar(Math.floor(u/10))),a.append(_t.toAlphaNumericChar(u%10))}else if(l===1){if(s.available()<4)throw new B;const u=s.readBits(4);if(u>=10)throw new B;a.append(_t.toAlphaNumericChar(u))}}static parseECIValue(s){const a=s.readBits(8);if(!(a&128))return a&127;if((a&192)===128){const l=s.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=s.readBits(16);return(a&31)<<16&4294967295|l}throw new B}}_t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",_t.GB2312_SUBSET=1;class km{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const a=s[0];s[0]=s[2],s[2]=a}}class d3{constructor(){this.rsDecoder=new sr(ze.QR_CODE_FIELD_256)}decodeBooleanArray(s,a){return this.decodeBitMatrix(ne.parseFromBooleanArray(s),a)}decodeBitMatrix(s,a){const l=new u3(s);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,a);return d.setOther(new km(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,a){const l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),g=xh.getDataBlocks(d,l,u);let x=0;for(const A of g)x+=A.getNumDataCodewords();const w=new Uint8Array(x);let b=0;for(const A of g){const j=A.getCodewords(),P=A.getNumDataCodewords();this.correctErrors(j,P);for(let L=0;L<P;L++)w[b++]=j[L]}return _t.decode(w,l,u,a)}correctErrors(s,a){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-a)}catch{throw new E}for(let u=0;u<a;u++)s[u]=l[u]}}class yh extends ge{constructor(s,a,l){super(s,a),this.estimatedModuleSize=l}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=(this.getX()+a)/2,d=(this.getY()+s)/2,g=(this.estimatedModuleSize+l)/2;return new yh(u,d,g)}}class xc{constructor(s,a,l,u,d,g,x){this.image=s,this.startX=a,this.startY=l,this.width=u,this.height=d,this.moduleSize=g,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,a=this.height,l=this.width,u=s+l,d=this.startY+a/2,g=new Int32Array(3),x=this.image;for(let w=0;w<a;w++){const b=d+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));g[0]=0,g[1]=0,g[2]=0;let A=s;for(;A<u&&!x.get(A,b);)A++;let j=0;for(;A<u;){if(x.get(A,b))if(j===1)g[1]++;else if(j===2){if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,b,A);if(P!==null)return P}g[0]=g[2],g[1]=1,g[2]=0,j=1}else g[++j]++;else j===1&&j++,g[j]++;A++}if(this.foundPatternCross(g)){const P=this.handlePossibleCenter(g,b,u);if(P!==null)return P}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new $}static centerFromEnd(s,a){return a-s[2]-s[1]/2}foundPatternCross(s){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-s[u])>=l)return!1;return!0}crossCheckVertical(s,a,l,u){const d=this.image,g=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let w=s;for(;w>=0&&d.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&!d.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=s+1;w<g&&d.get(a,w)&&x[1]<=l;)x[1]++,w++;if(w===g||x[1]>l)return NaN;for(;w<g&&!d.get(a,w)&&x[2]<=l;)x[2]++,w++;if(x[2]>l)return NaN;const b=x[0]+x[1]+x[2];return 5*Math.abs(b-u)>=2*u?NaN:this.foundPatternCross(x)?xc.centerFromEnd(x,w):NaN}handlePossibleCenter(s,a,l){const u=s[0]+s[1]+s[2],d=xc.centerFromEnd(s,l),g=this.crossCheckVertical(a,d,2*s[1],u);if(!isNaN(g)){const x=(s[0]+s[1]+s[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(x,g,d))return b.combineEstimate(g,d,x);const w=new yh(d,g,x);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class vh extends ge{constructor(s,a,l,u){super(s,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,a,l){if(Math.abs(a-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,a,l){const u=this.count+1,d=(this.count*this.getX()+a)/u,g=(this.count*this.getY()+s)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new vh(d,g,x,u)}}class h3{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class un{constructor(s,a){this.image=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const a=s!=null&&s.get(V.TRY_HARDER)!==void 0,l=s!=null&&s.get(V.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),g=u.getWidth();let x=Math.floor(3*d/(4*un.MAX_MODULES));(x<un.MIN_SKIP||a)&&(x=un.MIN_SKIP);let w=!1;const b=new Int32Array(5);for(let j=x-1;j<d&&!w;j+=x){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let P=0;for(let L=0;L<g;L++)if(u.get(L,j))(P&1)===1&&P++,b[P]++;else if(P&1)b[P]++;else if(P===4)if(un.foundPatternCross(b)){if(this.handlePossibleCenter(b,j,L,l)===!0)if(x=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const W=this.findRowSkip();W>b[2]&&(j+=W-b[2]-x,L=g-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,P=3;continue}P=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,P=3;else b[++P]++;un.foundPatternCross(b)&&this.handlePossibleCenter(b,j,g,l)===!0&&(x=b[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const A=this.selectBestPatterns();return ge.orderBestPatterns(A),new h3(A)}static centerFromEnd(s,a){return a-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let a=0;for(let d=0;d<5;d++){const g=s[d];if(g===0)return!1;a+=g}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-s[0])<u&&Math.abs(l-s[1])<u&&Math.abs(3*l-s[2])<3*u&&Math.abs(l-s[3])<u&&Math.abs(l-s[4])<u}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,a,l,u){const d=this.getCrossCheckStateCount();let g=0;const x=this.image;for(;s>=g&&a>=g&&x.get(a-g,s-g);)d[2]++,g++;if(s<g||a<g)return!1;for(;s>=g&&a>=g&&!x.get(a-g,s-g)&&d[1]<=l;)d[1]++,g++;if(s<g||a<g||d[1]>l)return!1;for(;s>=g&&a>=g&&x.get(a-g,s-g)&&d[0]<=l;)d[0]++,g++;if(d[0]>l)return!1;const w=x.getHeight(),b=x.getWidth();for(g=1;s+g<w&&a+g<b&&x.get(a+g,s+g);)d[2]++,g++;if(s+g>=w||a+g>=b)return!1;for(;s+g<w&&a+g<b&&!x.get(a+g,s+g)&&d[3]<l;)d[3]++,g++;if(s+g>=w||a+g>=b||d[3]>=l)return!1;for(;s+g<w&&a+g<b&&x.get(a+g,s+g)&&d[4]<l;)d[4]++,g++;if(d[4]>=l)return!1;const A=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(A-u)<2*u&&un.foundPatternCross(d)}crossCheckVertical(s,a,l,u){const d=this.image,g=d.getHeight(),x=this.getCrossCheckStateCount();let w=s;for(;w>=0&&d.get(a,w);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(a,w)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&d.get(a,w)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=s+1;w<g&&d.get(a,w);)x[2]++,w++;if(w===g)return NaN;for(;w<g&&!d.get(a,w)&&x[3]<l;)x[3]++,w++;if(w===g||x[3]>=l)return NaN;for(;w<g&&d.get(a,w)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const b=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(b-u)>=2*u?NaN:un.foundPatternCross(x)?un.centerFromEnd(x,w):NaN}crossCheckHorizontal(s,a,l,u){const d=this.image,g=d.getWidth(),x=this.getCrossCheckStateCount();let w=s;for(;w>=0&&d.get(w,a);)x[2]++,w--;if(w<0)return NaN;for(;w>=0&&!d.get(w,a)&&x[1]<=l;)x[1]++,w--;if(w<0||x[1]>l)return NaN;for(;w>=0&&d.get(w,a)&&x[0]<=l;)x[0]++,w--;if(x[0]>l)return NaN;for(w=s+1;w<g&&d.get(w,a);)x[2]++,w++;if(w===g)return NaN;for(;w<g&&!d.get(w,a)&&x[3]<l;)x[3]++,w++;if(w===g||x[3]>=l)return NaN;for(;w<g&&d.get(w,a)&&x[4]<l;)x[4]++,w++;if(x[4]>=l)return NaN;const b=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(b-u)>=u?NaN:un.foundPatternCross(x)?un.centerFromEnd(x,w):NaN}handlePossibleCenter(s,a,l,u){const d=s[0]+s[1]+s[2]+s[3]+s[4];let g=un.centerFromEnd(s,l),x=this.crossCheckVertical(a,Math.floor(g),s[2],d);if(!isNaN(x)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(x),s[2],d),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(g),s[2],d)))){const w=d/7;let b=!1;const A=this.possibleCenters;for(let j=0,P=A.length;j<P;j++){const L=A[j];if(L.aboutEquals(w,x,g)){A[j]=L.combineEstimate(x,g,w),b=!0;break}}if(!b){const j=new vh(g,x,w);A.push(j),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(j)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=un.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,a=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=un.CENTER_QUORUM&&(s++,a+=g.getEstimatedModuleSize());if(s<3)return!1;const u=a/l;let d=0;for(const g of this.possibleCenters)d+=Math.abs(g.getEstimatedModuleSize()-u);return d<=.05*a}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new $;const a=this.possibleCenters;let l;if(s>3){let u=0,d=0;for(const w of this.possibleCenters){const b=w.getEstimatedModuleSize();u+=b,d+=b*b}l=u/s;let g=Math.sqrt(d/s-l*l);a.sort((w,b)=>{const A=Math.abs(b.getEstimatedModuleSize()-l),j=Math.abs(w.getEstimatedModuleSize()-l);return A<j?-1:A>j?1:0});const x=Math.max(.2*l,g);for(let w=0;w<a.length&&a.length>3;w++){const b=a[w];Math.abs(b.getEstimatedModuleSize()-l)>x&&(a.splice(w,1),w--)}}if(a.length>3){let u=0;for(const d of a)u+=d.getEstimatedModuleSize();l=u/a.length,a.sort((d,g)=>{if(g.getCount()===d.getCount()){const x=Math.abs(g.getEstimatedModuleSize()-l),w=Math.abs(d.getEstimatedModuleSize()-l);return x<w?1:x>w?-1:0}else return g.getCount()-d.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}un.CENTER_QUORUM=2,un.MIN_SKIP=3,un.MAX_MODULES=57;class Ia{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(V.NEED_RESULT_POINT_CALLBACK);const l=new un(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const a=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(a,l,u);if(d<1)throw new $("No pattern found in proccess finder.");const g=Ia.computeDimension(a,l,u,d),x=Se.getProvisionalVersionForDimension(g),w=x.getDimensionForVersion()-7;let b=null;if(x.getAlignmentPatternCenters().length>0){const L=l.getX()-a.getX()+u.getX(),U=l.getY()-a.getY()+u.getY(),W=1-3/w,X=Math.floor(a.getX()+W*(L-a.getX())),Z=Math.floor(a.getY()+W*(U-a.getY()));for(let ae=4;ae<=16;ae<<=1)try{b=this.findAlignmentInRegion(d,X,Z,ae);break}catch(le){if(!(le instanceof $))throw le}}const A=Ia.createTransform(a,l,u,b,g),j=Ia.sampleGrid(this.image,A,g);let P;return b===null?P=[u,a,l]:P=[u,a,l,b],new Dn(j,P)}static createTransform(s,a,l,u,d){const g=d-3.5;let x,w,b,A;return u!==null?(x=u.getX(),w=u.getY(),b=g-3,A=b):(x=a.getX()-s.getX()+l.getX(),w=a.getY()-s.getY()+l.getY(),b=g,A=g),Zt.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,b,A,3.5,g,s.getX(),s.getY(),a.getX(),a.getY(),x,w,l.getX(),l.getY())}static sampleGrid(s,a,l){return $n.getInstance().sampleGridWithTransform(s,l,l,a)}static computeDimension(s,a,l,u){const d=De.round(ge.distance(s,a)/u),g=De.round(ge.distance(s,l)/u);let x=Math.floor((d+g)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new $("Dimensions could be not found.")}return x}calculateModuleSize(s,a,l){return(this.calculateModuleSizeOneWay(s,a)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,a,l,u){let d=this.sizeOfBlackWhiteBlackRun(s,a,l,u),g=1,x=s-(l-s);x<0?(g=s/(s-x),x=0):x>=this.image.getWidth()&&(g=(this.image.getWidth()-1-s)/(x-s),x=this.image.getWidth()-1);let w=Math.floor(a-(u-a)*g);return g=1,w<0?(g=a/(a-w),w=0):w>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(w-a),w=this.image.getHeight()-1),x=Math.floor(s+(x-s)*g),d+=this.sizeOfBlackWhiteBlackRun(s,a,x,w),d-1}sizeOfBlackWhiteBlackRun(s,a,l,u){const d=Math.abs(u-a)>Math.abs(l-s);if(d){let L=s;s=a,a=L,L=l,l=u,u=L}const g=Math.abs(l-s),x=Math.abs(u-a);let w=-g/2;const b=s<l?1:-1,A=a<u?1:-1;let j=0;const P=l+b;for(let L=s,U=a;L!==P;L+=b){const W=d?U:L,X=d?L:U;if(j===1===this.image.get(W,X)){if(j===2)return De.distance(L,U,s,a);j++}if(w+=x,w>0){if(U===u)break;U+=A,w-=g}}return j===2?De.distance(l+b,u,s,a):NaN}findAlignmentInRegion(s,a,l,u){const d=Math.floor(u*s),g=Math.max(0,a-d),x=Math.min(this.image.getWidth()-1,a+d);if(x-g<s*3)throw new $("Alignment top exceeds estimated module size.");const w=Math.max(0,l-d),b=Math.min(this.image.getHeight()-1,l+d);if(b-w<s*3)throw new $("Alignment bottom exceeds estimated module size.");return new xc(this.image,g,w,x-g,b-w,s,this.resultPointCallback).find()}}class Bs{constructor(){this.decoder=new d3}getDecoder(){return this.decoder}decode(s,a){let l,u;if(a!=null&&a.get(V.PURE_BARCODE)!==void 0){const w=Bs.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(w,a),u=Bs.NO_POINTS}else{const w=new Ia(s.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(w.getBits(),a),u=w.getPoints()}l.getOther()instanceof km&&l.getOther().applyMirroredCorrection(u);const d=new Be(l.getText(),l.getRawBytes(),void 0,u,pe.QR_CODE,void 0),g=l.getByteSegments();g!==null&&d.putMetadata(Xe.BYTE_SEGMENTS,g);const x=l.getECLevel();return x!==null&&d.putMetadata(Xe.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(Xe.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Xe.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){const a=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(a===null||l===null)throw new $;const u=this.moduleSize(a,s);let d=a[1],g=l[1],x=a[0],w=l[0];if(x>=w||d>=g)throw new $;if(g-d!==w-x&&(w=x+(g-d),w>=s.getWidth()))throw new $;const b=Math.round((w-x+1)/u),A=Math.round((g-d+1)/u);if(b<=0||A<=0)throw new $;if(A!==b)throw new $;const j=Math.floor(u/2);d+=j,x+=j;const P=x+Math.floor((b-1)*u)-w;if(P>0){if(P>j)throw new $;x-=P}const L=d+Math.floor((A-1)*u)-g;if(L>0){if(L>j)throw new $;d-=L}const U=new ne(b,A);for(let W=0;W<A;W++){const X=d+Math.floor(W*u);for(let Z=0;Z<b;Z++)s.get(x+Math.floor(Z*u),X)&&U.set(Z,W)}return U}static moduleSize(s,a){const l=a.getHeight(),u=a.getWidth();let d=s[0],g=s[1],x=!0,w=0;for(;d<u&&g<l;){if(x!==a.get(d,g)){if(++w===5)break;x=!x}d++,g++}if(d===u||g===l)throw new $;return(d-s[0])/7}}Bs.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(s){return De.sum(s)}static toIntArray(s){if(s==null||!s.length)return Pe.EMPTY_INT_ARRAY;const a=new Int32Array(s.length);let l=0;for(const u of s)a[l++]=u;return a}static getCodeword(s){const a=I.binarySearch(Pe.SYMBOL_TABLE,s&262143);return a<0?-1:(Pe.CODEWORD_TABLE[a]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class f3{constructor(s,a){this.bits=s,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class Fe{static detectMultiple(s,a,l){let u=s.getBlackMatrix(),d=Fe.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=Fe.detect(l,u)),new f3(u,d)}static detect(s,a){const l=new Array;let u=0,d=0,g=!1;for(;u<a.getHeight();){const x=Fe.findVertices(a,u,d);if(x[0]==null&&x[3]==null){if(!g)break;g=!1,d=0;for(const w of l)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=Fe.ROW_STEP;continue}if(g=!0,l.push(x),!s)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(s,a,l){const u=s.getHeight(),d=s.getWidth(),g=new Array(8);return Fe.copyToResult(g,Fe.findRowsWithPattern(s,u,d,a,l,Fe.START_PATTERN),Fe.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),Fe.copyToResult(g,Fe.findRowsWithPattern(s,u,d,a,l,Fe.STOP_PATTERN),Fe.INDEXES_STOP_PATTERN),g}static copyToResult(s,a,l){for(let u=0;u<l.length;u++)s[l[u]]=a[u]}static findRowsWithPattern(s,a,l,u,d,g){const x=new Array(4);let w=!1;const b=new Int32Array(g.length);for(;u<a;u+=Fe.ROW_STEP){let j=Fe.findGuardPattern(s,d,u,l,!1,g,b);if(j!=null){for(;u>0;){const P=Fe.findGuardPattern(s,d,--u,l,!1,g,b);if(P!=null)j=P;else{u++;break}}x[0]=new ge(j[0],u),x[1]=new ge(j[1],u),w=!0;break}}let A=u+1;if(w){let j=0,P=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;A<a;A++){const L=Fe.findGuardPattern(s,P[0],A,l,!1,g,b);if(L!=null&&Math.abs(P[0]-L[0])<Fe.MAX_PATTERN_DRIFT&&Math.abs(P[1]-L[1])<Fe.MAX_PATTERN_DRIFT)P=L,j=0;else{if(j>Fe.SKIPPED_ROW_COUNT_MAX)break;j++}}A-=j+1,x[2]=new ge(P[0],A),x[3]=new ge(P[1],A)}return A-u<Fe.BARCODE_MIN_HEIGHT&&I.fill(x,null),x}static findGuardPattern(s,a,l,u,d,g,x){I.fillWithin(x,0,x.length,0);let w=a,b=0;for(;s.get(w,l)&&w>0&&b++<Fe.MAX_PIXEL_DRIFT;)w--;let A=w,j=0,P=g.length;for(let L=d;A<u;A++)if(s.get(A,l)!==L)x[j]++;else{if(j===P-1){if(Fe.patternMatchVariance(x,g,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE)return new Int32Array([w,A]);w+=x[0]+x[1],T.arraycopy(x,2,x,0,j-1),x[j-1]=0,x[j]=0,j--}else j++;x[j]=1,L=!L}return j===P-1&&Fe.patternMatchVariance(x,g,Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE?new Int32Array([w,A-1]):null}static patternMatchVariance(s,a,l){let u=s.length,d=0,g=0;for(let b=0;b<u;b++)d+=s[b],g+=a[b];if(d<g)return 1/0;let x=d/g;l*=x;let w=0;for(let b=0;b<u;b++){let A=s[b],j=a[b]*x,P=A>j?A-j:j-A;if(P>l)return 1/0;w+=P}return w/d}}Fe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Fe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Fe.MAX_AVG_VARIANCE=.42,Fe.MAX_INDIVIDUAL_VARIANCE=.8,Fe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Fe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Fe.MAX_PIXEL_DRIFT=3,Fe.MAX_PATTERN_DRIFT=5,Fe.SKIPPED_ROW_COUNT_MAX=25,Fe.ROW_STEP=5,Fe.BARCODE_MIN_HEIGHT=10;class mn{constructor(s,a){if(a.length===0)throw new v;this.field=s;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),T.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(s,a),this.coefficients[u]);return a}add(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let a=this.coefficients,l=s.coefficients;if(a.length>l.length){let g=a;a=l,l=g}let u=new Int32Array(l.length),d=l.length-a.length;T.arraycopy(l,0,u,0,d);for(let g=d;g<l.length;g++)u[g]=this.field.add(a[g-d],l[g]);return new mn(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof mn?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new mn(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=s.coefficients,d=u.length,g=new Int32Array(l+d-1);for(let x=0;x<l;x++){let w=a[x];for(let b=0;b<d;b++)g[x+b]=this.field.add(g[x+b],this.field.multiply(w,u[b]))}return new mn(this.field,g)}negative(){let s=this.coefficients.length,a=new Int32Array(s);for(let l=0;l<s;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new mn(this.field,a)}multiplyScalar(s){if(s===0)return new mn(this.field,new Int32Array([0]));if(s===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new mn(this.field,l)}multiplyByMonomial(s,a){if(s<0)throw new v;if(a===0)return new mn(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],a);return new mn(this.field,u)}toString(){let s=new de;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(a===0||l!==1)&&s.append(l),a!==0&&(a===1?s.append("x"):(s.append("x^"),s.append(a))))}return s.toString()}}class p3{add(s,a){return(s+a)%this.modulus}subtract(s,a){return(this.modulus+s-a)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new v;return this.logTable[s]}inverse(s){if(s===0)throw new rr;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,a){return s===0||a===0?0:this.expTable[(this.logTable[s]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class wh extends p3{constructor(s,a){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*a%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new mn(this,new Int32Array([0])),this.one=new mn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,a){if(s<0)throw new v;if(a===0)return this.zero;let l=new Int32Array(s+1);return l[0]=a,new mn(this,l)}}wh.PDF417_GF=new wh(Pe.NUMBER_OF_CODEWORDS,3);class Om{constructor(){this.field=wh.PDF417_GF}decode(s,a,l){let u=new mn(this.field,s),d=new Int32Array(a),g=!1;for(let U=a;U>0;U--){let W=u.evaluateAt(this.field.exp(U));d[a-U]=W,W!==0&&(g=!0)}if(!g)return 0;let x=this.field.getOne();if(l!=null)for(const U of l){let W=this.field.exp(s.length-1-U),X=new mn(this.field,new Int32Array([this.field.subtract(0,W),1]));x=x.multiply(X)}let w=new mn(this.field,d),b=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),w,a),A=b[0],j=b[1],P=this.findErrorLocations(A),L=this.findErrorMagnitudes(j,A,P);for(let U=0;U<P.length;U++){let W=s.length-1-this.field.log(P[U]);if(W<0)throw E.getChecksumInstance();s[W]=this.field.subtract(s[W],L[U])}return P.length}runEuclideanAlgorithm(s,a,l){if(s.getDegree()<a.getDegree()){let P=s;s=a,a=P}let u=s,d=a,g=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let P=u,L=g;if(u=d,g=x,u.isZero())throw E.getChecksumInstance();d=P;let U=this.field.getZero(),W=u.getCoefficient(u.getDegree()),X=this.field.inverse(W);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let Z=d.getDegree()-u.getDegree(),ae=this.field.multiply(d.getCoefficient(d.getDegree()),X);U=U.add(this.field.buildMonomial(Z,ae)),d=d.subtract(u.multiplyByMonomial(Z,ae))}x=U.multiply(g).subtract(L).negative()}let w=x.getCoefficient(0);if(w===0)throw E.getChecksumInstance();let b=this.field.inverse(w),A=x.multiply(b),j=d.multiply(b);return[A,j]}findErrorLocations(s){let a=s.getDegree(),l=new Int32Array(a),u=0;for(let d=1;d<this.field.getSize()&&u<a;d++)s.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==a)throw E.getChecksumInstance();return l}findErrorMagnitudes(s,a,l){let u=a.getDegree(),d=new Int32Array(u);for(let b=1;b<=u;b++)d[u-b]=this.field.multiply(b,a.getCoefficient(b));let g=new mn(this.field,d),x=l.length,w=new Int32Array(x);for(let b=0;b<x;b++){let A=this.field.inverse(l[b]),j=this.field.subtract(0,s.evaluateAt(A)),P=this.field.inverse(g.evaluateAt(A));w[b]=this.field.multiply(j,P)}return w}}class bi{constructor(s,a,l,u,d){s instanceof bi?this.constructor_2(s):this.constructor_1(s,a,l,u,d)}constructor_1(s,a,l,u,d){const g=a==null||l==null,x=u==null||d==null;if(g&&x)throw new $;g?(a=new ge(0,u.getY()),l=new ge(0,d.getY())):x&&(u=new ge(s.getWidth()-1,a.getY()),d=new ge(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,a){return s==null?a:a==null?s:new bi(s.image,s.topLeft,s.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(s,a,l){let u=this.topLeft,d=this.bottomLeft,g=this.topRight,x=this.bottomRight;if(s>0){let w=l?this.topLeft:this.topRight,b=Math.trunc(w.getY()-s);b<0&&(b=0);let A=new ge(w.getX(),b);l?u=A:g=A}if(a>0){let w=l?this.bottomLeft:this.bottomRight,b=Math.trunc(w.getY()+a);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let A=new ge(w.getX(),b);l?d=A:x=A}return new bi(this.image,u,d,g,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class m3{constructor(s,a,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ka{constructor(){this.buffer=""}static form(s,a){let l=-1;function u(g,x,w,b,A,j){if(g==="%%")return"%";if(a[++l]===void 0)return;g=b?parseInt(b.substr(1)):void 0;let P=A?parseInt(A.substr(1)):void 0,L;switch(j){case"s":L=a[l];break;case"c":L=a[l][0];break;case"f":L=parseFloat(a[l]).toFixed(g);break;case"p":L=parseFloat(a[l]).toPrecision(g);break;case"e":L=parseFloat(a[l]).toExponential(g);break;case"x":L=parseInt(a[l]).toString(P||16);break;case"d":L=parseFloat(parseInt(a[l],P||10).toPrecision(g)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(P);let U=parseInt(w),W=w&&w[0]+""=="0"?"0":" ";for(;L.length<U;)L=x!==void 0?L+W:W+L;return L}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...a){this.buffer+=ka.form(s,a)}toString(){return this.buffer}}class Oa{constructor(s){this.boundingBox=new bi(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let a=this.getCodeword(s);if(a!=null)return a;for(let l=1;l<Oa.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(s)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(s)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,a){this.codewords[this.imageRowToCodewordIndex(s)]=a}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new ka;let a=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",a++);continue}s.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return s.toString()}}Oa.MAX_NEARBY_DISTANCE=5;class Ra{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let a=this.values.get(s);a==null&&(a=0),a++,this.values.set(s,a)}getValue(){let s=-1,a=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>s?(s=d.getValue(),a=[],a.push(d.getKey())):d.getValue()===s&&a.push(d.getKey())}return Pe.toIntArray(a)}getConfidence(s){return this.values.get(s)}}class Rm extends Oa{constructor(s,a){super(s),this._isLeft=a}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),w=-1,b=1,A=0;for(let j=g;j<x;j++){if(a[j]==null)continue;let P=a[j],L=P.getRowNumber()-w;if(L===0)A++;else if(L===1)b=Math.max(b,A),A=1,w=P.getRowNumber();else if(L<0||P.getRowNumber()>=s.getRowCount()||L>j)a[j]=null;else{let U;b>2?U=(b-2)*L:U=L;let W=U>=j;for(let X=1;X<=U&&!W;X++)W=a[j-X]!=null;W?a[j]=null:(w=P.getRowNumber(),A=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let a=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(s){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),w=-1;for(let b=d;b<g;b++){if(x[b]==null)continue;let A=x[b];A.setRowNumberAsRowIndicatorColumn();let j=A.getRowNumber()-w;j===0||(j===1?w=A.getRowNumber():A.getRowNumber()>=s.getRowCount()?x[b]=null:w=A.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),a=new Ra,l=new Ra,u=new Ra,d=new Ra;for(let x of s){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let w=x.getValue()%30,b=x.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:l.setValue(w*3+1);break;case 1:d.setValue(w/3),u.setValue(w%3);break;case 2:a.setValue(w+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let g=new m3(a.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,g),g}removeIncorrectCodewords(s,a){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let d=u.getValue()%30,g=u.getRowNumber();if(g>a.getRowCount()){s[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:d*3+1!==a.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==a.getErrorCorrectionLevel()||d%3!==a.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==a.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ja{constructor(s,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Pe.MAX_CODEWORDS_IN_BARCODE,a;do a=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&a[l]!=null&&s[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let g=this.barcodeColumnCount+1;g>0&&d<this.ADJUST_ROW_NUMBER_SKIP;g--){let x=this.detectionResultColumns[g].getCodewords()[l];x!=null&&(d=ja.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),d=0;for(let g=1;g<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;g++){let x=this.detectionResultColumns[g].getCodewords()[l];x!=null&&(d=ja.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),a=0):++a),a}adjustRowNumbers(s,a,l){if(!this.detectionResultColumns[s-1])return;let u=l[a],d=this.detectionResultColumns[s-1].getCodewords(),g=d;this.detectionResultColumns[s+1]!=null&&(g=this.detectionResultColumns[s+1].getCodewords());let x=new Array(14);x[2]=d[a],x[3]=g[a],a>0&&(x[0]=l[a-1],x[4]=d[a-1],x[5]=g[a-1]),a>1&&(x[8]=l[a-2],x[10]=d[a-2],x[11]=g[a-2]),a<l.length-1&&(x[1]=l[a+1],x[6]=d[a+1],x[7]=g[a+1]),a<l.length-2&&(x[9]=l[a+2],x[12]=d[a+2],x[13]=g[a+2]);for(let w of x)if(ja.adjustRowNumber(u,w))return}static adjustRowNumber(s,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===s.getBucket()?(s.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,a){this.detectionResultColumns[s]=a}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new ka;for(let l=0;l<s.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){a.format("    |   ");continue}a.format(" %3d|%3d",d.getRowNumber(),d.getValue())}a.format("%n")}return a.toString()}}class Pa{constructor(s,a,l,u){this.rowNumber=Pa.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Pa.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Pa.BARCODE_ROW_UNKNOWN=-1;class Xn{static initialize(){for(let s=0;s<Pe.SYMBOL_TABLE.length;s++){let a=Pe.SYMBOL_TABLE[s],l=a&1;for(let u=0;u<Pe.BARS_IN_MODULE;u++){let d=0;for(;(a&1)===l;)d+=1,a>>=1;l=a&1,Xn.RATIOS_TABLE[s]||(Xn.RATIOS_TABLE[s]=new Array(Pe.BARS_IN_MODULE)),Xn.RATIOS_TABLE[s][Pe.BARS_IN_MODULE-u-1]=Math.fround(d/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let a=Xn.getDecodedCodewordValue(Xn.sampleBitCounts(s));return a!==-1?a:Xn.getClosestDecodedValue(s)}static sampleBitCounts(s){let a=De.sum(s),l=new Int32Array(Pe.BARS_IN_MODULE),u=0,d=0;for(let g=0;g<Pe.MODULES_IN_CODEWORD;g++){let x=a/(2*Pe.MODULES_IN_CODEWORD)+g*a/Pe.MODULES_IN_CODEWORD;d+s[u]<=x&&(d+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let a=Xn.getBitValue(s);return Pe.getCodeword(a)===-1?-1:a}static getBitValue(s){let a=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(s){let a=De.sum(s),l=new Array(Pe.BARS_IN_MODULE);if(a>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(s[g]/a);let u=Ot.MAX_VALUE,d=-1;this.bSymbolTableReady||Xn.initialize();for(let g=0;g<Xn.RATIOS_TABLE.length;g++){let x=0,w=Xn.RATIOS_TABLE[g];for(let b=0;b<Pe.BARS_IN_MODULE;b++){let A=Math.fround(w[b]-l[b]);if(x+=Math.fround(A*A),x>=u)break}x<u&&(u=x,d=Pe.SYMBOL_TABLE[g])}return d}}Xn.bSymbolTableReady=!1,Xn.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(R=>new Array(Pe.BARS_IN_MODULE));class jm{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class Pm{static parseLong(s,a=void 0){return parseInt(s,a)}}class Mm extends m{}Mm.kind="NullPointerException";class g3{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,a,l){if(s==null)throw new Mm;if(a<0||a>s.length||l<0||a+l>s.length||a+l<0)throw new k;if(l===0)return;for(let u=0;u<l;u++)this.write(s[a+u])}flush(){}close(){}}class x3 extends m{}class y3 extends g3{constructor(s=32){if(super(),this.count=0,s<0)throw new v("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new x3;l=N.MAX_VALUE}this.buf=I.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,a,l){if(a<0||a>s.length||l<0||a+l-s.length>0)throw new k;this.ensureCapacity(this.count+l),T.arraycopy(s,a,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return I.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var at;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(at||(at={}));function Dm(){if(typeof window<"u")return window.BigInt||null;if(typeof La<"u")return La.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let yc;function Fs(R){if(typeof yc>"u"&&(yc=Dm()),yc===null)throw new Error("BigInt is not supported!");return yc(R)}function v3(){let R=[];R[0]=Fs(1);let s=Fs(900);R[1]=s;for(let a=2;a<16;a++)R[a]=R[a-1]*s;return R}class Y{static decode(s,a){let l=new de(""),u=H.ISO8859_1;l.enableDecoding(u);let d=1,g=s[d++],x=new jm;for(;d<s[0];){switch(g){case Y.TEXT_COMPACTION_MODE_LATCH:d=Y.textCompaction(s,d,l);break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:d=Y.byteCompaction(g,s,u,d,l);break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case Y.NUMERIC_COMPACTION_MODE_LATCH:d=Y.numericCompaction(s,d,l);break;case Y.ECI_CHARSET:H.getCharacterSetECIByValue(s[d++]);break;case Y.ECI_GENERAL_PURPOSE:d+=2;break;case Y.ECI_USER_DEFINED:d++;break;case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=Y.decodeMacroBlock(s,d,x);break;case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:throw new B;default:d--,d=Y.textCompaction(s,d,l);break}if(d<s.length)g=s[d++];else throw B.getFormatInstance()}if(l.length()===0)throw B.getFormatInstance();let w=new Hn(null,l.toString(),null,a);return w.setOther(x),w}static decodeMacroBlock(s,a,l){if(a+Y.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw B.getFormatInstance();let u=new Int32Array(Y.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<Y.NUMBER_OF_SEQUENCE_CODEWORDS;x++,a++)u[x]=s[a];l.setSegmentIndex(N.parseInt(Y.decodeBase900toBase10(u,Y.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new de;a=Y.textCompaction(s,a,d),l.setFileId(d.toString());let g=-1;for(s[a]===Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<s[0];)switch(s[a]){case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,s[a]){case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new de;a=Y.textCompaction(s,a+1,x),l.setFileName(x.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new de;a=Y.textCompaction(s,a+1,w),l.setSender(w.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new de;a=Y.textCompaction(s,a+1,b),l.setAddressee(b.toString());break;case Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let A=new de;a=Y.numericCompaction(s,a+1,A),l.setSegmentCount(N.parseInt(A.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let j=new de;a=Y.numericCompaction(s,a+1,j),l.setTimestamp(Pm.parseLong(j.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let P=new de;a=Y.numericCompaction(s,a+1,P),l.setChecksum(N.parseInt(P.toString()));break;case Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new de;a=Y.numericCompaction(s,a+1,L),l.setFileSize(Pm.parseLong(L.toString()));break;default:throw B.getFormatInstance()}break;case Y.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(g!==-1){let x=a-g;l.isLastSegment()&&x--,l.setOptionalData(I.copyOfRange(s,g,g+x))}return a}static textCompaction(s,a,l){let u=new Int32Array((s[0]-a)*2),d=new Int32Array((s[0]-a)*2),g=0,x=!1;for(;a<s[0]&&!x;){let w=s[a++];if(w<Y.TEXT_COMPACTION_MODE_LATCH)u[g]=w/30,u[g+1]=w%30,g+=2;else switch(w){case Y.TEXT_COMPACTION_MODE_LATCH:u[g++]=Y.TEXT_COMPACTION_MODE_LATCH;break;case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:a--,x=!0;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=s[a++],d[g]=w,g++;break}}return Y.decodeTextCompaction(u,d,g,l),a}static decodeTextCompaction(s,a,l,u){let d=at.ALPHA,g=at.ALPHA,x=0;for(;x<l;){let w=s[x],b="";switch(d){case at.ALPHA:if(w<26)b=String.fromCharCode(65+w);else switch(w){case 26:b=" ";break;case Y.LL:d=at.LOWER;break;case Y.ML:d=at.MIXED;break;case Y.PS:g=d,d=at.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.LOWER:if(w<26)b=String.fromCharCode(97+w);else switch(w){case 26:b=" ";break;case Y.AS:g=d,d=at.ALPHA_SHIFT;break;case Y.ML:d=at.MIXED;break;case Y.PS:g=d,d=at.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.MIXED:if(w<Y.PL)b=Y.MIXED_CHARS[w];else switch(w){case Y.PL:d=at.PUNCT;break;case 26:b=" ";break;case Y.LL:d=at.LOWER;break;case Y.AL:d=at.ALPHA;break;case Y.PS:g=d,d=at.PUNCT_SHIFT;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.PUNCT:if(w<Y.PAL)b=Y.PUNCT_CHARS[w];else switch(w){case Y.PAL:d=at.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.ALPHA_SHIFT:if(d=g,w<26)b=String.fromCharCode(65+w);else switch(w){case 26:b=" ";break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break;case at.PUNCT_SHIFT:if(d=g,w<Y.PAL)b=Y.PUNCT_CHARS[w];else switch(w){case Y.PAL:d=at.ALPHA;break;case Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[x]);break;case Y.TEXT_COMPACTION_MODE_LATCH:d=at.ALPHA;break}break}b!==""&&u.append(b),x++}}static byteCompaction(s,a,l,u,d){let g=new y3,x=0,w=0,b=!1;switch(s){case Y.BYTE_COMPACTION_MODE_LATCH:let A=new Int32Array(6),j=a[u++];for(;u<a[0]&&!b;)switch(A[x++]=j,w=900*w+j,j=a[u++],j){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:u--,b=!0;break;default:if(x%5===0&&x>0){for(let P=0;P<6;++P)g.write(Number(Fs(w)>>Fs(8*(5-P))));w=0,x=0}break}u===a[0]&&j<Y.TEXT_COMPACTION_MODE_LATCH&&(A[x++]=j);for(let P=0;P<x;P++)g.write(A[P]);break;case Y.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!b;){let P=a[u++];if(P<Y.TEXT_COMPACTION_MODE_LATCH)x++,w=900*w+P;else switch(P){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.NUMERIC_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:u--,b=!0;break}if(x%5===0&&x>0){for(let L=0;L<6;++L)g.write(Number(Fs(w)>>Fs(8*(5-L))));w=0,x=0}}break}return d.append(he.decode(g.toByteArray(),l)),u}static numericCompaction(s,a,l){let u=0,d=!1,g=new Int32Array(Y.MAX_NUMERIC_CODEWORDS);for(;a<s[0]&&!d;){let x=s[a++];if(a===s[0]&&(d=!0),x<Y.TEXT_COMPACTION_MODE_LATCH)g[u]=x,u++;else switch(x){case Y.TEXT_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH:case Y.BYTE_COMPACTION_MODE_LATCH_6:case Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Y.MACRO_PDF417_TERMINATOR:a--,d=!0;break}(u%Y.MAX_NUMERIC_CODEWORDS===0||x===Y.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(Y.decodeBase900toBase10(g,u)),u=0)}return a}static decodeBase900toBase10(s,a){let l=Fs(0);for(let d=0;d<a;d++)l+=Y.EXP900[a-d-1]*Fs(s[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new B;return u.substring(1)}}Y.TEXT_COMPACTION_MODE_LATCH=900,Y.BYTE_COMPACTION_MODE_LATCH=901,Y.NUMERIC_COMPACTION_MODE_LATCH=902,Y.BYTE_COMPACTION_MODE_LATCH_6=924,Y.ECI_USER_DEFINED=925,Y.ECI_GENERAL_PURPOSE=926,Y.ECI_CHARSET=927,Y.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Y.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Y.MACRO_PDF417_TERMINATOR=922,Y.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Y.MAX_NUMERIC_CODEWORDS=15,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Y.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Y.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Y.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Y.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Y.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Y.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Y.PL=25,Y.LL=27,Y.AS=27,Y.ML=28,Y.AL=28,Y.PS=29,Y.PAL=29,Y.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Y.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Y.EXP900=Dm()?v3():[],Y.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ve{constructor(){}static decode(s,a,l,u,d,g,x){let w=new bi(s,a,l,u,d),b=null,A=null,j;for(let U=!0;;U=!1){if(a!=null&&(b=Ve.getRowIndicatorColumn(s,w,a,!0,g,x)),u!=null&&(A=Ve.getRowIndicatorColumn(s,w,u,!1,g,x)),j=Ve.merge(b,A),j==null)throw $.getNotFoundInstance();let W=j.getBoundingBox();if(U&&W!=null&&(W.getMinY()<w.getMinY()||W.getMaxY()>w.getMaxY()))w=W;else break}j.setBoundingBox(w);let P=j.getBarcodeColumnCount()+1;j.setDetectionResultColumn(0,b),j.setDetectionResultColumn(P,A);let L=b!=null;for(let U=1;U<=P;U++){let W=L?U:P-U;if(j.getDetectionResultColumn(W)!==void 0)continue;let X;W===0||W===P?X=new Rm(w,W===0):X=new Oa(w),j.setDetectionResultColumn(W,X);let Z=-1,ae=Z;for(let le=w.getMinY();le<=w.getMaxY();le++){if(Z=Ve.getStartColumn(j,W,le,L),Z<0||Z>w.getMaxX()){if(ae===-1)continue;Z=ae}let ie=Ve.detectCodeword(s,w.getMinX(),w.getMaxX(),L,Z,le,g,x);ie!=null&&(X.setCodeword(le,ie),ae=Z,g=Math.min(g,ie.getWidth()),x=Math.max(x,ie.getWidth()))}}return Ve.createDecoderResult(j)}static merge(s,a){if(s==null&&a==null)return null;let l=Ve.getBarcodeMetadata(s,a);if(l==null)return null;let u=bi.merge(Ve.adjustBoundingBox(s),Ve.adjustBoundingBox(a));return new ja(l,u)}static adjustBoundingBox(s){if(s==null)return null;let a=s.getRowHeights();if(a==null)return null;let l=Ve.getMax(a),u=0;for(let x of a)if(u+=l-x,x>0)break;let d=s.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let g=0;for(let x=a.length-1;x>=0&&(g+=l-a[x],!(a[x]>0));x--);for(let x=d.length-1;g>0&&d[x]==null;x--)g--;return s.getBoundingBox().addMissingRows(u,g,s.isLeft())}static getMax(s){let a=-1;for(let l of s)a=Math.max(a,l);return a}static getBarcodeMetadata(s,a){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,a,l,u,d,g){let x=new Rm(a,u);for(let w=0;w<2;w++){let b=w===0?1:-1,A=Math.trunc(Math.trunc(l.getX()));for(let j=Math.trunc(Math.trunc(l.getY()));j<=a.getMaxY()&&j>=a.getMinY();j+=b){let P=Ve.detectCodeword(s,0,s.getWidth(),u,A,j,d,g);P!=null&&(x.setCodeword(j,P),u?A=P.getStartX():A=P.getEndX())}}return x}static adjustCodewordCount(s,a){let l=a[0][1],u=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Ve.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>Pe.MAX_CODEWORDS_IN_BARCODE)throw $.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(s){let a=Ve.createBarcodeMatrix(s);Ve.adjustCodewordCount(s,a);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],g=new Array;for(let w=0;w<s.getBarcodeRowCount();w++)for(let b=0;b<s.getBarcodeColumnCount();b++){let A=a[w][b+1].getValue(),j=w*s.getBarcodeColumnCount()+b;A.length===0?l.push(j):A.length===1?u[j]=A[0]:(g.push(j),d.push(A))}let x=new Array(d.length);for(let w=0;w<x.length;w++)x[w]=d[w];return Ve.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,Pe.toIntArray(l),Pe.toIntArray(g),x)}static createDecoderResultFromAmbiguousValues(s,a,l,u,d){let g=new Int32Array(u.length),x=100;for(;x-- >0;){for(let w=0;w<g.length;w++)a[u[w]]=d[w][g[w]];try{return Ve.decodeCodewords(a,s,l)}catch(w){if(!(w instanceof E))throw w}if(g.length===0)throw E.getChecksumInstance();for(let w=0;w<g.length;w++)if(g[w]<d[w].length-1){g[w]++;break}else if(g[w]=0,w===g.length-1)throw E.getChecksumInstance()}throw E.getChecksumInstance()}static createBarcodeMatrix(s){let a=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let d=0;d<a[u].length;d++)a[u][d]=new Ra;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let g=d.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][l].setValue(d.getValue())}}}l++}return a}static isValidBarcodeColumn(s,a){return a>=0&&a<=s.getBarcodeColumnCount()+1}static getStartColumn(s,a,l,u){let d=u?1:-1,g=null;if(Ve.isValidBarcodeColumn(s,a-d)&&(g=s.getDetectionResultColumn(a-d).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=s.getDetectionResultColumn(a).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(Ve.isValidBarcodeColumn(s,a-d)&&(g=s.getDetectionResultColumn(a-d).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let x=0;for(;Ve.isValidBarcodeColumn(s,a-d);){a-=d;for(let w of s.getDetectionResultColumn(a).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+d*x*(w.getEndX()-w.getStartX());x++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,a,l,u,d,g,x,w){d=Ve.adjustCodewordStartColumn(s,a,l,u,d,g);let b=Ve.getModuleBitCount(s,a,l,u,d,g);if(b==null)return null;let A,j=De.sum(b);if(u)A=d+j;else{for(let U=0;U<b.length/2;U++){let W=b[U];b[U]=b[b.length-1-U],b[b.length-1-U]=W}A=d,d=A-j}if(!Ve.checkCodewordSkew(j,x,w))return null;let P=Xn.getDecodedValue(b),L=Pe.getCodeword(P);return L===-1?null:new Pa(d,A,Ve.getCodewordBucketNumber(P),L)}static getModuleBitCount(s,a,l,u,d,g){let x=d,w=new Int32Array(8),b=0,A=u?1:-1,j=u;for(;(u?x<l:x>=a)&&b<w.length;)s.get(x,g)===j?(w[b]++,x+=A):(b++,j=!j);return b===w.length||x===(u?l:a)&&b===w.length-1?w:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,a,l,u,d,g){let x=d,w=u?-1:1;for(let b=0;b<2;b++){for(;(u?x>=a:x<l)&&u===s.get(x,g);){if(Math.abs(d-x)>Ve.CODEWORD_SKEW_SIZE)return d;x+=w}w=-w,u=!u}return x}static checkCodewordSkew(s,a,l){return a-Ve.CODEWORD_SKEW_SIZE<=s&&s<=l+Ve.CODEWORD_SKEW_SIZE}static decodeCodewords(s,a,l){if(s.length===0)throw B.getFormatInstance();let u=1<<a+1,d=Ve.correctErrors(s,l,u);Ve.verifyCodewordCount(s,u);let g=Y.decode(s,""+a);return g.setErrorsCorrected(d),g.setErasures(l.length),g}static correctErrors(s,a,l){if(a!=null&&a.length>l/2+Ve.MAX_ERRORS||l<0||l>Ve.MAX_EC_CODEWORDS)throw E.getChecksumInstance();return Ve.errorCorrection.decode(s,l,a)}static verifyCodewordCount(s,a){if(s.length<4)throw B.getFormatInstance();let l=s[0];if(l>s.length)throw B.getFormatInstance();if(l===0)if(a<s.length)s[0]=s.length-a;else throw B.getFormatInstance()}static getBitCountForCodeword(s){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)a[u]++,s>>=1;return a}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Ve.getCodewordBucketNumber(Ve.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let a=new ka;for(let l=0;l<s.length;l++){a.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let d=s[l][u];d.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}a.format("%n")}return a.toString()}}Ve.CODEWORD_SKEW_SIZE=2,Ve.MAX_ERRORS=3,Ve.MAX_EC_CODEWORDS=512,Ve.errorCorrection=new Om;class gn{decode(s,a=null){let l=gn.decode(s,a,!1);if(l==null||l.length===0||l[0]==null)throw $.getNotFoundInstance();return l[0]}decodeMultiple(s,a=null){try{return gn.decode(s,a,!0)}catch(l){throw l instanceof B||l instanceof E?$.getNotFoundInstance():l}}static decode(s,a,l){const u=new Array,d=Fe.detectMultiple(s,a,l);for(const g of d.getPoints()){const x=Ve.decode(d.getBits(),g[4],g[5],g[6],g[7],gn.getMinCodewordWidth(g),gn.getMaxCodewordWidth(g)),w=new Be(x.getText(),x.getRawBytes(),void 0,g,pe.PDF_417);w.putMetadata(Xe.ERROR_CORRECTION_LEVEL,x.getECLevel());const b=x.getOther();b!=null&&w.putMetadata(Xe.PDF417_EXTRA_METADATA,b),u.push(w)}return u.map(g=>g)}static getMaxWidth(s,a){return s==null||a==null?0:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMinWidth(s,a){return s==null||a==null?N.MAX_VALUE:Math.trunc(Math.abs(s.getX()-a.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(gn.getMaxWidth(s[0],s[4]),gn.getMaxWidth(s[6],s[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(gn.getMaxWidth(s[1],s[5]),gn.getMaxWidth(s[7],s[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(gn.getMinWidth(s[0],s[4]),gn.getMinWidth(s[6],s[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(gn.getMinWidth(s[1],s[5]),gn.getMinWidth(s[7],s[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class vc extends m{}vc.kind="ReaderException";class Lm{constructor(s,a){this.verbose=s===!0,a&&this.setHints(a)}decode(s,a){return a&&this.setHints(a),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const a=!r(s)&&s.get(V.TRY_HARDER)===!0,l=r(s)?null:s.get(V.POSSIBLE_FORMATS),u=new Array;if(!r(l)){const d=l.some(g=>g===pe.UPC_A||g===pe.UPC_E||g===pe.EAN_13||g===pe.EAN_8||g===pe.CODABAR||g===pe.CODE_39||g===pe.CODE_93||g===pe.CODE_128||g===pe.ITF||g===pe.RSS_14||g===pe.RSS_EXPANDED);d&&!a&&u.push(new co(s,this.verbose)),l.includes(pe.QR_CODE)&&u.push(new Bs),l.includes(pe.DATA_MATRIX)&&u.push(new Ls),l.includes(pe.AZTEC)&&u.push(new vi),l.includes(pe.PDF_417)&&u.push(new gn),d&&a&&u.push(new co(s,this.verbose))}u.length===0&&(a||u.push(new co(s,this.verbose)),u.push(new Bs),u.push(new Ls),u.push(new vi),u.push(new gn),a&&u.push(new co(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new vc("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(s,this.hints)}catch(l){if(l instanceof vc)continue}throw new $("No MultiFormat Readers were able to detect the code.")}}class w3 extends Ke{constructor(s=null,a=500){const l=new Lm;l.setHints(s),super(l,a)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class b3 extends Ke{constructor(s=500){super(new gn,s)}}class C3 extends Ke{constructor(s=500){super(new Bs,s)}}var bh;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(bh||(bh={}));var nn=bh;class Ch{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Vt(s,Int32Array.from([1])))}buildGenerator(s){const a=this.cachedGenerators;if(s>=a.length){let l=a[a.length-1];const u=this.field;for(let d=a.length;d<=s;d++){const g=l.multiply(new Vt(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));a.push(g),l=g}}return a[s]}encode(s,a){if(a===0)throw new v("No error correction bytes");const l=s.length-a;if(l<=0)throw new v("No data bytes provided");const u=this.buildGenerator(a),d=new Int32Array(l);T.arraycopy(s,0,d,0,l);let g=new Vt(this.field,d);g=g.multiplyByMonomial(a,1);const w=g.divide(u)[1].getCoefficients(),b=a-w.length;for(let A=0;A<b;A++)s[l+A]=0;T.arraycopy(w,0,s,l+b,w.length)}}class Pt{constructor(){}static applyMaskPenaltyRule1(s){return Pt.applyMaskPenaltyRule1Internal(s,!0)+Pt.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let a=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let g=0;g<d-1;g++){const x=l[g];for(let w=0;w<u-1;w++){const b=x[w];b===x[w+1]&&b===l[g+1][w]&&b===l[g+1][w+1]&&a++}}return Pt.N2*a}static applyMaskPenaltyRule3(s){let a=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let g=0;g<d;g++)for(let x=0;x<u;x++){const w=l[g];x+6<u&&w[x]===1&&w[x+1]===0&&w[x+2]===1&&w[x+3]===1&&w[x+4]===1&&w[x+5]===0&&w[x+6]===1&&(Pt.isWhiteHorizontal(w,x-4,x)||Pt.isWhiteHorizontal(w,x+7,x+11))&&a++,g+6<d&&l[g][x]===1&&l[g+1][x]===0&&l[g+2][x]===1&&l[g+3][x]===1&&l[g+4][x]===1&&l[g+5][x]===0&&l[g+6][x]===1&&(Pt.isWhiteVertical(l,x,g-4,g)||Pt.isWhiteVertical(l,x,g+7,g+11))&&a++}return a*Pt.N3}static isWhiteHorizontal(s,a,l){a=Math.max(a,0),l=Math.min(l,s.length);for(let u=a;u<l;u++)if(s[u]===1)return!1;return!0}static isWhiteVertical(s,a,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let d=l;d<u;d++)if(s[d][a]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let a=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let w=0;w<d;w++){const b=l[w];for(let A=0;A<u;A++)b[A]===1&&a++}const g=s.getHeight()*s.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*Pt.N4}static getDataMaskBit(s,a,l){let u,d;switch(s){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:d=l*a,u=(d&1)+d%3;break;case 6:d=l*a,u=(d&1)+d%3&1;break;case 7:d=l*a,u=d%3+(l+a&1)&1;break;default:throw new v("Invalid mask pattern: "+s)}return u===0}static applyMaskPenaltyRule1Internal(s,a){let l=0;const u=a?s.getHeight():s.getWidth(),d=a?s.getWidth():s.getHeight(),g=s.getArray();for(let x=0;x<u;x++){let w=0,b=-1;for(let A=0;A<d;A++){const j=a?g[x][A]:g[A][x];j===b?w++:(w>=5&&(l+=Pt.N1+(w-5)),w=1,b=j)}w>=5&&(l+=Pt.N1+(w-5))}return l}}Pt.N1=3,Pt.N2=3,Pt.N3=40,Pt.N4=10;class wc{constructor(s,a){this.width=s,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,a){return this.bytes[a][s]}getArray(){return this.bytes}setNumber(s,a,l){this.bytes[a][s]=l}setBoolean(s,a,l){this.bytes[a][s]=l?1:0}clear(s){for(const a of this.bytes)I.fill(a,s)}equals(s){if(!(s instanceof wc))return!1;const a=s;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],g=a.bytes[l];for(let x=0,w=this.width;x<w;++x)if(d[x]!==g[x])return!1}return!0}toString(){const s=new de;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let d=0,g=this.width;d<g;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Ci{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new de;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Ci.NUM_MASK_PATTERNS}}Ci.NUM_MASK_PATTERNS=8;class lt extends m{}lt.kind="WriterException";class ke{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,a,l,u,d){ke.clearMatrix(d),ke.embedBasicPatterns(l,d),ke.embedTypeInfo(a,u,d),ke.maybeEmbedVersionInfo(l,d),ke.embedDataBits(s,u,d)}static embedBasicPatterns(s,a){ke.embedPositionDetectionPatternsAndSeparators(a),ke.embedDarkDotAtLeftBottomCorner(a),ke.maybeEmbedPositionAdjustmentPatterns(s,a),ke.embedTimingPatterns(a)}static embedTypeInfo(s,a,l){const u=new M;ke.makeTypeInfoBits(s,a,u);for(let d=0,g=u.getSize();d<g;++d){const x=u.get(u.getSize()-1-d),w=ke.TYPE_INFO_COORDINATES[d],b=w[0],A=w[1];if(l.setBoolean(b,A,x),d<8){const j=l.getWidth()-d-1;l.setBoolean(j,8,x)}else{const P=l.getHeight()-7+(d-8);l.setBoolean(8,P,x)}}}static maybeEmbedVersionInfo(s,a){if(s.getVersionNumber()<7)return;const l=new M;ke.makeVersionInfoBits(s,l);let u=6*3-1;for(let d=0;d<6;++d)for(let g=0;g<3;++g){const x=l.get(u);u--,a.setBoolean(d,a.getHeight()-11+g,x),a.setBoolean(a.getHeight()-11+g,d,x)}}static embedDataBits(s,a,l){let u=0,d=-1,g=l.getWidth()-1,x=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);x>=0&&x<l.getHeight();){for(let w=0;w<2;++w){const b=g-w;if(!ke.isEmpty(l.get(b,x)))continue;let A;u<s.getSize()?(A=s.get(u),++u):A=!1,a!==255&&Pt.getDataMaskBit(a,b,x)&&(A=!A),l.setBoolean(b,x,A)}x+=d}d=-d,x+=d,g-=2}if(u!==s.getSize())throw new lt("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-N.numberOfLeadingZeros(s)}static calculateBCHCode(s,a){if(a===0)throw new v("0 polynomial");const l=ke.findMSBSet(a);for(s<<=l-1;ke.findMSBSet(s)>=l;)s^=a<<ke.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,a,l){if(!Ci.isValidMaskPattern(a))throw new lt("Invalid mask pattern");const u=s.getBits()<<3|a;l.appendBits(u,5);const d=ke.calculateBCHCode(u,ke.TYPE_INFO_POLY);l.appendBits(d,10);const g=new M;if(g.appendBits(ke.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new lt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,a){a.appendBits(s.getVersionNumber(),6);const l=ke.calculateBCHCode(s.getVersionNumber(),ke.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new lt("should not happen but we got: "+a.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let a=8;a<s.getWidth()-8;++a){const l=(a+1)%2;ke.isEmpty(s.get(a,6))&&s.setNumber(a,6,l),ke.isEmpty(s.get(6,a))&&s.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new lt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,a,l){for(let u=0;u<8;++u){if(!ke.isEmpty(l.get(s+u,a)))throw new lt;l.setNumber(s+u,a,0)}}static embedVerticalSeparationPattern(s,a,l){for(let u=0;u<7;++u){if(!ke.isEmpty(l.get(s,a+u)))throw new lt;l.setNumber(s,a+u,0)}}static embedPositionAdjustmentPattern(s,a,l){for(let u=0;u<5;++u){const d=ke.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(s+g,a+u,d[g])}}static embedPositionDetectionPattern(s,a,l){for(let u=0;u<7;++u){const d=ke.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(s+g,a+u,d[g])}}static embedPositionDetectionPatternsAndSeparators(s){const a=ke.POSITION_DETECTION_PATTERN[0].length;ke.embedPositionDetectionPattern(0,0,s),ke.embedPositionDetectionPattern(s.getWidth()-a,0,s),ke.embedPositionDetectionPattern(0,s.getWidth()-a,s);const l=8;ke.embedHorizontalSeparationPattern(0,l-1,s),ke.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),ke.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const u=7;ke.embedVerticalSeparationPattern(u,0,s),ke.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),ke.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,a){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,u=ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,g=u.length;d!==g;d++){const x=u[d];if(x>=0)for(let w=0;w!==g;w++){const b=u[w];b>=0&&ke.isEmpty(a.get(b,x))&&ke.embedPositionAdjustmentPattern(b-2,x-2,a)}}}}ke.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ke.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ke.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ke.VERSION_INFO_POLY=7973,ke.TYPE_INFO_POLY=1335,ke.TYPE_INFO_MASK_PATTERN=21522;class E3{constructor(s,a){this.dataBytes=s,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class pt{constructor(){}static calculateMaskPenalty(s){return Pt.applyMaskPenaltyRule1(s)+Pt.applyMaskPenaltyRule2(s)+Pt.applyMaskPenaltyRule3(s)+Pt.applyMaskPenaltyRule4(s)}static encode(s,a,l=null){let u=pt.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(nn.CHARACTER_SET)!==void 0;d&&(u=l.get(nn.CHARACTER_SET).toString());const g=this.chooseMode(s,u),x=new M;if(g===Te.BYTE&&(d||pt.DEFAULT_BYTE_MODE_ENCODING!==u)){const le=H.getCharacterSetECIByName(u);le!==void 0&&this.appendECI(le,x)}this.appendModeInfo(g,x);const w=new M;this.appendBytes(s,g,w,u);let b;if(l!==null&&l.get(nn.QR_VERSION)!==void 0){const le=Number.parseInt(l.get(nn.QR_VERSION).toString(),10);b=Se.getVersionForNumber(le);const ie=this.calculateBitsNeeded(g,x,w,b);if(!this.willFit(ie,b,a))throw new lt("Data too big for requested version")}else b=this.recommendVersion(a,g,x,w);const A=new M;A.appendBitArray(x);const j=g===Te.BYTE?w.getSizeInBytes():s.length;this.appendLengthInfo(j,b,g,A),A.appendBitArray(w);const P=b.getECBlocksForLevel(a),L=b.getTotalCodewords()-P.getTotalECCodewords();this.terminateBits(L,A);const U=this.interleaveWithECBytes(A,b.getTotalCodewords(),L,P.getNumBlocks()),W=new Ci;W.setECLevel(a),W.setMode(g),W.setVersion(b);const X=b.getDimensionForVersion(),Z=new wc(X,X),ae=this.chooseMaskPattern(U,a,b,Z);return W.setMaskPattern(ae),ke.buildMatrix(U,a,b,ae,Z),W.setMatrix(Z),W}static recommendVersion(s,a,l,u){const d=this.calculateBitsNeeded(a,l,u,Se.getVersionForNumber(1)),g=this.chooseVersion(d,s),x=this.calculateBitsNeeded(a,l,u,g);return this.chooseVersion(x,s)}static calculateBitsNeeded(s,a,l,u){return a.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<pt.ALPHANUMERIC_TABLE.length?pt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,a=null){if(H.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(s))return Te.KANJI;let l=!1,u=!1;for(let d=0,g=s.length;d<g;++d){const x=s.charAt(d);if(pt.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return Te.BYTE}return u?Te.ALPHANUMERIC:l?Te.NUMERIC:Te.BYTE}static isOnlyDoubleByteKanji(s){let a;try{a=he.encode(s,H.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=a[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,a,l,u){let d=Number.MAX_SAFE_INTEGER,g=-1;for(let x=0;x<Ci.NUM_MASK_PATTERNS;x++){ke.buildMatrix(s,a,l,x,u);let w=this.calculateMaskPenalty(u);w<d&&(d=w,g=x)}return g}static chooseVersion(s,a){for(let l=1;l<=40;l++){const u=Se.getVersionForNumber(l);if(pt.willFit(s,u,a))return u}throw new lt("Data too big")}static willFit(s,a,l){const u=a.getTotalCodewords(),g=a.getECBlocksForLevel(l).getTotalECCodewords(),x=u-g,w=(s+7)/8;return x>=w}static terminateBits(s,a){const l=s*8;if(a.getSize()>l)throw new lt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let g=0;g<4&&a.getSize()<l;++g)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let g=u;g<8;g++)a.appendBit(!1);const d=s-a.getSizeInBytes();for(let g=0;g<d;++g)a.appendBits(g&1?17:236,8);if(a.getSize()!==l)throw new lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,a,l,u,d,g){if(u>=l)throw new lt("Block ID too large");const x=s%l,w=l-x,b=Math.floor(s/l),A=b+1,j=Math.floor(a/l),P=j+1,L=b-j,U=A-P;if(L!==U)throw new lt("EC bytes mismatch");if(l!==w+x)throw new lt("RS blocks mismatch");if(s!==(j+L)*w+(P+U)*x)throw new lt("Total bytes mismatch");u<w?(d[0]=j,g[0]=L):(d[0]=P,g[0]=U)}static interleaveWithECBytes(s,a,l,u){if(s.getSizeInBytes()!==l)throw new lt("Number of bits and data bytes does not match");let d=0,g=0,x=0;const w=new Array;for(let A=0;A<u;++A){const j=new Int32Array(1),P=new Int32Array(1);pt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,A,j,P);const L=j[0],U=new Uint8Array(L);s.toBytes(8*d,U,0,L);const W=pt.generateECBytes(U,P[0]);w.push(new E3(U,W)),g=Math.max(g,L),x=Math.max(x,W.length),d+=j[0]}if(l!==d)throw new lt("Data bytes does not match offset");const b=new M;for(let A=0;A<g;++A)for(const j of w){const P=j.getDataBytes();A<P.length&&b.appendBits(P[A],8)}for(let A=0;A<x;++A)for(const j of w){const P=j.getErrorCorrectionBytes();A<P.length&&b.appendBits(P[A],8)}if(a!==b.getSizeInBytes())throw new lt("Interleaving error: "+a+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(s,a){const l=s.length,u=new Int32Array(l+a);for(let g=0;g<l;g++)u[g]=s[g]&255;new Ch(ze.QR_CODE_FIELD_256).encode(u,a);const d=new Uint8Array(a);for(let g=0;g<a;g++)d[g]=u[l+g];return d}static appendModeInfo(s,a){a.appendBits(s.getBits(),4)}static appendLengthInfo(s,a,l,u){const d=l.getCharacterCountBits(a);if(s>=1<<d)throw new lt(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,a,l,u){switch(a){case Te.NUMERIC:pt.appendNumericBytes(s,l);break;case Te.ALPHANUMERIC:pt.appendAlphanumericBytes(s,l);break;case Te.BYTE:pt.append8BitBytes(s,l,u);break;case Te.KANJI:pt.appendKanjiBytes(s,l);break;default:throw new lt("Invalid mode: "+a)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const a=pt.getDigit(s);return a>=0&&a<=9}static appendNumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const d=pt.getDigit(s.charAt(u));if(u+2<l){const g=pt.getDigit(s.charAt(u+1)),x=pt.getDigit(s.charAt(u+2));a.appendBits(d*100+g*10+x,10),u+=3}else if(u+1<l){const g=pt.getDigit(s.charAt(u+1));a.appendBits(d*10+g,7),u+=2}else a.appendBits(d,4),u++}}static appendAlphanumericBytes(s,a){const l=s.length;let u=0;for(;u<l;){const d=pt.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new lt;if(u+1<l){const g=pt.getAlphanumericCode(s.charCodeAt(u+1));if(g===-1)throw new lt;a.appendBits(d*45+g,11),u+=2}else a.appendBits(d,6),u++}}static append8BitBytes(s,a,l){let u;try{u=he.encode(s,l)}catch(d){throw new lt(d)}for(let d=0,g=u.length;d!==g;d++){const x=u[d];a.appendBits(x,8)}}static appendKanjiBytes(s,a){let l;try{l=he.encode(s,H.SJIS)}catch(d){throw new lt(d)}const u=l.length;for(let d=0;d<u;d+=2){const g=l[d]&255,x=l[d+1]&255,w=g<<8&4294967295|x;let b=-1;if(w>=33088&&w<=40956?b=w-33088:w>=57408&&w<=60351&&(b=w-49472),b===-1)throw new lt("Invalid byte sequence");const A=(b>>8)*192+(b&255);a.appendBits(A,13)}}static appendECI(s,a){a.appendBits(Te.ECI.getBits(),4),a.appendBits(s.getValue(),8)}}pt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),pt.DEFAULT_BYTE_MODE_ENCODING=H.UTF8.getName();class Ei{write(s,a,l,u=null){if(s.length===0)throw new v("Found empty contents");if(a<0||l<0)throw new v("Requested dimensions are too small: "+a+"x"+l);let d=ut.L,g=Ei.QUIET_ZONE_SIZE;u!==null&&(u.get(nn.ERROR_CORRECTION)!==void 0&&(d=ut.fromString(u.get(nn.ERROR_CORRECTION).toString())),u.get(nn.MARGIN)!==void 0&&(g=Number.parseInt(u.get(nn.MARGIN).toString(),10)));const x=pt.encode(s,d,u);return this.renderResult(x,a,l,g)}writeToDom(s,a,l,u,d=null){typeof s=="string"&&(s=document.querySelector(s));const g=this.write(a,l,u,d);s&&s.appendChild(g)}renderResult(s,a,l,u){const d=s.getMatrix();if(d===null)throw new an;const g=d.getWidth(),x=d.getHeight(),w=g+u*2,b=x+u*2,A=Math.max(a,w),j=Math.max(l,b),P=Math.min(Math.floor(A/w),Math.floor(j/b)),L=Math.floor((A-g*P)/2),U=Math.floor((j-x*P)/2),W=this.createSVGElement(A,j);for(let X=0,Z=U;X<x;X++,Z+=P)for(let ae=0,le=L;ae<g;ae++,le+=P)if(d.get(ae,X)===1){const ie=this.createSvgRectElement(le,Z,P,P);W.appendChild(ie)}return W}createSVGElement(s,a){const l=document.createElementNS(Ei.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(s,a,l,u){const d=document.createElementNS(Ei.SVG_NS,"rect");return d.setAttributeNS(null,"x",s.toString()),d.setAttributeNS(null,"y",a.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Ei.QUIET_ZONE_SIZE=4,Ei.SVG_NS="http://www.w3.org/2000/svg";class ho{encode(s,a,l,u,d){if(s.length===0)throw new v("Found empty contents");if(a!==pe.QR_CODE)throw new v("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new v(`Requested dimensions are too small: ${l}x${u}`);let g=ut.L,x=ho.QUIET_ZONE_SIZE;d!==null&&(d.get(nn.ERROR_CORRECTION)!==void 0&&(g=ut.fromString(d.get(nn.ERROR_CORRECTION).toString())),d.get(nn.MARGIN)!==void 0&&(x=Number.parseInt(d.get(nn.MARGIN).toString(),10)));const w=pt.encode(s,g,d);return ho.renderResult(w,l,u,x)}static renderResult(s,a,l,u){const d=s.getMatrix();if(d===null)throw new an;const g=d.getWidth(),x=d.getHeight(),w=g+u*2,b=x+u*2,A=Math.max(a,w),j=Math.max(l,b),P=Math.min(Math.floor(A/w),Math.floor(j/b)),L=Math.floor((A-g*P)/2),U=Math.floor((j-x*P)/2),W=new ne(A,j);for(let X=0,Z=U;X<x;X++,Z+=P)for(let ae=0,le=L;ae<g;ae++,le+=P)d.get(ae,X)===1&&W.setRegion(le,Z,P,P);return W}}ho.QUIET_ZONE_SIZE=4;class S3{encode(s,a,l,u,d){let g;switch(a){case pe.QR_CODE:g=new ho;break;default:throw new v("No encoder available for format "+a)}return g.encode(s,a,l,u,d)}}class Qr extends J{constructor(s,a,l,u,d,g,x,w){if(super(g,x),this.yuvData=s,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=d,u+g>a||d+x>l)throw new v("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(g,x)}getRow(s,a){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return T.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=s*a,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return T.arraycopy(this.yuvData,d,u,0,l),u;for(let g=0;g<a;g++){const x=g*s;T.arraycopy(this.yuvData,d,u,x,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Qr(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+a,l,u,!1)}renderThumbnail(){const s=this.getWidth()/Qr.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Qr.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*a),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const x=g*s;for(let w=0;w<s;w++){const b=u[d+w*Qr.THUMBNAIL_SCALE_FACTOR]&255;l[x+w]=4278190080|b*65793}d+=this.dataWidth*Qr.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Qr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,a){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<a;u++,d+=this.dataWidth){const g=d+s/2;for(let x=d,w=d+s-1;x<g;x++,w--){const b=l[x];l[x]=l[w],l[w]=b}}}invert(){return new ee(this)}}Qr.THUMBNAIL_SCALE_FACTOR=2;class Eh extends J{constructor(s,a,l,u,d,g,x){if(super(a,l),this.dataWidth=u,this.dataHeight=d,this.left=g,this.top=x,s.BYTES_PER_ELEMENT===4){const w=a*l,b=new Uint8ClampedArray(w);for(let A=0;A<w;A++){const j=s[A],P=j>>16&255,L=j>>7&510,U=j&255;b[A]=(P+L+U)/4&255}this.luminances=b}else this.luminances=s;if(u===void 0&&(this.dataWidth=a),d===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(s,a){if(s<0||s>=this.getHeight())throw new v("Requested row is outside the image: "+s);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return T.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const s=this.getWidth(),a=this.getHeight();if(s===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=s*a,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return T.arraycopy(this.luminances,d,u,0,l),u;for(let g=0;g<a;g++){const x=g*s;T.arraycopy(this.luminances,d,u,x,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,a,l,u){return new Eh(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+a)}invert(){return new ee(this)}}class Bm extends H{static forName(s){return this.getCharacterSetECIByName(s)}}class Sh{}Sh.ISO_8859_1=H.ISO8859_1;class Fm{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Vm{static singletonList(s){return[s]}static min(s,a){return s.sort(a)[0]}}class _3{constructor(s){this.previous=s}getPrevious(){return this.previous}}class fo extends _3{constructor(s,a,l){super(s),this.value=a,this.bitCount=l}appendTo(s,a){s.appendBits(this.value,this.bitCount)}add(s,a){return new fo(this,s,a)}addBinaryShift(s,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new fo(this,s,a)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+N.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class _h extends fo{constructor(s,a,l){super(s,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(s,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(s,a){return new _h(this,s,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function A3(R,s,a){return new _h(R,s,a)}function Ma(R,s,a){return new fo(R,s,a)}const N3=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vs=0,bc=1,Er=2,Um=3,Jr=4,T3=new fo(null,0,0),Ah=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function I3(R){for(let s of R)I.fill(s,-1);return R[Vs][Jr]=0,R[bc][Jr]=0,R[bc][Vs]=28,R[Um][Jr]=0,R[Er][Jr]=0,R[Er][Vs]=15,R}const zm=I3(I.createInt32Array(6,6));class es{constructor(s,a,l,u){this.token=s,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,a){let l=this.bitCount,u=this.token;if(s!==this.mode){let g=Ah[this.mode][s];u=Ma(u,g&65535,g>>16),l+=g>>16}let d=s===Er?4:5;return u=Ma(u,a,d),new es(u,s,0,l+d)}shiftAndAppend(s,a){let l=this.token,u=this.mode===Er?4:5;return l=Ma(l,zm[this.mode][s],u),l=Ma(l,a,5),new es(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===Jr||this.mode===Er){let x=Ah[l][Vs];a=Ma(a,x&65535,x>>16),u+=x>>16,l=Vs}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new es(a,l,this.binaryShiftByteCount+1,u+d);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(s+1)),g}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=A3(a,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new es(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let a=this.bitCount+(Ah[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?a+=es.calculateBinaryShiftCost(s)-es.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(a+=10),a<=s.bitCount}toBitArray(s){let a=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new M;for(const u of a)u.appendTo(l,s);return l}toString(){return te.format("%s bits=%d bytes=%d",N3[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}es.INITIAL_STATE=new es(T3,Vs,0,0);function k3(R){const s=te.getCharCode(" "),a=te.getCharCode("."),l=te.getCharCode(",");R[Vs][s]=1;const u=te.getCharCode("Z"),d=te.getCharCode("A");for(let P=d;P<=u;P++)R[Vs][P]=P-d+2;R[bc][s]=1;const g=te.getCharCode("z"),x=te.getCharCode("a");for(let P=x;P<=g;P++)R[bc][P]=P-x+2;R[Er][s]=1;const w=te.getCharCode("9"),b=te.getCharCode("0");for(let P=b;P<=w;P++)R[Er][P]=P-b+2;R[Er][l]=12,R[Er][a]=13;const A=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let P=0;P<A.length;P++)R[Um][te.getCharCode(A[P])]=P;const j=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let P=0;P<j.length;P++)te.getCharCode(j[P])>0&&(R[Jr][te.getCharCode(j[P])]=P);return R}const Nh=k3(I.createInt32Array(5,256));class Da{constructor(s){this.text=s}encode(){const s=te.getCharCode(" "),a=te.getCharCode(`
`);let l=Vm.singletonList(es.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let g,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case te.getCharCode("\r"):g=x===a?2:0;break;case te.getCharCode("."):g=x===s?3:0;break;case te.getCharCode(","):g=x===s?4:0;break;case te.getCharCode(":"):g=x===s?5:0;break;default:g=0}g>0?(l=Da.updateStateListForPair(l,d,g),d++):l=this.updateStateListForChar(l,d)}return Vm.min(l,(d,g)=>d.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,a){const l=[];for(let u of s)this.updateStateForChar(u,a,l);return Da.simplifyStates(l)}updateStateForChar(s,a,l){let u=this.text[a]&255,d=Nh[s.getMode()][u]>0,g=null;for(let x=0;x<=Jr;x++){let w=Nh[x][u];if(w>0){if(g==null&&(g=s.endBinaryShift(a)),!d||x===s.getMode()||x===Er){const b=g.latchAndAppend(x,w);l.push(b)}if(!d&&zm[s.getMode()][x]>=0){const b=g.shiftAndAppend(x,w);l.push(b)}}}if(s.getBinaryShiftByteCount()>0||Nh[s.getMode()][u]===0){let x=s.addBinaryShiftChar(a);l.push(x)}}static updateStateListForPair(s,a,l){const u=[];for(let d of s)this.updateStateForPair(d,a,l,u);return this.simplifyStates(u)}static updateStateForPair(s,a,l,u){let d=s.endBinaryShift(a);if(u.push(d.latchAndAppend(Jr,l)),s.getMode()!==Jr&&u.push(d.shiftAndAppend(Jr,l)),l===3||l===4){let g=d.latchAndAppend(Er,16-l).latchAndAppend(Er,1);u.push(g)}if(s.getBinaryShiftByteCount()>0){let g=s.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(g)}}static simplifyStates(s){let a=[];for(const l of s){let u=!0;for(const d of a){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(a=a.filter(g=>g!==d))}u&&a.push(l)}return a}}class Ye{constructor(){}static encodeBytes(s){return Ye.encode(s,Ye.DEFAULT_EC_PERCENT,Ye.DEFAULT_AZTEC_LAYERS)}static encode(s,a,l){let u=new Da(s).encode(),d=N.truncDivision(u.getSize()*a,100)+11,g=u.getSize()+d,x,w,b,A,j;if(l!==Ye.DEFAULT_AZTEC_LAYERS){if(x=l<0,w=Math.abs(l),w>(x?Ye.MAX_NB_BITS_COMPACT:Ye.MAX_NB_BITS))throw new v(te.format("Illegal value %s for layers",l));b=Ye.totalBitsInLayer(w,x),A=Ye.WORD_SIZE[w];let ie=b-b%A;if(j=Ye.stuffBits(u,A),j.getSize()+d>ie)throw new v("Data to large for user specified layer");if(x&&j.getSize()>A*64)throw new v("Data to large for user specified layer")}else{A=0,j=null;for(let ie=0;;ie++){if(ie>Ye.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(x=ie<=3,w=x?ie+1:ie,b=Ye.totalBitsInLayer(w,x),g>b)continue;(j==null||A!==Ye.WORD_SIZE[w])&&(A=Ye.WORD_SIZE[w],j=Ye.stuffBits(u,A));let $e=b-b%A;if(!(x&&j.getSize()>A*64)&&j.getSize()+d<=$e)break}}let P=Ye.generateCheckWords(j,b,A),L=j.getSize()/A,U=Ye.generateModeMessage(x,w,L),W=(x?11:14)+w*4,X=new Int32Array(W),Z;if(x){Z=W;for(let ie=0;ie<X.length;ie++)X[ie]=ie}else{Z=W+1+2*N.truncDivision(N.truncDivision(W,2)-1,15);let ie=N.truncDivision(W,2),$e=N.truncDivision(Z,2);for(let Le=0;Le<ie;Le++){let Kn=Le+N.truncDivision(Le,15);X[ie-Le-1]=$e-Kn-1,X[ie+Le]=$e+Kn+1}}let ae=new ne(Z);for(let ie=0,$e=0;ie<w;ie++){let Le=(w-ie)*4+(x?9:12);for(let Kn=0;Kn<Le;Kn++){let jr=Kn*2;for(let qn=0;qn<2;qn++)P.get($e+jr+qn)&&ae.set(X[ie*2+qn],X[ie*2+Kn]),P.get($e+Le*2+jr+qn)&&ae.set(X[ie*2+Kn],X[W-1-ie*2-qn]),P.get($e+Le*4+jr+qn)&&ae.set(X[W-1-ie*2-qn],X[W-1-ie*2-Kn]),P.get($e+Le*6+jr+qn)&&ae.set(X[W-1-ie*2-Kn],X[ie*2+qn])}$e+=Le*8}if(Ye.drawModeMessage(ae,x,Z,U),x)Ye.drawBullsEye(ae,N.truncDivision(Z,2),5);else{Ye.drawBullsEye(ae,N.truncDivision(Z,2),7);for(let ie=0,$e=0;ie<N.truncDivision(W,2)-1;ie+=15,$e+=16)for(let Le=N.truncDivision(Z,2)&1;Le<Z;Le+=2)ae.set(N.truncDivision(Z,2)-$e,Le),ae.set(N.truncDivision(Z,2)+$e,Le),ae.set(Le,N.truncDivision(Z,2)-$e),ae.set(Le,N.truncDivision(Z,2)+$e)}let le=new Fm;return le.setCompact(x),le.setSize(Z),le.setLayers(w),le.setCodeWords(L),le.setMatrix(ae),le}static drawBullsEye(s,a,l){for(let u=0;u<l;u+=2)for(let d=a-u;d<=a+u;d++)s.set(d,a-u),s.set(d,a+u),s.set(a-u,d),s.set(a+u,d);s.set(a-l,a-l),s.set(a-l+1,a-l),s.set(a-l,a-l+1),s.set(a+l,a-l),s.set(a+l,a-l+1),s.set(a+l,a+l-1)}static generateModeMessage(s,a,l){let u=new M;return s?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=Ye.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=Ye.generateCheckWords(u,40,4)),u}static drawModeMessage(s,a,l,u){let d=N.truncDivision(l,2);if(a)for(let g=0;g<7;g++){let x=d-3+g;u.get(g)&&s.set(x,d-5),u.get(g+7)&&s.set(d+5,x),u.get(20-g)&&s.set(x,d+5),u.get(27-g)&&s.set(d-5,x)}else for(let g=0;g<10;g++){let x=d-5+g+N.truncDivision(g,5);u.get(g)&&s.set(x,d-7),u.get(g+10)&&s.set(d+7,x),u.get(29-g)&&s.set(x,d+7),u.get(39-g)&&s.set(d-7,x)}}static generateCheckWords(s,a,l){let u=s.getSize()/l,d=new Ch(Ye.getGF(l)),g=N.truncDivision(a,l),x=Ye.bitsToWords(s,l,g);d.encode(x,g-u);let w=a%l,b=new M;b.appendBits(0,w);for(const A of Array.from(x))b.appendBits(A,l);return b}static bitsToWords(s,a,l){let u=new Int32Array(l),d,g;for(d=0,g=s.getSize()/a;d<g;d++){let x=0;for(let w=0;w<a;w++)x|=s.get(d*a+w)?1<<a-w-1:0;u[d]=x}return u}static getGF(s){switch(s){case 4:return ze.AZTEC_PARAM;case 6:return ze.AZTEC_DATA_6;case 8:return ze.AZTEC_DATA_8;case 10:return ze.AZTEC_DATA_10;case 12:return ze.AZTEC_DATA_12;default:throw new v("Unsupported word size "+s)}}static stuffBits(s,a){let l=new M,u=s.getSize(),d=(1<<a)-2;for(let g=0;g<u;g+=a){let x=0;for(let w=0;w<a;w++)(g+w>=u||s.get(g+w))&&(x|=1<<a-1-w);(x&d)===d?(l.appendBits(x&d,a),g--):x&d?l.appendBits(x,a):(l.appendBits(x|1,a),g--)}return l}static totalBitsInLayer(s,a){return((a?88:112)+16*s)*s}}Ye.DEFAULT_EC_PERCENT=33,Ye.DEFAULT_AZTEC_LAYERS=0,Ye.MAX_NB_BITS=32,Ye.MAX_NB_BITS_COMPACT=4,Ye.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Cc{encode(s,a,l,u){return this.encodeWithHints(s,a,l,u,null)}encodeWithHints(s,a,l,u,d){let g=Sh.ISO_8859_1,x=Ye.DEFAULT_EC_PERCENT,w=Ye.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(nn.CHARACTER_SET)&&(g=Bm.forName(d.get(nn.CHARACTER_SET).toString())),d.has(nn.ERROR_CORRECTION)&&(x=N.parseInt(d.get(nn.ERROR_CORRECTION).toString())),d.has(nn.AZTEC_LAYERS)&&(w=N.parseInt(d.get(nn.AZTEC_LAYERS).toString()))),Cc.encodeLayers(s,a,l,u,g,x,w)}static encodeLayers(s,a,l,u,d,g,x){if(a!==pe.AZTEC)throw new v("Can only encode AZTEC, but got "+a);let w=Ye.encode(te.getBytes(s,d),g,x);return Cc.renderResult(w,l,u)}static renderResult(s,a,l){let u=s.getMatrix();if(u==null)throw new an;let d=u.getWidth(),g=u.getHeight(),x=Math.max(a,d),w=Math.max(l,g),b=Math.min(x/d,w/g),A=(x-d*b)/2,j=(w-g*b)/2,P=new ne(x,w);for(let L=0,U=j;L<g;L++,U+=b)for(let W=0,X=A;W<d;W++,X+=b)u.get(W,L)&&P.setRegion(X,U,b,b);return P}}n.AbstractExpandedDecoder=Rr,n.ArgumentException=y,n.ArithmeticException=rr,n.AztecCode=Fm,n.AztecCodeReader=vi,n.AztecCodeWriter=Cc,n.AztecDecoder=Ue,n.AztecDetector=fc,n.AztecDetectorResult=Kr,n.AztecEncoder=Ye,n.AztecHighLevelEncoder=Da,n.AztecPoint=Qt,n.BarcodeFormat=pe,n.Binarizer=_,n.BinaryBitmap=C,n.BitArray=M,n.BitMatrix=ne,n.BitSource=gh,n.BrowserAztecCodeReader=pc,n.BrowserBarcodeReader=a3,n.BrowserCodeReader=Ke,n.BrowserDatamatrixCodeReader=c3,n.BrowserMultiFormatReader=w3,n.BrowserPDF417Reader=b3,n.BrowserQRCodeReader=C3,n.BrowserQRCodeSvgWriter=Ei,n.CharacterSetECI=H,n.ChecksumException=E,n.Code128Reader=ue,n.Code39Reader=Et,n.DataMatrixDecodedBitStreamParser=Ds,n.DataMatrixReader=Ls,n.DecodeHintType=V,n.DecoderResult=Hn,n.DefaultGridSampler=hc,n.DetectorResult=Dn,n.EAN13Reader=qr,n.EncodeHintType=nn,n.Exception=m,n.FormatException=B,n.GenericGF=ze,n.GenericGFPoly=Vt,n.GlobalHistogramBinarizer=q,n.GridSampler=io,n.GridSamplerInstance=$n,n.HTMLCanvasElementLuminanceSource=ce,n.HybridBinarizer=Q,n.ITFReader=rt,n.IllegalArgumentException=v,n.IllegalStateException=an,n.InvertedLuminanceSource=ee,n.LuminanceSource=J,n.MathUtils=De,n.MultiFormatOneDReader=co,n.MultiFormatReader=Lm,n.MultiFormatWriter=S3,n.NotFoundException=$,n.OneDReader=Rt,n.PDF417DecodedBitStreamParser=Y,n.PDF417DecoderErrorCorrection=Om,n.PDF417Reader=gn,n.PDF417ResultMetadata=jm,n.PerspectiveTransform=Zt,n.PlanarYUVLuminanceSource=Qr,n.QRCodeByteMatrix=wc,n.QRCodeDataMask=br,n.QRCodeDecodedBitStreamParser=_t,n.QRCodeDecoderErrorCorrectionLevel=ut,n.QRCodeDecoderFormatInformation=_n,n.QRCodeEncoder=pt,n.QRCodeEncoderQRCode=Ci,n.QRCodeMaskUtil=Pt,n.QRCodeMatrixUtil=ke,n.QRCodeMode=Te,n.QRCodeReader=Bs,n.QRCodeVersion=Se,n.QRCodeWriter=ho,n.RGBLuminanceSource=Eh,n.RSS14Reader=jt,n.RSSExpandedReader=re,n.ReaderException=vc,n.ReedSolomonDecoder=sr,n.ReedSolomonEncoder=Ch,n.ReedSolomonException=Mn,n.Result=Be,n.ResultMetadataType=Xe,n.ResultPoint=ge,n.StringUtils=te,n.UnsupportedOperationException=se,n.VideoInputDevice=Me,n.WhiteRectangleDetector=Wn,n.WriterException=lt,n.ZXingArrays=I,n.ZXingCharset=Bm,n.ZXingInteger=N,n.ZXingStandardCharsets=Sh,n.ZXingStringBuilder=de,n.ZXingStringEncoding=he,n.ZXingSystem=T,n.createAbstractExpandedDecoder=Im,Object.defineProperty(n,"__esModule",{value:!0})})})(g1,g1.exports);var gt=g1.exports;const t7=U2(gt),n7=v1({__proto__:null,default:t7},[gt]);var j2=function(){function t(e,n,r){if(this.formatMap=new Map([[me.QR_CODE,gt.BarcodeFormat.QR_CODE],[me.AZTEC,gt.BarcodeFormat.AZTEC],[me.CODABAR,gt.BarcodeFormat.CODABAR],[me.CODE_39,gt.BarcodeFormat.CODE_39],[me.CODE_93,gt.BarcodeFormat.CODE_93],[me.CODE_128,gt.BarcodeFormat.CODE_128],[me.DATA_MATRIX,gt.BarcodeFormat.DATA_MATRIX],[me.MAXICODE,gt.BarcodeFormat.MAXICODE],[me.ITF,gt.BarcodeFormat.ITF],[me.EAN_13,gt.BarcodeFormat.EAN_13],[me.EAN_8,gt.BarcodeFormat.EAN_8],[me.PDF_417,gt.BarcodeFormat.PDF_417],[me.RSS_14,gt.BarcodeFormat.RSS_14],[me.RSS_EXPANDED,gt.BarcodeFormat.RSS_EXPANDED],[me.UPC_A,gt.BarcodeFormat.UPC_A],[me.UPC_E,gt.BarcodeFormat.UPC_E],[me.UPC_EAN_EXTENSION,gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!n7)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var i=this.createZXingFormats(e),o=new Map;o.set(gt.DecodeHintType.POSSIBLE_FORMATS,i),o.set(gt.DecodeHintType.TRY_HARDER,!1),this.hints=o}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(r,i){try{r(n.decode(e))}catch(o){i(o)}})},t.prototype.decode=function(e){var n=new gt.MultiFormatReader(this.verbose,this.hints),r=new gt.HTMLCanvasElementLuminanceSource(e),i=new gt.BinaryBitmap(new gt.HybridBinarizer(r)),o=n.decode(i);return{text:o.text,format:WS.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),r7=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})},s7=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},P2=function(){function t(e,n,r){if(this.formatMap=new Map([[me.QR_CODE,"qr_code"],[me.AZTEC,"aztec"],[me.CODABAR,"codabar"],[me.CODE_39,"code_39"],[me.CODE_93,"code_93"],[me.CODE_128,"code_128"],[me.DATA_MATRIX,"data_matrix"],[me.ITF,"itf"],[me.EAN_13,"ean_13"],[me.EAN_8,"ean_8"],[me.PDF_417,"pdf417"],[me.UPC_A,"upc_a"],[me.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return r7(this,void 0,void 0,function(){var n,r;return s7(this,function(i){switch(i.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=i.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:WS.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,r=0,i=0,o=e;i<o.length;i++){var c=o[i],p=c.boundingBox.width*c.boundingBox.height;p>r&&(r=p,n=c)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],r=0,i=e;r<i.length;r++){var o=i[r];this.formatMap.has(o)?n.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,r,i){e.set(n,r)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),M2=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})},D2=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},i7=function(){function t(e,n,r,i){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&P2.isSupported()?(this.primaryDecoder=new P2(e,r,i),this.secondaryDecoder=new j2(e,r,i)):this.primaryDecoder=new j2(e,r,i)}return t.prototype.decodeAsync=function(e){return M2(this,void 0,void 0,function(){var n;return D2(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return M2(this,void 0,void 0,function(){var n,r;return D2(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,i.sent()];case 3:if(r=i.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,r=this.executionResults;n<r.length;n++){var i=r[n];e+=i}var o=e/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Am=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),vd=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})},wd=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},GS=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var r={advanced:[n]};return this.track.applyConstraints(r)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),o7=function(t){Am(e,t);function e(n,r){return t.call(this,n,r)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var r={};r[this.name]=n;var i={advanced:[r]};return this.track.applyConstraints(i)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(GS),a7=function(t){Am(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(o7),l7=function(t){Am(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(GS),c7=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new a7(this.track)},t.prototype.torchFeature=function(){return new l7(this.track)},t}(),u7=function(){function t(e,n,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=e.surface.clientWidth,i=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,i),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,r,i){return vd(this,void 0,void 0,function(){var o,c;return wd(this,function(p){switch(p.label){case 0:return o=new t(e,n,i),r.aspectRatio?(c={aspectRatio:r.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:p.sent(),p.label=2;case 2:return o.setupSurface(),[2,o]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,r=function(){setTimeout(e,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return vd(this,void 0,void 0,function(){return wd(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,r){var i=e.mediaStream.getVideoTracks(),o=i.length,c=0;e.mediaStream.getVideoTracks().forEach(function(p){e.mediaStream.removeTrack(p),p.stop(),++c,c>=o&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new c7(this.getFirstTrackOrFail())},t}(),d7=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,r){return vd(this,void 0,void 0,function(){return wd(this,function(i){return[2,u7.create(e,this.mediaStream,n,r)]})})},t.create=function(e){return vd(this,void 0,void 0,function(){var n,r;return wd(this,function(i){switch(i.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=i.sent(),[2,new t(r)]}})})},t}(),L2=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})},B2=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},h7=function(){function t(){}return t.failIfNotSupported=function(){return L2(this,void 0,void 0,function(){return B2(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return L2(this,void 0,void 0,function(){return B2(this,function(n){return[2,d7.create(e)]})})},t}(),f7=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(c){c(o)})}return new(n||(n=Promise))(function(o,c){function p(y){try{m(r.next(y))}catch(v){c(v)}}function h(y){try{m(r.throw(y))}catch(v){c(v)}}function m(y){y.done?o(y.value):i(y.value).then(p,h)}m((r=r.apply(t,e||[])).next())})},p7=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,c;return c={next:p(0),throw:p(1),return:p(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function p(m){return function(y){return h([m,y])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(r=1,i&&(o=m[0]&2?i.return:m[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,m[1])).done)return o;switch(i=0,o&&(m=[m[0]&2,o.value]),m[0]){case 0:case 1:o=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,i=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!o||m[1]>o[0]&&m[1]<o[3])){n.label=m[1];break}if(m[0]===6&&n.label<o[1]){n.label=o[1],o=m;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(m);break}o[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(t,n)}catch(y){m=[6,y],i=0}finally{r=o=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}},m7=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=$o.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=$o.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return f7(this,void 0,void 0,function(){var e,n,r,i,o,c,p;return p7(this,function(h){switch(h.label){case 0:return e=function(m){for(var y=m.getVideoTracks(),v=0,C=y;v<C.length;v++){var E=C[v];E.enabled=!1,E.stop(),m.removeTrack(E)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=h.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=h.sent(),i=[],o=0,c=r;o<c.length;o++)p=c[o],p.kind==="videoinput"&&i.push({id:p.deviceId,label:p.label});return e(n),[2,i]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var r=function(o){for(var c=[],p=0,h=o;p<h.length;p++){var m=h[p];m.kind==="video"&&c.push({id:m.id,label:m.label})}e(c)},i=MediaStreamTrack;i.getSources(r)})},t}(),Dt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Dt||(Dt={}));var g7=function(){function t(){this.state=Dt.NOT_STARTED,this.onGoingTransactionNewState=Dt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Dt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Dt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Dt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Dt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Dt.UNKNOWN:throw"Transition from unknown is not allowed";case Dt.NOT_STARTED:this.failIfNewStateIs(e,[Dt.PAUSED]);break;case Dt.SCANNING:break;case Dt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];if(e===o)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),x7=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Dt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Dt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Dt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Dt.PAUSED},t}(),y7=function(){function t(){}return t.create=function(){return new x7(new g7)},t}(),v7=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(t){v7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(QD),w7=function(){function t(e,n){this.logger=n,this.fps=ar.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=ar.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$S.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ps(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),b7=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new e7(this.verbose),this.qrcode=new i7(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=y7.create()}return t.prototype.start=function(e,n,r,i){var o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;i?c=i:c=this.verbose?this.logger.log:function(){};var p=w7.create(n,this.logger);this.clearElement();var h=!1;p.videoConstraints&&(p.isMediaStreamConstraintsValid()?h=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var m=h,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:ar.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,C=this.stateManagerProxy.startTransition(Dt.SCANNING);return new Promise(function(E,_){var T=m?p.videoConstraints:v.createVideoConstraints(e);if(!T){C.cancel(),_("videoConstraints should be defined");return}var k={};(!m||p.aspectRatio)&&(k.aspectRatio=p.aspectRatio);var S={onRenderSurfaceReady:function(I,N){v.setupUi(I,N,p),v.isScanning=!0,v.foreverScan(p,r,c)}};h7.failIfNotSupported().then(function(I){I.create(T).then(function(N){return N.render(o.element,k,S).then(function(M){v.renderedCamera=M,C.execute(),E(null)}).catch(function(M){C.cancel(),_(M)})}).catch(function(N){C.cancel(),_($o.errorGettingUserMedia(N))})}).catch(function(I){C.cancel(),_($o.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Dt.PAUSED),this.showPausedState(),(ps(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Dt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Dt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(e.element){var o=document.getElementById(ar.SHADED_REGION_ELEMENT_ID);o&&e.element.removeChild(o)}},i=this;return this.renderedCamera.close().then(function(){return i.renderedCamera=null,i.element&&(i.element.removeChild(i.canvasElement),i.canvasElement=null),r(),i.qrRegion&&(i.qrRegion=null),i.context&&(i.context=null),n.execute(),i.hidePausedState(),i.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(r){return r.decodedText})},t.prototype.scanFileV2=function(e,n){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ps(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(i,o){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var c=new Image;c.onload=function(){var p=c.width,h=c.height,m=document.getElementById(r.elementId),y=m.clientWidth?m.clientWidth:ar.DEFAULT_WIDTH,v=Math.max(m.clientHeight?m.clientHeight:h,ar.FILE_SCAN_MIN_HEIGHT),C=r.computeCanvasDrawConfig(p,h,y,v);if(n){var E=r.createCanvasElement(y,v,"qr-canvas-visible");E.style.display="inline-block",m.appendChild(E);var _=E.getContext("2d");if(!_)throw"Unable to get 2d context from canvas";_.canvas.width=y,_.canvas.height=v,_.drawImage(c,0,0,p,h,C.x,C.y,C.width,C.height)}var T=ar.FILE_SCAN_HIDDEN_CANVAS_PADDING,k=Math.max(c.width,C.width),S=Math.max(c.height,C.height),I=k+2*T,N=S+2*T,M=r.createCanvasElement(I,N);m.appendChild(M);var F=M.getContext("2d");if(!F)throw"Unable to get 2d context from canvas";F.canvas.width=I,F.canvas.height=N,F.drawImage(c,0,0,p,h,T,T,k,S);try{r.qrcode.decodeRobustlyAsync(M).then(function(V){i(R2.createFromQrcodeResult(V))}).catch(o)}catch(V){o("QR code parse error, error = ".concat(V))}},c.onerror=o,c.onabort=o,c.onstalled=o,c.onsuspend=o,c.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return m7.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!$S.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[me.QR_CODE,me.AZTEC,me.CODABAR,me.CODE_39,me.CODE_93,me.CODE_128,me.DATA_MATRIX,me.MAXICODE,me.ITF,me.EAN_13,me.EAN_8,me.PDF_417,me.RSS_14,me.RSS_EXPANDED,me.UPC_A,me.UPC_E,me.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],i=0,o=e.formatsToSupport;i<o.length;i++){var c=o[i];ZD(c)?r.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ps(e))return!0;if(!ps(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ps(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ps(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,r){var i=this,o=r.qrbox;this.validateQrboxConfig(o);var c=this.toQrdimensions(e,n,o),p=function(m){if(m<ar.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ar.MIN_QR_BOX_SIZE,"px.")},h=function(m){return m>e&&(i.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),m=e),m};p(c.width),p(c.height),c.width=h(c.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(e,n)}catch(i){throw new Error("qrbox config was passed as a function but it failed with unknown error"+i)}return r},t.prototype.setupUi=function(e,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,r);var i=ps(r.qrbox)?{width:e,height:n}:r.qrbox;this.validateQrboxConfig(i);var o=this.toQrdimensions(e,n,i);o.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=r.isShadedBoxEnabled()&&o.height<=n,p={x:0,y:0,width:e,height:n},h=c?this.getShadedRegionBounds(e,n,o):p,m=this.createCanvasElement(h.width,h.height),y={willReadFrequently:!0},v=m.getContext("2d",y);v.canvas.width=h.width,v.canvas.height=h.height,this.element.append(m),c&&this.possiblyInsertShadingElement(this.element,e,n,o),this.createScannerPausedUiElement(this.element),this.qrRegion=h,this.context=v,this.canvasElement=m},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=$o.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(i){return e(i.text,R2.createFromQrcodeResult(i)),r.possiblyUpdateShaders(!0),!0}).catch(function(i){r.possiblyUpdateShaders(!1);var o=$o.codeParseError(i);return n(o,JD.createFrom(o)),!1})},t.prototype.foreverScan=function(e,n,r){var i=this;if(this.shouldScan&&this.renderedCamera){var o=this.renderedCamera.getSurface(),c=o.videoWidth/o.clientWidth,p=o.videoHeight/o.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var h=this.qrRegion.width*c,m=this.qrRegion.height*p,y=this.qrRegion.x*c,v=this.qrRegion.y*p;this.context.drawImage(o,y,v,h,m,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){i.foreverScanTimeout=setTimeout(function(){i.foreverScan(e,n,r)},i.getTimeoutFps(e.fps))};this.scanContext(n,r).then(function(E){!E&&e.disableFlip!==!0?(i.context.translate(i.context.canvas.width,0),i.context.scale(-1,1),i.scanContext(n,r).finally(function(){C()})):C()}).catch(function(E){i.logger.logError("Error happend while scanning context",E),C()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",r="deviceId",i={user:!0,environment:!0},o="exact",c=function(_){if(_ in i)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(_,"'")},p=Object.keys(e);if(p.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(p.length," keys");var h=Object.keys(e)[0];if(h!==n&&h!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(h===n){var m=e.facingMode;if(typeof m=="string"){if(c(m))return{facingMode:m}}else if(typeof m=="object")if(o in m){if(c(m["".concat(o)]))return{facingMode:{exact:m["".concat(o)]}}}else throw"'facingMode' should be string or object with"+" ".concat(o," as key.");else{var y=typeof m;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(o in v)return{deviceId:{exact:v["".concat(o)]}};throw"'deviceId' should be string or object with"+" ".concat(o," as key.")}else{var C=typeof v;throw"Invalid type of 'deviceId' = ".concat(C)}}}var E=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(E)},t.prototype.computeCanvasDrawConfig=function(e,n,r,i){if(e<=r&&n<=i){var o=(r-e)/2,c=(i-n)/2;return{x:o,y:c,width:e,height:n}}else{var p=e,h=n;return e>r&&(n=r/e*n,e=r),n>i&&(e=i/n*e,n=i),this.logger.log("Image downsampled from "+"".concat(p,"X").concat(h)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,r,i)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?ar.BORDER_SHADER_MATCH_COLOR:ar.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,r){var i=e,o=n,c=document.createElement("canvas");return c.style.width="".concat(i,"px"),c.style.height="".concat(o,"px"),c.style.display="none",c.id=ps(r)?"qr-canvas":r,c},t.prototype.getShadedRegionBounds=function(e,n,r){if(r.width>e||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},t.prototype.possiblyInsertShadingElement=function(e,n,r,i){if(!(n-i.width<1||r-i.height<1)){var o=document.createElement("div");o.style.position="absolute";var c=(n-i.width)/2,p=(r-i.height)/2;if(o.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderTop="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),o.style.borderBottom="".concat(p,"px solid rgba(0, 0, 0, 0.48)"),o.style.boxSizing="border-box",o.style.top="0px",o.style.bottom="0px",o.style.left="0px",o.style.right="0px",o.id="".concat(ar.SHADED_REGION_ELEMENT_ID),n-i.width<11||r-i.height<11)this.hasBorderShaders=!1;else{var h=5,m=40;this.insertShaderBorders(o,m,h,-h,null,0,!0),this.insertShaderBorders(o,m,h,-h,null,0,!1),this.insertShaderBorders(o,m,h,null,-h,0,!0),this.insertShaderBorders(o,m,h,null,-h,0,!1),this.insertShaderBorders(o,h,m+h,-h,null,-h,!0),this.insertShaderBorders(o,h,m+h,null,-h,-h,!0),this.insertShaderBorders(o,h,m+h,-h,null,-h,!1),this.insertShaderBorders(o,h,m+h,null,-h,-h,!1),this.hasBorderShaders=!0}e.append(o)}},t.prototype.insertShaderBorders=function(e,n,r,i,o,c,p){var h=document.createElement("div");h.style.position="absolute",h.style.backgroundColor=ar.BORDER_SHADER_DEFAULT_COLOR,h.style.width="".concat(n,"px"),h.style.height="".concat(r,"px"),i!==null&&(h.style.top="".concat(i,"px")),o!==null&&(h.style.bottom="".concat(o,"px")),p?h.style.left="".concat(c,"px"):h.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(h),e.appendChild(h)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),F2;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(F2||(F2={}));function C7(t,e){const[n,r]=O.useState(t);return O.useEffect(()=>{const i=setTimeout(()=>{r(t)},e);return()=>{clearTimeout(i)}},[t,e]),n}const E7=({onClose:t,onSuccess:e})=>{const[n,r]=O.useState("scan"),[i,o]=O.useState("issue"),[c,p]=O.useState(null),[h,m]=O.useState(null),[y,v]=O.useState(""),C=C7(y,300),[E,_]=O.useState(null),[T,k]=O.useState(!1),S=O.useRef(null),I="qr-scanner-region",N=O.useRef(!0);O.useEffect(()=>(N.current=!0,n==="scan"&&(S.current=new b7(I,{verbose:!1})),()=>{N.current=!1,S.current&&S.current.isScanning&&S.current.stop().catch(H=>{console.warn("Scanner stop on unmount failed:",H)})}),[n]),O.useEffect(()=>{const H=S.current;if(!H||n!=="scan")return;c?(async()=>{if(H.isScanning)try{await H.stop()}catch(te){console.warn("Scanner stop failed, may already be stopping.",te)}})():(async()=>{if(!H.isScanning)try{await H.start({facingMode:"environment"},{fps:30,qrbox:{width:280,height:280},aspectRatio:1},F,V)}catch{N.current&&_({type:"error",text:"Could not start QR scanner. Check camera permissions."})}})()},[n,c]);const M=async H=>{let se=null,he=null;const te=`${window.location.origin}/book/`;if(H.startsWith(te)){const de=H.substring(te.length);if(de){const{data:ne,error:$}=await _e.from("books").select("*").eq("id",de).single();se=ne,he=$}}else{const{data:de,error:ne}=await _e.from("books").select("*").or(`ddc_number.eq.${H},id.eq.${H}`).limit(1);de&&de.length>0&&(se=de[0]),he=ne}if(N.current)if(he||!se)_({type:"error",text:"Book not found. Please try again."}),p(null),setTimeout(()=>{N.current&&_(null)},3e3);else{p(se);const{data:de}=await _e.from("circulation").select("*, members(name, class, register_number)").eq("book_id",se.id).eq("status","issued").single();de&&de.members?(_({type:"info",text:`Book found: ${se.title}. Borrowed by: ${de.members.name} (${de.members.class||"N/A"})`}),o("return")):(_({type:"info",text:`Book found: ${se.title}`}),o("issue"))}};O.useEffect(()=>{C&&n==="manual"&&!c&&(k(!0),_({type:"info",text:"Searching for book..."}),M(C).finally(()=>{N.current&&k(!1)}))},[C,n]);const F=H=>{T||(k(!0),_({type:"info",text:"QR code detected. Verifying book..."}),M(H).finally(()=>{N.current&&k(!1)}))},V=()=>{},B=async()=>{if(c){if(k(!0),_(null),i==="issue"){if(!h){_({type:"error",text:"Please select a member to issue the book."}),k(!1);return}const{error:H}=await _e.rpc("issue_book",{p_book_id:c.id,p_member_id:h.value,p_due_date:new Date(Date.now()+14*24*60*60*1e3).toISOString()});H?_({type:"error",text:H.message}):(_({type:"success",text:`Successfully issued "${c.title}" to ${h.label}.`}),setTimeout(()=>{e(),t()},2e3))}else{const{error:H}=await _e.rpc("return_book_by_id",{p_book_id:c.id});H?_({type:"error",text:H.message}):(_({type:"success",text:`Successfully returned "${c.title}".`}),setTimeout(()=>{e(),t()},2e3))}k(!1)}},z=()=>{p(null),m(null),v(""),_(null)};return f.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-md flex items-center justify-center p-4 z-50",children:f.jsxs(Ie.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"bg-gradient-to-br from-white to-neutral-50 rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden border border-neutral-200",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-neutral-200 bg-gradient-to-r from-primary/5 to-transparent",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-primary/20 p-2 rounded-xl",children:f.jsx(wC,{className:"text-primary",size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-neutral-900",children:"Quick Scan"}),f.jsx("p",{className:"text-xs text-neutral-500",children:"Fast book circulation"})]})]}),f.jsx("button",{onClick:t,className:"p-2 hover:bg-neutral-100 rounded-full transition-colors text-neutral-600 hover:text-neutral-900",children:f.jsx(Pn,{size:20})})]}),f.jsxs("div",{className:"p-6",children:[f.jsx(ui,{mode:"wait",children:c?f.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"space-y-4",children:[f.jsxs("div",{className:"p-5 bg-gradient-to-br from-green-50 to-emerald-50 border-2 border-green-200 rounded-xl text-center",children:[f.jsx("div",{className:"flex items-center justify-center mb-2",children:f.jsx(z0,{className:"text-green-600",size:32})}),f.jsx("h3",{className:"font-bold text-green-900 text-lg",children:c.title}),f.jsxs("p",{className:"text-sm text-green-700 mt-1",children:["by ",c.author]})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-neutral-100 rounded-xl p-1.5",children:[f.jsx("button",{onClick:()=>o("issue"),className:`flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all ${i==="issue"?"bg-white shadow-md text-primary":"text-neutral-600"}`,children:"Issue Book"}),f.jsx("button",{onClick:()=>o("return"),className:`flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all ${i==="return"?"bg-white shadow-md text-primary":"text-neutral-600"}`,children:"Return Book"})]}),i==="issue"&&f.jsxs(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Select Member *"}),f.jsx(Qi,{value:h,onChange:m,placeholder:"Search for a member...",tableName:"members",labelField:"name",searchFields:["name","email","register_number"],required:!0})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:z,className:"px-5 py-2.5 bg-neutral-100 hover:bg-neutral-200 rounded-xl font-semibold text-neutral-700 transition-colors",children:"Scan Another"}),f.jsx("button",{onClick:B,disabled:T,className:"px-6 py-2.5 bg-gradient-to-r from-primary to-primary-dark text-white rounded-xl font-bold disabled:opacity-50 flex items-center justify-center gap-2 shadow-lg hover:shadow-xl transition-all",children:T?f.jsx(jn,{className:"animate-spin",size:18}):i==="issue"?"Issue Book":"Confirm Return"})]})]},"book-found"):f.jsxs(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[f.jsxs("div",{className:"flex items-center justify-center gap-2 bg-neutral-100 rounded-xl p-1.5 mb-6",children:[f.jsxs("button",{onClick:()=>r("scan"),className:`flex-1 py-2.5 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 transition-all ${n==="scan"?"bg-white shadow-md text-primary":"text-neutral-600 hover:text-neutral-900"}`,children:[f.jsx(ZT,{size:18})," Scan QR"]}),f.jsxs("button",{onClick:()=>r("manual"),className:`flex-1 py-2.5 rounded-lg font-semibold text-sm flex items-center justify-center gap-2 transition-all ${n==="manual"?"bg-white shadow-md text-primary":"text-neutral-600 hover:text-neutral-900"}`,children:[f.jsx(lI,{size:18})," Manual"]})]}),n==="scan"?f.jsxs("div",{className:"relative",children:[f.jsx("div",{id:I,className:"w-full h-72 border-2 border-dashed border-primary/30 rounded-xl bg-neutral-900 overflow-hidden"}),f.jsxs("div",{className:"absolute top-4 left-4 bg-primary/90 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-xs font-bold flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),"Scanning..."]})]}):f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Enter Book DDC or ID"}),f.jsx("input",{type:"text",value:y,onChange:H=>v(H.target.value),placeholder:"e.g., 813.6 or book ID",className:"w-full px-4 py-3 border-2 border-neutral-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all",disabled:T})]}),f.jsxs("div",{className:"relative flex items-center",children:[f.jsx("div",{className:"flex-grow border-t border-neutral-300"}),f.jsx("span",{className:"flex-shrink mx-4 text-neutral-500 text-sm font-medium",children:"OR"}),f.jsx("div",{className:"flex-grow border-t border-neutral-300"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Search and Select Book"}),f.jsx(Qi,{value:null,onChange:H=>{H&&(v(""),p(H.data),_({type:"info",text:`Book found: ${H.label}`}))},placeholder:"Type to search by title, author, DDC...",tableName:"books",labelField:"title",searchFields:["title","author","ddc_number"]})]})]})]},"scanning")}),f.jsx(ui,{children:E&&f.jsxs(Ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:`mt-4 p-4 rounded-xl text-sm font-medium flex items-center gap-3 ${E.type==="error"?"bg-red-50 text-red-800 border border-red-200":E.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-blue-50 text-blue-800 border border-blue-200"}`,children:[E.type==="error"&&f.jsx(Ts,{size:18}),E.type==="success"&&f.jsx(z0,{size:18}),T&&E.type==="info"&&f.jsx(jn,{className:"animate-spin",size:18}),f.jsx("span",{children:E.text})]})})]})]})})};var S7=Object.defineProperty,bd=Object.getOwnPropertySymbols,XS=Object.prototype.hasOwnProperty,KS=Object.prototype.propertyIsEnumerable,V2=(t,e,n)=>e in t?S7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,x1=(t,e)=>{for(var n in e||(e={}))XS.call(e,n)&&V2(t,n,e[n]);if(bd)for(var n of bd(e))KS.call(e,n)&&V2(t,n,e[n]);return t},y1=(t,e)=>{var n={};for(var r in t)XS.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&bd)for(var r of bd(t))e.indexOf(r)<0&&KS.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ji;(t=>{const e=class He{constructor(h,m,y,v){if(this.version=h,this.errorCorrectionLevel=m,this.modules=[],this.isFunction=[],h<He.MIN_VERSION||h>He.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=h*4+17;let C=[];for(let _=0;_<this.size;_++)C.push(!1);for(let _=0;_<this.size;_++)this.modules.push(C.slice()),this.isFunction.push(C.slice());this.drawFunctionPatterns();const E=this.addEccAndInterleave(y);if(this.drawCodewords(E),v==-1){let _=1e9;for(let T=0;T<8;T++){this.applyMask(T),this.drawFormatBits(T);const k=this.getPenaltyScore();k<_&&(v=T,_=k),this.applyMask(T)}}i(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(h,m){const y=t.QrSegment.makeSegments(h);return He.encodeSegments(y,m)}static encodeBinary(h,m){const y=t.QrSegment.makeBytes(h);return He.encodeSegments([y],m)}static encodeSegments(h,m,y=1,v=40,C=-1,E=!0){if(!(He.MIN_VERSION<=y&&y<=v&&v<=He.MAX_VERSION)||C<-1||C>7)throw new RangeError("Invalid value");let _,T;for(_=y;;_++){const N=He.getNumDataCodewords(_,m)*8,M=c.getTotalBits(h,_);if(M<=N){T=M;break}if(_>=v)throw new RangeError("Data too long")}for(const N of[He.Ecc.MEDIUM,He.Ecc.QUARTILE,He.Ecc.HIGH])E&&T<=He.getNumDataCodewords(_,N)*8&&(m=N);let k=[];for(const N of h){n(N.mode.modeBits,4,k),n(N.numChars,N.mode.numCharCountBits(_),k);for(const M of N.getData())k.push(M)}i(k.length==T);const S=He.getNumDataCodewords(_,m)*8;i(k.length<=S),n(0,Math.min(4,S-k.length),k),n(0,(8-k.length%8)%8,k),i(k.length%8==0);for(let N=236;k.length<S;N^=253)n(N,8,k);let I=[];for(;I.length*8<k.length;)I.push(0);return k.forEach((N,M)=>I[M>>>3]|=N<<7-(M&7)),new He(_,m,I,C)}getModule(h,m){return 0<=h&&h<this.size&&0<=m&&m<this.size&&this.modules[m][h]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const h=this.getAlignmentPatternPositions(),m=h.length;for(let y=0;y<m;y++)for(let v=0;v<m;v++)y==0&&v==0||y==0&&v==m-1||y==m-1&&v==0||this.drawAlignmentPattern(h[y],h[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(h){const m=this.errorCorrectionLevel.formatBits<<3|h;let y=m;for(let C=0;C<10;C++)y=y<<1^(y>>>9)*1335;const v=(m<<10|y)^21522;i(v>>>15==0);for(let C=0;C<=5;C++)this.setFunctionModule(8,C,r(v,C));this.setFunctionModule(8,7,r(v,6)),this.setFunctionModule(8,8,r(v,7)),this.setFunctionModule(7,8,r(v,8));for(let C=9;C<15;C++)this.setFunctionModule(14-C,8,r(v,C));for(let C=0;C<8;C++)this.setFunctionModule(this.size-1-C,8,r(v,C));for(let C=8;C<15;C++)this.setFunctionModule(8,this.size-15+C,r(v,C));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let h=this.version;for(let y=0;y<12;y++)h=h<<1^(h>>>11)*7973;const m=this.version<<12|h;i(m>>>18==0);for(let y=0;y<18;y++){const v=r(m,y),C=this.size-11+y%3,E=Math.floor(y/3);this.setFunctionModule(C,E,v),this.setFunctionModule(E,C,v)}}drawFinderPattern(h,m){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const C=Math.max(Math.abs(v),Math.abs(y)),E=h+v,_=m+y;0<=E&&E<this.size&&0<=_&&_<this.size&&this.setFunctionModule(E,_,C!=2&&C!=4)}}drawAlignmentPattern(h,m){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(h+v,m+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(h,m,y){this.modules[m][h]=y,this.isFunction[m][h]=!0}addEccAndInterleave(h){const m=this.version,y=this.errorCorrectionLevel;if(h.length!=He.getNumDataCodewords(m,y))throw new RangeError("Invalid argument");const v=He.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][m],C=He.ECC_CODEWORDS_PER_BLOCK[y.ordinal][m],E=Math.floor(He.getNumRawDataModules(m)/8),_=v-E%v,T=Math.floor(E/v);let k=[];const S=He.reedSolomonComputeDivisor(C);for(let N=0,M=0;N<v;N++){let F=h.slice(M,M+T-C+(N<_?0:1));M+=F.length;const V=He.reedSolomonComputeRemainder(F,S);N<_&&F.push(0),k.push(F.concat(V))}let I=[];for(let N=0;N<k[0].length;N++)k.forEach((M,F)=>{(N!=T-C||F>=_)&&I.push(M[N])});return i(I.length==E),I}drawCodewords(h){if(h.length!=Math.floor(He.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let m=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let C=0;C<2;C++){const E=y-C,T=(y+1&2)==0?this.size-1-v:v;!this.isFunction[T][E]&&m<h.length*8&&(this.modules[T][E]=r(h[m>>>3],7-(m&7)),m++)}}i(m==h.length*8)}applyMask(h){if(h<0||h>7)throw new RangeError("Mask value out of range");for(let m=0;m<this.size;m++)for(let y=0;y<this.size;y++){let v;switch(h){case 0:v=(y+m)%2==0;break;case 1:v=m%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+m)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(m/2))%2==0;break;case 5:v=y*m%2+y*m%3==0;break;case 6:v=(y*m%2+y*m%3)%2==0;break;case 7:v=((y+m)%2+y*m%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[m][y]&&v&&(this.modules[m][y]=!this.modules[m][y])}}getPenaltyScore(){let h=0;for(let C=0;C<this.size;C++){let E=!1,_=0,T=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[C][k]==E?(_++,_==5?h+=He.PENALTY_N1:_>5&&h++):(this.finderPenaltyAddHistory(_,T),E||(h+=this.finderPenaltyCountPatterns(T)*He.PENALTY_N3),E=this.modules[C][k],_=1);h+=this.finderPenaltyTerminateAndCount(E,_,T)*He.PENALTY_N3}for(let C=0;C<this.size;C++){let E=!1,_=0,T=[0,0,0,0,0,0,0];for(let k=0;k<this.size;k++)this.modules[k][C]==E?(_++,_==5?h+=He.PENALTY_N1:_>5&&h++):(this.finderPenaltyAddHistory(_,T),E||(h+=this.finderPenaltyCountPatterns(T)*He.PENALTY_N3),E=this.modules[k][C],_=1);h+=this.finderPenaltyTerminateAndCount(E,_,T)*He.PENALTY_N3}for(let C=0;C<this.size-1;C++)for(let E=0;E<this.size-1;E++){const _=this.modules[C][E];_==this.modules[C][E+1]&&_==this.modules[C+1][E]&&_==this.modules[C+1][E+1]&&(h+=He.PENALTY_N2)}let m=0;for(const C of this.modules)m=C.reduce((E,_)=>E+(_?1:0),m);const y=this.size*this.size,v=Math.ceil(Math.abs(m*20-y*10)/y)-1;return i(0<=v&&v<=9),h+=v*He.PENALTY_N4,i(0<=h&&h<=2568888),h}getAlignmentPatternPositions(){if(this.version==1)return[];{const h=Math.floor(this.version/7)+2,m=this.version==32?26:Math.ceil((this.version*4+4)/(h*2-2))*2;let y=[6];for(let v=this.size-7;y.length<h;v-=m)y.splice(1,0,v);return y}}static getNumRawDataModules(h){if(h<He.MIN_VERSION||h>He.MAX_VERSION)throw new RangeError("Version number out of range");let m=(16*h+128)*h+64;if(h>=2){const y=Math.floor(h/7)+2;m-=(25*y-10)*y-55,h>=7&&(m-=36)}return i(208<=m&&m<=29648),m}static getNumDataCodewords(h,m){return Math.floor(He.getNumRawDataModules(h)/8)-He.ECC_CODEWORDS_PER_BLOCK[m.ordinal][h]*He.NUM_ERROR_CORRECTION_BLOCKS[m.ordinal][h]}static reedSolomonComputeDivisor(h){if(h<1||h>255)throw new RangeError("Degree out of range");let m=[];for(let v=0;v<h-1;v++)m.push(0);m.push(1);let y=1;for(let v=0;v<h;v++){for(let C=0;C<m.length;C++)m[C]=He.reedSolomonMultiply(m[C],y),C+1<m.length&&(m[C]^=m[C+1]);y=He.reedSolomonMultiply(y,2)}return m}static reedSolomonComputeRemainder(h,m){let y=m.map(v=>0);for(const v of h){const C=v^y.shift();y.push(0),m.forEach((E,_)=>y[_]^=He.reedSolomonMultiply(E,C))}return y}static reedSolomonMultiply(h,m){if(h>>>8||m>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(m>>>v&1)*h;return i(y>>>8==0),y}finderPenaltyCountPatterns(h){const m=h[1];i(m<=this.size*3);const y=m>0&&h[2]==m&&h[3]==m*3&&h[4]==m&&h[5]==m;return(y&&h[0]>=m*4&&h[6]>=m?1:0)+(y&&h[6]>=m*4&&h[0]>=m?1:0)}finderPenaltyTerminateAndCount(h,m,y){return h&&(this.finderPenaltyAddHistory(m,y),m=0),m+=this.size,this.finderPenaltyAddHistory(m,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(h,m){m[0]==0&&(h+=this.size),m.pop(),m.unshift(h)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(p,h,m){if(h<0||h>31||p>>>h)throw new RangeError("Value out of range");for(let y=h-1;y>=0;y--)m.push(p>>>y&1)}function r(p,h){return(p>>>h&1)!=0}function i(p){if(!p)throw new Error("Assertion error")}const o=class Mt{constructor(h,m,y){if(this.mode=h,this.numChars=m,this.bitData=y,m<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(h){let m=[];for(const y of h)n(y,8,m);return new Mt(Mt.Mode.BYTE,h.length,m)}static makeNumeric(h){if(!Mt.isNumeric(h))throw new RangeError("String contains non-numeric characters");let m=[];for(let y=0;y<h.length;){const v=Math.min(h.length-y,3);n(parseInt(h.substring(y,y+v),10),v*3+1,m),y+=v}return new Mt(Mt.Mode.NUMERIC,h.length,m)}static makeAlphanumeric(h){if(!Mt.isAlphanumeric(h))throw new RangeError("String contains unencodable characters in alphanumeric mode");let m=[],y;for(y=0;y+2<=h.length;y+=2){let v=Mt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(y))*45;v+=Mt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(y+1)),n(v,11,m)}return y<h.length&&n(Mt.ALPHANUMERIC_CHARSET.indexOf(h.charAt(y)),6,m),new Mt(Mt.Mode.ALPHANUMERIC,h.length,m)}static makeSegments(h){return h==""?[]:Mt.isNumeric(h)?[Mt.makeNumeric(h)]:Mt.isAlphanumeric(h)?[Mt.makeAlphanumeric(h)]:[Mt.makeBytes(Mt.toUtf8ByteArray(h))]}static makeEci(h){let m=[];if(h<0)throw new RangeError("ECI assignment value out of range");if(h<128)n(h,8,m);else if(h<16384)n(2,2,m),n(h,14,m);else if(h<1e6)n(6,3,m),n(h,21,m);else throw new RangeError("ECI assignment value out of range");return new Mt(Mt.Mode.ECI,0,m)}static isNumeric(h){return Mt.NUMERIC_REGEX.test(h)}static isAlphanumeric(h){return Mt.ALPHANUMERIC_REGEX.test(h)}getData(){return this.bitData.slice()}static getTotalBits(h,m){let y=0;for(const v of h){const C=v.mode.numCharCountBits(m);if(v.numChars>=1<<C)return 1/0;y+=4+C+v.bitData.length}return y}static toUtf8ByteArray(h){h=encodeURI(h);let m=[];for(let y=0;y<h.length;y++)h.charAt(y)!="%"?m.push(h.charCodeAt(y)):(m.push(parseInt(h.substring(y+1,y+3),16)),y+=2);return m}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let c=o;t.QrSegment=o})(Ji||(Ji={}));(t=>{(e=>{const n=class{constructor(i,o){this.ordinal=i,this.formatBits=o}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Ji||(Ji={}));(t=>{(e=>{const n=class{constructor(i,o){this.modeBits=i,this.numBitsCharCount=o}numCharCountBits(i){return this.numBitsCharCount[Math.floor((i+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Ji||(Ji={}));var Go=Ji;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var _7={L:Go.QrCode.Ecc.LOW,M:Go.QrCode.Ecc.MEDIUM,Q:Go.QrCode.Ecc.QUARTILE,H:Go.QrCode.Ecc.HIGH},qS=128,YS="L",ZS="#FFFFFF",QS="#000000",JS=!1,e3=1,A7=4,N7=0,T7=.1;function t3(t,e=0){const n=[];return t.forEach(function(r,i){let o=null;r.forEach(function(c,p){if(!c&&o!==null){n.push(`M${o+e} ${i+e}h${p-o}v1H${o+e}z`),o=null;return}if(p===r.length-1){if(!c)return;o===null?n.push(`M${p+e},${i+e} h1v1H${p+e}z`):n.push(`M${o+e},${i+e} h${p+1-o}v1H${o+e}z`);return}c&&o===null&&(o=p)})}),n.join("")}function n3(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((i,o)=>o<e.x||o>=e.x+e.w?i:!1))}function I7(t,e,n,r){if(r==null)return null;const i=t.length+n*2,o=Math.floor(e*T7),c=i/e,p=(r.width||o)*c,h=(r.height||o)*c,m=r.x==null?t.length/2-p/2:r.x*c,y=r.y==null?t.length/2-h/2:r.y*c,v=r.opacity==null?1:r.opacity;let C=null;if(r.excavate){let _=Math.floor(m),T=Math.floor(y),k=Math.ceil(p+m-_),S=Math.ceil(h+y-T);C={x:_,y:T,w:k,h:S}}const E=r.crossOrigin;return{x:m,y,h,w:p,excavation:C,opacity:v,crossOrigin:E}}function k7(t,e){return e!=null?Math.max(Math.floor(e),0):t?A7:N7}function r3({value:t,level:e,minVersion:n,includeMargin:r,marginSize:i,imageSettings:o,size:c,boostLevel:p}){let h=Xt.useMemo(()=>{const _=(Array.isArray(t)?t:[t]).reduce((T,k)=>(T.push(...Go.QrSegment.makeSegments(k)),T),[]);return Go.QrCode.encodeSegments(_,_7[e],n,void 0,void 0,p)},[t,e,n,p]);const{cells:m,margin:y,numCells:v,calculatedImageSettings:C}=Xt.useMemo(()=>{let E=h.getModules();const _=k7(r,i),T=E.length+_*2,k=I7(E,c,_,o);return{cells:E,margin:_,numCells:T,calculatedImageSettings:k}},[h,c,o,r,i]);return{qrcode:h,margin:y,cells:m,numCells:v,calculatedImageSettings:C}}var O7=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Nm=Xt.forwardRef(function(e,n){const r=e,{value:i,size:o=qS,level:c=YS,bgColor:p=ZS,fgColor:h=QS,includeMargin:m=JS,minVersion:y=e3,boostLevel:v,marginSize:C,imageSettings:E}=r,T=y1(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:k}=T,S=y1(T,["style"]),I=E==null?void 0:E.src,N=Xt.useRef(null),M=Xt.useRef(null),F=Xt.useCallback(ne=>{N.current=ne,typeof n=="function"?n(ne):n&&(n.current=ne)},[n]),[V,B]=Xt.useState(!1),{margin:z,cells:H,numCells:se,calculatedImageSettings:he}=r3({value:i,level:c,minVersion:y,boostLevel:v,includeMargin:m,marginSize:C,imageSettings:E,size:o});Xt.useEffect(()=>{if(N.current!=null){const ne=N.current,$=ne.getContext("2d");if(!$)return;let q=H;const Q=M.current,J=he!=null&&Q!==null&&Q.complete&&Q.naturalHeight!==0&&Q.naturalWidth!==0;J&&he.excavation!=null&&(q=n3(H,he.excavation));const ee=window.devicePixelRatio||1;ne.height=ne.width=o*ee;const ce=o/se*ee;$.scale(ce,ce),$.fillStyle=p,$.fillRect(0,0,se,se),$.fillStyle=h,O7?$.fill(new Path2D(t3(q,z))):H.forEach(function(Me,ve){Me.forEach(function(Ke,Be){Ke&&$.fillRect(Be+z,ve+z,1,1)})}),he&&($.globalAlpha=he.opacity),J&&$.drawImage(Q,he.x+z,he.y+z,he.w,he.h)}}),Xt.useEffect(()=>{B(!1)},[I]);const te=x1({height:o,width:o},k);let de=null;return I!=null&&(de=Xt.createElement("img",{src:I,key:I,style:{display:"none"},onLoad:()=>{B(!0)},ref:M,crossOrigin:he==null?void 0:he.crossOrigin})),Xt.createElement(Xt.Fragment,null,Xt.createElement("canvas",x1({style:te,height:o,width:o,ref:F,role:"img"},S)),de)});Nm.displayName="QRCodeCanvas";var R7=Xt.forwardRef(function(e,n){const r=e,{value:i,size:o=qS,level:c=YS,bgColor:p=ZS,fgColor:h=QS,includeMargin:m=JS,minVersion:y=e3,boostLevel:v,title:C,marginSize:E,imageSettings:_}=r,T=y1(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:k,cells:S,numCells:I,calculatedImageSettings:N}=r3({value:i,level:c,minVersion:y,boostLevel:v,includeMargin:m,marginSize:E,imageSettings:_,size:o});let M=S,F=null;_!=null&&N!=null&&(N.excavation!=null&&(M=n3(S,N.excavation)),F=Xt.createElement("image",{href:_.src,height:N.h,width:N.w,x:N.x+k,y:N.y+k,preserveAspectRatio:"none",opacity:N.opacity,crossOrigin:N.crossOrigin}));const V=t3(M,k);return Xt.createElement("svg",x1({height:o,width:o,viewBox:`0 0 ${I} ${I}`,ref:n,role:"img"},T),!!C&&Xt.createElement("title",null,C),Xt.createElement("path",{fill:p,d:`M0,0 h${I}v${I}H0z`,shapeRendering:"crispEdges"}),Xt.createElement("path",{fill:h,d:V,shapeRendering:"crispEdges"}),F)});R7.displayName="QRCodeSVG";const j7=({book:t,onClose:e})=>{const n=`${window.location.origin}/book/${t.id}`,r=()=>{const i=document.getElementById("qr-print-area");if(!i)return;const o=window.open("","","height=600,width=800");o&&(o.document.write("<html><head><title>Print QR Code</title>"),o.document.write("<style>body { font-family: sans-serif; text-align: center; display: flex; align-items: center; justify-content: center; height: 100vh; } .container { display: flex; flex-direction: column; align-items: center; justify-content: center; } canvas { max-width: 80%; height: auto; } </style>"),o.document.write("</head><body>"),o.document.write('<div class="container">'),o.document.write(i.innerHTML),o.document.write("</div>"),o.document.write("</body></html>"),o.document.close(),o.focus(),o.print())};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-sm w-full",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-neutral-200",children:[f.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"Book QR Code"}),f.jsx("button",{onClick:e,className:"text-neutral-400 hover:text-neutral-600",children:f.jsx(Pn,{size:24})})]}),f.jsx("div",{className:"p-6 text-center",children:f.jsxs("div",{id:"qr-print-area",children:[f.jsx("h3",{className:"text-lg font-medium text-neutral-800 mb-2",children:t.title}),f.jsxs("p",{className:"text-sm text-neutral-500 mb-4",children:["DDC: ",t.ddc_number||"N/A"]}),f.jsx("div",{className:"flex justify-center",children:f.jsx(Nm,{value:n,size:256,includeMargin:!0})})]})}),f.jsxs("div",{className:"p-6 border-t border-neutral-200 flex justify-end gap-3",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 bg-neutral-100 rounded-md",children:"Close"}),f.jsxs("button",{onClick:r,className:"px-4 py-2 bg-primary text-white rounded-md flex items-center gap-2",children:[f.jsx(gl,{size:18}),"Print"]})]})]})})},P7=({onClose:t})=>{const[e,n]=O.useState([]),[r,i]=O.useState(new Set),[o,c]=O.useState(""),[p,h]=O.useState(!0),[m,y]=O.useState(!1),[v,C]=O.useState([]);O.useEffect(()=>{(async()=>{h(!0);const{data:I}=await _e.from("books").select("id, title, ddc_number").order("created_at",{ascending:!1}).limit(1e4);I&&n(I),h(!1)})()},[]);const E=S=>{const I=new Set(r);I.has(S)?I.delete(S):I.add(S),i(I)},_=()=>{if(r.size===k.length)i(new Set);else{const S=new Set(k.map(I=>I.id));i(S)}},T=()=>{if(r.size===0){alert("Please select at least one book to print QR codes.");return}y(!0);const S=e.filter(M=>r.has(M.id)),I=[],N=25;for(let M=0;M<S.length;M+=N)I.push(S.slice(M,M+N));C(I),setTimeout(()=>{window.print(),y(!1),C([])},500)},k=e.filter(S=>{var I;return S.title.toLowerCase().includes(o.toLowerCase())||((I=S.ddc_number)==null?void 0:I.toLowerCase().includes(o.toLowerCase()))});return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 print:hidden",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Bulk Download QR Codes"}),f.jsx("button",{onClick:t,children:f.jsx(Pn,{})})]}),f.jsxs("div",{className:"p-6 space-y-4 flex-grow overflow-y-auto",children:[f.jsxs("div",{className:"relative",children:[f.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),f.jsx("input",{type:"text",placeholder:"Search books by title or DDC...",value:o,onChange:S=>c(S.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg"})]}),f.jsx("div",{className:"flex justify-between items-center",children:f.jsxs("button",{onClick:_,className:"text-sm font-medium text-purple-600",children:[r.size===k.length?"Deselect All":"Select All"," (",r.size," selected)"]})}),f.jsx("div",{className:"border rounded-lg max-h-80 overflow-y-auto",children:p?f.jsx("div",{className:"p-4 text-center",children:"Loading books..."}):k.map(S=>f.jsxs("div",{className:"flex items-center gap-3 p-3 border-b last:border-b-0",children:[f.jsx("input",{type:"checkbox",checked:r.has(S.id),onChange:()=>E(S.id),className:"h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:S.title}),f.jsxs("p",{className:"text-sm text-gray-500",children:["DDC: ",S.ddc_number||"N/A"]})]})]},S.id))})]}),f.jsxs("div",{className:"p-6 border-t flex justify-end gap-3",children:[f.jsx("button",{onClick:t,className:"px-4 py-2 bg-gray-100 rounded-md",children:"Cancel"}),f.jsxs("button",{onClick:T,disabled:m||r.size===0,className:"px-4 py-2 bg-purple-600 text-white rounded-md flex items-center gap-2 disabled:opacity-50",children:[m?f.jsx(jn,{className:"animate-spin"}):f.jsx(gl,{size:18}),"Generate & Print"]})]})]})}),m&&f.jsx("div",{id:"qr-print-area",children:v.map((S,I)=>f.jsx("div",{className:"a4-page",children:S.map(N=>f.jsxs("div",{className:"qr-item",children:[f.jsx(Nm,{value:`${window.location.origin}/book/${N.id}`,size:128}),f.jsx("p",{className:"qr-item-title",children:N.title}),f.jsx("p",{className:"qr-item-ddc",children:N.ddc_number||"N/A"})]},N.id))},I))})]})},M7=({book:t,categories:e,onClose:n,onSave:r})=>{const[i,o]=O.useState({title:"",author:"",category_id:"",language:"English",price:"",publisher:"",isbn:"",ddc_number:"",publication_year:"",total_copies:1,available_copies:1}),[c,p]=O.useState(!1);O.useEffect(()=>{var y,v;t&&o({title:t.title,author:t.author,category_id:t.category_id||"",language:t.language||"English",price:((y=t.price)==null?void 0:y.toString())||"",publisher:t.publisher||"",isbn:t.isbn||"",ddc_number:t.ddc_number||"",publication_year:((v=t.publication_year)==null?void 0:v.toString())||"",total_copies:t.total_copies,available_copies:t.available_copies})},[t]);const h=y=>{if(t){const v=t.total_copies-t.available_copies,C=y-v;o(E=>({...E,total_copies:y,available_copies:Math.max(0,C)}))}},m=async y=>{if(y.preventDefault(),!!t){p(!0);try{const v={title:i.title,author:i.author,category_id:i.category_id||null,language:i.language,price:i.price?parseFloat(i.price):null,publisher:i.publisher,isbn:i.isbn,ddc_number:i.ddc_number,publication_year:i.publication_year?parseInt(i.publication_year):null,total_copies:i.total_copies,available_copies:i.available_copies,updated_at:new Date().toISOString()},{error:C}=await _e.from("books").update(v).eq("id",t.id);if(C)throw C;alert("Book updated successfully!"),r()}catch(v){console.error("Error saving book:",v),alert("Error saving book. Please check the console for details.")}finally{p(!1)}}};return f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[f.jsx("h2",{className:"text-xl font-semibold",children:t?"Edit Book":"Add New Book"}),f.jsx("button",{onClick:n,children:f.jsx(Pn,{})})]}),f.jsxs("form",{onSubmit:m,className:"p-6 space-y-4",children:[f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book Title *"}),f.jsx("input",{type:"text",required:!0,value:i.title,onChange:y=>o({...i,title:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Author Name *"}),f.jsx("input",{type:"text",required:!0,value:i.author,onChange:y=>o({...i,author:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book Category"}),f.jsxs("select",{value:i.category_id,onChange:y=>o({...i,category_id:y.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[f.jsx("option",{value:"",children:"Select a category"}),e.map(y=>f.jsx("option",{value:y.id,children:y.name},y.id))]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language"}),f.jsxs("select",{value:i.language,onChange:y=>o({...i,language:y.target.value}),className:"w-full px-3 py-2 border rounded-md",children:[f.jsx("option",{children:"English"}),f.jsx("option",{children:"Kannada"}),f.jsx("option",{children:"Malayalam"}),f.jsx("option",{children:"Urdu"}),f.jsx("option",{children:"Arabic"})]})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Book Price"}),f.jsx("input",{type:"number",step:"0.01",value:i.price,onChange:y=>o({...i,price:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publisher Name"}),f.jsx("input",{type:"text",value:i.publisher,onChange:y=>o({...i,publisher:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ISBN"}),f.jsx("input",{type:"text",value:i.isbn,onChange:y=>o({...i,isbn:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DDC Number"}),f.jsx("input",{type:"text",value:i.ddc_number,onChange:y=>o({...i,ddc_number:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Publication Year"}),f.jsx("input",{type:"number",value:i.publication_year,onChange:y=>o({...i,publication_year:y.target.value}),className:"w-full px-3 py-2 border rounded-md"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Copies *"}),f.jsx("input",{type:"number",min:"1",required:!0,value:i.total_copies,onChange:y=>h(parseInt(y.target.value)||1),className:"w-full px-3 py-2 border rounded-md"})]}),t&&f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available Copies"}),f.jsx("input",{type:"number",value:i.available_copies,readOnly:!0,className:"w-full px-3 py-2 border rounded-md bg-gray-100 cursor-not-allowed"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[f.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-100 rounded-md",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-purple-600 text-white rounded-md disabled:opacity-50 flex items-center justify-center min-w-[100px]",children:c?f.jsx(jn,{className:"animate-spin"}):"Save Book"})]})]})]})})},Tm=({currentPage:t,totalCount:e,pageSize:n,onPageChange:r})=>{const i=Math.ceil(e/n);if(i<=1)return null;const c=(()=>{const p=[],m=Math.floor(2.5);if(i<=5)for(let y=1;y<=i;y++)p.push(y);else{p.push(1),t>m+1&&i>5&&p.push("...");let y=Math.max(2,t-1),v=Math.min(i-1,t+1);t<=m?(y=2,v=4):t>=i-m&&(y=i-5+2,v=i-1);for(let C=y;C<=v;C++)p.push(C);t<i-m&&i>5&&p.push("..."),p.push(i)}return p})();return f.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between mt-6 gap-4",children:[f.jsxs("div",{className:"text-sm text-neutral-600",children:["Showing ",Math.min((t-1)*n+1,e)," to ",Math.min(t*n,e)," of ",e," entries"]}),f.jsx("nav",{children:f.jsxs("ul",{className:"flex items-center -space-x-px h-8 text-sm",children:[f.jsx("li",{children:f.jsx("button",{onClick:()=>r(t-1),disabled:t===1,className:"flex items-center justify-center px-3 h-8 ms-0 leading-tight text-neutral-500 bg-white border border-e-0 border-neutral-300 rounded-s-lg hover:bg-neutral-100 hover:text-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f.jsx(o6,{size:16})})}),c.map((p,h)=>f.jsx("li",{children:typeof p=="number"?f.jsx("button",{onClick:()=>r(p),className:`flex items-center justify-center px-3 h-8 leading-tight border border-neutral-300 ${t===p?"text-primary bg-primary/10 border-primary font-bold":"text-neutral-500 bg-white hover:bg-neutral-100 hover:text-neutral-700"}`,children:p}):f.jsx("span",{className:"flex items-center justify-center px-3 h-8 leading-tight text-neutral-500 bg-white border border-neutral-300",children:p})},h)),f.jsx("li",{children:f.jsx("button",{onClick:()=>r(t+1),disabled:t===i,className:"flex items-center justify-center px-3 h-8 leading-tight text-neutral-500 bg-white border border-neutral-300 rounded-e-lg hover:bg-neutral-100 hover:text-neutral-700 disabled:opacity-50 disabled:cursor-not-allowed",children:f.jsx(l6,{size:16})})})]})})]})},xs=({className:t="h-8 w-8 text-primary"})=>f.jsxs("svg",{className:`animate-spin ${t}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),D7=O.lazy(()=>zd(()=>import("./ReadWithUsManager-B9x-wDZQ.js"),[])),L7=O.lazy(()=>zd(()=>import("./ReportsPage-CnkBu2sU.js"),[])),B7=O.lazy(()=>zd(()=>import("./FinesPage-H22NA_pc.js"),[])),F7=O.lazy(()=>zd(()=>import("./PrintMembersModal-DGEgZsSB.js"),[])),iu=(t,e)=>{const[n,r]=O.useState(t);return O.useEffect(()=>{const i=setTimeout(()=>r(t),e);return()=>clearTimeout(i)},[t,e]),n},V7=({categories:t,onSave:e,onClose:n})=>f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-neutral-200",children:[f.jsx("h2",{className:"text-xl font-bold text-neutral-800",children:"Add New Book"}),f.jsx("button",{onClick:n,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:f.jsx(Pn,{size:24})})]}),f.jsx("div",{className:"flex-grow overflow-y-auto p-6",children:f.jsx(qD,{categories:t,onSave:()=>{e(),n()}})})]})}),U7=()=>{const t=ro(),{addNotification:e}=dh(),[n,r]=O.useState("Circulation"),[i,o]=O.useState("Available"),[c,p]=O.useState([]),[h,m]=O.useState([]),[y,v]=O.useState([]),[C,E]=O.useState([]),[_,T]=O.useState([]),[k,S]=O.useState(!0),[I,N]=O.useState({available:0,issued:0,overdue:0}),[M,F]=O.useState(!1),[V,B]=O.useState(!1),[z,H]=O.useState(null),[se,he]=O.useState(!1),[te,de]=O.useState(!1),[ne,$]=O.useState(null),[q,Q]=O.useState(!1),[J,ee]=O.useState(!1),[ce,Me]=O.useState(null),[ve,Ke]=O.useState(!1),[Be,ft]=O.useState(!1),[pe,Ct]=O.useState(!1),[Xe,Hn]=O.useState(""),[nr,Vt]=O.useState(""),[rr,ze]=O.useState(""),[Mn,an]=O.useState(""),[sr,Ut]=O.useState("all"),[Ue,De]=O.useState("all"),Ot=iu(Xe,300),ge=iu(nr,300),Dn=iu(rr,300),Kr=iu(Mn,300),[Wn,io]=O.useState(1),[Zt,hc]=O.useState(50),[$n,Qt]=O.useState({isOpen:!1,title:"",message:"",onConfirm:async()=>{}}),[fc,vi]=O.useState(!1),pc=[{id:"Circulation",icon:Fx},{id:"Book Collection",icon:Kt},{id:"Members",icon:Vi},{id:"Penalty",icon:Hd},{id:"Feedback",icon:W0},{id:"Reports",icon:v6},{id:"Read With Us",icon:Yi}],Rt=async()=>{await _e.auth.signOut(),t("/")},ue=O.useCallback(async()=>{S(!0);try{const[{data:G,error:we},{data:Ce,error:en},{data:Qe,error:ln},{data:St,error:fe},{data:Gn,error:Rr}]=await Promise.all([_e.from("books").select("*, categories(name)").order("created_at",{ascending:!1}).limit(1e4),_e.from("members").select("*").order("register_number",{ascending:!0}),_e.from("circulation").select("*, books(*), members(*)").order("updated_at",{ascending:!1}),_e.from("feedback").select("*, members(name), books(title)").order("created_at",{ascending:!1}),_e.from("categories").select("*").order("name")]);if(we||en||ln||fe||Rr)throw new Error("Failed to fetch initial data. Please check your connection and permissions.");const st=Qe||[],js=st.filter(Ps=>Ps.status==="issued"&&new Date(Ps.due_date)<new Date);p(G||[]),m(Ce||[]),v(st),E(St||[]),T(Gn||[]);const ao=(G==null?void 0:G.reduce((Ps,hh)=>Ps+hh.available_copies,0))||0,lo=st.filter(Ps=>Ps.status==="issued").length||0,wr=js.length;N({available:ao,issued:lo,overdue:wr})}catch(G){e(G.message,"error")}finally{S(!1)}},[e]);O.useEffect(()=>{ue();const G=_e.channel("db-changes").on("postgres_changes",{event:"*",schema:"public"},ue).subscribe();return()=>{_e.removeChannel(G)}},[ue]),O.useEffect(()=>{io(1)},[nr,Zt]);const Et=(G,we,Ce)=>{Qt({isOpen:!0,title:G,message:we,onConfirm:Ce})},rt=async()=>{vi(!0),await $n.onConfirm(),vi(!1),Qt({isOpen:!1,title:"",message:"",onConfirm:async()=>{}})},vt=G=>{Et("Delete Member?","Are you sure? This will delete the member and all associated records. This action cannot be undone.",async()=>{const{error:we}=await _e.from("members").delete().eq("id",G);we?e(`Error deleting member: ${we.message} `,"error"):e("Member deleted successfully.","success")})},wi=G=>{Et("Delete Book?","Are you sure you want to delete this book? This action cannot be undone.",async()=>{const{error:we}=await _e.from("books").delete().eq("id",G);we?e(`Error deleting book: ${we.message} `,"error"):e("Book deleted successfully.","success")})},Aa=G=>{$(G),de(!0)},mc=async G=>{const{error:we}=await _e.rpc("return_book",{p_circulation_id:G});we?e("Error returning book.","error"):e("Book returned successfully.","success")},qe=G=>{Et("Renew Book?","Are you sure you want to renew this book for 14 more days?",async()=>{const we=new Date;we.setDate(we.getDate()+14);const{error:Ce}=await _e.from("circulation").update({due_date:we.toISOString()}).eq("id",G);Ce?e(`Error renewing book: ${Ce.message} `,"error"):e("Book renewed successfully!","success")})},qr=async(G,we)=>{const{error:Ce}=await _e.from("feedback").update({status:we}).eq("id",G);Ce?e(`Failed to update feedback: ${Ce.message} `,"error"):e("Feedback status updated.","success")},gc=()=>{var we;const G=window.open("","","height=800,width=1000");if(G){G.document.write("<html><head><title>Book Collection Report</title>"),G.document.write(`
  <style>
              body { font - family: sans - serif; padding: 2rem; }
              h1 { font - size: 24px; margin - bottom: 1rem; text - align: center; }
              table { width: 100 %; border - collapse: collapse; font - size: 12px; }
th, td { border: 1px solid #d1d5db; padding: 8px; text - align: left; }
              th { background - color: #f3f4f6; }
            </style >
  `),G.document.write("</head><body><h1>Book Collection Report</h1>");const Ce=(we=document.getElementById("book-collection-table"))==null?void 0:we.cloneNode(!0);Ce.querySelectorAll(".no-print-in-popup").forEach(en=>en.remove()),G.document.write(Ce.outerHTML),G.document.write("</body></html>"),G.document.close(),G.focus(),G.print()}},Na=O.useMemo(()=>{let G=[];switch(i){case"Available":G=c.filter(Ce=>Ce.available_copies>0);break;case"Issued":G=y.filter(Ce=>Ce.status==="issued"&&new Date(Ce.due_date)>=new Date);break;case"Overdue":G=y.filter(Ce=>Ce.status==="issued"&&new Date(Ce.due_date)<new Date);break}if(!Ot)return G;const we=Ot.toLowerCase();return G.filter(Ce=>{var en,Qe,ln,St,fe;return"title"in Ce&&(Ce.title.toLowerCase().includes(we)||Ce.author.toLowerCase().includes(we)||((en=Ce.ddc_number)==null?void 0:en.toLowerCase().includes(we)))||"book_id"in Ce&&(((Qe=Ce.books)==null?void 0:Qe.title.toLowerCase().includes(we))||((ln=Ce.members)==null?void 0:ln.name.toLowerCase().includes(we))||((fe=(St=Ce.books)==null?void 0:St.ddc_number)==null?void 0:fe.toLowerCase().includes(we)))})},[i,c,y,Ot]),Sn=O.useMemo(()=>c.filter(G=>{var Ce,en,Qe;const we=ge.toLowerCase();return G.title.toLowerCase().includes(we)||G.author.toLowerCase().includes(we)||((en=(Ce=G.categories)==null?void 0:Ce.name)==null?void 0:en.toLowerCase().includes(we))||((Qe=G.ddc_number)==null?void 0:Qe.toLowerCase().includes(we))}),[c,ge]),Ta=O.useMemo(()=>{const G=(Wn-1)*Zt;return Sn.slice(G,G+Zt)},[Sn,Wn,Zt]),Jt=O.useMemo(()=>h.filter(G=>{var we,Ce;return!Dn||G.name.toLowerCase().includes(Dn.toLowerCase())||G.email.toLowerCase().includes(Dn.toLowerCase())||((we=G.register_number)==null?void 0:we.toLowerCase().includes(Dn.toLowerCase()))||((Ce=G.class)==null?void 0:Ce.toLowerCase().includes(Dn.toLowerCase()))}),[h,Dn]),Yr=O.useMemo(()=>C.filter(G=>{var Qe,ln,St,fe,Gn,Rr,st;const we=!Kr||((ln=(Qe=G.members)==null?void 0:Qe.name)==null?void 0:ln.toLowerCase().includes(Kr.toLowerCase()))||((fe=(St=G.books)==null?void 0:St.title)==null?void 0:fe.toLowerCase().includes(Kr.toLowerCase()))||((Gn=G.suggestion_title)==null?void 0:Gn.toLowerCase().includes(Kr.toLowerCase()))||((Rr=G.review)==null?void 0:Rr.toLowerCase().includes(Kr.toLowerCase()))||((st=G.suggestion_reason)==null?void 0:st.toLowerCase().includes(Kr.toLowerCase())),Ce=sr==="all"||G.feedback_type===sr,en=Ue==="all"||G.status===Ue;return we&&Ce&&en}),[C,Kr,sr,Ue]),oo=G=>{var Qe,ln,St,fe,Gn,Rr;if(i==="Available"){const st=G;return f.jsx(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:"group bg-gradient-to-br from-white via-green-50/30 to-emerald-50/40 border-2 border-green-200 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md hover:shadow-xl transition-shadow will-change-transform",children:f.jsx("div",{className:"flex flex-col sm:flex-row justify-between sm:items-center gap-3 sm:gap-4",children:f.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1 min-w-0",children:[f.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-3 sm:p-4 rounded-xl sm:rounded-2xl text-white shadow-lg flex-shrink-0",children:[f.jsx(Kt,{size:24,className:"sm:hidden"}),f.jsx(Kt,{size:28,className:"hidden sm:block"})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-bold text-base sm:text-xl text-neutral-900 mb-1 sm:mb-2 line-clamp-2",children:st.title}),f.jsxs("p",{className:"text-xs sm:text-sm text-neutral-600 mb-2 sm:mb-3 truncate",children:["by ",f.jsx("span",{className:"font-semibold text-neutral-800",children:st.author})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[f.jsxs("span",{className:"bg-white border border-neutral-200 px-2 py-1 sm:px-3 sm:py-1.5 rounded-full font-bold text-neutral-700 flex items-center gap-1 sm:gap-1.5",children:[f.jsx($l,{size:12,className:"text-primary sm:w-3.5 sm:h-3.5"}),f.jsx("span",{className:"hidden xs:inline",children:"DDC: "}),st.ddc_number||"N/A"]}),f.jsxs("span",{className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full font-bold flex items-center gap-1 sm:gap-1.5 shadow-md",children:[f.jsx(Ga,{size:14,className:"sm:w-4 sm:h-4"}),st.available_copies," Available"]}),((Qe=st.categories)==null?void 0:Qe.name)&&f.jsx("span",{className:"bg-primary/10 text-primary px-2 py-1 sm:px-3 sm:py-1.5 rounded-full font-bold hidden sm:inline-block",children:st.categories.name})]})]})]})})},st.id)}const we=G,Ce=new Date(we.due_date)<new Date,en=(ln=we.members)==null?void 0:ln.class;return f.jsx(Ie.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},className:`group bg-gradient-to-br ${Ce?"from-white via-red-50/30 to-rose-50/40 border-red-300":"from-white via-blue-50/30 to-indigo-50/40 border-blue-300"} border-2 rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md hover:shadow-xl transition-shadow will-change-transform`,children:f.jsxs("div",{className:"flex flex-col gap-3 sm:gap-4",children:[f.jsxs("div",{className:"flex items-start gap-3 sm:gap-4 flex-1 min-w-0",children:[f.jsxs("div",{className:`bg-gradient-to-br ${Ce?"from-red-500 to-rose-600":"from-blue-500 to-indigo-600"} p-3 sm:p-4 rounded-xl sm:rounded-2xl text-white shadow-lg flex-shrink-0`,children:[f.jsx(Kt,{size:24,className:"sm:hidden"}),f.jsx(Kt,{size:28,className:"hidden sm:block"})]}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-bold text-base sm:text-xl text-neutral-900 mb-1 sm:mb-2 line-clamp-2",children:(St=we.books)==null?void 0:St.title}),f.jsxs("div",{className:"space-y-1.5 sm:space-y-2 mb-2 sm:mb-3",children:[f.jsxs("p",{className:"text-xs sm:text-sm text-neutral-600 flex flex-wrap items-center gap-1.5 sm:gap-2",children:[f.jsx(Hr,{size:12,className:"text-primary flex-shrink-0 sm:w-3.5 sm:h-3.5"}),f.jsx("span",{className:"font-bold text-neutral-800 truncate",children:(fe=we.members)==null?void 0:fe.name}),en&&f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"hidden sm:inline text-neutral-400",children:""}),f.jsx("span",{className:"bg-primary/10 text-primary px-2 py-0.5 rounded-md text-xs font-bold whitespace-nowrap",children:en})]})]}),((Gn=we.members)==null?void 0:Gn.register_number)&&f.jsxs("p",{className:"text-xs text-neutral-500 flex items-center gap-1.5 sm:gap-2",children:[f.jsx(Ao,{size:10,className:"text-neutral-400 flex-shrink-0 sm:w-3 sm:h-3"}),f.jsx("span",{className:"font-mono font-semibold truncate",children:we.members.register_number})]})]}),f.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 sm:gap-2 text-xs sm:text-sm",children:[f.jsxs("span",{className:"bg-white border border-neutral-200 px-2 py-1 sm:px-3 sm:py-1.5 rounded-full font-bold text-neutral-700 flex items-center gap-1 sm:gap-1.5",children:[f.jsx($l,{size:12,className:"text-primary sm:w-3.5 sm:h-3.5"}),f.jsx("span",{className:"hidden xs:inline",children:"DDC: "}),((Rr=we.books)==null?void 0:Rr.ddc_number)||"N/A"]}),f.jsxs("span",{className:`px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full font-bold flex items-center gap-1 sm:gap-1.5 shadow-md ${Ce?"bg-gradient-to-r from-red-500 to-rose-600 text-white":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white"}`,children:[f.jsx(Ca,{size:14,className:"sm:w-4 sm:h-4"}),f.jsx("span",{className:"hidden xs:inline",children:"Due: "}),new Date(we.due_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})]}),Ce&&f.jsxs("span",{className:"bg-red-600 text-white px-2.5 py-1 sm:px-4 sm:py-1.5 rounded-full font-bold text-xs flex items-center gap-1 sm:gap-1.5 animate-pulse shadow-lg",children:[f.jsx(Ts,{size:12,className:"sm:w-3.5 sm:h-3.5"}),"OVERDUE"]})]})]})]}),f.jsxs("div",{className:"flex gap-2 sm:gap-3 pt-3 sm:pt-4 border-t border-neutral-200",children:[f.jsxs("button",{onClick:()=>qe(we.id),className:"flex-1 sm:flex-none bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-4 py-2 sm:px-5 sm:py-2.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-1.5 sm:gap-2",children:[f.jsx(Fx,{size:14,className:"sm:w-4 sm:h-4"})," Renew"]}),f.jsxs("button",{onClick:()=>mc(we.id),className:"flex-1 sm:flex-none bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-2 sm:px-5 sm:py-2.5 rounded-lg sm:rounded-xl text-xs sm:text-sm font-bold transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-1.5 sm:gap-2",children:[f.jsx(Ga,{size:14,className:"sm:w-4 sm:h-4"})," Return"]})]})]})},we.id)};return f.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[f.jsx(HS,{isOpen:$n.isOpen,title:$n.title,message:$n.message,onConfirm:rt,onCancel:()=>Qt({...$n,isOpen:!1}),isConfirming:fc}),f.jsx("header",{className:"bg-gradient-to-r from-primary to-primary-dark shadow-lg border-b sticky top-0 z-30",children:f.jsx("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-3",children:[f.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-xl shadow-lg",children:f.jsx(Kt,{size:22,className:"text-white"})}),f.jsx("span",{className:"hidden sm:inline",children:"Admin Dashboard"}),f.jsx("span",{className:"sm:hidden",children:"Dashboard"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>Ct(!0),className:"text-white/80 hover:text-white hover:bg-white/10 p-2 rounded-lg transition-all",title:"Print Members",children:f.jsx(gl,{size:20})}),f.jsxs("button",{onClick:Rt,className:"bg-white/10 backdrop-blur-sm hover:bg-white/20 text-white px-4 py-2 rounded-lg flex items-center gap-2 font-semibold transition-all shadow-lg hover:shadow-xl",children:[f.jsx(M6,{size:18})," ",f.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})]})})}),f.jsxs("div",{className:"flex flex-col md:flex-row max-w-screen-2xl mx-auto",children:[f.jsx("nav",{className:"w-full md:w-64 bg-gradient-to-b from-neutral-50 to-white border-r border-neutral-200 min-h-[calc(100vh-64px)] hidden md:block shadow-sm",children:f.jsx("div",{className:"p-4 space-y-2",children:pc.map(G=>f.jsxs("button",{onClick:()=>r(G.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-semibold transition-all transform hover:scale-105 ${n===G.id?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"text-neutral-600 hover:bg-white hover:text-primary hover:shadow-md"}`,children:[f.jsx(G.icon,{size:18}),G.id==="Penalty"?"Penalty Management":G.id]},G.id))})}),f.jsx("nav",{className:"md:hidden bg-gradient-to-r from-neutral-50 to-white border-b overflow-x-auto shadow-sm",children:f.jsx("div",{className:"flex p-3 space-x-2 min-w-max",children:pc.map(G=>f.jsxs("button",{onClick:()=>r(G.id),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-sm font-semibold whitespace-nowrap transition-all shadow-sm ${n===G.id?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-md shadow-primary/30":"bg-white text-neutral-600 hover:text-primary hover:shadow-md"}`,children:[f.jsx(G.icon,{size:16}),G.id==="Penalty"?"Penalty":G.id]},G.id))})}),f.jsxs("main",{className:"flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto bg-gradient-to-br from-neutral-50 via-white to-neutral-50",children:[n==="Circulation"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-white to-neutral-50 rounded-2xl shadow-lg border border-neutral-200 p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"Borrow & Return Books"}),f.jsx("p",{className:"text-neutral-600",children:"Manage book circulation efficiently"})]}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("button",{onClick:()=>he(!0),className:"bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-5 py-2.5 rounded-xl flex items-center gap-2 font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5",children:[f.jsx(Bx,{size:20})," Quick Scan"]}),f.jsxs("button",{onClick:()=>B(!0),className:"bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white px-5 py-2.5 rounded-xl flex items-center gap-2 font-bold shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-0.5",children:[f.jsx(ml,{size:20})," Issue Book"]})]})]}),f.jsx("div",{className:"flex flex-wrap gap-3",children:["Available","Issued","Overdue"].map(G=>{const we=i===G,Ce=I[G.toLowerCase()];return f.jsx("button",{onClick:()=>o(G),className:`relative px-6 py-3 rounded-xl font-bold text-sm transition-all transform hover:scale-105 ${we?G==="Available"?"bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/30":G==="Issued"?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/30":"bg-gradient-to-r from-red-500 to-red-600 text-white shadow-lg shadow-red-500/30":"bg-white text-neutral-700 border-2 border-neutral-200 hover:border-neutral-300 hover:shadow-md"}`,children:f.jsxs("span",{className:"flex items-center gap-2",children:[G,f.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-xs font-bold ${we?"bg-white/20":"bg-neutral-100"}`,children:Ce})]})},G)})})]}),f.jsxs("div",{className:"relative",children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:22}),f.jsx("input",{type:"text",placeholder:"Search books, members, DDC number...",value:Xe,onChange:G=>Hn(G.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-neutral-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-neutral-900 placeholder:text-neutral-400 shadow-sm"})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-neutral-200 p-6 min-h-[500px]",children:k?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(xs,{}),f.jsx("p",{className:"mt-4 text-neutral-600 font-medium",children:"Loading circulation data..."})]}):Na.length>0?f.jsx(ui,{mode:"popLayout",children:f.jsx("div",{className:"space-y-4",children:Na.map(oo)})}):f.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex flex-col items-center justify-center py-20 text-neutral-400",children:[f.jsx("div",{className:"bg-neutral-100 p-6 rounded-full mb-4",children:f.jsx(Kt,{size:48,className:"text-neutral-300"})}),f.jsx("p",{className:"text-xl font-bold text-neutral-600 mb-2",children:"No Results Found"}),f.jsx("p",{className:"text-neutral-500",children:"Try adjusting your search or filter"})]})})]}),n==="Book Collection"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-white to-neutral-50 rounded-2xl shadow-lg border-2 border-neutral-200 p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-3xl font-bold text-neutral-900 mb-2 flex items-center gap-3",children:[f.jsx("div",{className:"bg-gradient-to-br from-primary to-primary-dark p-2 rounded-xl",children:f.jsx(Kt,{size:28,className:"text-white"})}),"Book Collection"]}),f.jsx("p",{className:"text-neutral-600",children:"Manage your library's book inventory"})]}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("button",{onClick:gc,className:"bg-white border-2 border-primary text-primary hover:bg-primary hover:text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(gl,{size:18})," Print List"]}),f.jsxs("button",{onClick:()=>Ke(!0),className:"bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(ml,{size:18})," Add Book"]}),f.jsxs("button",{onClick:()=>ft(!0),className:"bg-gradient-to-r from-secondary to-secondary-dark hover:from-secondary-dark hover:to-secondary text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(H0,{size:18})," Categories"]}),f.jsxs("button",{onClick:()=>Q(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(x6,{size:18})," Bulk QRs"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Kt,{size:28,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Total Books"}),f.jsx("p",{className:"text-4xl font-extrabold",children:c.length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Ga,{size:28,className:"opacity-80"}),f.jsx(Ao,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Available"}),f.jsx("p",{className:"text-4xl font-extrabold",children:c.filter(G=>G.available_copies>0).length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Yi,{size:28,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Issued"}),f.jsx("p",{className:"text-4xl font-extrabold",children:c.filter(G=>G.available_copies===0).length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(H0,{size:28,className:"opacity-80"}),f.jsx(Ao,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Categories"}),f.jsx("p",{className:"text-4xl font-extrabold",children:_.length})]})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:22}),f.jsx("input",{type:"text",placeholder:"Search by title, author, category, DDC number...",value:nr,onChange:G=>Vt(G.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-neutral-200 rounded-xl focus:border-primary focus:ring-4 focus:ring-primary/20 outline-none transition-all text-neutral-900 placeholder:text-neutral-400 shadow-sm font-medium"})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("label",{htmlFor:"book-rows-per-page",className:"text-sm font-bold text-neutral-700",children:"Show:"}),f.jsxs("select",{id:"book-rows-per-page",value:Zt,onChange:G=>hc(Number(G.target.value)),className:"px-4 py-2 border-2 border-neutral-200 rounded-lg bg-white text-sm font-bold focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[f.jsx("option",{value:10,children:"10"}),f.jsx("option",{value:25,children:"25"}),f.jsx("option",{value:50,children:"50"}),f.jsx("option",{value:100,children:"100"}),f.jsx("option",{value:200,children:"200"}),f.jsx("option",{value:400,children:"400"})]})]}),f.jsxs("p",{className:"text-sm text-neutral-600 font-medium",children:["Showing ",f.jsx("span",{className:"font-bold text-primary",children:Sn.length})," books"]})]})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-neutral-200 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:k?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(xs,{}),f.jsx("p",{className:"mt-4 text-neutral-600 font-medium",children:"Loading books..."})]}):f.jsxs(f.Fragment,{children:[f.jsxs("table",{id:"book-collection-table",className:"min-w-full divide-y divide-neutral-200",children:[f.jsx("thead",{className:"bg-gradient-to-r from-neutral-50 to-neutral-100 sticky top-0",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"S.No."}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Title"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Author"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Category"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"DDC"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Copies"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider no-print-in-popup",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:Ta.map((G,we)=>{var Ce;return f.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors group",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 font-medium",children:(Wn-1)*Zt+we+1}),f.jsx("td",{className:"px-6 py-4 text-sm font-bold text-neutral-900 group-hover:text-primary transition-colors",children:G.title}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-600",children:G.author}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full font-bold text-xs",children:((Ce=G.categories)==null?void 0:Ce.name)||"N/A"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-600 font-mono",children:G.ddc_number||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsxs("span",{className:`px-3 py-1 rounded-full font-bold text-xs ${G.available_copies>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:[G.available_copies," / ",G.total_copies]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium no-print-in-popup",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>{Me(G),ee(!0)},className:"text-primary hover:text-primary-dark hover:scale-110 transition-all",title:"Edit Book",children:f.jsx(td,{size:20})}),f.jsx("button",{onClick:()=>wi(G.id),className:"text-red-500 hover:text-red-700 hover:scale-110 transition-all",title:"Delete Book",children:f.jsx(nd,{size:20})}),f.jsx("button",{onClick:()=>Aa(G),className:"text-neutral-500 hover:text-primary hover:scale-110 transition-all",title:"Show QR Code",children:f.jsx(Bx,{size:20})})]})})]},G.id)})})]}),f.jsx("div",{className:"p-4 border-t-2 border-neutral-200 bg-neutral-50",children:f.jsx(Tm,{currentPage:Wn,totalCount:Sn.length,pageSize:Zt,onPageChange:G=>io(G)})})]})})})]}),n==="Members"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-white to-neutral-50 rounded-2xl shadow-lg border-2 border-neutral-200 p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-3xl font-bold text-neutral-900 mb-2 flex items-center gap-3",children:[f.jsx("div",{className:"bg-gradient-to-br from-primary to-primary-dark p-2 rounded-xl",children:f.jsx(Vi,{size:28,className:"text-white"})}),"Library Members"]}),f.jsx("p",{className:"text-neutral-600",children:"Manage library member information"})]}),f.jsxs("div",{className:"flex gap-2 flex-wrap",children:[f.jsxs("button",{onClick:()=>Ct(!0),className:"bg-white border-2 border-primary text-primary hover:bg-primary hover:text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(gl,{size:18})," Print List"]}),f.jsxs("button",{onClick:()=>{H(null),F(!0)},className:"bg-gradient-to-r from-primary to-primary-dark hover:from-primary-dark hover:to-primary text-white px-4 py-2.5 rounded-xl flex items-center gap-2 text-sm font-bold transition-all shadow-md hover:shadow-lg",children:[f.jsx(ml,{size:18})," Add Member"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Vi,{size:28,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Total Members"}),f.jsx("p",{className:"text-4xl font-extrabold",children:h.length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Ga,{size:28,className:"opacity-80"}),f.jsx(Ao,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Active Members"}),f.jsx("p",{className:"text-4xl font-extrabold",children:h.filter(G=>G.status==="active").length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Ts,{size:28,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Inactive Members"}),f.jsx("p",{className:"text-4xl font-extrabold",children:h.filter(G=>G.status==="inactive").length})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl p-5 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx(Hr,{size:28,className:"opacity-80"}),f.jsx(Ao,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"New This Month"}),f.jsx("p",{className:"text-4xl font-extrabold",children:h.filter(G=>new Date(G.created_at).getMonth()===new Date().getMonth()).length})]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:22}),f.jsx("input",{type:"text",placeholder:"Search by name, email, register number, or class...",value:rr,onChange:G=>ze(G.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-neutral-200 rounded-xl focus:border-primary focus:ring-4 focus:ring-primary/20 outline-none transition-all text-neutral-900 placeholder:text-neutral-400 shadow-sm font-medium"})]})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-lg border-2 border-neutral-200 overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:k?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(xs,{}),f.jsx("p",{className:"mt-4 text-neutral-600 font-medium",children:"Loading members..."})]}):Jt.length>0?f.jsxs("table",{className:"min-w-full divide-y divide-neutral-200",children:[f.jsx("thead",{className:"bg-gradient-to-r from-neutral-50 to-neutral-100",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Register ID"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Name"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Phone"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Class"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-neutral-700 uppercase tracking-wider no-print-in-popup",children:"Actions"})]})}),f.jsx("tbody",{className:"bg-white divide-y divide-neutral-200",children:Jt.map(G=>{var we;return f.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors group",children:[f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-mono font-bold text-neutral-900",children:G.register_number||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Hr,{size:20,className:"text-primary"})}),f.jsx("span",{className:"font-bold text-neutral-900 group-hover:text-primary transition-colors",children:G.name})]})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-600",children:G.phone||"N/A"}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full font-bold text-xs",children:G.class||"N/A"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:f.jsx("span",{className:`px-3 py-1 rounded-full font-bold text-xs ${G.status==="active"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:((we=G.status)==null?void 0:we.toUpperCase())||"ACTIVE"})}),f.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium no-print-in-popup",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("button",{onClick:()=>{H(G),F(!0)},className:"text-primary hover:text-primary-dark hover:scale-110 transition-all",title:"Edit Member",children:f.jsx(td,{size:20})}),f.jsx("button",{onClick:()=>vt(G.id),className:"text-red-500 hover:text-red-700 hover:scale-110 transition-all",title:"Delete Member",children:f.jsx(nd,{size:20})})]})})]},G.id)})})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-400",children:[f.jsx("div",{className:"bg-neutral-100 p-6 rounded-full mb-4",children:f.jsx(Vi,{size:48,className:"text-neutral-300"})}),f.jsx("p",{className:"text-xl font-bold text-neutral-600 mb-2",children:"No Members Found"}),f.jsx("p",{className:"text-neutral-500",children:"Try adjusting your search or add a new member"})]})})})]}),n==="Penalty"&&f.jsx(O.Suspense,{fallback:f.jsx("div",{className:"flex justify-center py-20",children:f.jsx(xs,{})}),children:f.jsx(B7,{})}),n==="Feedback"&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"bg-gradient-to-r from-white to-neutral-50 rounded-2xl shadow-lg border border-neutral-200 p-6",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl font-bold text-neutral-900 mb-2",children:"Feedback & Suggestions"}),f.jsx("p",{className:"text-neutral-600",children:"Manage user reviews and suggestions"})]}),f.jsxs("div",{className:"bg-white px-4 py-2 rounded-xl border-2 border-primary/20 shadow-sm",children:[f.jsx("span",{className:"text-sm text-neutral-600",children:"Total: "}),f.jsx("span",{className:"text-2xl font-bold text-primary",children:Yr.length})]})]}),f.jsxs("div",{className:"relative mb-4",children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:22}),f.jsx("input",{type:"text",placeholder:"Search feedback by member, book, or content...",value:Mn,onChange:G=>an(G.target.value),className:"w-full pl-12 pr-4 py-4 border-2 border-neutral-200 rounded-xl focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition-all text-neutral-900 placeholder:text-neutral-400 shadow-sm"})]}),f.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-neutral-700",children:"Type:"}),f.jsxs("select",{value:sr,onChange:G=>Ut(G.target.value),className:"px-4 py-2 border-2 border-neutral-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none bg-white font-medium",children:[f.jsx("option",{value:"all",children:"All Types"}),f.jsx("option",{value:"book_review",children:"Book Reviews"}),f.jsx("option",{value:"suggestion",children:"Suggestions"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{className:"text-sm font-semibold text-neutral-700",children:"Status:"}),f.jsxs("select",{value:Ue,onChange:G=>De(G.target.value),className:"px-4 py-2 border-2 border-neutral-200 rounded-lg focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none bg-white font-medium",children:[f.jsx("option",{value:"all",children:"All Status"}),f.jsx("option",{value:"pending",children:"Pending"}),f.jsx("option",{value:"approved",children:"Approved"}),f.jsx("option",{value:"rejected",children:"Rejected"})]})]})]})]}),f.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-neutral-200 p-6 min-h-[400px]",children:k?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[f.jsx(xs,{}),f.jsx("p",{className:"mt-4 text-neutral-600 font-medium",children:"Loading feedback..."})]}):Yr.length>0?f.jsx("div",{className:"space-y-4",children:Yr.map(G=>{var we,Ce;return f.jsxs("div",{className:"border-2 border-neutral-200 rounded-xl p-5 hover:shadow-md transition-all bg-gradient-to-br from-white to-neutral-50/30",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-4 mb-3",children:[f.jsxs("div",{className:"flex-1",children:[G.feedback_type==="suggestion"?f.jsxs("h3",{className:"font-bold text-lg text-neutral-900 mb-1",children:[' Suggestion: "',G.suggestion_title,'"']}):f.jsxs("h3",{className:"font-bold text-lg text-neutral-900 mb-1",children:[' Review for: "',(we=G.books)==null?void 0:we.title,'"']}),f.jsxs("p",{className:"text-sm text-neutral-600 flex items-center gap-2",children:[f.jsx(Hr,{size:14}),f.jsx("span",{className:"font-semibold",children:((Ce=G.members)==null?void 0:Ce.name)||"Unknown"}),f.jsx("span",{className:"text-neutral-400",children:""}),f.jsx("span",{children:new Date(G.created_at).toLocaleDateString()})]})]}),f.jsx("span",{className:`px-4 py-2 text-sm font-bold rounded-full whitespace-nowrap ${G.status==="pending"?"bg-yellow-100 text-yellow-800 border-2 border-yellow-200":G.status==="approved"?"bg-green-100 text-green-800 border-2 border-green-200":"bg-red-100 text-red-800 border-2 border-red-200"}`,children:G.status.toUpperCase()})]}),G.feedback_type==="book_review"&&G.rating&&f.jsxs("div",{className:"flex items-center gap-1 mb-3",children:[[...Array(5)].map((en,Qe)=>f.jsx(vC,{size:18,className:Qe<G.rating?"text-yellow-400 fill-current":"text-neutral-300"},Qe)),f.jsxs("span",{className:"ml-2 text-sm font-semibold text-neutral-600",children:["(",G.rating,"/5)"]})]}),G.review&&f.jsx("p",{className:"text-neutral-700 bg-white p-4 rounded-lg border border-neutral-200 mb-3 leading-relaxed",children:G.review}),G.suggestion_reason&&f.jsx("p",{className:"text-neutral-700 bg-white p-4 rounded-lg border border-neutral-200 mb-3 leading-relaxed",children:G.suggestion_reason}),G.status==="pending"&&f.jsxs("div",{className:"flex gap-3 mt-4 pt-4 border-t border-neutral-200",children:[f.jsxs("button",{onClick:()=>qr(G.id,"approved"),className:"flex-1 sm:flex-none bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-2.5 rounded-lg font-bold shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[f.jsx(Ga,{size:18})," Approve"]}),f.jsxs("button",{onClick:()=>qr(G.id,"rejected"),className:"flex-1 sm:flex-none bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-6 py-2.5 rounded-lg font-bold shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2",children:[f.jsx(Pn,{size:18})," Reject"]})]})]},G.id)})}):f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-400",children:[f.jsx("div",{className:"bg-neutral-100 p-6 rounded-full mb-4",children:f.jsx(W0,{size:48,className:"text-neutral-300"})}),f.jsx("p",{className:"text-xl font-bold text-neutral-600 mb-2",children:"No Feedback Found"}),f.jsx("p",{className:"text-neutral-500",children:Mn||sr!=="all"||Ue!=="all"?"Try adjusting your search or filters":"No feedback submitted yet"})]})})]}),n==="Reports"&&f.jsx(O.Suspense,{fallback:f.jsx("div",{className:"flex justify-center py-20",children:f.jsx(xs,{})}),children:f.jsx(L7,{books:c,members:h,circulation:y,categories:_})}),n==="Read With Us"&&f.jsx(O.Suspense,{fallback:f.jsx("div",{className:"flex justify-center py-20",children:f.jsx(xs,{})}),children:f.jsx(D7,{})})]})]}),M&&f.jsx(VD,{member:z,onClose:()=>{F(!1),H(null)},onSave:()=>{F(!1),H(null)}}),V&&f.jsx(KD,{onClose:()=>B(!1),onSave:()=>B(!1)}),se&&f.jsx(E7,{onClose:()=>he(!1),onSuccess:ue}),te&&ne&&f.jsx(j7,{book:ne,onClose:()=>de(!1)}),q&&f.jsx(P7,{onClose:()=>Q(!1)}),J&&f.jsx(M7,{book:ce,categories:_,onClose:()=>{ee(!1),Me(null)},onSave:()=>{ee(!1),Me(null)}}),ve&&f.jsx(V7,{categories:_,onSave:ue,onClose:()=>Ke(!1)}),Be&&f.jsx(YD,{onClose:()=>ft(!1),onSave:ue}),pe&&f.jsx(O.Suspense,{fallback:null,children:f.jsx(F7,{onClose:()=>Ct(!1),allMembers:h})})]})},dc=()=>{const t=ro();return f.jsx("header",{className:"w-full bg-white shadow-sm border-b border-neutral-200",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center h-16",children:[f.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-neutral-900 cursor-pointer",onClick:()=>t("/"),children:"Muhimmath Library"}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("button",{onClick:()=>t("/member-status"),className:"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 px-4 py-2 rounded-lg flex items-center gap-2 transition-colors duration-200",children:[f.jsx(zr,{size:20}),f.jsx("span",{className:"hidden sm:inline",children:"Member Status"})]})})]})})})},z7=({icon:t,title:e,description:n,bgColor:r,iconColor:i,onClick:o})=>f.jsxs(Ie.div,{whileHover:{y:-8,scale:1.02},whileTap:{scale:.98},transition:{type:"spring",stiffness:300,damping:20},className:"group relative bg-gradient-to-br from-white to-neutral-50 rounded-2xl shadow-lg border border-neutral-200 p-6 hover:shadow-2xl hover:border-primary/30 transition-all duration-300 cursor-pointer overflow-hidden",onClick:o,children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),f.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-primary/10 to-transparent rounded-bl-full opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),f.jsxs("div",{className:"relative z-10",children:[f.jsx(Ie.div,{whileHover:{rotate:[0,-10,10,-10,0],scale:1.1},transition:{duration:.5},className:`w-14 h-14 ${r} rounded-xl flex items-center justify-center mb-5 shadow-md group-hover:shadow-xl transition-shadow duration-300`,children:f.jsx(t,{size:28,className:`${i} group-hover:scale-110 transition-transform duration-300`})}),f.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-2 group-hover:text-primary transition-colors duration-300",children:e}),f.jsx("p",{className:"text-neutral-600 text-sm leading-relaxed mb-4",children:n}),f.jsxs("div",{className:"flex items-center gap-2 text-primary font-semibold text-sm opacity-0 group-hover:opacity-100 transform translate-x-0 group-hover:translate-x-2 transition-all duration-300",children:[f.jsx("span",{children:"Explore"}),f.jsx(Wl,{size:16,className:"animate-pulse"})]})]})]}),H7=t=>{const[e,n]=O.useState(!1),[r,i]=O.useState(""),[o,c]=O.useState(null),p=O.useRef(null),h=typeof window<"u"&&("SpeechRecognition"in window||"webkitSpeechRecognition"in window);return O.useEffect(()=>{if(!h)return;const v=window.SpeechRecognition||window.webkitSpeechRecognition;p.current=new v;const C=p.current;return C.continuous=!1,C.interimResults=!0,C.lang=(t==null?void 0:t.lang)||"en-US",C.onstart=()=>{n(!0),c(null)},C.onresult=E=>{let _="";for(let T=E.resultIndex;T<E.results.length;++T)E.results[T].isFinal&&(_+=E.results[T][0].transcript);i(_)},C.onerror=E=>{c(E.error),n(!1)},C.onend=()=>{n(!1)},()=>{C.stop()}},[h,t==null?void 0:t.lang]),{isListening:e,transcript:r,error:o,isSupported:h,startListening:()=>{p.current&&!e&&(i(""),p.current.start())},stopListening:()=>{p.current&&e&&p.current.stop()}}},fs=({icon:t,label:e,value:n,className:r=""})=>!n&&n!==0?null:f.jsxs("div",{className:`flex items-start gap-3 ${r}`,children:[f.jsx("div",{className:"bg-neutral-100 p-2 rounded-full mt-1",children:f.jsx(t,{size:16,className:"text-neutral-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-neutral-500",children:e}),f.jsx("p",{className:"font-medium text-neutral-800",children:n})]})]}),W7=({book:t,borrowerName:e,onClose:n})=>{var r;return t?f.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50 animate-fade-in",children:f.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-center p-5 border-b border-neutral-200",children:[f.jsx("h2",{className:"text-xl font-bold text-neutral-800 truncate pr-4",children:t.title}),f.jsx("button",{onClick:n,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:f.jsx(Pn,{size:24})})]}),f.jsx("div",{className:"flex-grow overflow-y-auto p-6",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[f.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0",children:f.jsx("div",{className:"aspect-[3/4] bg-neutral-100 rounded-lg flex items-center justify-center",children:f.jsx(Kt,{size:60,className:"text-neutral-300"})})}),f.jsxs("div",{className:"w-full md:w-2/3 space-y-4",children:[f.jsxs("p",{className:"text-lg font-semibold text-neutral-600",children:["by ",t.author]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-5 pt-2",children:[e&&f.jsx(fs,{icon:uI,label:"Currently Borrowed By",value:e,className:"sm:col-span-2 bg-primary/10 p-3 rounded-lg border border-primary/20"}),f.jsx(fs,{icon:kp,label:"Category",value:(r=t.categories)==null?void 0:r.name}),f.jsx(fs,{icon:$l,label:"DDC Number",value:t.ddc_number}),f.jsx(fs,{icon:Hr,label:"Publisher",value:t.publisher}),f.jsx(fs,{icon:Ca,label:"Published Year",value:t.publication_year}),f.jsx(fs,{icon:Hd,label:"Price",value:t.price?`${t.price.toFixed(2)}`:null}),f.jsx(fs,{icon:Np,label:"Language",value:t.language}),f.jsx(fs,{icon:yC,label:"Copies",value:`${t.available_copies} available / ${t.total_copies} total`}),f.jsx(fs,{icon:Tp,label:"ISBN",value:t.isbn})]})]})]})}),f.jsx("div",{className:"p-4 border-t border-neutral-200 flex justify-end",children:f.jsx("button",{onClick:n,className:"px-5 py-2 bg-neutral-100 text-neutral-700 font-semibold rounded-lg hover:bg-neutral-200 transition-colors",children:"Close"})})]})}):null},$7=(t,e)=>{const[n,r]=O.useState(t);return O.useEffect(()=>{const i=setTimeout(()=>r(t),e);return()=>clearTimeout(i)},[t,e]),n},G7=()=>{const[t,e]=O.useState(""),[n,r]=O.useState([]),[i,o]=O.useState(new Map),[c,p]=O.useState(!0),[h,m]=O.useState("none"),[y,v]=O.useState("all"),[C,E]=O.useState([]),[_,T]=O.useState("en-US"),[k,S]=O.useState(1),[I,N]=O.useState(10),[M,F]=O.useState(null),{isListening:V,transcript:B,isSupported:z,startListening:H}=H7({lang:_});O.useEffect(()=>{B&&e(B)},[B]);const se=async()=>{p(!0);const[{data:q},{data:Q},{data:J}]=await Promise.all([_e.from("books").select("*, categories(name)").order("created_at",{ascending:!1}).limit(1e4),_e.from("circulation").select("book_id, members(name)").eq("status","issued"),_e.from("categories").select("*").order("name")]);if(r(q||[]),E(J||[]),Q){const ee=new Map;Q.forEach(ce=>{var Me;ce.book_id&&((Me=ce.members)!=null&&Me.name)&&ee.set(ce.book_id,ce.members.name)}),o(ee)}p(!1)};O.useEffect(()=>{se();const q=_e.channel("public-db-changes-collection").on("postgres_changes",{event:"*",schema:"public"},se).subscribe();return()=>{_e.removeChannel(q)}},[]);const he=$7(t,300),te=O.useMemo(()=>n.filter(q=>{var J,ee,ce,Me;const Q=he.toLowerCase();return q.title.toLowerCase().includes(Q)||q.author.toLowerCase().includes(Q)||((J=q.publisher)==null?void 0:J.toLowerCase().includes(Q))||((ce=(ee=q.categories)==null?void 0:ee.name)==null?void 0:ce.toLowerCase().includes(Q))||((Me=q.ddc_number)==null?void 0:Me.toLowerCase().includes(Q))}).filter(q=>y==="all"||q.category_id===y),[n,he,y]);O.useEffect(()=>{S(1)},[he,y,h,I]);const de=O.useMemo(()=>{const q=k*I,Q=q-I;return te.slice(Q,q)},[te,k,I]),ne=O.useMemo(()=>h==="none"?null:te.reduce((q,Q)=>{var ee;const J=((ee=Q.categories)==null?void 0:ee.name)||"Uncategorized";return q[J]||(q[J]=[]),q[J].push(Q),q},{}),[te,h]),$=({book:q})=>{var ee;const Q=i.get(q.id),J=q.available_copies>0&&!Q;return f.jsxs("div",{className:"group border-2 border-neutral-200 rounded-2xl shadow-md hover:shadow-2xl hover:-translate-y-2 transition-all duration-300 flex flex-col bg-gradient-to-br from-white to-neutral-50 cursor-pointer overflow-hidden",onClick:()=>F(q),children:[f.jsxs("div",{className:`h-32 sm:h-36 flex items-center justify-center relative overflow-hidden ${J?"bg-gradient-to-br from-green-400 to-emerald-500":Q?"bg-gradient-to-br from-amber-400 to-orange-500":"bg-gradient-to-br from-red-400 to-rose-500"}`,children:[f.jsx(Kt,{size:48,className:"text-white opacity-90 group-hover:scale-110 transition-transform duration-300"}),f.jsx("div",{className:"absolute top-2 right-2",children:J?f.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse"}),f.jsx("span",{className:"text-[10px] font-bold text-green-700",children:"Available"})]}):Q?f.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500"}),f.jsx("span",{className:"text-[10px] font-bold text-amber-700",children:"Borrowed"})]}):f.jsxs("div",{className:"bg-white/90 backdrop-blur-sm px-2 py-1 rounded-full flex items-center gap-1 shadow-lg",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"}),f.jsx("span",{className:"text-[10px] font-bold text-red-700",children:"Issued"})]})})]}),f.jsxs("div",{className:"p-3 sm:p-4 flex flex-col flex-grow",children:[f.jsx("h3",{className:"font-bold text-sm sm:text-base text-neutral-900 leading-tight line-clamp-2 mb-2 group-hover:text-primary transition-colors",title:q.title,children:q.title}),f.jsxs("p",{className:"text-xs sm:text-sm text-neutral-600 truncate mb-2",title:q.author,children:["by ",f.jsx("span",{className:"font-semibold",children:q.author})]}),((ee=q.categories)==null?void 0:ee.name)&&f.jsx("div",{className:"mb-2",children:f.jsx("span",{className:"inline-block bg-primary/10 text-primary px-2 py-1 rounded-md text-[10px] sm:text-xs font-bold",children:q.categories.name})}),q.ddc_number&&f.jsx("div",{className:"mt-auto pt-2 border-t border-neutral-200",children:f.jsxs("p",{className:"text-xs text-neutral-500 flex items-center gap-1 font-mono",title:`DDC: ${q.ddc_number}`,children:[f.jsx($l,{size:12,className:"text-primary"}),f.jsx("span",{className:"font-semibold text-primary",children:q.ddc_number})]})})]}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"})]})};return f.jsxs("div",{className:"bg-gradient-to-br from-white to-neutral-50 rounded-2xl shadow-xl border-2 border-neutral-200 p-4 sm:p-6 lg:p-8",children:[f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-3xl sm:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary-dark mb-2",children:"Library Collection"}),f.jsx("p",{className:"text-neutral-600 text-sm sm:text-base",children:"Explore our extensive collection of books"})]}),f.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-xl p-1.5 shadow-md border-2 border-neutral-200",children:[f.jsx("span",{className:"text-sm font-semibold text-neutral-600 px-2 hidden sm:inline",children:"Group by:"}),["none","category"].map(q=>f.jsx("button",{onClick:()=>m(q),className:`px-4 py-2 text-sm font-bold rounded-lg transition-all ${h===q?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"text-neutral-600 hover:bg-neutral-100"}`,children:q==="none"?"All Books":"By Category"},q))]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-3 sm:gap-4 mb-6",children:[f.jsxs("div",{className:`relative ${z?"lg:col-span-7":"lg:col-span-8"}`,children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:22}),f.jsx("input",{type:"text",placeholder:V?" Listening...":"Search by title, author, category, or DDC...",value:t,onChange:q=>e(q.target.value),className:"w-full pl-12 pr-12 py-3.5 sm:py-4 border-2 border-neutral-200 rounded-xl focus:ring-4 focus:ring-primary/20 focus:border-primary transition-all text-base font-medium placeholder:text-neutral-400 bg-white shadow-sm"}),z&&f.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 flex items-center gap-2",children:f.jsx("button",{onClick:H,className:`p-2 rounded-full transition-all ${V?"bg-red-500 text-white animate-pulse shadow-lg":"text-neutral-500 hover:bg-neutral-100 hover:text-primary"}`,title:"Search with voice",children:V?f.jsx(z6,{size:20}):f.jsx(W6,{size:20})})})]}),z&&f.jsxs("select",{value:_,onChange:q=>T(q.target.value),className:"lg:col-span-2 w-full px-4 py-3.5 sm:py-4 border-2 border-neutral-200 rounded-xl bg-white focus:ring-4 focus:ring-primary/20 focus:border-primary font-medium text-base shadow-sm","aria-label":"Select voice typing language",children:[f.jsx("option",{value:"en-US",children:" English"}),f.jsx("option",{value:"kn-IN",children:" Kannada"}),f.jsx("option",{value:"ml-IN",children:" Malayalam"}),f.jsx("option",{value:"ar-SA",children:" Arabic"})]}),f.jsxs("select",{value:y,onChange:q=>v(q.target.value),className:`w-full px-4 py-3.5 sm:py-4 border-2 border-neutral-200 rounded-xl bg-white focus:ring-4 focus:ring-primary/20 focus:border-primary font-medium text-base shadow-sm ${z?"lg:col-span-3":"lg:col-span-4"}`,children:[f.jsx("option",{value:"all",children:" All Categories"}),C.map(q=>f.jsx("option",{value:q.id,children:q.name},q.id))]})]}),f.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6 bg-white p-4 rounded-xl border-2 border-neutral-200 shadow-sm",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-primary/10 p-2 rounded-lg",children:f.jsx(Kt,{className:"text-primary",size:20})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-neutral-600",children:"Showing"}),f.jsxs("p",{className:"text-lg font-bold text-neutral-900",children:[te.length," ",te.length===1?"Book":"Books"]})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("label",{htmlFor:"rows-per-page",className:"text-sm font-semibold text-neutral-600",children:"Per page:"}),f.jsxs("select",{id:"rows-per-page",value:I,onChange:q=>N(Number(q.target.value)),className:"px-3 py-2 border-2 border-neutral-200 rounded-lg bg-white text-sm font-bold focus:ring-2 focus:ring-primary/20 focus:border-primary",children:[f.jsx("option",{value:10,children:"10"}),f.jsx("option",{value:25,children:"25"}),f.jsx("option",{value:50,children:"50"}),f.jsx("option",{value:100,children:"100"})]})]})]}),c?f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-neutral-500",children:[f.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary border-t-transparent mb-4"}),f.jsx("p",{className:"text-lg font-semibold",children:"Loading books..."})]}):te.length>0?f.jsxs(f.Fragment,{children:[h==="none"?f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:de.map(q=>f.jsx($,{book:q},q.id))}):f.jsx("div",{className:"space-y-10",children:Object.entries(ne).sort(([q],[Q])=>q.localeCompare(Q)).map(([q,Q])=>f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[f.jsx("div",{className:"bg-gradient-to-r from-primary to-primary-dark p-2 rounded-xl",children:f.jsx(H0,{className:"text-white",size:20})}),f.jsx("h3",{className:"text-2xl font-bold text-primary-dark",children:q}),f.jsxs("span",{className:"ml-auto bg-primary text-white px-4 py-1.5 rounded-full text-sm font-bold shadow-md",children:[Q.length," ",Q.length===1?"Book":"Books"]})]}),f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4 lg:gap-6",children:Q.map(J=>f.jsx($,{book:J},J.id))})]},q))}),h==="none"&&f.jsx(Tm,{currentPage:k,totalCount:te.length,pageSize:I,onPageChange:q=>S(q)})]}):f.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-gradient-to-br from-neutral-50 to-neutral-100 rounded-2xl border-2 border-dashed border-neutral-300",children:[f.jsx("div",{className:"bg-white p-6 rounded-full shadow-lg mb-6",children:f.jsx(Kt,{size:64,className:"text-neutral-300"})}),f.jsx("p",{className:"text-2xl font-bold text-neutral-700 mb-2",children:t||y!=="all"?"No Books Found":"No Books Available"}),f.jsx("p",{className:"text-neutral-500 text-lg max-w-md text-center",children:t||y!=="all"?"Try adjusting your search or filter criteria to find what you're looking for.":"The library collection is currently empty."})]}),f.jsx(W7,{book:M,borrowerName:M?i.get(M.id):null,onClose:()=>F(null)})]})},X7=({onClose:t})=>{const[e,n]=O.useState({member_id:"",suggestion_title:"",suggestion_author:"",suggestion_reason:""}),[r,i]=O.useState(null),[o,c]=O.useState(!1),p=async h=>{if(h.preventDefault(),!e.member_id){alert("Please select a member.");return}c(!0);try{const{error:m}=await _e.from("feedback").insert({...e,feedback_type:"suggestion",status:"pending"});if(m)throw m;alert("Thank you! Your suggestion has been submitted."),t()}catch(m){console.error("Error submitting suggestion:",m),alert("Failed to submit suggestion.")}finally{c(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden transform transition-all scale-100",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-neutral-100 bg-neutral-50/50",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Suggest a Book"}),f.jsx("p",{className:"text-sm text-neutral-500",children:"Help us grow our collection"})]}),f.jsx("button",{onClick:t,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-full transition-all",children:f.jsx(Pn,{size:24})})]}),f.jsxs("form",{onSubmit:p,className:"p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["Select Member ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx(Qi,{value:r,onChange:h=>{i(h),n({...e,member_id:h?h.value:""})},placeholder:"Search for your name...",tableName:"members",labelField:"name",searchFields:["name","email"],required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["Book Title ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("input",{type:"text",required:!0,value:e.suggestion_title,onChange:h=>n({...e,suggestion_title:h.target.value}),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-neutral-50 focus:bg-white",placeholder:"e.g. The Alchemist"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Author"}),f.jsx("input",{type:"text",value:e.suggestion_author,onChange:h=>n({...e,suggestion_author:h.target.value}),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all bg-neutral-50 focus:bg-white",placeholder:"e.g. Paulo Coelho"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Reason for Suggestion"}),f.jsx("textarea",{rows:3,value:e.suggestion_reason,onChange:h=>n({...e,suggestion_reason:h.target.value}),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none bg-neutral-50 focus:bg-white",placeholder:"Why should we add this book?"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-neutral-100 mt-6",children:[f.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-neutral-600 font-medium hover:bg-neutral-100 rounded-xl transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2.5 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none transition-all transform hover:-translate-y-0.5",children:o?"Submitting...":"Submit Suggestion"})]})]})]})})},K7=({onClose:t})=>{const[e,n]=O.useState({member_id:"",book_id:"",rating:0,review:""}),[r,i]=O.useState(null),[o,c]=O.useState(null),[p,h]=O.useState(!1),m=async y=>{if(y.preventDefault(),!e.member_id||!e.book_id||e.rating===0){alert("Please fill all required fields and provide a rating.");return}h(!0);try{const{error:v}=await _e.from("feedback").insert({...e,feedback_type:"book_review",status:"pending"});if(v)throw v;alert("Thank you! Your review has been submitted."),t()}catch(v){console.error("Error submitting review:",v),alert("Failed to submit review.")}finally{h(!1)}};return f.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fade-in",children:f.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-lg w-full overflow-hidden transform transition-all scale-100",children:[f.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-neutral-100 bg-neutral-50/50",children:[f.jsxs("div",{children:[f.jsx("h2",{className:"text-2xl font-bold text-neutral-900",children:"Write a Review"}),f.jsx("p",{className:"text-sm text-neutral-500",children:"Share your thoughts with the community"})]}),f.jsx("button",{onClick:t,className:"p-2 text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 rounded-full transition-all",children:f.jsx(Pn,{size:24})})]}),f.jsxs("form",{onSubmit:m,className:"p-6 space-y-6",children:[f.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["Select Member ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx(Qi,{value:r,onChange:y=>{i(y),n({...e,member_id:y?y.value:""})},placeholder:"Search for your name...",tableName:"members",labelField:"name",searchFields:["name","email"],required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["Select Book ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx(Qi,{value:o,onChange:y=>{c(y),n({...e,book_id:y?y.value:""})},placeholder:"Search for the book...",tableName:"books",labelField:"title",searchFields:["title","author"],required:!0})]}),f.jsxs("div",{children:[f.jsxs("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:["Rating ",f.jsx("span",{className:"text-red-500",children:"*"})]}),f.jsx("div",{className:"flex gap-2",children:[1,2,3,4,5].map(y=>f.jsx("button",{type:"button",onClick:()=>n({...e,rating:y}),className:"focus:outline-none group transition-transform hover:scale-110",children:f.jsx(vC,{size:32,className:`transition-colors ${y<=e.rating?"text-yellow-400 fill-current drop-shadow-sm":"text-neutral-200 group-hover:text-neutral-300"}`})},y))}),f.jsx("p",{className:"text-xs text-neutral-400 mt-1",children:"Click stars to rate"})]}),f.jsxs("div",{children:[f.jsx("label",{className:"block text-sm font-semibold text-neutral-700 mb-2",children:"Your Review"}),f.jsx("textarea",{rows:4,value:e.review,onChange:y=>n({...e,review:y.target.value}),className:"w-full px-4 py-3 border border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/20 focus:border-primary transition-all resize-none bg-neutral-50 focus:bg-white",placeholder:"What did you think about this book?"})]})]}),f.jsxs("div",{className:"flex justify-end gap-3 pt-2 border-t border-neutral-100 mt-6",children:[f.jsx("button",{type:"button",onClick:t,className:"px-6 py-2.5 text-neutral-600 font-medium hover:bg-neutral-100 rounded-xl transition-colors",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:p,className:"px-6 py-2.5 bg-primary text-white font-bold rounded-xl hover:bg-primary-dark shadow-lg shadow-primary/20 disabled:opacity-50 disabled:shadow-none transition-all transform hover:-translate-y-0.5",children:p?"Submitting...":"Submit Review"})]})]})]})})},q7=({onClose:t})=>{const[e,n]=O.useState("Most Read"),[r,i]=O.useState("all"),[o,c]=O.useState(""),[p,h]=O.useState(!0),[m,y]=O.useState(null),[v,C]=O.useState([]),[E,_]=O.useState([]),[T,k]=O.useState(null),[S,I]=O.useState([]),[N,M]=O.useState(!1),F=O.useCallback(async()=>{if(!T){h(!0),y(null);try{if(e==="Most Read"){const{data:ne,error:$}=await _e.from("circulation").select("book_id, books(title, author)");if($)throw $;const q={},Q={};ne==null||ne.forEach(ee=>{ee.book_id&&ee.books&&(q[ee.book_id]=(q[ee.book_id]||0)+1,Q[ee.book_id]=ee.books)});const J=Object.entries(q).map(([ee,ce])=>({book_id:ee,read_count:ce,title:Q[ee].title,author:Q[ee].author})).sort((ee,ce)=>ce.read_count-ee.read_count);C(J)}else{const{data:ne,error:$}=await _e.from("circulation").select("member_id, members(name, class, register_number)");if($)throw $;const q={},Q={};ne==null||ne.forEach(ee=>{ee.member_id&&ee.members&&(q[ee.member_id]=(q[ee.member_id]||0)+1,Q[ee.member_id]=ee.members)});const J=Object.entries(q).map(([ee,ce])=>({member_id:ee,book_count:ce,name:Q[ee].name,class:Q[ee].class,register_number:Q[ee].register_number})).sort((ee,ce)=>ce.book_count-ee.book_count);_(J)}}catch(ne){console.error(`Error fetching ${e} report:`,ne),y(ne.message||`Failed to fetch ${e} report.`)}finally{h(!1)}}},[e,r,T]);O.useEffect(()=>{F()},[F]);const V=O.useCallback(async()=>{if(T){M(!0),y(null);try{if(T.type==="book"){const{data:ne,error:$}=await _e.from("circulation").select("id, issue_date, members(name, class, register_number)").eq("book_id",T.item.book_id).order("issue_date",{ascending:!1});if($)throw $;I(ne||[])}else{const{data:ne,error:$}=await _e.from("circulation").select("id, issue_date, books(title, author, ddc_number)").eq("member_id",T.item.member_id).order("issue_date",{ascending:!1});if($)throw $;I(ne||[])}}catch(ne){console.error("Error fetching detail data:",ne),y(ne.message||"Failed to fetch details.")}finally{M(!1)}}},[T]);O.useEffect(()=>{V()},[V]);const B=(ne,$)=>{k({type:ne,item:$})},z=()=>{k(null),I([]),y(null),c("")},H=({icon:ne,message:$})=>f.jsxs("div",{className:"text-center text-neutral-400 py-12 flex flex-col items-center h-full justify-center animate-fade-in",children:[f.jsx("div",{className:"bg-neutral-800 p-4 rounded-full mb-4",children:f.jsx(ne,{className:"w-8 h-8 text-neutral-500"})}),f.jsx("p",{className:"text-lg font-medium",children:$})]}),se=O.useMemo(()=>{const ne=e==="Most Read"?v:E;if(!o)return ne;const $=o.toLowerCase();return e==="Most Read"?ne.filter(q=>{var Q,J;return((Q=q.title)==null?void 0:Q.toLowerCase().includes($))||((J=q.author)==null?void 0:J.toLowerCase().includes($))}):ne.filter(q=>{var Q,J,ee;return((Q=q.name)==null?void 0:Q.toLowerCase().includes($))||((J=q.class)==null?void 0:J.toLowerCase().includes($))||((ee=q.register_number)==null?void 0:ee.toLowerCase().includes($))})},[e,v,E,o]),he=O.useMemo(()=>{if(!o||!S)return S;const ne=o.toLowerCase();return(T==null?void 0:T.type)==="book"?S.filter($=>{var q,Q,J,ee,ce,Me;return((Q=(q=$.members)==null?void 0:q.name)==null?void 0:Q.toLowerCase().includes(ne))||((ee=(J=$.members)==null?void 0:J.class)==null?void 0:ee.toLowerCase().includes(ne))||((Me=(ce=$.members)==null?void 0:ce.register_number)==null?void 0:Me.toLowerCase().includes(ne))}):S.filter($=>{var q,Q,J,ee;return((Q=(q=$.books)==null?void 0:q.title)==null?void 0:Q.toLowerCase().includes(ne))||((ee=(J=$.books)==null?void 0:J.author)==null?void 0:ee.toLowerCase().includes(ne))})},[S,o,T]),te=()=>{let ne,$;switch(e){case"Most Read":ne=t6,$="No borrowing data available for this period.";break;case"Most Active":ne=Vi,$="No active readers found for this period.";break}return p?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(jn,{className:"animate-spin text-primary",size:40})}):m?f.jsxs("div",{className:"text-center text-accent-light py-10 flex flex-col items-center justify-center h-64 animate-fade-in",children:[f.jsx("div",{className:"bg-red-900/20 p-4 rounded-full mb-4",children:f.jsx(Ts,{className:"w-10 h-10 text-red-500"})}),f.jsx("p",{className:"font-bold text-white text-xl mb-2",children:"Error Loading Data"}),f.jsx("p",{className:"text-sm text-neutral-400 mb-6 max-w-md px-4",children:m})]}):se.length===0?f.jsx(H,{icon:ne,message:o?"No results match your search.":$}):f.jsx("ul",{className:"space-y-3",children:se.map((q,Q)=>{const J=Q<3,ee=Q===0?"text-yellow-400":Q===1?"text-gray-300":Q===2?"text-amber-600":"text-neutral-500";return e==="Most Read"?f.jsxs(Ie.li,{onClick:()=>B("book",q),className:`flex items-center justify-between p-4 rounded-xl transition-all cursor-pointer border group ${J?"bg-neutral-800/80 border-neutral-700 hover:bg-neutral-700":"bg-neutral-900 border-neutral-800 hover:bg-neutral-800"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Q*.05},children:[f.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[f.jsx("div",{className:`flex items-center justify-center w-8 h-8 font-bold text-lg ${ee} flex-shrink-0`,children:J?f.jsx(Vx,{size:20}):Q+1}),f.jsx("div",{className:"p-3 bg-neutral-800 rounded-lg group-hover:bg-neutral-700 transition-colors flex-shrink-0",children:f.jsx(Kt,{className:"text-primary",size:24})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-bold text-neutral-100 text-base sm:text-lg group-hover:text-primary transition-colors truncate",children:q.title}),f.jsxs("p",{className:"text-sm text-neutral-400 truncate",children:["by ",q.author]})]})]}),f.jsx("div",{className:"text-right pl-4 flex-shrink-0",children:f.jsxs("div",{className:"flex flex-col items-end",children:[f.jsx("span",{className:"font-bold text-xl sm:text-2xl text-white",children:q.read_count}),f.jsx("span",{className:"text-xs font-medium text-primary uppercase tracking-wider",children:"Reads"})]})})]},q.book_id||Q):e==="Most Active"?f.jsxs(Ie.li,{onClick:()=>B("member",q),className:`flex items-center justify-between p-4 rounded-xl transition-all cursor-pointer border group ${J?"bg-neutral-800/80 border-neutral-700 hover:bg-neutral-700":"bg-neutral-900 border-neutral-800 hover:bg-neutral-800"}`,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:Q*.05},children:[f.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-1 min-w-0",children:[f.jsx("div",{className:`flex items-center justify-center w-8 h-8 font-bold text-lg ${ee} flex-shrink-0`,children:J?f.jsx(Vx,{size:20}):Q+1}),f.jsx("div",{className:"p-3 bg-neutral-800 rounded-lg group-hover:bg-neutral-700 transition-colors flex-shrink-0",children:f.jsx(Vi,{className:"text-accent",size:24})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-bold text-neutral-100 text-base sm:text-lg group-hover:text-accent transition-colors truncate",children:q.name}),f.jsxs("p",{className:"text-sm text-neutral-400 flex items-center gap-2 flex-wrap",children:[f.jsx("span",{className:"bg-neutral-800 px-2 py-0.5 rounded text-xs",children:q.class||"N/A"}),f.jsxs("span",{className:"truncate",children:["#",q.register_number||"N/A"]})]})]})]}),f.jsx("div",{className:"text-right pl-4 flex-shrink-0",children:f.jsxs("div",{className:"flex flex-col items-end",children:[f.jsx("span",{className:"font-bold text-xl sm:text-2xl text-white",children:q.book_count}),f.jsx("span",{className:"text-xs font-medium text-accent uppercase tracking-wider",children:"Books"})]})})]},q.member_id||Q):null})})},de=()=>T?N?f.jsx("div",{className:"flex justify-center items-center h-64",children:f.jsx(jn,{className:"animate-spin text-primary",size:40})}):m?f.jsxs("div",{className:"text-center text-accent-light py-10 flex flex-col items-center",children:[f.jsx(Ts,{className:"w-12 h-12 text-accent mb-4"}),f.jsx("p",{className:"font-semibold text-white",children:"An Error Occurred"}),f.jsx("p",{className:"text-sm text-neutral-400",children:m})]}):he.length===0?f.jsx(H,{icon:Vi,message:o?"No results match your search.":"No activity data found."}):f.jsx("ul",{className:"space-y-2",children:he.map((ne,$)=>f.jsxs(Ie.li,{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between p-4 bg-neutral-800/40 border border-neutral-800 rounded-lg hover:bg-neutral-800 transition-colors gap-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:$*.05},children:[T.type==="book"?f.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[f.jsx("div",{className:"w-10 h-10 bg-neutral-700 rounded-full flex items-center justify-center text-neutral-300 font-bold flex-shrink-0",children:ne.members.name.charAt(0)}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-semibold text-neutral-200 truncate",children:ne.members.name}),f.jsxs("p",{className:"text-sm text-neutral-500 truncate",children:[ne.members.class||"N/A","  Reg: ",ne.members.register_number||"N/A"]})]})]}):f.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[f.jsx("div",{className:"w-10 h-10 bg-neutral-700 rounded-lg flex items-center justify-center text-neutral-300 flex-shrink-0",children:f.jsx(Kt,{size:18})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("p",{className:"font-semibold text-neutral-200 truncate",children:ne.books.title}),f.jsxs("p",{className:"text-sm text-neutral-500 truncate",children:["by ",ne.books.author]})]})]}),f.jsxs("div",{className:"text-left sm:text-right text-sm text-neutral-400 flex items-center gap-2 flex-shrink-0",children:[f.jsx(Ca,{size:14}),new Date(ne.issue_date).toLocaleDateString()]})]},ne.id||$))}):null;return f.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-md flex items-center justify-center p-2 sm:p-4 z-50",children:f.jsxs(Ie.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"bg-neutral-900 border border-neutral-700 text-white rounded-2xl shadow-2xl max-w-4xl w-full max-h-[95vh] sm:max-h-[90vh] flex flex-col overflow-hidden",children:[f.jsxs("div",{className:"flex justify-between items-center p-4 sm:p-6 border-b border-neutral-800 bg-neutral-900/50",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-primary/20 p-2 rounded-lg",children:f.jsx(Fi,{className:"text-primary",size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-lg sm:text-xl font-bold text-white",children:"Library Insights"}),f.jsx("p",{className:"text-xs text-neutral-400 hidden sm:block",children:"Real-time analytics and reports"})]})]}),f.jsx("button",{onClick:t,className:"p-2 hover:bg-neutral-800 rounded-full transition-colors text-neutral-400 hover:text-white",children:f.jsx(Pn,{size:24})})]}),f.jsx(ui,{mode:"wait",children:T?f.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"p-4 border-b border-neutral-800 bg-neutral-900/30",children:f.jsxs("button",{onClick:z,className:"flex items-center gap-2 text-sm font-medium text-primary hover:text-primary-light px-2 py-1 rounded hover:bg-primary/10 transition-colors w-fit",children:[f.jsx(ca,{size:16})," Back to Reports"]})},"detail-view-header"):f.jsx(Ie.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:f.jsx("div",{className:"border-b border-neutral-800 bg-neutral-900/30 overflow-x-auto",children:f.jsx("nav",{className:"flex gap-4 sm:gap-6 px-4 sm:px-6 min-w-max",children:["Most Read","Most Active"].map(ne=>f.jsxs("button",{onClick:()=>{n(ne),c("")},className:`py-4 px-2 font-medium text-sm transition-all relative whitespace-nowrap ${e===ne?"text-primary":"text-neutral-400 hover:text-white"}`,children:[ne,e===ne&&f.jsx(Ie.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-0.5 bg-primary"})]},ne))})})},"list-view")}),f.jsx("div",{className:"p-4 sm:p-6 flex-grow overflow-y-auto custom-scrollbar",children:f.jsx(ui,{mode:"wait",children:f.jsxs(Ie.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.2},children:[T?f.jsxs("div",{className:"mb-6",children:[f.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white mb-1 truncate",children:T.type==="book"?T.item.title:T.item.name}),f.jsx("p",{className:"text-neutral-400",children:T.type==="book"?"Reader History":"Reading History"})]}):null,f.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[f.jsxs("div",{className:"relative w-full group",children:[f.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-500 group-focus-within:text-primary transition-colors",size:20}),f.jsx("input",{type:"text",placeholder:"Search in results...",value:o,onChange:ne=>c(ne.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-neutral-800 border border-neutral-700 rounded-xl text-white focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all"})]}),!T&&f.jsx("div",{className:"flex items-center gap-1 bg-neutral-800 p-1 rounded-xl w-full overflow-x-auto",children:["all","year","month","week"].map(ne=>f.jsx("button",{onClick:()=>i(ne),className:`flex-1 px-3 sm:px-4 py-1.5 text-xs font-bold uppercase tracking-wider rounded-lg transition-all whitespace-nowrap ${r===ne?"bg-neutral-700 text-white shadow-md":"text-neutral-500 hover:text-neutral-300 hover:bg-neutral-700/50"}`,children:ne},ne))})]}),f.jsx("div",{className:"mt-4",children:T?de():te()})]},T?`detail-${T.type}-${T.item.id}`:`list-${e}-${r}`)})})]})})},Y7=()=>{const t=ro(),[e,n]=O.useState(!1),[r,i]=O.useState(!1),[o,c]=O.useState(!1),p=[{icon:k6,title:"Suggest a Book",description:"Let us know what books you want to see in our collection.",bgColor:"bg-yellow-100",iconColor:"text-yellow-600",onClick:()=>n(!0)},{icon:td,title:"Write a Review",description:"Share your thoughts on books you have read.",bgColor:"bg-blue-100",iconColor:"text-blue-600",onClick:()=>i(!0)},{icon:JT,title:"View Reports",description:"Check out library statistics and popular books.",bgColor:"bg-indigo-100",iconColor:"text-primary",onClick:()=>c(!0)}];return f.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[f.jsx(dc,{}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[f.jsxs("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-sm font-medium text-primary hover:text-primary-dark mb-6",children:[f.jsx(ca,{size:16})," Back to Landing Page"]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:p.map((h,m)=>f.jsx(z7,{icon:h.icon,title:h.title,description:h.description,bgColor:h.bgColor,iconColor:h.iconColor,onClick:h.onClick},m))}),f.jsx(G7,{})]}),e&&f.jsx(X7,{onClose:()=>n(!1)}),r&&f.jsx(K7,{onClose:()=>i(!1)}),o&&f.jsx(q7,{onClose:()=>c(!1)})]})},s3=({post:t})=>f.jsxs(Gr,{to:`/read-with-us/${t.id}`,className:"block bg-white rounded-2xl shadow-lg border-2 border-neutral-200 overflow-hidden group transition-all duration-300 hover:shadow-2xl hover:-translate-y-2 hover:border-primary/50",children:[f.jsxs("div",{className:"relative overflow-hidden aspect-[3/4]",children:[t.image_url?f.jsxs(f.Fragment,{children:[f.jsx("img",{src:t.image_url,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}):f.jsx("div",{className:"w-full h-full bg-gradient-to-br from-primary/10 via-white to-accent/10 flex items-center justify-center",children:f.jsx(KT,{size:64,className:"text-neutral-300 group-hover:text-primary transition-colors"})}),f.jsx("div",{className:"absolute top-3 right-3 bg-gradient-to-r from-primary to-primary-dark text-white px-3 py-1.5 rounded-full text-xs font-bold shadow-lg",children:t.category})]}),f.jsxs("div",{className:"p-5 flex flex-col flex-grow",children:[f.jsx("h3",{className:"text-lg font-bold text-neutral-900 mb-2 line-clamp-2 transition-colors group-hover:text-primary leading-tight",children:t.title}),f.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-primary/20 to-accent/20 flex items-center justify-center flex-shrink-0",children:f.jsx(Hr,{size:16,className:"text-primary"})}),f.jsxs("p",{className:"text-sm text-neutral-600 font-medium truncate",children:["by ",t.author]})]}),f.jsxs("div",{className:"mt-auto pt-4 border-t-2 border-neutral-100 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm text-neutral-500",children:[f.jsx(Ca,{size:16,className:"text-neutral-400"}),f.jsx("span",{className:"font-medium",children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),f.jsxs("div",{className:"flex items-center gap-1 text-primary",children:[f.jsx(Ip,{size:16}),f.jsx("span",{className:"text-xs font-bold",children:"Read More"})]})]})]})]}),Z7=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0);return O.useEffect(()=>{const i=async()=>{r(!0);const{data:c,error:p}=await _e.from("read_with_us").select("*").order("created_at",{ascending:!1}).limit(4);c&&e(c),p&&console.error("Error fetching 'Read With Us' posts:",p),r(!1)};i();const o=_e.channel("public:read_with_us:landing").on("postgres_changes",{event:"*",schema:"public",table:"read_with_us"},i).subscribe();return()=>{_e.removeChannel(o)}},[]),f.jsxs("section",{id:"read-with-us",className:"py-24 bg-neutral-50 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5 -z-10"}),f.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-72 h-72 bg-secondary/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-16 gap-6",children:[f.jsxs("div",{className:"max-w-2xl",children:[f.jsxs(Ie.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"inline-flex items-center gap-2 text-primary font-bold tracking-wider uppercase text-sm mb-3 bg-primary/10 px-3 py-1 rounded-full",children:[f.jsx(Yi,{size:16}),f.jsx("span",{children:"Community Corner"})]}),f.jsx(Ie.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.1},className:"text-4xl md:text-5xl font-extrabold text-neutral-900 leading-tight",children:"Read With Us"}),f.jsx(Ie.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:.2},className:"mt-4 text-lg text-neutral-600 leading-relaxed",children:"Dive into stories, reviews, and articles written by our vibrant community of readers. Join the conversation!"})]}),f.jsx(Ie.div,{initial:{opacity:0,x:20},whileInView:{opacity:1,x:0},viewport:{once:!0},children:f.jsxs(Gr,{to:"/read-with-us",className:"hidden md:inline-flex items-center gap-2 font-bold text-white bg-neutral-900 hover:bg-neutral-800 px-6 py-3 rounded-xl transition-all shadow-lg hover:shadow-xl hover:-translate-y-1 group",children:["View All Posts ",f.jsx(Wl,{size:20,className:"transition-transform group-hover:translate-x-1"})]})})]}),n?f.jsx("div",{className:"flex justify-center py-20",children:f.jsx(jn,{className:"animate-spin text-primary",size:40})}):t.length>0?f.jsx(Ie.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",initial:"hidden",whileInView:"visible",viewport:{once:!0},variants:{visible:{transition:{staggerChildren:.1}}},children:t.map((i,o)=>f.jsx(Ie.div,{variants:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.5}}},className:"h-full",children:f.jsx(s3,{post:i,showStats:!1})},i.id))}):f.jsxs("div",{className:"text-center py-24 bg-white rounded-3xl border border-dashed border-neutral-200 shadow-sm",children:[f.jsx("div",{className:"bg-neutral-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:f.jsx(Yi,{size:40,className:"text-neutral-300"})}),f.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"No Posts Yet"}),f.jsx("p",{className:"text-neutral-500 max-w-md mx-auto",children:"Be the first to share your story! Submit a review or article to get started."})]}),f.jsx("div",{className:"mt-12 text-center md:hidden",children:f.jsxs(Gr,{to:"/read-with-us",className:"inline-flex items-center gap-2 font-bold text-white bg-neutral-900 hover:bg-neutral-800 px-6 py-3 rounded-xl transition-all shadow-lg w-full justify-center",children:["View All Posts ",f.jsx(Wl,{size:20})]})})]})]})},Q7=()=>{const t=ro(),[e,n]=O.useState(!1),[r,i]=O.useState(!1);O.useEffect(()=>{const c=()=>i(window.scrollY>10);return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const o=(c,p)=>{c.preventDefault();const h=document.querySelector(p);h==null||h.scrollIntoView({behavior:"smooth"}),e&&n(!1)};return f.jsxs("div",{className:"bg-white text-neutral-800 font-sans min-h-screen flex flex-col",children:[f.jsxs("header",{className:`fixed top-0 left-0 right-0 z-50 transition-all duration-300 ${r?"bg-white/95 backdrop-blur-md shadow-sm py-3":"bg-transparent py-5"}`,children:[f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsxs(Gr,{to:"/",className:"flex items-center gap-2 group",children:[f.jsx("div",{className:"bg-primary p-2 rounded-xl text-white shadow-lg shadow-primary/20 group-hover:bg-primary-dark transition-colors",children:f.jsx(Lx,{size:24})}),f.jsx("span",{className:"text-xl font-bold text-neutral-900 tracking-tight",children:"MUHIMMATH"})]}),f.jsxs("nav",{className:"hidden md:flex items-center gap-8",children:[f.jsx("a",{href:"#home",onClick:c=>o(c,"#home"),className:"font-medium text-neutral-600 hover:text-primary transition-colors",children:"Home"}),f.jsx("a",{href:"#read-with-us",onClick:c=>o(c,"#read-with-us"),className:"font-medium text-neutral-600 hover:text-primary transition-colors",children:"Read With Us"}),f.jsx("a",{href:"#features",onClick:c=>o(c,"#features"),className:"font-medium text-neutral-600 hover:text-primary transition-colors",children:"Features"})]}),f.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[f.jsx("button",{onClick:()=>t("/member-status"),className:"text-neutral-600 hover:text-primary font-medium px-4 py-2 transition-colors",children:"Check Status"}),f.jsxs("button",{onClick:()=>t("/home"),className:"bg-primary text-white px-6 py-2.5 rounded-full font-semibold hover:bg-primary-dark transition-all shadow-lg shadow-primary/20 hover:shadow-primary/40 transform hover:-translate-y-0.5 flex items-center gap-2",children:["Enter Library ",f.jsx(Wl,{size:16})]})]}),f.jsx("button",{onClick:()=>n(!e),className:"md:hidden p-2 text-neutral-600",children:e?f.jsx(Pn,{size:24}):f.jsx(F6,{size:24})})]})}),e&&f.jsx(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"md:hidden bg-white border-t border-neutral-100 shadow-lg",children:f.jsxs("div",{className:"px-4 py-6 space-y-4",children:[f.jsx("a",{href:"#home",onClick:c=>o(c,"#home"),className:"block text-lg font-medium text-neutral-700",children:"Home"}),f.jsx("a",{href:"#read-with-us",onClick:c=>o(c,"#read-with-us"),className:"block text-lg font-medium text-neutral-700",children:"Read With Us"}),f.jsxs("div",{className:"pt-4 border-t border-neutral-100 space-y-3",children:[f.jsx("button",{onClick:()=>t("/member-status"),className:"w-full text-left px-4 py-3 rounded-lg bg-neutral-50 text-neutral-700 font-semibold",children:"Check Member Status"}),f.jsx("button",{onClick:()=>t("/home"),className:"w-full text-left px-4 py-3 rounded-lg bg-primary text-white font-semibold",children:"Enter Library"})]})]})})]}),f.jsxs("main",{className:"flex-grow",children:[f.jsxs("section",{id:"home",className:"relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-primary/5 to-transparent -z-10"}),f.jsx("div",{className:"absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-primary/5 to-transparent skew-x-12 transform origin-top -z-10 hidden lg:block"}),f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 lg:gap-16 items-center",children:[f.jsxs(Ie.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"text-center lg:text-left",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 bg-white border border-neutral-200 rounded-full px-4 py-1.5 mb-8 shadow-sm animate-fade-in",children:[f.jsx("span",{className:"w-2 h-2 rounded-full bg-primary animate-pulse"}),f.jsx("span",{className:"text-sm font-medium text-neutral-600",children:"Smart Library Management"})]}),f.jsxs("h1",{className:"text-5xl sm:text-6xl lg:text-7xl font-extrabold text-neutral-900 leading-tight mb-6",children:["Unlock the ",f.jsx("br",{}),f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-primary-dark relative",children:"World of Books"})]}),f.jsx("p",{className:"text-lg sm:text-xl text-neutral-600 mb-10 max-w-2xl mx-auto lg:mx-0 leading-relaxed",children:"Seamlessly manage your reading journey. Access thousands of resources, track your history, and join a community of learners."}),f.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center lg:justify-start gap-4",children:[f.jsxs("button",{onClick:()=>t("/home"),className:"w-full sm:w-auto px-8 py-4 bg-primary text-white rounded-xl font-bold text-lg shadow-xl shadow-primary/20 hover:bg-primary-dark hover:shadow-2xl hover:-translate-y-1 transition-all flex items-center justify-center gap-2",children:["Explore Collection ",f.jsx(Wl,{size:20})]}),f.jsx("button",{onClick:()=>t("/member-status"),className:"w-full sm:w-auto px-8 py-4 bg-white text-neutral-700 border border-neutral-200 rounded-xl font-bold text-lg hover:border-primary hover:text-primary hover:shadow-lg transition-all",children:"My Status"})]})]}),f.jsxs(Ie.div,{initial:{opacity:0,scale:.9,rotate:2},animate:{opacity:1,scale:1,rotate:0},transition:{duration:1,delay:.2,type:"spring"},className:"relative hidden lg:block",children:[f.jsxs("div",{className:"relative z-10 bg-white rounded-3xl shadow-2xl p-4 border border-neutral-100",children:[f.jsx("img",{src:"https://images.unsplash.com/photo-1521587760476-6c12a4b040da?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",alt:"Library",className:"rounded-2xl w-full h-[500px] object-cover"}),f.jsxs(Ie.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.8},className:"absolute -bottom-8 -left-8 bg-white p-6 rounded-2xl shadow-xl border border-neutral-100 max-w-xs",children:[f.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[f.jsx("div",{className:"bg-green-100 p-3 rounded-xl text-green-600",children:f.jsx(Kt,{size:28})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-neutral-500 font-medium",children:"Total Collection"}),f.jsx("p",{className:"text-2xl font-bold text-neutral-900",children:"5,000+"})]})]}),f.jsx("div",{className:"h-1.5 w-full bg-neutral-100 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-green-500 w-3/4 rounded-full"})})]})]}),f.jsx("div",{className:"absolute -top-10 -right-10 w-64 h-64 bg-primary/10 rounded-full blur-3xl -z-10"}),f.jsx("div",{className:"absolute -bottom-10 -left-10 w-64 h-64 bg-accent/10 rounded-full blur-3xl -z-10"})]})]})}),f.jsx("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 animate-bounce text-neutral-400",children:f.jsx(s6,{size:32})})]}),f.jsx(Z7,{}),f.jsx("section",{id:"features",className:"py-24 bg-neutral-50",children:f.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[f.jsxs("div",{className:"text-center mb-20",children:[f.jsx("span",{className:"text-primary font-bold tracking-wider uppercase text-sm bg-primary/10 px-3 py-1 rounded-full",children:"Features"}),f.jsx("h2",{className:"text-4xl font-bold text-neutral-900 mt-4 mb-4",children:"Everything you need"}),f.jsx("p",{className:"text-neutral-600 max-w-2xl mx-auto text-lg",children:"A complete solution for managing library resources efficiently and effectively."})]}),f.jsx("div",{className:"grid md:grid-cols-3 gap-8 lg:gap-12",children:[{icon:f.jsx(zr,{size:32}),title:"Smart Search",desc:"Instantly find books by title, author, or DDC number with our powerful search engine.",color:"bg-blue-500"},{icon:f.jsx(wC,{size:32}),title:"Real-time Status",desc:"Check availability and your borrowing status instantly without logging in.",color:"bg-amber-500"},{icon:f.jsx(W0,{size:32}),title:"Community Hub",desc:"Engage with other readers through reviews, ratings, and discussions.",color:"bg-rose-500"}].map((c,p)=>f.jsxs(Ie.div,{whileHover:{y:-10},className:"bg-white p-8 rounded-3xl shadow-sm border border-neutral-100 hover:shadow-xl transition-all duration-300",children:[f.jsx("div",{className:`${c.color} w-16 h-16 rounded-2xl flex items-center justify-center text-white mb-6 shadow-lg shadow-${c.color}/30`,children:c.icon}),f.jsx("h3",{className:"text-xl font-bold text-neutral-900 mb-3",children:c.title}),f.jsx("p",{className:"text-neutral-600 leading-relaxed",children:c.desc})]},p))})]})})]}),f.jsx("footer",{className:"bg-neutral-900 text-white py-16 border-t border-neutral-800",children:f.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-8",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"bg-white/10 p-2.5 rounded-xl",children:f.jsx(Lx,{size:28})}),f.jsxs("div",{children:[f.jsx("span",{className:"text-2xl font-bold block",children:"Muhimmath"}),f.jsx("span",{className:"text-xs text-neutral-400 tracking-widest uppercase",children:"Library System"})]})]}),f.jsxs("div",{className:"text-neutral-400 text-sm text-center md:text-right",children:[f.jsxs("p",{children:[" ",new Date().getFullYear()," Developed By Khaleel Kattathar."]}),f.jsxs("div",{className:"mt-2 space-x-6",children:[f.jsx(Gr,{to:"/admin-login",className:"hover:text-white transition-colors",children:"Admin Login"}),f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy Policy"}),f.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"})]})]})]})})})]})},Hs=({icon:t,label:e,value:n})=>!n&&n!==0?null:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:"bg-neutral-100 p-3 rounded-full mt-1",children:f.jsx(t,{size:18,className:"text-neutral-600"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-neutral-500",children:e}),f.jsx("p",{className:"font-semibold text-neutral-800 text-lg",children:n})]})]}),J7=()=>{var p;const{bookId:t}=ab(),[e,n]=O.useState(null),[r,i]=O.useState(!0),[o,c]=O.useState(null);return O.useEffect(()=>{(async()=>{if(!t){c("No book ID provided."),i(!1);return}i(!0);const{data:m,error:y}=await _e.from("books").select("*, categories(name)").eq("id",t).single();y?(c("Book not found."),console.error(y)):n(m),i(!1)})()},[t]),r?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-neutral-50",children:f.jsx(jn,{className:"animate-spin text-primary",size:48})}):o||!e?f.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-neutral-50 text-center px-4",children:[f.jsx(Ts,{className:"text-red-500 mb-4",size:48}),f.jsx("h2",{className:"text-2xl font-bold text-neutral-800 mb-2",children:"Error"}),f.jsx("p",{className:"text-neutral-600 mb-6",children:o||"Could not load book details."}),f.jsx(Gr,{to:"/home",className:"bg-primary text-white px-6 py-2 rounded-lg font-semibold hover:bg-primary-dark",children:"Back to Collection"})]}):f.jsxs("div",{className:"min-h-screen bg-neutral-50",children:[f.jsx(dc,{}),f.jsxs("main",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8",children:[f.jsxs(Gr,{to:"/home",className:"flex items-center gap-2 text-sm font-medium text-primary hover:text-primary-dark mb-6",children:[f.jsx(ca,{size:16})," Back to Collection"]}),f.jsx("div",{className:"bg-white rounded-xl shadow-md border border-neutral-200 overflow-hidden",children:f.jsx("div",{className:"p-6 md:p-8",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[f.jsx("div",{className:"w-full md:w-1/3 flex-shrink-0",children:f.jsx("div",{className:"aspect-[3/4] bg-neutral-100 rounded-lg flex items-center justify-center",children:f.jsx(Kt,{size:80,className:"text-neutral-300"})})}),f.jsxs("div",{className:"w-full md:w-2/3",children:[f.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-neutral-900 leading-tight",children:e.title}),f.jsxs("p",{className:"text-xl font-medium text-neutral-500 mt-1",children:["by ",e.author]}),f.jsxs("div",{className:"mt-6 pt-6 border-t border-neutral-200 grid grid-cols-1 sm:grid-cols-2 gap-y-6 gap-x-4",children:[f.jsx(Hs,{icon:kp,label:"Category",value:(p=e.categories)==null?void 0:p.name}),f.jsx(Hs,{icon:$l,label:"DDC Number",value:e.ddc_number}),f.jsx(Hs,{icon:Hr,label:"Publisher",value:e.publisher}),f.jsx(Hs,{icon:Ca,label:"Published Year",value:e.publication_year}),f.jsx(Hs,{icon:Hd,label:"Price",value:e.price?`${e.price.toFixed(2)}`:null}),f.jsx(Hs,{icon:Np,label:"Language",value:e.language}),f.jsx(Hs,{icon:yC,label:"Copies",value:`${e.available_copies} available / ${e.total_copies} total`}),f.jsx(Hs,{icon:Tp,label:"ISBN",value:e.isbn})]})]})]})})})]})]})},e9=["All","Article","Book Review","Poem","Story"],t9=["All","English","Kannada","Malayalam","Arabic","Urdu"],n9=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!0),[i,o]=O.useState(""),[c,p]=O.useState("All"),[h,m]=O.useState("All"),[y,v]=O.useState(!1),[C,E]=O.useState(1),[_]=O.useState(12);O.useEffect(()=>{(async()=>{r(!0);const{data:I}=await _e.from("read_with_us").select("*").order("created_at",{ascending:!1});e(I||[]),r(!1)})()},[]);const T=O.useMemo(()=>t.filter(S=>c==="All"||S.category===c).filter(S=>h==="All"||S.language===h).filter(S=>S.title.toLowerCase().includes(i.toLowerCase())||S.author.toLowerCase().includes(i.toLowerCase())||S.content.toLowerCase().includes(i.toLowerCase())),[t,c,h,i]),k=O.useMemo(()=>{const S=(C-1)*_;return T.slice(S,S+_)},[T,C,_]);return O.useEffect(()=>{E(1)},[i,c,h]),f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-50",children:[f.jsx(dc,{}),f.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center mb-12 relative",children:[f.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-accent/5 rounded-3xl -z-10"}),f.jsxs("div",{className:"py-12",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 bg-primary/10 text-primary px-4 py-2 rounded-full mb-4",children:[f.jsx(Ip,{size:16}),f.jsx("span",{className:"text-sm font-bold uppercase tracking-wider",children:"Community Stories"})]}),f.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-neutral-900 tracking-tight mb-4",children:["Read With ",f.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-primary to-accent",children:"Us"})]}),f.jsx("p",{className:"mt-3 text-lg sm:text-xl text-neutral-600 max-w-3xl mx-auto leading-relaxed",children:"Discover stories, poems, and reviews from our talented community of readers and writers."})]})]}),f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"mb-8 bg-white rounded-2xl shadow-lg border border-neutral-200/80 overflow-hidden",children:[f.jsxs("div",{className:"p-4 sm:p-6",children:[f.jsxs("div",{className:"relative mb-6",children:[f.jsx(zr,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),f.jsx("input",{type:"text",placeholder:"Search by title, author, or content...",value:i,onChange:S=>o(S.target.value),className:"w-full pl-12 pr-4 py-3.5 border-2 border-neutral-200 rounded-xl focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all text-neutral-900 placeholder:text-neutral-400"})]}),f.jsxs("button",{onClick:()=>v(!y),className:"md:hidden w-full flex items-center justify-center gap-2 bg-neutral-100 hover:bg-neutral-200 text-neutral-700 font-semibold py-3 rounded-xl transition-colors mb-4",children:[f.jsx(C6,{size:18}),y?"Hide Filters":"Show Filters"]}),f.jsx(ui,{children:(y||window.innerWidth>=768)&&f.jsxs(Ie.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex flex-col md:flex-row gap-6",children:[f.jsxs("div",{className:"w-full",children:[f.jsxs("label",{className:"text-sm font-bold text-neutral-700 mb-3 block flex items-center gap-2",children:[f.jsx("span",{className:"w-1 h-4 bg-primary rounded-full"}),"Category"]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:e9.map(S=>f.jsx(Ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>p(S),className:`px-4 py-2 text-sm font-bold rounded-xl transition-all ${c===S?"bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 hover:shadow-md"}`,children:S},S))})]}),f.jsxs("div",{className:"w-full",children:[f.jsxs("label",{className:"text-sm font-bold text-neutral-700 mb-3 block flex items-center gap-2",children:[f.jsx("span",{className:"w-1 h-4 bg-accent rounded-full"}),"Language"]}),f.jsx("div",{className:"flex flex-wrap gap-2",children:t9.map(S=>f.jsx(Ie.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>m(S),className:`px-4 py-2 text-sm font-bold rounded-xl transition-all ${h===S?"bg-gradient-to-r from-accent to-accent-dark text-white shadow-lg shadow-accent/30":"bg-neutral-100 text-neutral-700 hover:bg-neutral-200 hover:shadow-md"}`,children:S},S))})]})]})})]}),(c!=="All"||h!=="All"||i)&&f.jsx("div",{className:"px-4 sm:px-6 pb-4",children:f.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-sm",children:[f.jsx("span",{className:"text-neutral-500 font-medium",children:"Active filters:"}),c!=="All"&&f.jsx("span",{className:"bg-primary/10 text-primary px-3 py-1 rounded-full font-semibold",children:c}),h!=="All"&&f.jsx("span",{className:"bg-accent/10 text-accent px-3 py-1 rounded-full font-semibold",children:h}),i&&f.jsxs("span",{className:"bg-blue-50 text-blue-600 px-3 py-1 rounded-full font-semibold",children:['"',i,'"']}),f.jsx("button",{onClick:()=>{p("All"),m("All"),o("")},className:"text-neutral-500 hover:text-neutral-700 underline font-medium ml-2",children:"Clear all"})]})})]}),!n&&f.jsxs(Ie.div,{initial:{opacity:0},animate:{opacity:1},className:"mb-6 text-neutral-600 font-medium",children:["Showing ",f.jsx("span",{className:"text-primary font-bold",children:T.length})," ",T.length===1?"post":"posts"]}),n?f.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[f.jsx(jn,{className:"animate-spin text-primary mb-4",size:48}),f.jsx("p",{className:"text-neutral-500 font-medium",children:"Loading amazing stories..."})]}):k.length>0?f.jsxs(f.Fragment,{children:[f.jsx(Ie.div,{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 lg:gap-8",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.1}}},children:k.map(S=>f.jsx(Ie.div,{variants:{hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},children:f.jsx(s3,{post:S})},S.id))}),f.jsx("div",{className:"mt-12",children:f.jsx(Tm,{currentPage:C,totalCount:T.length,pageSize:_,onPageChange:E})})]}):f.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center py-24 bg-white rounded-2xl border-2 border-dashed border-neutral-200 shadow-sm",children:[f.jsx("div",{className:"bg-neutral-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:f.jsx(Yi,{size:40,className:"text-neutral-400"})}),f.jsx("p",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"No Posts Found"}),f.jsx("p",{className:"text-neutral-500 mb-6 max-w-md mx-auto",children:"No articles match your current filters. Try adjusting your search or filters."}),f.jsx("button",{onClick:()=>{p("All"),m("All"),o("")},className:"bg-primary hover:bg-primary-dark text-white px-6 py-3 rounded-xl font-bold transition-all shadow-lg hover:shadow-xl",children:"Clear All Filters"})]})]})]})},r9=()=>{const{postId:t}=ab(),[e,n]=O.useState(null),[r,i]=O.useState(!0),[o,c]=O.useState(null);return O.useEffect(()=>{(async()=>{if(!t){c("No post ID provided."),i(!1);return}i(!0);try{const{error:h}=await _e.rpc("increment_read_count",{post_id_in:t});h&&console.error("Failed to increment read count:",h);const{data:m,error:y}=await _e.from("read_with_us").select("*").eq("id",t).single();if(y)throw y;n(m)}catch(h){c(h.message||"Post not found."),console.error(h)}finally{i(!1)}})()},[t]),r?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-neutral-50 to-white",children:f.jsxs("div",{className:"text-center",children:[f.jsx(xs,{className:"h-16 w-16 text-primary mx-auto mb-4"}),f.jsx("p",{className:"text-neutral-600 font-medium",children:"Loading story..."})]})}):o||!e?f.jsx("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-neutral-50 to-white text-center px-4",children:f.jsxs(Ie.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white p-8 rounded-2xl shadow-xl border-2 border-neutral-200",children:[f.jsx(Ts,{className:"text-red-500 mb-4 mx-auto",size:64}),f.jsx("h2",{className:"text-3xl font-bold text-neutral-800 mb-3",children:"Oops!"}),f.jsx("p",{className:"text-neutral-600 mb-6 max-w-md",children:o||"Could not load post details."}),f.jsxs(Gr,{to:"/read-with-us",className:"inline-flex items-center gap-2 bg-gradient-to-r from-primary to-primary-dark text-white px-8 py-3 rounded-xl font-bold hover:shadow-lg transition-all",children:[f.jsx(ca,{size:20})," Back to All Posts"]})]})}):f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-50",children:[f.jsx(dc,{}),f.jsxs("main",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsx(Ie.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},children:f.jsxs(Gr,{to:"/read-with-us",className:"inline-flex items-center gap-2 text-sm font-bold text-primary hover:text-primary-dark mb-8 group bg-white px-4 py-2 rounded-xl shadow-md hover:shadow-lg transition-all",children:[f.jsx(ca,{size:18,className:"transition-transform group-hover:-translate-x-1"})," Back to All Posts"]})}),f.jsxs(Ie.article,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-3xl shadow-2xl border-2 border-neutral-200 overflow-hidden",children:[f.jsxs("header",{className:"relative bg-gradient-to-br from-primary/5 via-white to-accent/5 p-8 sm:p-12 border-b-2 border-neutral-200",children:[f.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-48 h-48 bg-accent/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/2"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs(Ie.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{delay:.2},className:"inline-flex items-center gap-2 bg-gradient-to-r from-primary to-primary-dark text-white px-4 py-2 rounded-full text-sm font-bold mb-6 shadow-lg",children:[f.jsx(kp,{size:16}),f.jsx("span",{children:e.category})]}),f.jsx(Ie.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-neutral-900 leading-tight tracking-tight mb-8",children:e.title}),f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-2xl shadow-md border-2 border-neutral-200",children:[e.author_image_url?f.jsx("img",{src:e.author_image_url,alt:e.author,className:"w-14 h-14 rounded-full object-cover ring-4 ring-primary/20"}):f.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-primary to-primary-dark flex items-center justify-center ring-4 ring-primary/20",children:f.jsx(Hr,{size:28,className:"text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-neutral-500 font-semibold uppercase tracking-wider",children:"Author"}),f.jsx("p",{className:"text-lg font-bold text-neutral-900",children:e.author})]})]}),f.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-2xl shadow-md border-2 border-neutral-200",children:[f.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center",children:f.jsx(Ca,{size:28,className:"text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-neutral-500 font-semibold uppercase tracking-wider",children:"Published"}),f.jsx("p",{className:"text-lg font-bold text-neutral-900",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),f.jsxs("div",{className:"flex items-center gap-4 bg-white p-4 rounded-2xl shadow-md border-2 border-neutral-200",children:[f.jsx("div",{className:"w-14 h-14 rounded-full bg-gradient-to-br from-green-500 to-emerald-600 flex items-center justify-center",children:f.jsx(Np,{size:28,className:"text-white"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-neutral-500 font-semibold uppercase tracking-wider",children:"Language"}),f.jsx("p",{className:"text-lg font-bold text-neutral-900",children:e.language})]})]})]})]})]}),e.image_url&&f.jsxs(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.5},className:"relative aspect-video overflow-hidden",children:[f.jsx("img",{src:e.image_url,alt:e.title,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}),f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},className:"p-8 sm:p-12",children:[f.jsx("div",{className:"prose prose-lg max-w-none whitespace-pre-wrap selection:bg-primary/20 selection:text-primary-dark",children:f.jsx("div",{className:"text-neutral-800 leading-relaxed text-lg",children:e.content})}),f.jsxs("div",{className:"mt-12 pt-8 border-t-2 border-neutral-200 flex items-center justify-center gap-3",children:[f.jsx(Yi,{className:"text-primary",size:24}),f.jsx("p",{className:"text-neutral-600 font-medium",children:"Thank you for reading!"}),f.jsx(Ip,{className:"text-accent",size:24})]})]})]}),f.jsx(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"mt-8 text-center",children:f.jsxs(Gr,{to:"/read-with-us",className:"inline-flex items-center gap-2 bg-gradient-to-r from-primary to-primary-dark text-white px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transition-all hover:-translate-y-1",children:[f.jsx(Yi,{size:24}),"Explore More Stories"]})})]})]})},s9=["admin@muhimmath.com","darkmod261@gmail.com"],i9=()=>{var y,v;const t=ro(),e=no(),[n,r]=O.useState({email:"",password:""}),[i,o]=O.useState(!1),[c,p]=O.useState(null),h=((v=(y=e.state)==null?void 0:y.from)==null?void 0:v.pathname)||"/admin",m=async C=>{C.preventDefault(),o(!0),p(null);const{error:E}=await _e.auth.signInWithPassword({email:n.email,password:n.password});if(E)p("Invalid admin credentials. Please try again."),o(!1);else{const{data:{user:_}}=await _e.auth.getUser();_!=null&&_.email&&s9.includes(_.email)?t(h,{replace:!0}):(await _e.auth.signOut(),p("This account does not have admin privileges."),o(!1))}};return f.jsx("div",{className:"min-h-screen bg-neutral-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:f.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-xl shadow-lg border border-neutral-100",children:[f.jsxs("div",{children:[f.jsx("div",{className:"mx-auto h-16 w-16 bg-primary/10 rounded-full flex items-center justify-center",children:f.jsx(Q6,{className:"h-8 w-8 text-primary"})}),f.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-neutral-900",children:"Admin Access"}),f.jsx("p",{className:"mt-2 text-center text-sm text-neutral-600",children:"Please sign in to manage the library."})]}),f.jsxs("form",{className:"mt-8 space-y-6",onSubmit:m,children:[c&&f.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 px-4 py-3 rounded-lg text-sm font-medium text-center",role:"alert",children:c}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Email address"}),f.jsxs("div",{className:"relative",children:[f.jsx(L6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),f.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"pl-10 block w-full px-3 py-3 border border-neutral-300 rounded-lg placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm transition-shadow",placeholder:"admin@example.com",value:n.email,onChange:C=>r({...n,email:C.target.value})})]})]}),f.jsxs("div",{children:[f.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-700 mb-1",children:"Password"}),f.jsxs("div",{className:"relative",children:[f.jsx(j6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-neutral-400",size:20}),f.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"pl-10 block w-full px-3 py-3 border border-neutral-300 rounded-lg placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent sm:text-sm transition-shadow",placeholder:"",value:n.password,onChange:C=>r({...n,password:C.target.value})})]})]})]}),f.jsx("div",{children:f.jsx("button",{type:"submit",disabled:i,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-lg text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary disabled:opacity-70 disabled:cursor-not-allowed transition-all shadow-md hover:shadow-lg",children:i?f.jsx(jn,{className:"animate-spin"}):"Sign in"})})]}),f.jsx("div",{className:"text-center pt-4",children:f.jsxs(Gr,{to:"/",className:"font-medium text-primary hover:text-primary-dark flex items-center justify-center w-full gap-2 hover:underline",children:[f.jsx(ca,{size:16}),"Return to Home"]})})]})})},o9=()=>{const[t,e]=O.useState(""),[n,r]=O.useState(!1),[i,o]=O.useState(null),[c,p]=O.useState(null),[h,m]=O.useState([]),[y,v]=O.useState([]),C=async _=>{if(_.preventDefault(),!!t.trim()){r(!0),o(null),p(null),m([]),v([]);try{const T=t.trim();let{data:k}=await _e.from("members").select("*").eq("register_number",T).single();if(!k){const{data:S}=await _e.from("members").select("*").ilike("name",`%${T}%`);if(S&&S.length>0)if(S.length===1)k=S[0];else{v(S),r(!1);return}}if(!k){o("No member found with this Register Number or Name."),r(!1);return}E(k)}catch(T){o(T.message||"An unexpected error occurred."),r(!1)}}},E=async _=>{p(_),v([]),r(!0);try{const{data:T,error:k}=await _e.from("circulation").select("id, issue_date, due_date, return_date, status, fine_amount, fine_status, books(title, author)").eq("member_id",_.id).order("issue_date",{ascending:!1});if(k)throw k;const S=T.map(I=>({...I,books:Array.isArray(I.books)?I.books[0]:I.books}));m(S)}catch(T){o(T.message||"Error fetching history.")}finally{r(!1)}};return f.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-neutral-50 via-white to-neutral-100",children:[f.jsx(dc,{}),f.jsxs("main",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-br from-primary to-primary-dark rounded-3xl shadow-2xl p-8 sm:p-12 mb-8 relative overflow-hidden",children:[f.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -mr-32 -mt-32"}),f.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/10 rounded-full blur-3xl -ml-32 -mb-32"}),f.jsxs("div",{className:"relative z-10",children:[f.jsxs("div",{className:"text-center mb-8",children:[f.jsxs("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm rounded-full px-4 py-2 mb-4",children:[f.jsx(Ao,{className:"text-white",size:20}),f.jsx("span",{className:"text-white font-semibold text-sm",children:"Member Portal"})]}),f.jsx("h1",{className:"text-4xl sm:text-5xl font-extrabold text-white mb-3",children:"Check Your Status"}),f.jsx("p",{className:"text-lg text-white/90 max-w-2xl mx-auto",children:"Enter your Register Number or Name to view your complete borrowing history and status"})]}),f.jsx("form",{onSubmit:C,className:"max-w-2xl mx-auto",children:f.jsxs("div",{className:"relative",children:[f.jsx(N6,{className:"absolute left-5 top-1/2 transform -translate-y-1/2 text-white/60",size:24}),f.jsx("input",{type:"text",value:t,onChange:_=>e(_.target.value),placeholder:"Enter your Register Number (e.g., LIB-0001) or Name",className:"w-full pl-14 pr-32 py-5 bg-white/95 backdrop-blur-sm border-2 border-white/20 rounded-2xl focus:ring-4 focus:ring-white/30 focus:border-white shadow-xl text-lg font-medium placeholder:text-neutral-400 outline-none transition-all"}),f.jsxs("button",{type:"submit",disabled:n,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-white text-primary px-6 py-3 rounded-xl font-bold hover:bg-neutral-100 transition-all disabled:opacity-50 shadow-lg flex items-center gap-2",children:[n?f.jsx(jn,{className:"animate-spin",size:20}):f.jsx(zr,{size:20}),f.jsx("span",{className:"hidden sm:inline",children:"Search"})]})]})})]})]}),i&&f.jsxs(Ie.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"bg-gradient-to-r from-red-50 to-red-100 border-2 border-red-200 text-red-800 px-6 py-4 rounded-2xl flex items-center gap-4 shadow-lg mb-6",children:[f.jsx("div",{className:"bg-red-500 p-2 rounded-full",children:f.jsx(Ts,{size:24,className:"text-white"})}),f.jsx("span",{className:"font-semibold",children:i})]}),y.length>0&&f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl border-2 border-neutral-200 overflow-hidden mb-6",children:[f.jsxs("div",{className:"p-6 bg-gradient-to-r from-primary/10 to-primary/5 border-b-2 border-neutral-200",children:[f.jsxs("h3",{className:"font-bold text-xl text-neutral-800 flex items-center gap-2",children:[f.jsx(Hr,{className:"text-primary",size:24}),"Select Member"]}),f.jsx("p",{className:"text-sm text-neutral-600 mt-1",children:"Multiple members found matching your search"})]}),f.jsx("ul",{className:"divide-y divide-neutral-200",children:y.map(_=>f.jsx("li",{className:"hover:bg-neutral-50 transition-colors",children:f.jsxs("button",{onClick:()=>E(_),className:"w-full text-left p-6 flex justify-between items-center group",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"bg-primary/10 p-3 rounded-xl group-hover:bg-primary/20 transition-colors",children:f.jsx(Hr,{className:"text-primary",size:24})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-lg text-neutral-900",children:_.name}),f.jsxs("p",{className:"text-sm text-neutral-600 flex items-center gap-2",children:[f.jsx("span",{className:"bg-neutral-100 px-2 py-1 rounded-md font-medium",children:_.class||"N/A"}),f.jsx("span",{children:""}),f.jsx("span",{className:"font-mono",children:_.register_number})]})]})]}),f.jsx("div",{className:"text-primary font-bold text-sm group-hover:translate-x-1 transition-transform",children:"View Status "})]})},_.id))})]}),c&&(()=>{const _=h.filter(M=>M.fine_amount>0&&M.fine_status==="unpaid"),T=h.filter(M=>M.fine_amount>0&&M.fine_status==="paid"),k=_.reduce((M,F)=>M+F.fine_amount,0),S=T.reduce((M,F)=>M+F.fine_amount,0),I=h.filter(M=>M.status==="issued").length,N=h.length;return f.jsxs(Ie.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[f.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-neutral-200 overflow-hidden",children:[f.jsx("div",{className:"p-6 bg-gradient-to-r from-primary/10 to-primary/5 border-b-2 border-neutral-200",children:f.jsxs("h2",{className:"text-2xl font-bold text-neutral-800 flex items-center gap-3",children:[f.jsx("div",{className:"bg-primary p-2 rounded-xl",children:f.jsx(Hr,{className:"text-white",size:24})}),"Member Details"]})}),f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-xl border-2 border-blue-200",children:[f.jsx("p",{className:"text-xs font-semibold text-blue-600 uppercase tracking-wider mb-1",children:"Name"}),f.jsx("p",{className:"text-xl font-bold text-blue-900",children:c.name})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-xl border-2 border-purple-200",children:[f.jsx("p",{className:"text-xs font-semibold text-purple-600 uppercase tracking-wider mb-1",children:"Register No"}),f.jsx("p",{className:"text-xl font-bold text-purple-900 font-mono",children:c.register_number})]}),f.jsxs("div",{className:"bg-gradient-to-br from-amber-50 to-amber-100 p-4 rounded-xl border-2 border-amber-200",children:[f.jsx("p",{className:"text-xs font-semibold text-amber-600 uppercase tracking-wider mb-1",children:"Class"}),f.jsx("p",{className:"text-xl font-bold text-amber-900",children:c.class||"N/A"})]}),f.jsxs("div",{className:`bg-gradient-to-br p-4 rounded-xl border-2 ${c.status==="active"?"from-green-50 to-green-100 border-green-200":"from-red-50 to-red-100 border-red-200"}`,children:[f.jsx("p",{className:`text-xs font-semibold uppercase tracking-wider mb-1 ${c.status==="active"?"text-green-600":"text-red-600"}`,children:"Status"}),f.jsx("p",{className:`text-xl font-bold ${c.status==="active"?"text-green-900":"text-red-900"}`,children:c.status.toUpperCase()})]})]})})]}),f.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[f.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx(Kt,{size:32,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Currently Borrowed"}),f.jsx("p",{className:"text-4xl font-extrabold",children:I})]}),f.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx(Dx,{size:32,className:"opacity-80"}),f.jsx(Fi,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Total Borrowed"}),f.jsx("p",{className:"text-4xl font-extrabold",children:N})]}),k>0&&f.jsxs("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-2xl p-6 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx(u6,{size:32,className:"opacity-80"}),f.jsx("span",{className:"text-xs font-bold bg-white/20 px-2 py-1 rounded-full",children:"UNPAID"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Pending Penalties"}),f.jsxs("p",{className:"text-4xl font-extrabold",children:["",k.toFixed(2)]}),f.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[_.length," fine",_.length!==1?"s":""]})]}),S>0&&f.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 shadow-xl text-white",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsx(Hd,{size:32,className:"opacity-80"}),f.jsx(U0,{size:20,className:"opacity-60"})]}),f.jsx("p",{className:"text-sm font-semibold opacity-90 mb-1",children:"Paid Penalties"}),f.jsxs("p",{className:"text-4xl font-extrabold",children:["",S.toFixed(2)]}),f.jsxs("p",{className:"text-xs opacity-75 mt-1",children:[T.length," fine",T.length!==1?"s":""]})]})]}),f.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border-2 border-neutral-200 overflow-hidden",children:[f.jsx("div",{className:"p-6 bg-gradient-to-r from-primary/10 to-primary/5 border-b-2 border-neutral-200",children:f.jsxs("h2",{className:"text-2xl font-bold text-neutral-800 flex items-center gap-3",children:[f.jsx("div",{className:"bg-primary p-2 rounded-xl",children:f.jsx(Dx,{className:"text-white",size:24})}),"Borrowing History",f.jsxs("span",{className:"ml-auto bg-primary text-white px-4 py-1 rounded-full text-sm font-bold",children:[h.length," ",h.length===1?"Record":"Records"]})]})}),f.jsx("div",{className:"p-6",children:h.length>0?f.jsx("div",{className:"overflow-x-auto -mx-6 px-6",children:f.jsxs("table",{className:"min-w-full",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b-2 border-neutral-200",children:[f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Book"}),f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Issue Date"}),f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Due Date"}),f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Return Date"}),f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Status"}),f.jsx("th",{className:"px-4 py-4 text-left text-xs font-bold text-neutral-600 uppercase tracking-wider",children:"Penalty"})]})}),f.jsx("tbody",{className:"divide-y divide-neutral-200",children:h.map(M=>{var B,z;const F=M.status==="issued"&&new Date(M.due_date)<new Date,V=M.fine_amount>0;return f.jsxs("tr",{className:"hover:bg-neutral-50 transition-colors",children:[f.jsxs("td",{className:"px-4 py-4",children:[f.jsx("div",{className:"font-bold text-neutral-900",children:(B=M.books)==null?void 0:B.title}),f.jsx("div",{className:"text-xs text-neutral-500",children:(z=M.books)==null?void 0:z.author})]}),f.jsx("td",{className:"px-4 py-4 text-sm text-neutral-600 font-medium",children:new Date(M.issue_date).toLocaleDateString()}),f.jsx("td",{className:"px-4 py-4 text-sm text-neutral-600 font-medium",children:new Date(M.due_date).toLocaleDateString()}),f.jsx("td",{className:"px-4 py-4 text-sm text-neutral-600 font-medium",children:M.return_date?new Date(M.return_date).toLocaleDateString():"-"}),f.jsx("td",{className:"px-4 py-4",children:M.status==="returned"?f.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold bg-green-100 text-green-800 border-2 border-green-200",children:[f.jsx(U0,{size:14})," Returned"]}):F?f.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold bg-red-100 text-red-800 border-2 border-red-200 animate-pulse",children:[f.jsx(xC,{size:14})," Overdue"]}):f.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold bg-blue-100 text-blue-800 border-2 border-blue-200",children:[f.jsx(Kt,{size:14})," Issued"]})}),f.jsx("td",{className:"px-4 py-4",children:V?f.jsxs("div",{className:"flex flex-col",children:[f.jsxs("span",{className:"font-bold text-red-600 text-lg",children:["",M.fine_amount]}),f.jsx("span",{className:`text-[10px] font-bold uppercase ${M.fine_status==="paid"?"text-green-600":"text-red-600"}`,children:M.fine_status})]}):f.jsx("span",{className:"text-neutral-400 font-medium",children:"-"})})]},M.id)})})]})}):f.jsxs("div",{className:"text-center py-16 bg-neutral-50 rounded-xl border-2 border-dashed border-neutral-200",children:[f.jsx("div",{className:"bg-neutral-200 p-4 rounded-full w-20 h-20 mx-auto mb-4 flex items-center justify-center",children:f.jsx(Kt,{className:"text-neutral-400",size:40})}),f.jsx("p",{className:"text-lg font-bold text-neutral-600 mb-1",children:"No borrowing history found"}),f.jsx("p",{className:"text-sm text-neutral-500",children:"You haven't borrowed any books yet"})]})})]})]})})()]})]})},i3=["admin@muhimmath.com","darkmod261@gmail.com"],a9=({session:t,children:e})=>{var i;const n=no(),r=((i=t==null?void 0:t.user)==null?void 0:i.email)&&i3.includes(t.user.email);return!t||!r?f.jsx(_0,{to:"/admin-login",state:{from:n},replace:!0}):e};function l9(){const[t,e]=O.useState(null),[n,r]=O.useState(!0);return O.useEffect(()=>{_e.auth.getSession().then(({data:{session:o}})=>{e(o),r(!1)});const{data:{subscription:i}}=_e.auth.onAuthStateChange((o,c)=>{e(c)});return()=>i.unsubscribe()},[]),n?f.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:f.jsxs("div",{className:"flex flex-col items-center gap-4",children:[f.jsx(xs,{}),f.jsx("p",{className:"text-gray-500",children:"Loading Application..."})]})}):f.jsxs(Y4,{children:[f.jsx(ns,{path:"/",element:f.jsx(Q7,{})}),f.jsx(ns,{path:"/home",element:f.jsx(Y7,{})}),f.jsx(ns,{path:"/book/:bookId",element:f.jsx(J7,{})}),f.jsx(ns,{path:"/read-with-us",element:f.jsx(n9,{})}),f.jsx(ns,{path:"/read-with-us/:postId",element:f.jsx(r9,{})}),f.jsx(ns,{path:"/member-status",element:f.jsx(o9,{})}),f.jsx(ns,{path:"/admin-login",element:t&&t.user.email&&i3.includes(t.user.email)?f.jsx(_0,{to:"/admin"}):f.jsx(i9,{})}),f.jsx(ns,{path:"/admin",element:f.jsx(a9,{session:t,children:f.jsx(U7,{})})}),f.jsx(ns,{path:"*",element:f.jsx(_0,{to:"/"})})]})}tb(document.getElementById("root")).render(f.jsx(O.StrictMode,{children:f.jsx(rN,{children:f.jsx(XD,{children:f.jsx(l9,{})})})}));export{Yi as B,u6 as C,Hd as D,H0 as F,jn as L,ml as P,zr as S,nd as T,Vi as U,Pn as X,td as a,Tm as b,be as c,gl as d,Hr as e,vC as f,Ts as g,v6 as h,HS as i,f as j,Ca as k,Ga as l,O as r,_e as s,dh as u};
